(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(i){if(i.ep)return;i.ep=!0;const s=a(i);fetch(i.href,s)}})();const ee=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio)},u=r=>{n.clearRect(0,0,innerWidth,innerHeight),r()};return a(),document.body.appendChild(t),{ctx:n,render:u,resize:a,rotate:(r,g,d,h)=>{n.save(),n.translate(g,d),n.rotate(Math.PI*h),n.translate(-g,-d),r(),n.restore()},translate:(r,g,d)=>{n.save(),n.translate(g,d),r(),n.restore()},shade:(r,g)=>{r=r.substring(1);const d=parseInt(r,16),h=Math.round(2.55*g),l=(d>>16)+h,f=(d>>8&255)+h,m=(d&255)+h;return"#"+(16777216+(l<255?l<1?0:l:255)*65536+(f<255?f<1?0:f:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},setBackground:(r,g)=>{var d;document.body.style.background=r,document.body.style.backgroundColor=g||r,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",g||r)},createImg:(r,g,d=g)=>{const h=document.createElement("canvas"),l=h.getContext("2d");if(!l)throw new Error("CanvasRenderingContext2D is null");return h.width=g*devicePixelRatio,h.height=d*devicePixelRatio,l.scale(devicePixelRatio,devicePixelRatio),r(l),h}}},te=t=>{let n="",a="",u;const i=e=>t.find(c=>c.name===e)||t[0],o={render:()=>{},navigate:(e,c)=>{const r=i(e);a=n||"",n=(r==null?void 0:r.name)||"",u=c,o.render=(r==null?void 0:r.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:u})};return o},ne=()=>{const t=requestAnimationFrame||(o=>setTimeout(o,16.666666666666668)),n=[],a={};return{loop:(o,e)=>{if(Object.entries(a).find(([r,g])=>g===o)||e&&a[e])throw new Error(`Loop${e?" "+e:""} already specified`);e&&n.push(e),e=e||new Date().valueOf().toString(),a[e]=o;const c=()=>{o(),a[e]&&t(c)};c()},stop:o=>{if(typeof o=="string")delete a[o];else{const e=Object.entries(a).find(([c,r])=>r===o);e&&delete a[e[0]]}},stopAll:()=>{for(const o in a)n.indexOf(o)===-1&&delete a[o]}}};let H=[];const oe=()=>{for(const t of H)clearTimeout(t);H=[]},re=(t,n=400)=>{let a=new Date,u=n,i=setTimeout(t,u);return H.push(i),{pause:()=>{clearTimeout(i),u-=new Date-a},resume:()=>{a=new Date,clearTimeout(i),i=setTimeout(t,u),H.push(i)},stop:()=>{clearTimeout(i)}}},j=2147483646,$=2147483647,se=16807,ce=(t=Math.floor(Math.random()*$))=>{t=t%$,t<=0&&(t+=j);const n=()=>(t=t*se%$,t),a=()=>(n()-1)/j;return(i,s)=>(s===void 0&&(s=i,i=0),Math.floor(a()*(s-i+1))+i)},ie=(t,n)=>(n===void 0&&(n=t,t=0),Math.floor(Math.random()*(n-t+1))+t),ae=()=>{const t=[],n=[];return{addEventResize:e=>{e(),t.push(e)},onResizeEvents:()=>t.forEach(e=>e()),addEventClick:e=>{n.push(e)},onClickEvents:(e,c)=>n.forEach(r=>r(e,c)),removeAllEvents:()=>{t.splice(0),n.splice(0)}}},T=(t,n)=>{const a=Math.pow(Math.abs(t.x-n.x),2),u=Math.pow(Math.abs(t.y-n.y),2),i=t.r||0,s=n.r||0,o=Math.pow(i+s,2);return a+u<=o},de=(t,n)=>{const a=t.r||0,u=n.w||0,i=n.h||0;return Math.abs(n.x+u/2-t.x)<=u/2+a&&Math.abs(n.y+i/2-t.y)<=i/2+a},le=(t,n)=>T(t,n),ue=t=>{const n={},a=i=>{const s=i.split("/");return s[s.length-1].split(".")[0]};return(()=>{for(const i of t){const s=new Audio(i);s.volume=.25,s.addEventListener("ended",function(){this.currentTime=0});const o=a(i);n[o]={audio:s,path:i}}})(),i=>{var c,r;const s=(c=n[i])==null?void 0:c.audio,o=(r=n[i])==null?void 0:r.path;if(!(!s||!o))if(s.currentTime===0)s.play();else{var e=new Audio(o);e.volume=.25,e.play()}}};let O;const he=(t,n)=>{if(O)throw new Error("Webcore already specified");const a=ee(),u=te(t),{loop:i,stop:s,stopAll:o}=ne(),{addEventResize:e,onResizeEvents:c,addEventClick:r,onClickEvents:g,removeAllEvents:d}=ae();let h=innerWidth/2,l=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const p=()=>({cx:h,cy:l,s:f,m}),M=ue([]);O={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:p,useScreenMeta:u.useScreenMeta,navigate:(v,y)=>{if(!t.some(E=>E.name===v))throw new Error(`Screen ${v} not specified`);o(),oe(),d(),new Promise(()=>u.navigate(v,y))},loop:i,loopStop:s,useTimer:re,rand:ie,useRandChain:ce,intersect:le,addEventResize:e,addEventClick:r,playAudio:M},i(()=>a.render(u.render),"draw"),window.onresize=()=>{h=innerWidth/2,l=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),c()},document.onpointerdown=v=>{g(v.clientX,v.clientY)},u.navigate()},P=()=>{if(!O)throw new Error("Webcore not specified");return{...O}},B={},x=t=>{const{shade:n,ctx:a,createImg:u}=P(),i=()=>{const{r:o,c:e="#ffffff",p:c}=t,r=a.createRadialGradient(o,o,o,o,o,o/5);return r.addColorStop(0,n(e,0)),r.addColorStop(.01,n(e,0)),r.addColorStop(.075,n(e,9)),r.addColorStop(.15,n(e,0)),r.addColorStop(.15,n(e,-15)),r.addColorStop(.18,n(e,-5)),r.addColorStop(.22,n(e,-15)),c?(r.addColorStop(.24,n(e,-10)),r.addColorStop(.3,n(e,-8)),r.addColorStop(.34,n(e,-12)),r.addColorStop(.6,n(e,-6)),r.addColorStop(1,n(e,-4))):(r.addColorStop(.24,n(e,-12)),r.addColorStop(.26,n(e,-8)),r.addColorStop(.3,n(e,-2)),r.addColorStop(.34,n(e,0)),r.addColorStop(.5,n(e,5)),r.addColorStop(1,n(e,10))),r},s=()=>{const{r:o,c:e="#ffffff",p:c}=t,r=`${e}_${c?"push":"pop"}_${o}`;if(B[r])return B[r];const g=u((d=a)=>{const h=i();d.fillStyle=h,d.beginPath(),d.arc(o,o,o,0,2*Math.PI),d.closePath(),d.fill()},2*o);return B[r]=g,g};return(o=a)=>{const{x:e,y:c,r}=t,g=s();o.drawImage(g,e-r,c-r,2*r,2*r)}},F={},k=t=>{const{ctx:n}=P();let a;return F[t.src]?a=F[t.src]:(a=new Image,a.src=t.src,F[t.src]=a),(u=n)=>{const{w:i,h:s=i,x:o=0,y:e=0}=t;a.complete&&u.drawImage(a,o,e,i,s)}},q=t=>{const{font:n,ctx:a}=P(),u=t.text,i=t.text.length,s=2*Math.PI/i/4;return(o=a)=>{const{x:e,y:c,r,s:g=0,fs:d}=t,h=d||Math.round(r/4);o.textAlign="center",o.fillStyle="#f9f9f9",o.font=`${h}px ${n}`,o.save(),o.translate(e,c),o.rotate(g);for(let l=0;l<i;l++)o.save(),o.rotate(l*s),o.fillText(u[l],0,-r),o.restore();o.restore()}},fe=()=>{var v,y;const{ctx:t,loop:n,rotate:a,navigate:u,useMeasure:i,addEventClick:s,addEventResize:o,setBackground:e}=P();e("#040404");let c=!1,r,g,d,h,l,f=-.2,m=0;o(()=>{const{cx:E,cy:w,s:b}=i(),S=Math.round(b*.25);r={c:"#ff6347",x:E,y:w,r:S,p:!1},g=x(r),d=k({x:E-S+Math.round(S*.35),y:w-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=q({text:"nezabotin",x:E,y:w,r:Math.round(S*1.1),s:Math.PI*1.6}),l=q({text:"production",x:E,y:w,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{f+=.01,m=f>=1?1:f,f>=1.8&&(r.p=!0),f>=2.2&&(r.c="#f86a9a"),f>=2.6&&u("main")};s(()=>{[1.4,1.8,2.2,2.6].some(E=>{if(f<E)return f=E,!0})});const M=()=>{n(p),c=!0};return(v=document==null?void 0:document.fonts)!=null&&v.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(M):M(),()=>{const{cx:E,cy:w}=i();t.globalAlpha=c?1:0,g(),f<1.8&&d(),f<1.4&&a(()=>{h(),l()},E,w,m),t.globalAlpha=1}},pe=()=>{const{addEventResize:t,useMeasure:n,useTimer:a,useScreenMeta:u,navigate:i,addEventClick:s,intersect:o}=P(),{from:e}=u();let c,r,g;return t(()=>{const{cx:l,cy:f,s:m,m:p}=n(),M=Math.round(m*.25);c={c:"#ba68c8",r:Math.round(m*.08),x:l-M-1*p,y:f-M+1*p,p:(e==="score"||e==="opening")&&!c},r=x(c),g=k({x:Number(c.x)-c.r+Math.round(c.r*.5),y:Number(c.y)-c.r+Math.round(c.r*.5),w:c.r*2-Math.round(c.r*1),src:"/media/star.svg"})}),a(()=>{c.p=!1}),s((l,f)=>{o({x:l,y:f},c)&&(c.p=!0,a(()=>{i("score")},100))}),{render:()=>{r(),c.p||g()},point:()=>({x:c.x,y:c.y,r:c.r})}},ge=()=>{const{addEventResize:t,useMeasure:n,useTimer:a,useScreenMeta:u,navigate:i,addEventClick:s,intersect:o}=P(),{from:e}=u();let c,r,g;return t(()=>{const{s:l}=n(),f=Math.round(l*.08);c={c:"#ff6347",r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:e==="main"&&!c},r=x(c),g=k({x:Number(c.x)-f+Math.round(f*.4),y:Number(c.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),a(()=>{c.p=!1}),s((l,f)=>{o({x:l,y:f},c)&&(c.p=!0,a(()=>{i("main")},100))}),{render:()=>{r(),c.p||g()},point:()=>({x:c.x,y:c.y,r:c.r})}},me=t=>{const{addEventResize:n,useMeasure:a,useTimer:u,addEventClick:i,intersect:s,rotate:o}=P();let e,c,r;return n(()=>{const{s:h}=a(),l=Math.round(h*.055);e={c:"#ff6347",r:l,x:Math.round(innerWidth-1.6*l),y:Math.round(innerHeight-1.6*l),p:!1},c=x(e),r=k({x:Number(e.x)-l+Math.round(l*.4),y:Number(e.y)-l+Math.round(l*.4),w:l*2-Math.round(l*.8),src:"/media/back.svg"})}),i((h,l)=>{s({x:h,y:l},e)&&(e.p=!0,t(),u(()=>{e.p=!1},100))}),{render:()=>{c(),e.p||o(()=>{r()},e.x,e.y,-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Me=t=>{const{addEventResize:n,useMeasure:a,useTimer:u,addEventClick:i,intersect:s,rotate:o}=P();let e,c,r;return n(()=>{const{s:h}=a(),l=Math.round(h*.055);e={c:"#ff6347",r:l,x:Math.round(innerWidth-1.6*l),y:Math.round(innerHeight-1.6*l-2*l-.3*l),p:!1},c=x(e),r=k({x:Number(e.x)-l+Math.round(l*.4),y:Number(e.y)-l+Math.round(l*.4),w:l*2-Math.round(l*.8),src:"/media/back.svg"})}),i((h,l)=>{s({x:h,y:l},e)&&(e.p=!0,t(),u(()=>{e.p=!1},100))}),{render:()=>{c(),e.p||o(()=>{r()},e.x,e.y,.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},ve=t=>{const{ctx:n,shade:a}=P(),u=Math.round(t.r/2.2),i=Math.round(.15*t.r),s=a(t.c||"blue",-3);return(o=n)=>{const{r:e,x:c=e,y:r=e}=t;o.lineCap="round",o.fillStyle=s,o.strokeStyle=s,o.lineWidth=u,o.beginPath(),o.moveTo(c+i,r),o.lineTo(c-i/2,r-i),o.lineTo(c-i/2,r+i),o.closePath(),o.fill(),o.beginPath(),o.moveTo(c+i,r),o.lineTo(c-i/2,r-i),o.moveTo(c-i/2,r-i),o.lineTo(c-i/2,r+i),o.moveTo(c-i/2,r+i),o.lineTo(c+i,r),o.stroke()}},ye=()=>{const{addEventResize:t,useMeasure:n,useTimer:a,useScreenMeta:u,navigate:i,addEventClick:s,intersect:o}=P(),{from:e}=u();let c,r,g;return t(()=>{const{cx:l,cy:f,s:m,m:p}=n(),M=Math.round(m*.25);c={c:"#bef181",r:Math.round(m*.1),x:l+M+2*p,y:f+M,p:(e==="game"||e==="opening")&&!c},r=x(c),g=ve(c)}),a(()=>{c.p=!1}),s((l,f)=>{o({x:l,y:f},c)&&(c.p=!0,a(()=>{i("game")},100))}),{render:()=>{r(),c.p||g()},point:()=>({x:c.x,y:c.y,r:c.r})}},X=t=>{const{font:n,ctx:a}=P();return(u=a)=>{const{text:i,x:s,c:o,y:e,fs:c,a:r="center",mw:g}=t;u.textAlign=r,u.fillStyle=o,u.font=`${c}px ${n}`,u.fillText(i,s,e,g)}},Ee=()=>{const{addEventResize:t,useMeasure:n,useTimer:a,useScreenMeta:u}=P(),{from:i}=u();let s,o,e,c;return t(()=>{const{cx:d,cy:h,s:l}=n(),f=Math.round(l*.25);s={c:"#f86a9a",x:d,y:h,r:f,p:i==="opening"&&!s},o=x(s),e=X({text:"Yola",c:"#f1f1f1",x:d,y:h-f+Math.round(f*.9),fs:Math.round(f/2.6),mw:f*2}),c=X({text:"PopiT",c:"#ffeb3b",x:d,y:h-f+Math.round(f*1.3),fs:Math.round(f/2.3),mw:f*2})}),a(()=>s.p=!1),{render:()=>{o(),s.p||(e(),c())},point:()=>({x:s.x,y:s.y,r:s.r})}},K=({color:t="#00dcfe",frequency:n=25})=>{const{addEventResize:a,useRandChain:u,useMeasure:i,rand:s,useTimer:o,setBackground:e,useScreenMeta:c}=P(),{from:r}=c();e(t);const g=s(0,999);let d=[],h=[];a(()=>{const p=u(g),{s:M}=i();d=[];const v=Math.round(M*.05),y=Math.round(innerWidth/v/2)-1,E=Math.round((innerWidth-2*v*y)/(y+1)),w=Math.round(innerHeight/v/2)-1,b=Math.round((innerHeight-2*v*w)/(w+1));for(let S=0;S<w;S++)for(let C=0;C<y;C++)p(p(n))<1&&d.push({x:E+v+C*v*2+E*C,y:b+v+S*v*2+b*S,r:v,c:t,p:r==="opening"?!0:p(1)>0});h=d.map(S=>x(S))});const l=()=>{o(()=>{const p=s(d.length-1);d[p]&&(d[p].p=!d[p].p),l()},750)};return r==="opening"?o(()=>{d.forEach(p=>p.p=s(1)>0),l()}):l(),{render:()=>{h.forEach(p=>p())},setIntersections:p=>{d=d.filter(({x:M,y:v,r:y})=>p(M,v,y)),h=d.map(M=>x(M))}}},U=(t=!1)=>{const n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"],{addEventResize:a,useMeasure:u,setBackground:i}=P();return t||a(()=>{const{s:o}=u(),e=Math.round(o*.14),c=Math.round(innerWidth/e/2)-1,r=(innerWidth-2*e*c)/(c+1),g=Math.round(innerHeight/e/2)-1,d=(innerHeight-2*e*g)/(g+1),h=innerWidth>=innerHeight,l=h?c:g,f=h?r:d,m=h?innerWidth:innerHeight;let p=0;const M=[];for(let y=0;y<l;y++)n[p]||(p=0),M.push(`${n[p]} ${(f+e+y*e*2+f*y)/m*100}%`),p++;i(`linear-gradient(${h?"to right":"to bottom"}, ${M.join(", ")})`,n[0])}),n},Pe=t=>{const{ctx:n,shade:a}=P(),u=Math.round(t.r/4),i=Math.round(.12*t.r);return(s=n)=>{const{r:o,x:e=o,y:c=o}=t,r=a(t.c||"blue",-3);s.lineCap="round",s.strokeStyle=r,s.lineWidth=u,s.beginPath(),s.moveTo(e-1.5*i,c-2*i),s.lineTo(e-1.5*i,c+2*i),s.stroke(),s.beginPath(),s.moveTo(e+1.5*i,c-2*i),s.lineTo(e+1.5*i,c+2*i),s.stroke()}},J=({palette:t,retry:n})=>{const{addEventResize:a,useMeasure:u,rand:i,useTimer:s,useScreenMeta:o,navigate:e,addEventClick:c,intersect:r}=P(),{from:g}=o(),d=[];let h=[],l,f,m,p;const M=y=>Array.isArray(t)?t[y]:t;return a(()=>{const{s:y}=u();d.splice(0);const E=Math.round(y*.14),w=Math.round(innerWidth/E/2)-1,b=(innerWidth-2*E*w)/(w+1),S=Math.round(innerHeight/E/2)-1,C=(innerHeight-2*E*S)/(S+1),D=innerWidth>=innerHeight;let W=0;for(let I=0;I<S;I++){for(let z=0;z<w;z++){M(W)||(W=0);const G={x:b+E+z*E*2+b*z,y:C+E+I*E*2+C*I,r:E,c:M(W),p:!0};I===0&&z===w-1?(p={...G,p:(g==="main"||g==="gameover"||g==="gamescore")&&!p},l=x(p),f=Pe(p)):d.push(G),W+=D?1:0}W=D?0:W+1}n&&(m=d[i(d.length-1)],s(()=>{m.p=!1})),h=d.map(I=>x(I))}),s(()=>{p.p=!1}),n&&c((y,E)=>{r({x:y,y:E},m)&&(m.p=!0,s(()=>{e("game")},100))}),c((y,E)=>{r({x:y,y:E},p)&&(p.p=!0,s(()=>{e("main")},100))}),{render:()=>{h.forEach(y=>y()),l(),p!=null&&p.p||f()},popits:d}},R=100,L=2,A="#222",Se=t=>{const n=(t==null?void 0:t[0])||0,a=(t==null?void 0:t[1])||0,u=(t==null?void 0:t[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},N={},we=t=>{const{ctx:n,shade:a,createImg:u,useRandChain:i}=P();let s;N[t.imgSrc]?s=N[t.imgSrc]:(s=N[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},s.img.src=t.imgSrc);const o=(g,d=n)=>{const{x:h,y:l,c:f,r:m,p}=g;p?(d.fillStyle=a(f,5),d.beginPath(),d.arc(h+m,l+m,m,0,Math.PI*2),d.closePath(),d.fill()):(d.fillStyle=f,d.beginPath(),d.arc(h+m,l+m,m+2,0,Math.PI*2),d.closePath(),d.fill())},e=()=>{const g=[],d=(t.r*2-2*L)/R;for(let m=0;m<R;m++)for(let p=0;p<R;p++){const M={x:L+p*d,y:L+m*d,r:d/2,c:A};g.push(M)}let h=t.score;const l=[...g],f=i(0);for(let m=h;m>0;m--){const p=f(l.length-1),M=l[p],v=g.indexOf(M);M.c=s.cols[v],l.splice(p,1)}return g},c=()=>{const g=e();s.drawImg=u((d=n)=>{g.filter(h=>h.c===A).forEach(h=>o(h,d)),g.filter(h=>h.c!==A).forEach(h=>o(h,d)),g.filter(h=>h.c!==A).forEach(h=>o({...h,p:!0},d))},2*t.r)},r=async()=>{var h;const g=document.createElement("canvas");g.width=R,g.height=R;const d=g.getContext("2d",{willReadFrequently:!0});d==null||d.drawImage(s.img,0,0);for(let l=0;l<R;l++){const f=[];for(let m=0;m<R;m++){const p=(h=d==null?void 0:d.getImageData(m,l,1,1))==null?void 0:h.data;f.push(Se(p))}s.cols.push(...f)}s.isFilled=!0,c()};return s.isFilled?(s.r!==t.r||s.score!==t.score)&&c():s.img.onload=r,(g=n)=>{const{x:d,y:h,r:l}=t;s.drawImg&&g.drawImage(s.drawImg,d-l,h-l,2*l,2*l)}},V="ylp",Y="score",Q=()=>{const t=s=>localStorage.getItem(`${V}_${s}`),n=(s,o)=>localStorage.setItem(`${V}_${s}`,o.toString()),a=()=>+(t(Y)||0),u=s=>n(Y,s);return{getScore:a,setScore:u,addScore:s=>{const o=a();u(o+s)}}},_=1e4,Z=()=>{const{addEventResize:t,useMeasure:n,translate:a}=P(),{getScore:u}=Q(),i=["/media/cat.png"],s=u();let o,e=0,c=0,r=Math.floor(s/_);return t(()=>{const{cx:f,cy:m,s:p}=n();o=[],e=(p-2*p*.055*1.6)/2,c=p*.05;for(let M=0;M<i.length;M++){const v=i[M];o.push(we({x:f,y:m+M*e*2+M*c,r:e,score:s-M*_<0?0:s-M*_,imgSrc:v}))}}),{up:()=>{r=r+1<i.length?r+1:i.length-1},down:()=>{r=r-1<0?0:r-1},render:()=>{a(()=>{o==null||o.forEach(f=>f())},0,-(r*e*2+r*c))},rect:()=>{const{cx:f,cy:m}=n(),p=innerWidth>innerHeight;return{x:p?f-e:0,y:p?0:m-e,w:p?2*e:innerWidth,h:p?innerHeight:2*e}}}},xe=t=>{const{useTimer:n,rand:a,addEventClick:u,intersect:i,navigate:s}=P(),{addScore:o}=Q();let e=[],c,r,g=!1,d=0,h=0;const l=()=>{r=n(()=>{if(t.length===e.length){g=!0,r.stop(),n(()=>{s("gameover")});return}const p=t.filter(y=>e.indexOf(y)===-1),M=a(p.length-1),v=p[M];v&&(v.p=!1,e.push(p[M])),l()})},f=p=>{e=[];const M=t.length;let v=a(Math.round(M*.3),Math.round(M*.6));const y=[...t];if(p){const E=y.indexOf(p);y.splice(E,1)}for(let E=v;E>0;E--){const w=a(y.length-1),b=y[w];b.p=!1,e.push(b),y.splice(w,1)}c==null||c.stop(),r==null||r.stop(),c=n(l,e.length*350),d=d>0?d:a(3,5)},m=p=>{h++,p.p=!0;const M=e.indexOf(p);e.splice(M,1),e.length<=0&&(d--,d>0?f(p):(o(h),s("gamescore")))};u((p,M)=>{if(!g)for(const v of e)i({x:p,y:M},v)&&m(v)}),n(()=>{f()})},be=()=>{const{addEventResize:t}=P(),{render:n,setIntersections:a}=K({}),{render:u,point:i}=Ee(),{render:s,point:o}=ye(),{render:e,point:c}=pe();return t(()=>{const r=c(),g=i(),d=o();a((h,l,f)=>!T({x:h,y:l,r:f},r)&&!T({x:h,y:l,r:f},g)&&!T({x:h,y:l,r:f},d))}),()=>{n(),u(),s(),e()}},Ce=()=>{const t=U(),{popits:n,render:a}=J({palette:t});return xe(n),()=>{a()}},Ie=()=>{const t="#ff6347",{setBackground:n}=P(),{render:a}=J({palette:t,retry:!0});return n(t),()=>{a()}},Re=()=>{const{addEventClick:t,navigate:n}=P();U();const{render:a}=Z();return t(()=>{n("game")}),()=>{a()}},Te=()=>{const{addEventResize:t}=P(),{render:n,setIntersections:a}=K({color:"#ffeb3b",frequency:10}),{render:u,rect:i,up:s,down:o}=Z(),{render:e,point:c}=ge(),{point:r}=me(s),{point:g}=Me(o);return t(()=>{const d=c(),h=i(),l=r(),f=g();a((m,p,M)=>!T({x:m,y:p,r:M},d)&&!de({x:m,y:p,r:M},h)&&!T({x:m,y:p,r:M},l)&&!T({x:m,y:p,r:M},f))}),()=>{n(),u(),e()}},We=()=>{const{ctx:t,addEventResize:n,loop:a}=P(),u={x:40,y:100};let i=1,s=1,o;const e=()=>{o=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return e(),n(e),a(()=>{u.x+=2*i,u.y+=3*s,i*=-1,s*=-1}),()=>{t.save();var c=Math.random()*2,r=Math.random()*3;t.translate(c,r),t.beginPath(),t.fillStyle="red",t.rect(u.x,u.y,o,o),t.fill(),t.restore()}},ze=[{name:"opening",ctor:fe},{name:"main",ctor:be},{name:"game",ctor:Ce},{name:"gameover",ctor:Ie},{name:"gamescore",ctor:Re},{name:"score",ctor:Te},{name:"devs",ctor:We}];he(ze);document.title="Your's last Popit";
