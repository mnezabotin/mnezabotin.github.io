(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const me=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},l=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(e),{ctx:n,render:l,resize:a,rotate:(t,o,f,h)=>{n.save(),n.translate(o,f),n.rotate(Math.PI*h),n.translate(-o,-f),t(),n.restore()},translate:(t,o,f)=>{n.save(),n.translate(o,f),t(),n.restore()},shade:(t,o)=>{t=t.substring(1);const f=parseInt(t,16),h=Math.round(2.55*o),d=(f>>16)+h,g=(f>>8&255)+h,p=(f&255)+h;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(g<255?g<1?0:g:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(t,o)=>{var f;document.body.style.background=t,document.body.style.backgroundColor=o||t,(f=document.querySelector('meta[name="theme-color"]'))==null||f.setAttribute("content",o||t)},createImg:(t,o,f=o)=>{const h=document.createElement("canvas"),d=h.getContext("2d");if(!d)throw new Error("CanvasRenderingContext2D is null");return h.width=o*devicePixelRatio,h.height=f*devicePixelRatio,d.scale(devicePixelRatio,devicePixelRatio),t(d),h}}},Me=e=>{let n="",a="",l;const r=c=>e.find(u=>u.name===c)||e[0],s={render:()=>{},navigate:(c,u)=>{const t=r(c);a=n||"",n=(t==null?void 0:t.name)||"",l=u,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:l})};return s},ye=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),n=[],a={};return{loop:(s,c)=>{if(Object.entries(a).find(([t,o])=>o===s)||c&&a[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&n.push(c),c=c||new Date().valueOf().toString(),a[c]=s;const u=()=>{s(),a[c]&&e(u)};u()},stop:s=>{if(typeof s=="string")delete a[s];else{const c=Object.entries(a).find(([u,t])=>t===s);c&&delete a[c[0]]}},stopAll:()=>{for(const s in a)n.indexOf(s)===-1&&delete a[s]}}};let G=[];const ve=()=>{for(const e of G)clearTimeout(e);G=[]},Ee=(e,n=400)=>{let a=new Date,l=n,r=setTimeout(e,l);return G.push(r),{pause:()=>{clearTimeout(r),l-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(e,l),G.push(r)},stop:()=>{clearTimeout(r)}}},te=2147483646,q=2147483647,Pe=16807,Se=(e=Math.floor(Math.random()*q))=>{e=e%q,e<=0&&(e+=te);const n=()=>(e=e*Pe%q,e),a=()=>(n()-1)/te;return(r,i)=>(i===void 0&&(i=r,r=0),Math.floor(a()*(i-r+1))+r)},xe=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),we=()=>{const e=[],n=[],a=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>n.push(o),onClickEvents:(o,f)=>n.forEach(h=>h(o,f)),addEventMove:o=>a.push(o),onMoveEvents:(o,f)=>a.forEach(h=>h(o,f)),removeAllEvents:()=>{e.splice(0),n.splice(0),a.splice(0)}}},z=(e,n)=>{const a=Math.pow(Math.abs(e.x-n.x),2),l=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,i=n.r||0,s=Math.pow(r+i,2);return a+l<=s},Ce=(e,n)=>{const a=e.r||0,l=n.w||0,r=n.h||0;return Math.abs(n.x+l/2-e.x)<=l/2+a&&Math.abs(n.y+r/2-e.y)<=r/2+a},Re=(e,n)=>z(e,n),be=e=>{const n={},a=r=>{const i=r.split("/");return i[i.length-1].split(".")[0]};return(()=>{for(const r of e){const i=new Audio(r);i.volume=.25,i.addEventListener("ended",function(){this.currentTime=0});const s=a(r);n[s]={audio:i,path:r}}})(),r=>{var u,t;const i=(u=n[r])==null?void 0:u.audio,s=(t=n[r])==null?void 0:t.path;if(!(!i||!s))if(i.currentTime===0)i.play();else{var c=new Audio(s);c.volume=.25,c.play()}}};let X;const Ie=(e,n)=>{if(X)throw new Error("Webcore already specified");const a=me(),l=Me(e),{loop:r,stop:i,stopAll:s}=ye(),{addEventResize:c,onResizeEvents:u,addEventClick:t,onClickEvents:o,addEventMove:f,onMoveEvents:h,removeAllEvents:d}=we();let g=innerWidth/2,p=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight;const y=()=>({cx:g,cy:p,s:m,m:v,isL:M}),E=be([]);X={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:y,useScreenMeta:l.useScreenMeta,navigate:(P,x)=>{if(!e.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);s(),ve(),d(),new Promise(()=>l.navigate(P,x))},loop:r,loopStop:i,useTimer:Ee,rand:xe,useRandChain:Se,intersect:Re,addEventResize:c,addEventClick:t,addEventMove:f,playAudio:E},r(()=>a.render(l.render),"draw"),window.onresize=()=>{g=innerWidth/2,p=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight,a.resize(),u()},document.onpointerdown=P=>{o(P.clientX,P.clientY)},document.onmousemove=P=>{h(P.clientX,P.clientY)},l.navigate()},w=()=>{if(!X)throw new Error("Webcore not specified");return{...X}},V={},W=e=>{const{shade:n,ctx:a,createImg:l}=w(),r=()=>{const{r:s,c="#ffffff",p:u}=e,t=a.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,n(c,0)),t.addColorStop(.01,n(c,0)),t.addColorStop(.075,n(c,9)),t.addColorStop(.15,n(c,0)),t.addColorStop(.15,n(c,-15)),t.addColorStop(.18,n(c,-5)),t.addColorStop(.22,n(c,-15)),u?(t.addColorStop(.24,n(c,-10)),t.addColorStop(.3,n(c,-8)),t.addColorStop(.34,n(c,-12)),t.addColorStop(.6,n(c,-6)),t.addColorStop(1,n(c,-4))):(t.addColorStop(.24,n(c,-12)),t.addColorStop(.26,n(c,-8)),t.addColorStop(.3,n(c,-2)),t.addColorStop(.34,n(c,0)),t.addColorStop(.5,n(c,5)),t.addColorStop(1,n(c,12))),t},i=()=>{const{r:s,c="#ffffff",p:u}=e,t=`${c}_${u?"push":"pop"}_${s}`;if(V[t])return V[t];const o=l((f=a)=>{const h=r();f.fillStyle=h,f.beginPath(),f.arc(s,s,s,0,2*Math.PI),f.closePath(),f.fill()},2*s);return V[t]=o,o};return(s=a)=>{const{x:c,y:u,r:t}=e,o=i();s.drawImage(o,c-t,u-t,2*t,2*t)}},U={},N=e=>{const{ctx:n}=w();let a;return U[e.src]?a=U[e.src]:(a=new Image,a.src=e.src,U[e.src]=a),(l=n)=>{const{w:r,h:i=r,x:s=0,y:c=0}=e;a.complete&&l.drawImage(a,s,c,r,i)}},ne=e=>{const{font:n,ctx:a}=w(),l=e.text,r=e.text.length,i=2*Math.PI/r/4;return(s=a)=>{const{x:c,y:u,r:t,s:o=0,fs:f}=e,h=f||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${h}px ${n}`,s.save(),s.translate(c,u),s.rotate(o);for(let d=0;d<r;d++)s.save(),s.rotate(d*i),s.fillText(l[d],0,-t),s.restore();s.restore()}},Te=()=>{var M,y;const{ctx:e,loop:n,rotate:a,navigate:l,useMeasure:r,addEventClick:i,addEventResize:s,setBackground:c}=w();c("#040404");let u=!1,t,o,f,h,d,g=-.2,p=0;s(()=>{const{cx:E,cy:P,s:x}=r(),S=Math.round(x*.25);t={c:"#ff6347",x:E,y:P,r:S,p:!1},o=W(t),f=N({x:E-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=ne({text:"nezabotin",x:E,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),d=ne({text:"production",x:E,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{g+=.01,p=g>=1?1:g,g>=1.8&&(t.p=!0),g>=2.2&&(t.c="#f86a9a"),g>=2.6&&l("main")};i(()=>{[1.4,1.8,2.2,2.6].some(E=>{if(g<E)return g=E,!0})});const v=()=>{n(m),u=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:E,cy:P}=r();e.globalAlpha=u?1:0,o(),g<1.8&&f(),g<1.4&&a(()=>{h(),d()},E,P,p),e.globalAlpha=1}},_=100/2;let oe=0;const O=()=>{const{loop:e,ctx:n,shade:a,rand:l}=w(),r={},i=()=>{for(const u in r){const t=r[u];if(!t)return;const o=t.popit;if(!t.shake)t.tic+=_/5,t.tic>=_&&(t.dir=-1),t.withoutRad||(o.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:_-t.tic)));else{t.tic+=_/5;const f=l(1,2),h=l(1,2);o.x=t.origX+Math.random()*f*(Math.random()>.5?1:-1),o.y=t.origY+Math.random()*h*(Math.random()>.5?1:-1)}t.tic>=2*_&&(delete r[u],o.r=t.origR,o.x=t.origX,o.y=t.origY)}},s=(u,t=!1,o=!1)=>{oe++;const f=`${new Date().valueOf().toString()}_${oe}`,h=1,d=1;r[f]={withoutRad:t,tic:h,dir:d,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:o}},c=()=>{n.globalAlpha=.25;for(const u in r){const t=r[u];if(t.shake)continue;const o=t.popit;n.fillStyle=a(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+t.origR*.001*(t.tic+(t.dir>0?0:_-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(i),{popEffect:s,render:c}},Z=e=>{const{font:n,ctx:a}=w();return(l=a)=>{const{text:r,x:i,c:s,y:c,fs:u,a:t="center",mw:o}=e;l.textAlign=t,l.fillStyle=s,l.font=`${u}px ${n}`,l.fillText(r,i,c,o)}},Y=100,de=e=>{const{loop:n,ctx:a,useMeasure:l,rand:r}=w();let i=null;const s=()=>{if(!i)return;const{m:t}=l();if(i.tic<=Y)i.props.fs=((e==null?void 0:e.mfs)||6)/Y*i.tic*t;else{const o=r(1,1),f=r(1,1);i.props.x=i.origX+Math.random()*o*(Math.random()>.5?1:-1),i.props.y=i.origY+Math.random()*f*(Math.random()>.5?1:-1),i.shake=!0}i.tic+=i.tic>Y?1:10,i.tic>Y*2&&(i=null)},c=t=>{const{cx:o,m:f}=l(),h=0,d={x:o,y:Math.round(f*((e==null?void 0:e.dy)||16)),text:t,c:(e==null?void 0:e.color)||"#ffffff",fs:0},g=Z(d);i={props:d,shape:g,tic:h,origX:d.x,origY:d.y}},u=()=>{i&&(a.globalAlpha=.01*i.tic,i.shape(),a.globalAlpha=1)};return n(s),{splashEffect:c,render:u}},We=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:u}=w(),{from:t}=i();let o,f,h;return a(()=>{const{cx:p,cy:m,s:v,m:M}=l(),y=Math.round(v*.25);o={c:e,r:Math.round(v*.08),x:p-y-1*M,y:m-y+1*M,p:(t==="score"||t==="opening")&&!o},f=W(o),h=N({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((p,m)=>{u({x:p,y:m},o)&&(n(o),o.p=!0,r(()=>{s("score")},100))}),{render:()=>{f(),o.p||h()},point:()=>({x:o.x,y:o.y,r:o.r})}},He=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:u}=w(),{from:t}=i();let o,f,h;return a(()=>{const{s:p}=l(),m=Math.round(p*.08);o={c:e,r:m,x:Math.round(1.6*m),y:Math.round(1.6*m),p:t==="main"&&!o},f=W(o),h=N({x:Number(o.x)-m+Math.round(m*.4),y:Number(o.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((p,m)=>{u({x:p,y:m},o)&&(n(o),o.p=!0,r(()=>{s("main")},100))}),{render:()=>{f(),o.p||h()},point:()=>({x:o.x,y:o.y,r:o.r})}},ke=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:l,addEventClick:r,intersect:i,rotate:s}=w();let c,u,t;return n(()=>{const{s:h}=a(),d=Math.round(h*.08);c={c:"#ff6347",r:d,x:Math.round(innerWidth-1.6*d),y:Math.round(innerHeight-1.6*d),p:!1},u=W(c),t=N({x:Number(c.x)-d+Math.round(d*.4),y:Number(c.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),r((h,d)=>{i({x:h,y:d},c)&&(c.p=!0,e(),l(()=>{c.p=!1},100))}),{render:()=>{u(),c.p||s(()=>{t()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Ae=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:l,addEventClick:r,intersect:i,rotate:s}=w();let c,u,t;return n(()=>{const{s:h}=a(),d=Math.round(h*.08),g=innerWidth<innerHeight?Math.round(innerWidth-1.6*d-2*d-.3*d):Math.round(innerWidth-1.6*d),p=innerWidth<innerHeight?Math.round(innerHeight-1.6*d):Math.round(innerHeight-1.6*d-2*d-.3*d);c={c:"#ff6347",r:d,x:g,y:p,p:!1},u=W(c),t=N({x:Number(c.x)-d+Math.round(d*.4),y:Number(c.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),r((h,d)=>{i({x:h,y:d},c)&&(c.p=!0,e(),l(()=>{c.p=!1},100))}),{render:()=>{u(),c.p||s(()=>{t()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},De=e=>{const{ctx:n,shade:a}=w(),l=Math.round(e.r/2.2),r=Math.round(.15*e.r),i=a(e.c||"blue",-3);return(s=n)=>{const{r:c,x:u=c,y:t=c}=e;s.lineCap="round",s.fillStyle=i,s.strokeStyle=i,s.lineWidth=l,s.beginPath(),s.moveTo(u+r,t),s.lineTo(u-r/2,t-r),s.lineTo(u-r/2,t+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(u+r,t),s.lineTo(u-r/2,t-r),s.moveTo(u-r/2,t-r),s.lineTo(u-r/2,t+r),s.moveTo(u-r/2,t+r),s.lineTo(u+r,t),s.stroke()}},le=({getX:e,getY:n,color:a="#bef181",popEffect:l=()=>{}})=>{const{addEventResize:r,useMeasure:i,useTimer:s,useScreenMeta:c,navigate:u,addEventClick:t,intersect:o}=w(),{from:f}=c();let h,d,g;return r(()=>{const{cx:v,cy:M,s:y,m:E}=i();h={c:a,r:Math.round(y*.1),x:e(v,y,E),y:n(M,y,E),p:(f==="gamescore"||f==="game"||f==="opening")&&!h},d=W(h),g=De(h)}),s(()=>{h.p&&l(h,!1,!0),h.p=!1}),t((v,M)=>{o({x:v,y:M},h)&&(l(h),h.p=!0,s(()=>{u("game")},100))}),{render:()=>{d(),h.p||g()},point:()=>({x:h.x,y:h.y,r:h.r})}},ue=e=>{const{ctx:n,shade:a}=w(),l=Math.round(e.r/4),r=Math.round(.12*e.r);return(i=n)=>{const{r:s,x:c=s,y:u=s}=e,t=a(e.c||"blue",-3);i.lineCap="round",i.strokeStyle=t,i.lineWidth=l,i.beginPath(),i.moveTo(c-1.5*r,u-2*r),i.lineTo(c-1.5*r,u+2*r),i.stroke(),i.beginPath(),i.moveTo(c+1.5*r,u-2*r),i.lineTo(c+1.5*r,u+2*r),i.stroke()}},ze=({getX:e,getY:n,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:r,useTimer:i,useScreenMeta:s,navigate:c,addEventClick:u,intersect:t}=w(),{from:o}=s();let f,h,d;return l(()=>{const{cx:m,cy:v,s:M,m:y}=r();f={c:"#fd8059",r:Math.round(M*.08),x:e(m,M,y),y:n(v,M,y),p:(o==="game"||o==="opening")&&!f},h=W(f),d=ue(f)}),i(()=>{f.p&&a(f,!1,!0),f.p=!1}),u((m,v)=>{t({x:m,y:v},f)&&(a(f),f.p=!0,i(()=>{c("main")},100))}),{render:()=>{h(),f.p||d()},point:()=>({x:f.x,y:f.y,r:f.r})}},Le=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,addEventClick:s,intersect:c,navigate:u}=w(),{from:t}=i();let o,f,h,d;return a(()=>{const{cx:m,cy:v,s:M}=l(),y=Math.round(M*.25);o={c:e,x:m,y:v,r:y,p:t==="opening"&&!o},f=W(o),h=Z({text:"Yola",c:"#f1f1f1",x:m,y:v-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),d=Z({text:"PopiT",c:"#ffeb3b",x:m,y:v-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),s((m,v)=>{c({x:m,y:v},o)&&(n(o),o.p=!0,r(()=>{u("opening")},100))}),{render:()=>{f(),o.p||(h(),d())},point:()=>({x:o.x,y:o.y,r:o.r})}},fe=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:a,useRandChain:l,useMeasure:r,rand:i,useTimer:s,setBackground:c,useScreenMeta:u}=w(),{from:t}=u();c(e);const o=i(0,999);let f=[],h=[];a(()=>{const m=l(o),{s:v}=r();f=[];const M=Math.round(v*.05),y=Math.round(innerWidth/M/2)-1,E=Math.round((innerWidth-2*M*y)/(y+1)),P=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<y;b++)m(m(n))<1&&f.push({x:E+M+b*M*2+E*b,y:x+M+S*M*2+x*S,r:M,c:e,p:t==="opening"?!0:m(1)>0});h=f.map(S=>W(S))});const d=()=>{s(()=>{const m=i(f.length-1);f[m]&&(f[m].p=!f[m].p),d()},250)};return t==="opening"?s(()=>{f.forEach(m=>m.p=i(1)>0),d()}):d(),{render:()=>{h.forEach(m=>m())},setIntersections:m=>{f=f.filter(({x:v,y:M,r:y})=>m(v,M,y)),h=f.map(v=>W(v))}}},re="ylp",se="score",K="difficulty",J=[.14,.11,.09,.075],ie=750,_e=350,ce=5,D=[];for(let e=0;e*ce<=ie-_e;e++)D.push(ie-e*ce);const F=()=>{const e=h=>localStorage.getItem(`${re}_${h}`),n=(h,d)=>localStorage.setItem(`${re}_${h}`,d.toString()),a=()=>+(e(se)||0),l=h=>n(se,h),r=h=>{const d=a();l(d+h)},i=()=>+(e(K)||0),s=h=>{const d=i();n(K,Math.min(Math.max(d+h,0),J.length*D.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const h=i(),d=Math.floor(h/D.length);return J[d]||J[1]},getDifficultyTic:()=>{const h=i(),d=Math.floor(h/D.length),g=h-d*D.length;return D[g]||D[0]},resetDifficulty:()=>n(K,0)}},he=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:l,setBackground:r,rand:i}=w(),{getDifficultyRad:s}=F();return n=[...n.splice(i(n.length-1),n.length),...n],e||a(()=>{const{s:u}=l(),t=s(),o=Math.round(u*t),f=Math.round(innerWidth/o/2)-1,h=(innerWidth-2*o*f)/(f+1),d=Math.round(innerHeight/o/2)-1,g=(innerHeight-2*o*d)/(d+1),p=innerWidth>=innerHeight,m=p?f:d,v=p?h:g,M=p?innerWidth:innerHeight;let y=0;const E=[];for(let x=0;x<m;x++)n[y]||(y=0),E.push(`${n[y]} ${(v+o+x*o*2+v*x)/M*100}%`),y++;r(`linear-gradient(${p?"to right":"to bottom"}, ${E.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ge=({palette:e,retry:n,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:r,rand:i,useTimer:s,useScreenMeta:c,navigate:u,addEventClick:t,intersect:o}=w(),{from:f}=c(),{getDifficultyRad:h}=F(),d=[];let g=[],p,m,v,M;const y=P=>Array.isArray(e)?e[P]:e;return l(()=>{const{s:P}=r();d.splice(0);const x=h(),S=Math.round(P*x),b=Math.round(innerWidth/S/2)-1,L=(innerWidth-2*S*b)/(b+1),k=Math.round(innerHeight/S/2)-1,$=(innerHeight-2*S*k)/(k+1),I=innerWidth>=innerHeight;let R=0;for(let T=0;T<k;T++){for(let C=0;C<b;C++){y(R)||(R=0);const H={x:L+S+C*S*2+L*C,y:$+S+T*S*2+$*T,r:S,c:y(R),p:!0};T===0&&C===b-1?(M={...H,p:(f==="main"||f==="gameover"||f==="gamescore")&&!M},p=W(M),m=ue(M)):d.push(H),R+=I?1:0}R=I?0:R+1}n&&(v=d[i(d.length-1)],s(()=>{a(v,!1,!0),v.p=!1})),g=d.map(T=>W(T))}),s(()=>{M.p&&a(M,!1,!0),M.p=!1}),n&&t((P,x)=>{o({x:P,y:x},v)&&(a(v),v.p=!0,s(()=>{u("game")},100))}),t((P,x)=>{o({x:P,y:x},M)&&(a(M),M.p=!0,s(()=>{u("main")},100))}),{render:()=>{g.forEach(P=>P()),p(),M!=null&&M.p||m()},popits:d}},A=100,B="#222",Fe=e=>{const n=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,l=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(l<255?l<1?0:l:255)).toString(16).slice(1)},Q={},$e=e=>{const{ctx:n,createImg:a,useRandChain:l,useTimer:r}=w();let i,s=!1,c=[];const u=e.r*2/A/2;Q[e.imgSrc]?i=Q[e.imgSrc]:(i=Q[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},i.img.src=e.imgSrc);const t=()=>r(()=>{s=!s,t()},250),o=(p,m=n)=>{const{x:v,y:M,c:y,r:E}=p;m.fillStyle=y||"red",m.beginPath(),m.arc(v+E,M+E,E,0,Math.PI*2),m.closePath(),m.fill()},f=(p=n,m=0,v=0)=>{p.fillStyle=B,p.beginPath(),p.roundRect(m,v,2*e.r,2*e.r,u),p.closePath(),p.fill()},h=()=>{const p=[];for(let E=0;E<A;E++)for(let P=0;P<A;P++){const x={x:P*u*2,y:E*u*2,r:u,c:B};p.push(x)}let m=e.score-e.winScore;const v=[...p],M=l(0),y=(E=!1)=>{const P=M(v.length-1),x=v[P],S=p.indexOf(x);x.c=E?B:i.cols[S],v.splice(P,1),E&&c.push({...x,c:i.cols[S]})};for(let E=m;E>0;E--)y();if(e.winScore){c=[];for(let E=e.winScore;E>0;E--)y(!0);t()}return p},d=()=>{const p=h();i.drawImg=a((m=n)=>{f(m),p.filter(v=>v.c!==B).forEach(v=>o(v,m))},2*e.r)},g=async()=>{var v;const p=document.createElement("canvas");p.width=A,p.height=A;const m=p.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(i.img,0,0);for(let M=0;M<A;M++){const y=[];for(let E=0;E<A;E++){const P=(v=m==null?void 0:m.getImageData(E,M,1,1))==null?void 0:v.data;y.push(Fe(P))}i.cols.push(...y)}i.isFilled=!0,d()};return i.isFilled?(i.r!==e.r||i.score!==e.score)&&d():i.img.onload=g,(p=n)=>{const{x:m,y:v,r:M,winScore:y}=e;if(i.drawImg?p.drawImage(i.drawImg,m-M,v-M,2*M,2*M):f(p,m-M,v-M),s&&y&&i.drawImg)for(const E of c)p.fillStyle=E.c||"red",p.beginPath(),p.arc(m-M+E.x+E.r,v-M+E.y+E.r,E.r,0,Math.PI*2),p.closePath(),p.fill()}},ae=1e4,pe=(e=0,n=!1)=>{const{addEventResize:a,useMeasure:l,translate:r}=w(),{getScore:i}=F(),s=["/media/levels/cat.png","/media/levels/city.png","/media/levels/donut.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],c=i();let u,t=0,o=0,f=!1,h=!1;const d=y=>Math.min(Math.floor(y/ae),s.length-1);let g=d(c-e);if(e){const y=d(c);f=y!==g,h=y>s.length-1}return a(()=>{const{cx:y,cy:E,s:P,isL:x}=l();u=[],t=(P-2*P*.055*1.6)/2,o=P*.05;let S=n?g:0;for(S;S<(n?g+1:s.length);S++){const b=s[S],L=x?y:y+S*t*2+S*o,k=x?E+S*t*2+S*o:E;u.push($e({x:L,y:k,r:t,score:Math.min(c-S*ae,1e4),imgSrc:b,winScore:e}))}}),{up:()=>{g=g+1<s.length?g+1:s.length-1},down:()=>{g=g-1<0?0:g-1},render:()=>{const{isL:y}=l(),E=y?0:-(g*t*2+g*o),P=y?-(g*t*2+g*o):0;r(()=>{u==null||u.forEach(x=>x())},E,P)},rect:()=>{const{cx:y,cy:E}=l(),P=innerWidth>innerHeight;return{x:P?y-t:0,y:P?0:E-t,w:P?2*t:innerWidth,h:P?innerHeight:2*t}},isJump:f,isCompleted:h}},Ne=({popits:e,popEffect:n=()=>{},splashEffect:a=()=>{}})=>{const{useTimer:l,rand:r,addEventClick:i,addEventMove:s,intersect:c,navigate:u,addEventResize:t}=w(),{getScore:o,addScore:f,getDifficultyTic:h}=F();let d=[],g,p,m=!1,v=0,M=0,y=0;const E=o(),P=h(),x=I=>{const R=e.filter(H=>d.indexOf(H)===-1&&H!==I),T=r(R.length-1),C=R[T];C&&(n(C,!1,!0),C.p=!1,d.push(R[T]))},S=()=>{p=l(()=>{if(y=Math.max(y-10,50),e.length===d.length){m=!0,p.stop(),l(()=>{u("gameover")});return}x(),S()},y)},b=I=>{d=[];const R=e.length;let T=r(Math.round(R*.3),Math.round(R*.6));const C=[...e];if(I){const H=C.indexOf(I);C.splice(H,1)}for(let H=T;H>0;H--){const ee=r(C.length-1),j=C[ee];j.p=!1,n(j,!1,!0),d.push(j),C.splice(ee,1)}y=P,g==null||g.stop(),p==null||p.stop(),E&&(g=l(()=>{a("SLOWLY"),S()},d.length*P)),v=v>0?v:r(3,5)},L=()=>E<1e4?20:E<2e4?10:E<3e4?5:E<4e4?2:1,k=I=>{n(I),y=Math.min(y+5,P),M++,I.p=!0;const R=d.indexOf(I);if(d.splice(R,1),d.length<=0)if(v--,v>0)l(()=>{a("Round"),b(I)},100);else{g==null||g.stop(),p==null||p.stop();const T=L();f(M*T),l(()=>{u("gamescore",{winScore:M*T})},100)}},$=(I,R,T=!1)=>{if(!m){for(const C of d)if(c({x:I,y:R},C)){k(C);return}if(!T){for(const C of e)if(c({x:I,y:R},C)){n(C,!0),a("Popenalty"),x(C);return}a("Popenalty"),x()}}};i($),s((I,R)=>$(I,R,!0)),t(()=>{l(()=>{a("Pop it"),b()})})},Oe=()=>{const{addEventResize:e,rand:n,useScreenMeta:a}=w(),{from:l}=a(),{popEffect:r,render:i}=O(),s=["#00dcfe","#5bb2f7","#92E6E6"],c=l==="opening"?s[0]:s[n(s.length-1)],{render:u,setIntersections:t}=fe({color:c}),{render:o,point:f}=Le({popEffect:r}),{render:h,point:d}=le({getX:(m,v,M)=>m+Math.round(v*.25)+2*M,getY:(m,v,M)=>m+Math.round(v*.25)+0*M,popEffect:r}),{render:g,point:p}=We({popEffect:r});return e(()=>{const m=p(),v=f(),M=d();t((y,E,P)=>!z({x:y,y:E,r:P},m)&&!z({x:y,y:E,r:P},v)&&!z({x:y,y:E,r:P},M))}),()=>{i(),u(),o(),h(),g()}},Ye=()=>{const{useMeasure:e,addEventResize:n}=w(),a=he(),{popEffect:l,render:r}=O(),{popits:i,render:s}=ge({palette:a,popEffect:l}),c={mfs:0,dy:0},{splashEffect:u,render:t}=de(c);return Ne({popits:i,popEffect:l,splashEffect:u}),n(()=>{const o=(i[0].y-i[0].r)/e().m;c.mfs=o,c.dy=o}),()=>{r(),s(),t()}},Be=()=>{const e="#ff6347",{popEffect:n,render:a}=O(),{setBackground:l}=w(),{minusDifficulty:r}=F(),{render:i}=ge({palette:e,retry:!0,popEffect:n});return l(e),r(),()=>{a(),i()}},Ge=()=>{const{translate:e,useScreenMeta:n}=w(),{plusDifficulty:a,resetDifficulty:l}=F(),{data:r}=n(),{popEffect:i,render:s}=O(),{splashEffect:c,render:u}=de();he();const{render:t,isJump:o}=pe(r==null?void 0:r.winScore,!0),{render:f}=le({getX:(d,g,p)=>innerWidth>innerHeight?Math.min(d+(g-2*g*.055*1.6)/2+4*p+Math.round(g*.1),innerWidth-2*p-Math.round(g*.1)):d+(g-2*g*.055*1.6)/8+0*Math.round(g*.1)+2*p,getY:(d,g,p)=>innerWidth>innerHeight?d+(g-2*g*.055*1.6)/2-1*p-Math.round(g*.1):Math.min(d+(g-2*g*.055*1.6)/2+4*p+Math.round(g*.1),innerHeight-2*p-Math.round(g*.1)),popEffect:i}),{render:h}=ze({getX:(d,g,p)=>innerWidth>innerHeight?Math.max(d-(g-2*g*.055*1.6)/2-4*p-Math.round(g*.1),2*p+Math.round(g*.1)):d+(g-2*g*.055*1.6)/8-2*Math.round(g*.1)-2*p,getY:(d,g,p)=>innerWidth>innerHeight?d-(g-2*g*.055*1.6)/2+0*p+Math.round(g*.1):Math.min(d+(g-2*g*.055*1.6)/2+4*p+Math.round(g*.1),innerHeight-2*p-Math.round(g*.1)),popEffect:i});return o?l():a(),innerHeight>innerWidth&&c(o?"Picture filled":"You win"),()=>{s(),innerHeight>innerWidth?e(t,0,-Math.round(innerHeight*.05)):t(),f(),h(),u()}},Xe=()=>{const{addEventResize:e,rand:n}=w(),{popEffect:a,render:l}=O(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],i=r[n(r.length-1)],{render:s,setIntersections:c}=fe({color:i,frequency:10}),{render:u,rect:t,up:o,down:f}=pe(),{render:h,point:d}=He({popEffect:a}),{render:g,point:p}=ke({onClick:o,popEffect:a}),{render:m,point:v}=Ae({onClick:f,popEffect:a});return e(()=>{const M=d(),y=t(),E=p(),P=v();c((x,S,b)=>!z({x,y:S,r:b},M)&&!Ce({x,y:S,r:b},y)&&!z({x,y:S,r:b},E)&&!z({x,y:S,r:b},P))}),()=>{l(),s(),u(),h(),g(),m()}},je=()=>{const{ctx:e,addEventResize:n,loop:a}=w(),l={x:40,y:100};let r=1,i=1,s;const c=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),n(c),a(()=>{l.x+=2*r,l.y+=3*i,r*=-1,i*=-1}),()=>{e.save();var u=Math.random()*2,t=Math.random()*3;e.translate(u,t),e.beginPath(),e.fillStyle="red",e.rect(l.x,l.y,s,s),e.fill(),e.restore()}},qe=[{name:"opening",ctor:Te},{name:"main",ctor:Oe},{name:"game",ctor:Ye},{name:"gameover",ctor:Be},{name:"gamescore",ctor:Ge},{name:"score",ctor:Xe},{name:"devs",ctor:je}];Ie(qe);document.title="Your's last Pop it";
