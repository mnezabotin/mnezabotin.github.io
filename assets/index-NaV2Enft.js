(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const Me=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},l=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(e),{ctx:n,render:l,resize:a,rotate:(t,o,u,f)=>{n.save(),n.translate(o,u),n.rotate(Math.PI*f),n.translate(-o,-u),t(),n.restore()},translate:(t,o,u)=>{n.save(),n.translate(o,u),t(),n.restore()},shade:(t,o)=>{t=t.substring(1);const u=parseInt(t,16),f=Math.round(2.55*o),d=(u>>16)+f,g=(u>>8&255)+f,m=(u&255)+f;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(g<255?g<1?0:g:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},setBackground:(t,o)=>{var u;document.body.style.background=t,document.body.style.backgroundColor=o||t,(u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",o||t)},createImg:(t,o,u=o)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d)throw new Error("CanvasRenderingContext2D is null");return f.width=o*devicePixelRatio,f.height=u*devicePixelRatio,d.scale(devicePixelRatio,devicePixelRatio),t(d),f}}},ye=e=>{let n="",a="",l;const r=c=>e.find(h=>h.name===c)||e[0],s={render:()=>{},navigate:(c,h)=>{const t=r(c);a=n||"",n=(t==null?void 0:t.name)||"",l=h,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:l})};return s},ve=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),n=[],a={};return{loop:(s,c)=>{if(Object.entries(a).find(([t,o])=>o===s)||c&&a[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&n.push(c),c=c||new Date().valueOf().toString(),a[c]=s;const h=()=>{s(),a[c]&&e(h)};h()},stop:s=>{if(typeof s=="string")delete a[s];else{const c=Object.entries(a).find(([h,t])=>t===s);c&&delete a[c[0]]}},stopAll:()=>{for(const s in a)n.indexOf(s)===-1&&delete a[s]}}};let X=[];const Ee=()=>{for(const e of X)clearTimeout(e);X=[]},Pe=(e,n=400)=>{let a=new Date,l=n,r=setTimeout(e,l);return X.push(r),{pause:()=>{clearTimeout(r),l-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(e,l),X.push(r)},stop:()=>{clearTimeout(r)}}},ne=2147483646,V=2147483647,Se=16807,xe=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=ne);const n=()=>(e=e*Se%V,e),a=()=>(n()-1)/ne;return(r,i)=>(i===void 0&&(i=r,r=0),Math.floor(a()*(i-r+1))+r)},we=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Ce=()=>{const e=[],n=[],a=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>n.push(o),onClickEvents:(o,u)=>n.forEach(f=>f(o,u)),addEventMove:o=>a.push(o),onMoveEvents:(o,u)=>a.forEach(f=>f(o,u)),removeAllEvents:()=>{e.splice(0),n.splice(0),a.splice(0)}}},L=(e,n)=>{const a=Math.pow(Math.abs(e.x-n.x),2),l=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,i=n.r||0,s=Math.pow(r+i,2);return a+l<=s},Re=(e,n)=>{const a=e.r||0,l=n.w||0,r=n.h||0;return Math.abs(n.x+l/2-e.x)<=l/2+a&&Math.abs(n.y+r/2-e.y)<=r/2+a},be=(e,n)=>L(e,n),Ie=()=>{let e=null,n=null;return async a=>{e=new AudioContext;const l=e.createBufferSource();n||(n=await fetch(a).then(r=>r.arrayBuffer()).then(r=>(e==null?void 0:e.decodeAudioData(r))||null)),l.buffer=n,l.connect(e.destination),l.start()}};let j;const Te=e=>{if(j)throw new Error("Webcore already specified");const n=Me(),a=ye(e),{loop:l,stop:r,stopAll:i}=ve(),{addEventResize:s,onResizeEvents:c,addEventClick:h,onClickEvents:t,addEventMove:o,onMoveEvents:u,removeAllEvents:f}=Ce();let d=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,p=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight;const M=()=>({cx:d,cy:g,s:m,m:p,isL:E}),v=Ie();j={font:"Tijuf",ctx:n.ctx,shade:n.shade,rotate:n.rotate,translate:n.translate,setBackground:n.setBackground,createImg:n.createImg,useMeasure:M,useScreenMeta:a.useScreenMeta,navigate:(y,P)=>{if(!e.some(x=>x.name===y))throw new Error(`Screen ${y} not specified`);i(),Ee(),f(),new Promise(()=>a.navigate(y,P))},loop:l,loopStop:r,useTimer:Pe,rand:we,useRandChain:xe,intersect:be,addEventResize:s,addEventClick:h,addEventMove:o,playSound:v},l(()=>n.render(a.render),"draw"),window.onresize=()=>{d=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,p=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight,n.resize(),c()},document.onpointerdown=y=>{t(y.clientX,y.clientY)},document.onmousemove=y=>{u(y.clientX,y.clientY)},a.navigate()},w=()=>{if(!j)throw new Error("Webcore not specified");return{...j}},U={},W=e=>{const{shade:n,ctx:a,createImg:l}=w(),r=()=>{const{r:s,c="#ffffff",p:h}=e,t=a.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,n(c,0)),t.addColorStop(.01,n(c,0)),t.addColorStop(.075,n(c,9)),t.addColorStop(.15,n(c,0)),t.addColorStop(.15,n(c,-15)),t.addColorStop(.18,n(c,-5)),t.addColorStop(.22,n(c,-15)),h?(t.addColorStop(.24,n(c,-10)),t.addColorStop(.3,n(c,-8)),t.addColorStop(.34,n(c,-12)),t.addColorStop(.6,n(c,-6)),t.addColorStop(1,n(c,-4))):(t.addColorStop(.24,n(c,-12)),t.addColorStop(.26,n(c,-8)),t.addColorStop(.3,n(c,-2)),t.addColorStop(.34,n(c,0)),t.addColorStop(.5,n(c,5)),t.addColorStop(1,n(c,12))),t},i=()=>{const{r:s,c="#ffffff",p:h}=e,t=`${c}_${h?"push":"pop"}_${s}`;if(U[t])return U[t];const o=l((u=a)=>{const f=r();u.fillStyle=f,u.beginPath(),u.arc(s,s,s,0,2*Math.PI),u.closePath(),u.fill()},2*s);return U[t]=o,o};return(s=a)=>{const{x:c,y:h,r:t}=e,o=i();s.drawImage(o,c-t,h-t,2*t,2*t)}},K={},B=e=>{const{ctx:n}=w();let a;return K[e.src]?a=K[e.src]:(a=new Image,a.src=e.src,K[e.src]=a),(l=n)=>{const{w:r,h:i=r,x:s=0,y:c=0}=e;a.complete&&l.drawImage(a,s,c,r,i)}},oe=e=>{const{font:n,ctx:a}=w(),l=e.text,r=e.text.length,i=2*Math.PI/r/4;return(s=a)=>{const{x:c,y:h,r:t,s:o=0,fs:u}=e,f=u||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${f}px ${n}`,s.save(),s.translate(c,h),s.rotate(o);for(let d=0;d<r;d++)s.save(),s.rotate(d*i),s.fillText(l[d],0,-t),s.restore();s.restore()}},We=()=>{var M,v;const{ctx:e,loop:n,rotate:a,navigate:l,useMeasure:r,addEventClick:i,addEventResize:s,setBackground:c}=w();c("#040404");let h=!1,t,o,u,f,d,g=-.2,m=0;s(()=>{const{cx:y,cy:P,s:x}=r(),S=Math.round(x*.25);t={c:"#ff6347",x:y,y:P,r:S,p:!1},o=W(t),u=B({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),f=oe({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),d=oe({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{g+=.01,m=g>=1?1:g,g>=1.8&&(t.p=!0),g>=2.2&&(t.c="#f86a9a"),g>=2.6&&l("main")};i(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(g<y)return g=y,!0})});const E=()=>{n(p),h=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(E):E(),()=>{const{cx:y,cy:P}=r();e.globalAlpha=h?1:0,o(),g<1.8&&u(),g<1.4&&a(()=>{f(),d()},y,P,m),e.globalAlpha=1}},_=100/2;let re=0;const N=()=>{const{loop:e,ctx:n,shade:a,rand:l}=w(),r={},i=()=>{for(const h in r){const t=r[h];if(!t)return;const o=t.popit;if(!t.shake)t.tic+=_/5,t.tic>=_&&(t.dir=-1),t.withoutRad||(o.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:_-t.tic)));else{t.tic+=_/5;const u=l(1,2),f=l(1,2);o.x=t.origX+Math.random()*u*(Math.random()>.5?1:-1),o.y=t.origY+Math.random()*f*(Math.random()>.5?1:-1)}t.tic>=2*_&&(delete r[h],o.r=t.origR,o.x=t.origX,o.y=t.origY)}},s=(h,t=!1,o=!1)=>{re++;const u=`${new Date().valueOf().toString()}_${re}`,f=1,d=1;r[u]={withoutRad:t,tic:f,dir:d,popit:h,origR:h.r,origX:h.x,origY:h.y,shake:o}},c=()=>{n.globalAlpha=.25;for(const h in r){const t=r[h];if(t.shake)continue;const o=t.popit;n.fillStyle=a(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+t.origR*.001*(t.tic+(t.dir>0?0:_-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(i),{popEffect:s,render:c}},ee=e=>{const{font:n,ctx:a}=w();return(l=a)=>{const{text:r,x:i,c:s,y:c,fs:h,a:t="center",mw:o}=e;l.textAlign=t,l.fillStyle=s,l.font=`${h}px ${n}`,l.fillText(r,i,c,o)}},Y=100,le=e=>{const{loop:n,ctx:a,useMeasure:l,rand:r}=w();let i=null;const s=()=>{if(!i)return;const{m:t}=l();if(i.tic<=Y)i.props.fs=((e==null?void 0:e.mfs)||6)/Y*i.tic*t;else{const o=r(1,1),u=r(1,1);i.props.x=i.origX+Math.random()*o*(Math.random()>.5?1:-1),i.props.y=i.origY+Math.random()*u*(Math.random()>.5?1:-1),i.shake=!0}i.tic+=i.tic>Y?1:10,i.tic>Y*2&&!(e!=null&&e.infinity)&&(i=null)},c=t=>{const{cx:o,m:u}=l(),f=0,d={x:o,y:Math.round(u*((e==null?void 0:e.dy)||16)),text:t,c:(e==null?void 0:e.color)||"#ffffff",fs:0},g=ee(d);i={props:d,shape:g,tic:f,origX:d.x,origY:d.y}},h=()=>{i&&(a.globalAlpha=.01*i.tic,i.shape(),a.globalAlpha=1)};return n(s),{splashEffect:c,render:h}},He=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:h}=w(),{from:t}=i();let o,u,f;return a(()=>{const{cx:m,cy:p,s:E,m:M}=l(),v=Math.round(E*.25);o={c:e,r:Math.round(E*.08),x:m-v-1*M,y:p-v+1*M,p:(t==="score"||t==="opening")&&!o},u=W(o),f=B({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((m,p)=>{h({x:m,y:p},o)&&(n(o),o.p=!0,r(()=>{s("score")},100))}),{render:()=>{u(),o.p||f()},point:()=>({x:o.x,y:o.y,r:o.r})}},ke=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:h}=w(),{from:t}=i();let o,u,f;return a(()=>{const{s:m}=l(),p=Math.round(m*.08);o={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:t==="main"&&!o},u=W(o),f=B({x:Number(o.x)-p+Math.round(p*.4),y:Number(o.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((m,p)=>{h({x:m,y:p},o)&&(n(o),o.p=!0,r(()=>{s("main")},100))}),{render:()=>{u(),o.p||f()},point:()=>({x:o.x,y:o.y,r:o.r})}},De=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:l,addEventClick:r,intersect:i,rotate:s}=w();let c,h,t;return n(()=>{const{s:f}=a(),d=Math.round(f*.08);c={c:"#ff6347",r:d,x:Math.round(innerWidth-1.6*d),y:Math.round(innerHeight-1.6*d),p:!1},h=W(c),t=B({x:Number(c.x)-d+Math.round(d*.4),y:Number(c.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),r((f,d)=>{i({x:f,y:d},c)&&(c.p=!0,e(),l(()=>{c.p=!1},100))}),{render:()=>{h(),c.p||s(()=>{t()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Ae=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:l,addEventClick:r,intersect:i,rotate:s}=w();let c,h,t;return n(()=>{const{s:f}=a(),d=Math.round(f*.08),g=innerWidth<innerHeight?Math.round(innerWidth-1.6*d-2*d-.3*d):Math.round(innerWidth-1.6*d),m=innerWidth<innerHeight?Math.round(innerHeight-1.6*d):Math.round(innerHeight-1.6*d-2*d-.3*d);c={c:"#ff6347",r:d,x:g,y:m,p:!1},h=W(c),t=B({x:Number(c.x)-d+Math.round(d*.4),y:Number(c.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),r((f,d)=>{i({x:f,y:d},c)&&(c.p=!0,e(),l(()=>{c.p=!1},100))}),{render:()=>{h(),c.p||s(()=>{t()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},ze=e=>{const{ctx:n,shade:a}=w(),l=Math.round(e.r/2.2),r=Math.round(.15*e.r),i=a(e.c||"blue",-3);return(s=n)=>{const{r:c,x:h=c,y:t=c}=e;s.lineCap="round",s.fillStyle=i,s.strokeStyle=i,s.lineWidth=l,s.beginPath(),s.moveTo(h+r,t),s.lineTo(h-r/2,t-r),s.lineTo(h-r/2,t+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(h+r,t),s.lineTo(h-r/2,t-r),s.moveTo(h-r/2,t-r),s.lineTo(h-r/2,t+r),s.moveTo(h-r/2,t+r),s.lineTo(h+r,t),s.stroke()}},ue=({getX:e,getY:n,color:a="#bef181",popEffect:l=()=>{}})=>{const{addEventResize:r,useMeasure:i,useTimer:s,useScreenMeta:c,navigate:h,addEventClick:t,intersect:o}=w(),{from:u}=c();let f,d,g;return r(()=>{const{cx:E,cy:M,s:v,m:y}=i();f={c:a,r:Math.round(v*.1),x:e(E,v,y),y:n(M,v,y),p:(u==="gamescore"||u==="game"||u==="opening")&&!f},d=W(f),g=ze(f)}),s(()=>{f.p&&l(f,!1,!0),f.p=!1}),t((E,M)=>{o({x:E,y:M},f)&&(l(f),f.p=!0,s(()=>{h("game")},100))}),{render:()=>{d(),f.p||g()},point:()=>({x:f.x,y:f.y,r:f.r})}},fe=e=>{const{ctx:n,shade:a}=w(),l=Math.round(e.r/4),r=Math.round(.12*e.r);return(i=n)=>{const{r:s,x:c=s,y:h=s}=e,t=a(e.c||"blue",-3);i.lineCap="round",i.strokeStyle=t,i.lineWidth=l,i.beginPath(),i.moveTo(c-1.5*r,h-2*r),i.lineTo(c-1.5*r,h+2*r),i.stroke(),i.beginPath(),i.moveTo(c+1.5*r,h-2*r),i.lineTo(c+1.5*r,h+2*r),i.stroke()}},Le=({getX:e,getY:n,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:r,useTimer:i,useScreenMeta:s,navigate:c,addEventClick:h,intersect:t}=w(),{from:o}=s();let u,f,d;return l(()=>{const{cx:p,cy:E,s:M,m:v}=r();u={c:"#fd8059",r:Math.round(M*.08),x:e(p,M,v),y:n(E,M,v),p:(o==="game"||o==="opening")&&!u},f=W(u),d=fe(u)}),i(()=>{u.p&&a(u,!1,!0),u.p=!1}),h((p,E)=>{t({x:p,y:E},u)&&(a(u),u.p=!0,i(()=>{c("main")},100))}),{render:()=>{f(),u.p||d()},point:()=>({x:u.x,y:u.y,r:u.r})}},_e=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,addEventClick:s,intersect:c,navigate:h}=w(),{from:t}=i();let o,u,f,d;return a(()=>{const{cx:p,cy:E,s:M}=l(),v=Math.round(M*.25);o={c:e,x:p,y:E,r:v,p:t==="opening"&&!o},u=W(o),f=ee({text:"Yola",c:"#f1f1f1",x:p,y:E-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),d=ee({text:"PopiT",c:"#ffeb3b",x:p,y:E-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),s((p,E)=>{c({x:p,y:E},o)&&(n(o),o.p=!0,r(()=>{h("opening")},100))}),{render:()=>{u(),o.p||(f(),d())},point:()=>({x:o.x,y:o.y,r:o.r})}},he=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:a,useRandChain:l,useMeasure:r,rand:i,useTimer:s,setBackground:c,useScreenMeta:h}=w(),{from:t}=h();c(e);const o=i(0,999);let u=[],f=[];a(()=>{const p=l(o),{s:E}=r();u=[];const M=Math.round(E*.05),v=Math.round(innerWidth/M/2)-1,y=Math.round((innerWidth-2*M*v)/(v+1)),P=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<v;b++)p(p(n))<1&&u.push({x:y+M+b*M*2+y*b,y:x+M+S*M*2+x*S,r:M,c:e,p:t==="opening"?!0:p(1)>0});f=u.map(S=>W(S))});const d=()=>{s(()=>{const p=i(u.length-1);u[p]&&(u[p].p=!u[p].p),d()},250)};return t==="opening"?s(()=>{u.forEach(p=>p.p=i(1)>0),d()}):d(),{render:()=>{f.forEach(p=>p())},setIntersections:p=>{u=u.filter(({x:E,y:M,r:v})=>p(E,M,v)),f=u.map(E=>W(E))}}},se="ylp",ie="score",J="difficulty",Q=[.14,.11,.09,.075],ce=750,Fe=350,ae=5,z=[];for(let e=0;e*ae<=ce-Fe;e++)z.push(ce-e*ae);const F=()=>{const e=f=>localStorage.getItem(`${se}_${f}`),n=(f,d)=>localStorage.setItem(`${se}_${f}`,d.toString()),a=()=>+(e(ie)||0),l=f=>n(ie,f),r=f=>{const d=a();l(d+f)},i=()=>+(e(J)||0),s=f=>{const d=i();n(J,Math.min(Math.max(d+f,0),Q.length*z.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const f=i(),d=Math.floor(f/z.length);return Q[d]||Q[1]},getDifficultyTic:()=>{const f=i(),d=Math.floor(f/z.length),g=f-d*z.length;return z[g]||z[0]},resetDifficulty:()=>n(J,0)}},ge=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:l,setBackground:r,rand:i}=w(),{getDifficultyRad:s}=F();return n=[...n.splice(i(n.length-1),n.length),...n],e||a(()=>{const{s:h}=l(),t=s(),o=Math.round(h*t),u=Math.round(innerWidth/o/2)-1,f=(innerWidth-2*o*u)/(u+1),d=Math.round(innerHeight/o/2)-1,g=(innerHeight-2*o*d)/(d+1),m=innerWidth>=innerHeight,p=m?u:d,E=m?f:g,M=m?innerWidth:innerHeight;let v=0;const y=[];for(let x=0;x<p;x++)n[v]||(v=0),y.push(`${n[v]} ${(E+o+x*o*2+E*x)/M*100}%`),v++;r(`linear-gradient(${m?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},pe=({palette:e,retry:n,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:r,rand:i,useTimer:s,useScreenMeta:c,navigate:h,addEventClick:t,intersect:o}=w(),{from:u}=c(),{getDifficultyRad:f}=F(),d=[];let g=[],m,p,E,M;const v=P=>Array.isArray(e)?e[P]:e;return l(()=>{const{s:P}=r();d.splice(0);const x=f(),S=Math.round(P*x),b=Math.round(innerWidth/S/2)-1,H=(innerWidth-2*S*b)/(b+1),k=Math.round(innerHeight/S/2)-1,O=(innerHeight-2*S*k)/(k+1),$=innerWidth>=innerHeight;let C=0;for(let R=0;R<k;R++){for(let T=0;T<b;T++){v(C)||(C=0);const I={x:H+S+T*S*2+H*T,y:O+S+R*S*2+O*R,r:S,c:v(C),p:!0};R===0&&T===b-1?(M={...I,p:(u==="main"||u==="gameover"||u==="gamescore")&&!M},m=W(M),p=fe(M)):d.push(I),C+=$?1:0}C=$?0:C+1}n&&(E=d[i(d.length-1)],s(()=>{a(E,!1,!0),E.p=!1})),g=d.map(R=>W(R))}),s(()=>{M.p&&a(M,!1,!0),M.p=!1}),n&&t((P,x)=>{o({x:P,y:x},E)&&(a(E),E.p=!0,s(()=>{h("game")},100))}),t((P,x)=>{o({x:P,y:x},M)&&(a(M),M.p=!0,s(()=>{h("main")},100))}),{render:()=>{g.forEach(P=>P()),m(),M!=null&&M.p||p()},popits:d}},A=100,G="#222",$e=e=>{const n=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,l=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(l<255?l<1?0:l:255)).toString(16).slice(1)},Z={},Be=e=>{const{ctx:n,createImg:a,useRandChain:l,useTimer:r}=w();let i,s=!1,c=[];const h=e.r*2/A/2;Z[e.imgSrc]?i=Z[e.imgSrc]:(i=Z[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},i.img.src=e.imgSrc);const t=()=>r(()=>{s=!s,t()},250),o=(m,p=n)=>{const{x:E,y:M,c:v,r:y}=m;p.fillStyle=v||"red",p.beginPath(),p.arc(E+y,M+y,y,0,Math.PI*2),p.closePath(),p.fill()},u=(m=n,p=0,E=0)=>{m.fillStyle=G,m.beginPath(),m.roundRect(p,E,2*e.r,2*e.r,h),m.closePath(),m.fill()},f=()=>{const m=[];for(let y=0;y<A;y++)for(let P=0;P<A;P++){const x={x:P*h*2,y:y*h*2,r:h,c:G};m.push(x)}let p=e.score-e.winScore;const E=[...m],M=l(e.seed),v=(y=!1)=>{const P=M(E.length-1),x=E[P],S=m.indexOf(x);x.c=y?G:i.cols[S],E.splice(P,1),y&&c.push({...x,c:i.cols[S]})};for(let y=p;y>0;y--)v();if(e.winScore){c=[];for(let y=e.winScore;y>0;y--)v(!0);t()}return m},d=()=>{const m=f();i.drawImg=a((p=n)=>{u(p),m.filter(E=>E.c!==G).forEach(E=>o(E,p))},2*e.r)},g=async()=>{var E;const m=document.createElement("canvas");m.width=A,m.height=A;const p=m.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(i.img,0,0);for(let M=0;M<A;M++){const v=[];for(let y=0;y<A;y++){const P=(E=p==null?void 0:p.getImageData(y,M,1,1))==null?void 0:E.data;v.push($e(P))}i.cols.push(...v)}i.isFilled=!0,d()};return i.isFilled?(i.r!==e.r||i.score!==e.score)&&d():i.img.onload=g,(m=n)=>{const{x:p,y:E,r:M,winScore:v}=e;if(i.drawImg?m.drawImage(i.drawImg,p-M,E-M,2*M,2*M):u(m,p-M,E-M),s&&v&&i.drawImg)for(const y of c)m.fillStyle=y.c||"red",m.beginPath(),m.arc(p-M+y.x+y.r,E-M+y.y+y.r,y.r,0,Math.PI*2),m.closePath(),m.fill()}},de=1e4,me=(e=0,n=!1)=>{const{addEventResize:a,useMeasure:l,translate:r}=w(),{getScore:i}=F(),s=["/media/levels/cat.png","/media/levels/city.png","/media/levels/donut.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],c=i();let h,t=0,o=0,u=!1,f=!1;const d=v=>Math.min(Math.floor(v/de),s.length-1);let g=d(c-e);if(e){const v=d(c);u=v!==g,f=v>s.length-1}return a(()=>{const{cx:v,cy:y,s:P,isL:x}=l();h=[],t=(P-2*P*.055*1.6)/2,o=P*.05;let S=n?g:0;for(S;S<(n?g+1:s.length);S++){const b=s[S],H=x?v:v+S*t*2+S*o,k=x?y+S*t*2+S*o:y;h.push(Be({x:H,y:k,r:t,score:Math.min(c-S*de,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{g=g+1<s.length?g+1:s.length-1},down:()=>{g=g-1<0?0:g-1},render:()=>{const{isL:v}=l(),y=v?0:-(g*t*2+g*o),P=v?-(g*t*2+g*o):0;r(()=>{h==null||h.forEach(x=>x())},y,P)},rect:()=>{const{cx:v,cy:y}=l(),P=innerWidth>innerHeight;return{x:P?v-t:0,y:P?0:y-t,w:P?2*t:innerWidth,h:P?innerHeight:2*t}},isJump:u,isCompleted:f}},Ne=({popits:e,popEffect:n=()=>{},splashEffect:a=()=>{}})=>{const{useTimer:l,rand:r,addEventClick:i,addEventMove:s,intersect:c,navigate:h,addEventResize:t,playSound:o}=w(),{getScore:u,addScore:f,getDifficultyTic:d}=F();let g=[],m,p,E=!1,M=0,v=0,y=0;const P=u(),x=d(),S=C=>{const R=e.filter(D=>g.indexOf(D)===-1&&D!==C),T=r(R.length-1),I=R[T];I&&(n(I,!1,!0),I.p=!1,g.push(R[T]))},b=()=>{p=l(()=>{if(y=Math.max(y-10,50),e.length===g.length){E=!0,p.stop(),l(()=>{h("gameover")});return}S(),b()},y)},H=C=>{g=[];const R=e.length;let T=r(Math.round(R*.3),Math.round(R*.6));const I=[...e];if(C){const D=I.indexOf(C);I.splice(D,1)}for(let D=T;D>0;D--){const te=r(I.length-1),q=I[te];q.p=!1,n(q,!1,!0),g.push(q),I.splice(te,1)}y=x,m==null||m.stop(),p==null||p.stop(),P&&(m=l(()=>{a("SLOWLY"),b()},g.length*x)),M=M>0?M:r(3,5)},k=()=>P<1e4?10:P<2e4?5:P<3e4?2:1,O=C=>{o("/sounds/tap.mp3"),n(C),y=Math.min(y+5,x),v++,C.p=!0;const R=g.indexOf(C);if(g.splice(R,1),g.length<=0)if(M--,M>0)l(()=>{a("Round"),H(C)},100);else{m==null||m.stop(),p==null||p.stop();const T=k();f(v*T),l(()=>{h("gamescore",{winScore:v*T})},100)}},$=(C,R,T=!1)=>{if(!E){for(const I of g)if(c({x:C,y:R},I)){O(I);return}if(!T){for(const I of e)if(c({x:C,y:R},I)){n(I,!0),a("Popenalty"),S(I);return}a("Popenalty"),S()}}};i($),s((C,R)=>$(C,R,!0)),t(()=>{l(()=>{a("Pop it"),H()})})},Oe=()=>{const{addEventResize:e,rand:n,useScreenMeta:a}=w(),{from:l}=a(),{popEffect:r,render:i}=N(),s=["#00dcfe","#5bb2f7","#92E6E6"],c=l==="opening"?s[0]:s[n(s.length-1)],{render:h,setIntersections:t}=he({color:c}),{render:o,point:u}=_e({popEffect:r}),{render:f,point:d}=ue({getX:(p,E,M)=>p+Math.round(E*.25)+2*M,getY:(p,E,M)=>p+Math.round(E*.25)+0*M,popEffect:r}),{render:g,point:m}=He({popEffect:r});return e(()=>{const p=m(),E=u(),M=d();t((v,y,P)=>!L({x:v,y,r:P},p)&&!L({x:v,y,r:P},E)&&!L({x:v,y,r:P},M))}),()=>{i(),h(),o(),f(),g()}},Ye=()=>{const{useMeasure:e,addEventResize:n}=w(),a=ge(),{popEffect:l,render:r}=N(),{popits:i,render:s}=pe({palette:a,popEffect:l}),c={mfs:0,dy:0},{splashEffect:h,render:t}=le(c);return Ne({popits:i,popEffect:l,splashEffect:h}),n(()=>{const o=(i[0].y-i[0].r)/e().m;c.mfs=o,c.dy=o}),()=>{r(),s(),t()}},Ge=()=>{const e="#ff6347",{popEffect:n,render:a}=N(),{setBackground:l}=w(),{minusDifficulty:r}=F(),{render:i}=pe({palette:e,retry:!0,popEffect:n});return l(e),r(),()=>{a(),i()}},Xe=()=>{const{translate:e,useScreenMeta:n}=w(),{plusDifficulty:a,resetDifficulty:l}=F(),{data:r}=n(),{popEffect:i,render:s}=N(),{splashEffect:c,render:h}=le({infinity:!0});ge();const{render:t,isJump:o}=me(r==null?void 0:r.winScore,!0),{render:u}=ue({getX:(d,g,m)=>innerWidth>innerHeight?Math.min(d+(g-2*g*.055*1.6)/2+4*m+Math.round(g*.1),innerWidth-2*m-Math.round(g*.1)):d+(g-2*g*.055*1.6)/8+0*Math.round(g*.1)+2*m,getY:(d,g,m)=>innerWidth>innerHeight?d+(g-2*g*.055*1.6)/2-1*m-Math.round(g*.1):Math.min(d+(g-2*g*.055*1.6)/2+4*m+Math.round(g*.1),innerHeight-2*m-Math.round(g*.1)),popEffect:i}),{render:f}=Le({getX:(d,g,m)=>innerWidth>innerHeight?Math.max(d-(g-2*g*.055*1.6)/2-4*m-Math.round(g*.1),2*m+Math.round(g*.1)):d+(g-2*g*.055*1.6)/8-2*Math.round(g*.1)-2*m,getY:(d,g,m)=>innerWidth>innerHeight?d-(g-2*g*.055*1.6)/2+0*m+Math.round(g*.1):Math.min(d+(g-2*g*.055*1.6)/2+4*m+Math.round(g*.1),innerHeight-2*m-Math.round(g*.1)),popEffect:i});return o?l():a(),innerHeight>innerWidth&&c(o?"Picture filled":"You win"),()=>{s(),innerHeight>innerWidth?e(t,0,-Math.round(innerHeight*.05)):t(),u(),f(),h()}},je=()=>{const{addEventResize:e,rand:n}=w(),{popEffect:a,render:l}=N(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],i=r[n(r.length-1)],{render:s,setIntersections:c}=he({color:i,frequency:10}),{render:h,rect:t,up:o,down:u}=me(),{render:f,point:d}=ke({popEffect:a}),{render:g,point:m}=De({onClick:o,popEffect:a}),{render:p,point:E}=Ae({onClick:u,popEffect:a});return e(()=>{const M=d(),v=t(),y=m(),P=E();c((x,S,b)=>!L({x,y:S,r:b},M)&&!Re({x,y:S,r:b},v)&&!L({x,y:S,r:b},y)&&!L({x,y:S,r:b},P))}),()=>{l(),s(),h(),f(),g(),p()}},qe=()=>{const{ctx:e,addEventResize:n,loop:a}=w(),l={x:40,y:100};let r=1,i=1,s;const c=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),n(c),a(()=>{l.x+=2*r,l.y+=3*i,r*=-1,i*=-1}),()=>{e.save();var h=Math.random()*2,t=Math.random()*3;e.translate(h,t),e.beginPath(),e.fillStyle="red",e.rect(l.x,l.y,s,s),e.fill(),e.restore()}},Ve=[{name:"opening",ctor:We},{name:"main",ctor:Oe},{name:"game",ctor:Ye},{name:"gameover",ctor:Ge},{name:"gamescore",ctor:Xe},{name:"score",ctor:je},{name:"devs",ctor:qe}];Te(Ve);document.title="Your's last Pop it";
