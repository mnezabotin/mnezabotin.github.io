(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&h(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();const st=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");if(!e)throw new Error("CanvasRenderingContext2D is null");const a=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,e.scale(devicePixelRatio,devicePixelRatio)},h=n=>{e.clearRect(0,0,innerWidth,innerHeight),n()};return a(),document.body.appendChild(t),{ctx:e,render:h,resize:a,rotate:(n,u,d,f)=>{e.save(),e.translate(u,d),e.rotate(Math.PI*f),e.translate(-u,-d),n(),e.restore()},translate:(n,u,d)=>{e.save(),e.translate(u,d),n(),e.restore()},shade:(n,u)=>{n=n.substring(1);const d=parseInt(n,16),f=Math.round(2.55*u),l=(d>>16)+f,p=(d>>8&255)+f,m=(d&255)+f;return"#"+(16777216+(l<255?l<1?0:l:255)*65536+(p<255?p<1?0:p:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},setBackground:(n,u)=>{var d;document.body.style.background=n,document.body.style.backgroundColor=u||n,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",u||n)},createImg:(n,u,d=u)=>{const f=document.createElement("canvas"),l=f.getContext("2d");if(!l)throw new Error("CanvasRenderingContext2D is null");return f.width=u*devicePixelRatio,f.height=d*devicePixelRatio,l.scale(devicePixelRatio,devicePixelRatio),n(l),f}}},ct=t=>{let e="",a="",h;const s=r=>t.find(i=>i.name===r)||t[0],o={render:()=>{},navigate:(r,i)=>{const n=s(r);a=e||"",e=(n==null?void 0:n.name)||"",h=i,o.render=(n==null?void 0:n.ctor())||(()=>{})},useScreenMeta:()=>({to:e,from:a,data:h})};return o},it=()=>{const t=requestAnimationFrame||(o=>setTimeout(o,16.666666666666668)),e=[],a={};return{loop:(o,r)=>{if(Object.entries(a).find(([n,u])=>u===o)||r&&a[r])throw new Error(`Loop${r?" "+r:""} already specified`);r&&e.push(r),r=r||new Date().valueOf().toString(),a[r]=o;const i=()=>{o(),a[r]&&t(i)};i()},stop:o=>{if(typeof o=="string")delete a[o];else{const r=Object.entries(a).find(([i,n])=>n===o);r&&delete a[r[0]]}},stopAll:()=>{for(const o in a)e.indexOf(o)===-1&&delete a[o]}}};let O=[];const at=()=>{for(const t of O)clearTimeout(t);O=[]},dt=(t,e=400)=>{let a=new Date,h=e,s=setTimeout(t,h);return O.push(s),{pause:()=>{clearTimeout(s),h-=new Date-a},resume:()=>{a=new Date,clearTimeout(s),s=setTimeout(t,h),O.push(s)},stop:()=>{clearTimeout(s)}}},X=2147483646,B=2147483647,lt=16807,ut=(t=Math.floor(Math.random()*B))=>{t=t%B,t<=0&&(t+=X);const e=()=>(t=t*lt%B,t),a=()=>(e()-1)/X;return(s,c)=>(c===void 0&&(c=s,s=0),Math.floor(a()*(c-s+1))+s)},ft=(t,e)=>(e===void 0&&(e=t,t=0),Math.floor(Math.random()*(e-t+1))+t),ht=()=>{const t=[],e=[],a=[];return{addEventResize:u=>{u(),t.push(u)},onResizeEvents:()=>t.forEach(u=>u()),addEventClick:u=>e.push(u),onClickEvents:(u,d)=>e.forEach(f=>f(u,d)),addEventMove:u=>a.push(u),onMoveEvents:(u,d)=>a.forEach(f=>f(u,d)),removeAllEvents:()=>{t.splice(0),e.splice(0),a.splice(0)}}},W=(t,e)=>{const a=Math.pow(Math.abs(t.x-e.x),2),h=Math.pow(Math.abs(t.y-e.y),2),s=t.r||0,c=e.r||0,o=Math.pow(s+c,2);return a+h<=o},pt=(t,e)=>{const a=t.r||0,h=e.w||0,s=e.h||0;return Math.abs(e.x+h/2-t.x)<=h/2+a&&Math.abs(e.y+s/2-t.y)<=s/2+a},gt=(t,e)=>W(t,e),mt=t=>{const e={},a=s=>{const c=s.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const s of t){const c=new Audio(s);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const o=a(s);e[o]={audio:c,path:s}}})(),s=>{var i,n;const c=(i=e[s])==null?void 0:i.audio,o=(n=e[s])==null?void 0:n.path;if(!(!c||!o))if(c.currentTime===0)c.play();else{var r=new Audio(o);r.volume=.25,r.play()}}};let $;const vt=(t,e)=>{if($)throw new Error("Webcore already specified");const a=st(),h=ct(t),{loop:s,stop:c,stopAll:o}=it(),{addEventResize:r,onResizeEvents:i,addEventClick:n,onClickEvents:u,addEventMove:d,onMoveEvents:f,removeAllEvents:l}=ht();let p=innerWidth/2,m=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const S=()=>({cx:p,cy:m,s:g,m:v}),x=mt([]);$={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:S,useScreenMeta:h.useScreenMeta,navigate:(M,y)=>{if(!t.some(E=>E.name===M))throw new Error(`Screen ${M} not specified`);o(),at(),l(),new Promise(()=>h.navigate(M,y))},loop:s,loopStop:c,useTimer:dt,rand:ft,useRandChain:ut,intersect:gt,addEventResize:r,addEventClick:n,addEventMove:d,playAudio:x},s(()=>a.render(h.render),"draw"),window.onresize=()=>{p=innerWidth/2,m=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),i()},document.onpointerdown=M=>{u(M.clientX,M.clientY)},document.onmousemove=M=>{f(M.clientX,M.clientY)},h.navigate()},w=()=>{if(!$)throw new Error("Webcore not specified");return{...$}},N={},I=t=>{const{shade:e,ctx:a,createImg:h}=w(),s=()=>{const{r:o,c:r="#ffffff",p:i}=t,n=a.createRadialGradient(o,o,o,o,o,o/5);return n.addColorStop(0,e(r,0)),n.addColorStop(.01,e(r,0)),n.addColorStop(.075,e(r,9)),n.addColorStop(.15,e(r,0)),n.addColorStop(.15,e(r,-15)),n.addColorStop(.18,e(r,-5)),n.addColorStop(.22,e(r,-15)),i?(n.addColorStop(.24,e(r,-10)),n.addColorStop(.3,e(r,-8)),n.addColorStop(.34,e(r,-12)),n.addColorStop(.6,e(r,-6)),n.addColorStop(1,e(r,-4))):(n.addColorStop(.24,e(r,-12)),n.addColorStop(.26,e(r,-8)),n.addColorStop(.3,e(r,-2)),n.addColorStop(.34,e(r,0)),n.addColorStop(.5,e(r,5)),n.addColorStop(1,e(r,10))),n},c=()=>{const{r:o,c:r="#ffffff",p:i}=t,n=`${r}_${i?"push":"pop"}_${o}`;if(N[n])return N[n];const u=h((d=a)=>{const f=s();d.fillStyle=f,d.beginPath(),d.arc(o,o,o,0,2*Math.PI),d.closePath(),d.fill()},2*o);return N[n]=u,u};return(o=a)=>{const{x:r,y:i,r:n}=t,u=c();o.drawImage(u,r-n,i-n,2*n,2*n)}},G={},F=t=>{const{ctx:e}=w();let a;return G[t.src]?a=G[t.src]:(a=new Image,a.src=t.src,G[t.src]=a),(h=e)=>{const{w:s,h:c=s,x:o=0,y:r=0}=t;a.complete&&h.drawImage(a,o,r,s,c)}},K=t=>{const{font:e,ctx:a}=w(),h=t.text,s=t.text.length,c=2*Math.PI/s/4;return(o=a)=>{const{x:r,y:i,r:n,s:u=0,fs:d}=t,f=d||Math.round(n/4);o.textAlign="center",o.fillStyle="#f9f9f9",o.font=`${f}px ${e}`,o.save(),o.translate(r,i),o.rotate(u);for(let l=0;l<s;l++)o.save(),o.rotate(l*c),o.fillText(h[l],0,-n),o.restore();o.restore()}},Mt=()=>{var S,x;const{ctx:t,loop:e,rotate:a,navigate:h,useMeasure:s,addEventClick:c,addEventResize:o,setBackground:r}=w();r("#040404");let i=!1,n,u,d,f,l,p=-.2,m=0;o(()=>{const{cx:M,cy:y,s:E}=s(),P=Math.round(E*.25);n={c:"#ff6347",x:M,y,r:P,p:!1},u=I(n),d=F({x:M-P+Math.round(P*.35),y:y-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),f=K({text:"nezabotin",x:M,y,r:Math.round(P*1.1),s:Math.PI*1.6}),l=K({text:"production",x:M,y,r:Math.round(P*1.1),s:Math.PI*2.6})});const g=()=>{p+=.01,m=p>=1?1:p,p>=1.8&&(n.p=!0),p>=2.2&&(n.c="#f86a9a"),p>=2.6&&h("main")};c(()=>{[1.4,1.8,2.2,2.6].some(M=>{if(p<M)return p=M,!0})});const v=()=>{e(g),i=!0};return(S=document==null?void 0:document.fonts)!=null&&S.ready?(x=document==null?void 0:document.fonts)==null||x.ready.then(v):v(),()=>{const{cx:M,cy:y}=s();t.globalAlpha=i?1:0,u(),p<1.8&&d(),p<1.4&&a(()=>{f(),l()},M,y,m),t.globalAlpha=1}},yt=()=>{const{addEventResize:t,useMeasure:e,useTimer:a,useScreenMeta:h,navigate:s,addEventClick:c,intersect:o}=w(),{from:r}=h();let i,n,u;return t(()=>{const{cx:l,cy:p,s:m,m:g}=e(),v=Math.round(m*.25);i={c:"#ba68c8",r:Math.round(m*.08),x:l-v-1*g,y:p-v+1*g,p:(r==="score"||r==="opening")&&!i},n=I(i),u=F({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),a(()=>{i.p=!1}),c((l,p)=>{o({x:l,y:p},i)&&(i.p=!0,a(()=>{s("score")},100))}),{render:()=>{n(),i.p||u()},point:()=>({x:i.x,y:i.y,r:i.r})}},Et=()=>{const{addEventResize:t,useMeasure:e,useTimer:a,useScreenMeta:h,navigate:s,addEventClick:c,intersect:o}=w(),{from:r}=h();let i,n,u;return t(()=>{const{s:l}=e(),p=Math.round(l*.08);i={c:"#ff6347",r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:r==="main"&&!i},n=I(i),u=F({x:Number(i.x)-p+Math.round(p*.4),y:Number(i.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),a(()=>{i.p=!1}),c((l,p)=>{o({x:l,y:p},i)&&(i.p=!0,a(()=>{s("main")},100))}),{render:()=>{n(),i.p||u()},point:()=>({x:i.x,y:i.y,r:i.r})}},Pt=t=>{const{addEventResize:e,useMeasure:a,useTimer:h,addEventClick:s,intersect:c,rotate:o}=w();let r,i,n;return e(()=>{const{s:f}=a(),l=Math.round(f*.055);r={c:"#ff6347",r:l,x:Math.round(innerWidth-1.6*l),y:Math.round(innerHeight-1.6*l),p:!1},i=I(r),n=F({x:Number(r.x)-l+Math.round(l*.4),y:Number(r.y)-l+Math.round(l*.4),w:l*2-Math.round(l*.8),src:"/media/back.svg"})}),s((f,l)=>{c({x:f,y:l},r)&&(r.p=!0,t(),h(()=>{r.p=!1},100))}),{render:()=>{i(),r.p||o(()=>{n()},r.x,r.y,-.5)},point:()=>({x:r.x,y:r.y,r:r.r})}},St=t=>{const{addEventResize:e,useMeasure:a,useTimer:h,addEventClick:s,intersect:c,rotate:o}=w();let r,i,n;return e(()=>{const{s:f}=a(),l=Math.round(f*.055);r={c:"#ff6347",r:l,x:Math.round(innerWidth-1.6*l),y:Math.round(innerHeight-1.6*l-2*l-.3*l),p:!1},i=I(r),n=F({x:Number(r.x)-l+Math.round(l*.4),y:Number(r.y)-l+Math.round(l*.4),w:l*2-Math.round(l*.8),src:"/media/back.svg"})}),s((f,l)=>{c({x:f,y:l},r)&&(r.p=!0,t(),h(()=>{r.p=!1},100))}),{render:()=>{i(),r.p||o(()=>{n()},r.x,r.y,.5)},point:()=>({x:r.x,y:r.y,r:r.r})}},wt=t=>{const{ctx:e,shade:a}=w(),h=Math.round(t.r/2.2),s=Math.round(.15*t.r),c=a(t.c||"blue",-3);return(o=e)=>{const{r,x:i=r,y:n=r}=t;o.lineCap="round",o.fillStyle=c,o.strokeStyle=c,o.lineWidth=h,o.beginPath(),o.moveTo(i+s,n),o.lineTo(i-s/2,n-s),o.lineTo(i-s/2,n+s),o.closePath(),o.fill(),o.beginPath(),o.moveTo(i+s,n),o.lineTo(i-s/2,n-s),o.moveTo(i-s/2,n-s),o.lineTo(i-s/2,n+s),o.moveTo(i-s/2,n+s),o.lineTo(i+s,n),o.stroke()}},xt=()=>{const{addEventResize:t,useMeasure:e,useTimer:a,useScreenMeta:h,navigate:s,addEventClick:c,intersect:o}=w(),{from:r}=h();let i,n,u;return t(()=>{const{cx:l,cy:p,s:m,m:g}=e(),v=Math.round(m*.25);i={c:"#bef181",r:Math.round(m*.1),x:l+v+2*g,y:p+v,p:(r==="game"||r==="opening")&&!i},n=I(i),u=wt(i)}),a(()=>{i.p=!1}),c((l,p)=>{o({x:l,y:p},i)&&(i.p=!0,a(()=>{s("game")},100))}),{render:()=>{n(),i.p||u()},point:()=>({x:i.x,y:i.y,r:i.r})}},J=t=>{const{font:e,ctx:a}=w();return(h=a)=>{const{text:s,x:c,c:o,y:r,fs:i,a:n="center",mw:u}=t;h.textAlign=n,h.fillStyle=o,h.font=`${i}px ${e}`,h.fillText(s,c,r,u)}},Ct=()=>{const{addEventResize:t,useMeasure:e,useTimer:a,useScreenMeta:h}=w(),{from:s}=h();let c,o,r,i;return t(()=>{const{cx:d,cy:f,s:l}=e(),p=Math.round(l*.25);c={c:"#f86a9a",x:d,y:f,r:p,p:s==="opening"&&!c},o=I(c),r=J({text:"Yola",c:"#f1f1f1",x:d,y:f-p+Math.round(p*.9),fs:Math.round(p/2.6),mw:p*2}),i=J({text:"PopiT",c:"#ffeb3b",x:d,y:f-p+Math.round(p*1.3),fs:Math.round(p/2.3),mw:p*2})}),a(()=>c.p=!1),{render:()=>{o(),c.p||(r(),i())},point:()=>({x:c.x,y:c.y,r:c.r})}},et=({color:t="#00dcfe",frequency:e=25})=>{const{addEventResize:a,useRandChain:h,useMeasure:s,rand:c,useTimer:o,setBackground:r,useScreenMeta:i}=w(),{from:n}=i();r(t);const u=c(0,999);let d=[],f=[];a(()=>{const g=h(u),{s:v}=s();d=[];const S=Math.round(v*.05),x=Math.round(innerWidth/S/2)-1,M=Math.round((innerWidth-2*S*x)/(x+1)),y=Math.round(innerHeight/S/2)-1,E=Math.round((innerHeight-2*S*y)/(y+1));for(let P=0;P<y;P++)for(let C=0;C<x;C++)g(g(e))<1&&d.push({x:M+S+C*S*2+M*C,y:E+S+P*S*2+E*P,r:S,c:t,p:n==="opening"?!0:g(1)>0});f=d.map(P=>I(P))});const l=()=>{o(()=>{const g=c(d.length-1);d[g]&&(d[g].p=!d[g].p),l()},750)};return n==="opening"?o(()=>{d.forEach(g=>g.p=c(1)>0),l()}):l(),{render:()=>{f.forEach(g=>g())},setIntersections:g=>{d=d.filter(({x:v,y:S,r:x})=>g(v,S,x)),f=d.map(v=>I(v))}}},Q="ylp",Z="score",tt="difficulty",T=[800,750,700,650,600,550,450,400,350],Y=[.15,.14,.11,.09,.075],z=()=>{const t=d=>localStorage.getItem(`${Q}_${d}`),e=(d,f)=>localStorage.setItem(`${Q}_${d}`,f.toString()),a=()=>+(t(Z)||0),h=d=>e(Z,d),s=d=>{const f=a();h(f+d)},c=()=>+(t(tt)||T.length),o=d=>{const f=c();e(tt,Math.min(Math.max(f+d,0),Y.length*T.length-1))};return{getScore:a,addScore:s,plusDifficulty:()=>o(1),minusDifficulty:()=>o(-1),getDifficultyRad:()=>{const d=c(),f=Math.floor(d/T.length);return Y[f]||Y[1]},getDifficultyTic:()=>{const d=c(),f=Math.floor(d/T.length),l=d-f*T.length;return T[l]||T[0]}}},nt=(t=!1)=>{let e=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:h,setBackground:s,rand:c}=w(),{getDifficultyRad:o}=z();return e=[...e.splice(c(e.length-1),e.length),...e],t||a(()=>{const{s:i}=h(),n=o(),u=Math.round(i*n),d=Math.round(innerWidth/u/2)-1,f=(innerWidth-2*u*d)/(d+1),l=Math.round(innerHeight/u/2)-1,p=(innerHeight-2*u*l)/(l+1),m=innerWidth>=innerHeight,g=m?d:l,v=m?f:p,S=m?innerWidth:innerHeight;let x=0;const M=[];for(let E=0;E<g;E++)e[x]||(x=0),M.push(`${e[x]} ${(v+u+E*u*2+v*E)/S*100}%`),x++;s(`linear-gradient(${m?"to right":"to bottom"}, ${M.join(", ")})`,innerWidth<innerHeight?e[0]:"#040404")}),e},It=t=>{const{ctx:e,shade:a}=w(),h=Math.round(t.r/4),s=Math.round(.12*t.r);return(c=e)=>{const{r:o,x:r=o,y:i=o}=t,n=a(t.c||"blue",-3);c.lineCap="round",c.strokeStyle=n,c.lineWidth=h,c.beginPath(),c.moveTo(r-1.5*s,i-2*s),c.lineTo(r-1.5*s,i+2*s),c.stroke(),c.beginPath(),c.moveTo(r+1.5*s,i-2*s),c.lineTo(r+1.5*s,i+2*s),c.stroke()}},ot=({palette:t,retry:e})=>{const{addEventResize:a,useMeasure:h,rand:s,useTimer:c,useScreenMeta:o,navigate:r,addEventClick:i,intersect:n}=w(),{from:u}=o(),{getDifficultyRad:d}=z(),f=[];let l=[],p,m,g,v;const S=M=>Array.isArray(t)?t[M]:t;return a(()=>{const{s:M}=h();f.splice(0);const y=d(),E=Math.round(M*y),P=Math.round(innerWidth/E/2)-1,C=(innerWidth-2*E*P)/(P+1),R=Math.round(innerHeight/E/2)-1,A=(innerHeight-2*E*R)/(R+1),H=innerWidth>=innerHeight;let k=0;for(let b=0;b<R;b++){for(let L=0;L<P;L++){S(k)||(k=0);const V={x:C+E+L*E*2+C*L,y:A+E+b*E*2+A*b,r:E,c:S(k),p:!0};b===0&&L===P-1?(v={...V,p:(u==="main"||u==="gameover"||u==="gamescore")&&!v},p=I(v),m=It(v)):f.push(V),k+=H?1:0}k=H?0:k+1}e&&(g=f[s(f.length-1)],c(()=>{g.p=!1})),l=f.map(b=>I(b))}),c(()=>{v.p=!1}),e&&i((M,y)=>{n({x:M,y},g)&&(g.p=!0,c(()=>{r("game")},100))}),i((M,y)=>{n({x:M,y},v)&&(v.p=!0,c(()=>{r("main")},100))}),{render:()=>{l.forEach(M=>M()),p(),v!=null&&v.p||m()},popits:f}},D=100,j=2,_="#222",Rt=t=>{const e=(t==null?void 0:t[0])||0,a=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(e<255?e<1?0:e:255)*65536+(a<255?a<1?0:a:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},q={},bt=t=>{const{ctx:e,shade:a,createImg:h,useRandChain:s}=w();let c;q[t.imgSrc]?c=q[t.imgSrc]:(c=q[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},c.img.src=t.imgSrc);const o=(u,d=e)=>{const{x:f,y:l,c:p,r:m,p:g}=u;g?(d.fillStyle=a(p,5),d.beginPath(),d.arc(f+m,l+m,m,0,Math.PI*2),d.closePath(),d.fill()):(d.fillStyle=p,d.beginPath(),d.arc(f+m,l+m,m+2,0,Math.PI*2),d.closePath(),d.fill())},r=()=>{const u=[],d=(t.r*2-2*j)/D;for(let m=0;m<D;m++)for(let g=0;g<D;g++){const v={x:j+g*d,y:j+m*d,r:d/2,c:_};u.push(v)}let f=t.score;const l=[...u],p=s(0);for(let m=f;m>0;m--){const g=p(l.length-1),v=l[g],S=u.indexOf(v);v.c=c.cols[S],l.splice(g,1)}return u},i=()=>{const u=r();c.drawImg=h((d=e)=>{u.filter(f=>f.c===_).forEach(f=>o(f,d)),u.filter(f=>f.c!==_).forEach(f=>o(f,d)),u.filter(f=>f.c!==_).forEach(f=>o({...f,p:!0},d))},2*t.r)},n=async()=>{var f;const u=document.createElement("canvas");u.width=D,u.height=D;const d=u.getContext("2d",{willReadFrequently:!0});d==null||d.drawImage(c.img,0,0);for(let l=0;l<D;l++){const p=[];for(let m=0;m<D;m++){const g=(f=d==null?void 0:d.getImageData(m,l,1,1))==null?void 0:f.data;p.push(Rt(g))}c.cols.push(...p)}c.isFilled=!0,i()};return c.isFilled?(c.r!==t.r||c.score!==t.score)&&i():c.img.onload=n,(u=e)=>{const{x:d,y:f,r:l}=t;c.drawImg&&u.drawImage(c.drawImg,d-l,f-l,2*l,2*l)}},U=1e4,rt=()=>{const{addEventResize:t,useMeasure:e,translate:a}=w(),{getScore:h}=z(),s=["/media/cat.png"],c=h();let o,r=0,i=0,n=Math.floor(c/U);return t(()=>{const{cx:p,cy:m,s:g}=e();o=[],r=(g-2*g*.055*1.6)/2,i=g*.05;for(let v=0;v<s.length;v++){const S=s[v];o.push(bt({x:p,y:m+v*r*2+v*i,r,score:c-v*U<0?0:c-v*U,imgSrc:S}))}}),{up:()=>{n=n+1<s.length?n+1:s.length-1},down:()=>{n=n-1<0?0:n-1},render:()=>{a(()=>{o==null||o.forEach(p=>p())},0,-(n*r*2+n*i))},rect:()=>{const{cx:p,cy:m}=e(),g=innerWidth>innerHeight;return{x:g?p-r:0,y:g?0:m-r,w:g?2*r:innerWidth,h:g?innerHeight:2*r}}}},Tt=t=>{const{useTimer:e,rand:a,addEventClick:h,addEventMove:s,intersect:c,navigate:o}=w(),{addScore:r,getDifficultyTic:i}=z();let n=[],u,d,f=!1,l=0,p=0;const m=i(),g=()=>{const y=t.filter(C=>n.indexOf(C)===-1),E=a(y.length-1),P=y[E];P&&(P.p=!1,n.push(y[E]))},v=()=>{d=e(()=>{if(t.length===n.length){f=!0,d.stop(),e(()=>{o("gameover")});return}g(),v()},m)},S=y=>{n=[];const E=t.length;let P=a(Math.round(E*.3),Math.round(E*.6));const C=[...t];if(y){const R=C.indexOf(y);C.splice(R,1)}for(let R=P;R>0;R--){const A=a(C.length-1),H=C[A];H.p=!1,n.push(H),C.splice(A,1)}u==null||u.stop(),d==null||d.stop(),u=e(v,n.length*m),l=l>0?l:a(3,5)},x=y=>{p++,y.p=!0;const E=n.indexOf(y);n.splice(E,1),n.length<=0&&(l--,l>0?S(y):(r(p),o("gamescore")))},M=(y,E)=>{if(!f){for(const P of n)if(c({x:y,y:E},P)){x(P);return}g()}};h(M),s(M),e(()=>{S()})},Dt=()=>{const{addEventResize:t}=w(),{render:e,setIntersections:a}=et({}),{render:h,point:s}=Ct(),{render:c,point:o}=xt(),{render:r,point:i}=yt();return t(()=>{const n=i(),u=s(),d=o();a((f,l,p)=>!W({x:f,y:l,r:p},n)&&!W({x:f,y:l,r:p},u)&&!W({x:f,y:l,r:p},d))}),()=>{e(),h(),c(),r()}},Wt=()=>{const t=nt(),{popits:e,render:a}=ot({palette:t});return Tt(e),()=>{a()}},kt=()=>{const t="#ff6347",{setBackground:e}=w(),{minusDifficulty:a}=z();a();const{render:h}=ot({palette:t,retry:!0});return e(t),()=>{h()}},zt=()=>{const{addEventClick:t,navigate:e}=w(),{plusDifficulty:a}=z();a(),nt();const{render:h}=rt();return t(()=>{e("game")}),()=>{h()}},At=()=>{const{addEventResize:t}=w(),{render:e,setIntersections:a}=et({color:"#ffeb3b",frequency:10}),{render:h,rect:s,up:c,down:o}=rt(),{render:r,point:i}=Et(),{point:n}=Pt(c),{point:u}=St(o);return t(()=>{const d=i(),f=s(),l=n(),p=u();a((m,g,v)=>!W({x:m,y:g,r:v},d)&&!pt({x:m,y:g,r:v},f)&&!W({x:m,y:g,r:v},l)&&!W({x:m,y:g,r:v},p))}),()=>{e(),h(),r()}},Ht=()=>{const{ctx:t,addEventResize:e,loop:a}=w(),h={x:40,y:100};let s=1,c=1,o;const r=()=>{o=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return r(),e(r),a(()=>{h.x+=2*s,h.y+=3*c,s*=-1,c*=-1}),()=>{t.save();var i=Math.random()*2,n=Math.random()*3;t.translate(i,n),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,o,o),t.fill(),t.restore()}},Lt=[{name:"opening",ctor:Mt},{name:"main",ctor:Dt},{name:"game",ctor:Wt},{name:"gameover",ctor:kt},{name:"gamescore",ctor:zt},{name:"score",ctor:At},{name:"devs",ctor:Ht}];vt(Lt);document.title="Your's last Popit";
