(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function d(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function f(s){if(s.ep)return;s.ep=!0;const l=d(s);fetch(s.href,l)}})();const Ce=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const d=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},f=e=>{n.clearRect(0,0,innerWidth,innerHeight),e()};return d(),document.body.appendChild(t),{ctx:n,render:f,resize:d,rotate:(e,i,r,y)=>{n.save(),n.translate(i,r),n.rotate(Math.PI*y),n.translate(-i,-r),e(),n.restore()},translate:(e,i,r)=>{n.save(),n.translate(i,r),e(),n.restore()},shade:(e,i)=>{e=e.substring(1);const r=parseInt(e,16),y=Math.round(2.55*i),M=(r>>16)+y,h=(r>>8&255)+y,u=(r&255)+y;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(h<255?h<1?0:h:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},setBackground:(e,i)=>{var r;document.body.style.background=e,document.body.style.backgroundColor=i||e,(r=document.querySelector('meta[name="theme-color"]'))==null||r.setAttribute("content",i||e)},createImg:(e,i,r=i)=>{const y=document.createElement("canvas"),M=y.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return y.width=i*devicePixelRatio,y.height=r*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),e(M),y}}},be=t=>{let n="",d="",f;const s=c=>t.find(a=>a.name===c)||t[0],o={render:()=>{},navigate:(c,a)=>{const e=s(c);d=n||"",n=(e==null?void 0:e.name)||"",f=a,o.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:d,data:f})};return o},Re=()=>{const t=requestAnimationFrame||(o=>setTimeout(o,16.666666666666668)),n=[],d={};return{loop:(o,c)=>{if(Object.entries(d).find(([e,i])=>i===o)||c&&d[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&n.push(c),c=c||new Date().valueOf().toString(),d[c]=o;const a=()=>{o(),d[c]&&t(a)};a()},stop:o=>{if(typeof o=="string")delete d[o];else{const c=Object.entries(d).find(([a,e])=>e===o);c&&delete d[c[0]]}},stopAll:()=>{for(const o in d)n.indexOf(o)===-1&&delete d[o]}}};let J=[];const Ie=()=>{for(const t of J)clearTimeout(t);J=[]},Te=(t,n=400)=>{let d=new Date,f=n,s=setTimeout(t,f);return J.push(s),{pause:()=>{clearTimeout(s),f-=new Date-d},resume:()=>{d=new Date,clearTimeout(s),s=setTimeout(t,f),J.push(s)},stop:()=>{clearTimeout(s)}}},le=2147483646,ee=2147483647,ke=16807,We=(t=Math.floor(Math.random()*ee))=>{t=t%ee,t<=0&&(t+=le);const n=()=>(t=t*ke%ee,t),d=()=>(n()-1)/le;return(s,l)=>(l===void 0&&(l=s,s=0),Math.floor(d()*(l-s+1))+s)},De=(t,n)=>(n===void 0&&(n=t,t=0),Math.floor(Math.random()*(n-t+1))+t),Ae=()=>{const t=[],n=[],d=[];return{addEventResize:i=>{i(),t.push(i)},onResizeEvents:()=>t.forEach(i=>i()),addEventClick:i=>n.push(i),onClickEvents:(i,r)=>n.forEach(y=>y(i,r)),addEventMove:i=>d.push(i),onMoveEvents:(i,r)=>d.forEach(y=>y(i,r)),removeAllEvents:()=>{t.splice(0),n.splice(0),d.splice(0)}}},$=(t,n)=>{const d=Math.pow(Math.abs(t.x-n.x),2),f=Math.pow(Math.abs(t.y-n.y),2),s=t.r||0,l=n.r||0,o=Math.pow(s+l,2);return d+f<=o},He=(t,n)=>{const d=t.r||0,f=n.w||0,s=n.h||0;return Math.abs(n.x+f/2-t.x)<=f/2+d&&Math.abs(n.y+s/2-t.y)<=s/2+d},ze=(t,n)=>$(t,n),Le=t=>{const n=new AudioContext,d={},f=o=>{fetch(o).then(c=>c.arrayBuffer()).then(c=>(n==null?void 0:n.decodeAudioData(c))||null).then(c=>{c&&(d[o]=c)})};if(t&&t.length)for(const o of t)f(o);let s=!0;const l=(o,c)=>{s&&setTimeout(async()=>{const a=n.createBufferSource();d[o]||(d[o]=await fetch(o).then(e=>e.arrayBuffer()).then(e=>(n==null?void 0:n.decodeAudioData(e))||null)),a.buffer=d[o],a.connect(n.destination),c&&(a.playbackRate.value=c),a.start()},0)};return window.onfocus=()=>{s=!0},window.onblur=()=>{s=!1},l};let Q;const Fe=(t,n=[],d)=>{if(Q)throw new Error("Webcore already specified");const f=Ce(),s=be(t),{loop:l,stop:o,stopAll:c}=Re(),{addEventResize:a,onResizeEvents:e,addEventClick:i,onClickEvents:r,addEventMove:y,onMoveEvents:M,removeAllEvents:h}=Ae();let u=innerWidth/2,p=innerHeight/2,v=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight;const g=()=>({cx:u,cy:p,s:v,m,isL:w}),S=Le(n);Q={font:"Tijuf",sdk:d,ctx:f.ctx,shade:f.shade,rotate:f.rotate,translate:f.translate,setBackground:f.setBackground,createImg:f.createImg,useMeasure:g,useScreenMeta:s.useScreenMeta,navigate:(P,x)=>{if(!t.some(E=>E.name===P))throw new Error(`Screen ${P} not specified`);c(),Ie(),h(),new Promise(()=>s.navigate(P,x))},loop:l,loopStop:o,useTimer:Te,rand:De,useRandChain:We,intersect:ze,addEventResize:a,addEventClick:i,addEventMove:y,playSound:S},l(()=>f.render(s.render),"draw"),window.onresize=()=>{u=innerWidth/2,p=innerHeight/2,v=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight,f.resize(),e()},document.onpointerdown=P=>{r(P.clientX,P.clientY)},document.onmousemove=P=>{M(P.clientX,P.clientY)},s.navigate()},I=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},H=t=>{const{shade:n,ctx:d,createImg:f}=I(),s=()=>{const{r:o,c="#ffffff",p:a}=t,e=d.createRadialGradient(o,o,o,o,o,o/5);return e.addColorStop(0,n(c,0)),e.addColorStop(.01,n(c,0)),e.addColorStop(.075,n(c,9)),e.addColorStop(.15,n(c,0)),e.addColorStop(.15,n(c,-15)),e.addColorStop(.18,n(c,-5)),e.addColorStop(.22,n(c,-15)),a?(e.addColorStop(.24,n(c,-10)),e.addColorStop(.3,n(c,-8)),e.addColorStop(.34,n(c,-12)),e.addColorStop(.6,n(c,-8)),e.addColorStop(1,n(c,-6))):(e.addColorStop(.24,n(c,-12)),e.addColorStop(.26,n(c,-8)),e.addColorStop(.3,n(c,-2)),e.addColorStop(.34,n(c,0)),e.addColorStop(.5,n(c,5)),e.addColorStop(1,n(c,18))),e},l=()=>{const{r:o,c="#ffffff",p:a}=t,e=`${c}_${a?"push":"pop"}_${o}`;if(te[e])return te[e];const i=f((r=d)=>{const y=s();r.fillStyle=y,r.beginPath(),r.arc(o,o,o,0,2*Math.PI),r.closePath(),r.fill()},2*o);return te[e]=i,i};return(o=d)=>{const{x:c,y:a,r:e}=t,i=l();o.drawImage(i,c-e,a-e,2*e,2*e)}},ne={},U=t=>{const{ctx:n}=I();let d;return ne[t.src]?d=ne[t.src]:(d=new Image,d.src=t.src,ne[t.src]=d),(f=n)=>{const{w:s,h:l=s,x:o=0,y:c=0}=t;d.complete&&f.drawImage(d,o,c,s,l)}},ue=t=>{const{font:n,ctx:d}=I(),f=t.text,s=t.text.length,o=(t.l||1)*Math.PI/s/2;return(c=d)=>{const{x:a,y:e,r:i,s:r=0,fs:y,f:M}=t,h=y||Math.round(i/7);c.textAlign="center",c.fillStyle="#f9f9f9",c.font=`${h}px ${M||n}`,c.save(),c.translate(a,e),c.rotate(r);for(let u=0;u<s;u++)c.save(),c.rotate(u*o),c.fillText(f[u],0,-i),c.restore();c.restore()}},_=t=>{const{font:n,ctx:d}=I();return(f=d)=>{const{text:s,x:l,c:o,y:c,fs:a,a:e="center",mw:i,f:r}=t;f.textAlign=e,f.fillStyle=o,f.font=`${a}px ${r||n}`,f.fillText(s,l,c,i)}},Be={tapToSkip:"нажмите что бы пропустить",theEnd:"Конец игры",youWin:"Вы выйграли",complete:"Открыто",production:"производство",nezabotin:"незаботин",dev:"Максим Незаботин",positions:["Идея","Автор","Разработчик","Аналитика","Дизайн","Тестирование"]};let _e=Be;const ce=()=>_e,Oe=()=>{var E,b;const{ctx:t,loop:n,rotate:d,navigate:f,useMeasure:s,addEventClick:l,addEventResize:o,setBackground:c,useTimer:a}=I(),e=ce();c("#040404");let i=!1,r,y,M,h,u,p,v,m=-.2,w=0,g=!1;o(()=>{const{cx:C,cy:R,s:z}=s(),k=Math.round(z*.25);r={c:"#ff6347",x:C,y:R,r:k,p:!1},y=H(r),M=U({x:C-k+Math.round(k*.35),y:R-k+Math.round(k*.35),w:k*2-Math.round(k*.7),src:"./media/sloth.svg"}),h=ue({text:e.nezabotin,x:C,y:R,r:Math.round(k*1.1),s:Math.PI*1.6,f:"PressStart2P",l:1.2}),u=ue({text:e.production,x:C,y:R,r:Math.round(k*1.1),s:Math.PI*2.6,f:"PressStart2P",l:1.4}),p=_({text:e.tapToSkip,c:"#f1f1f1",y:innerHeight-Math.round(k/5),x:C,fs:Math.round(k/10),mw:z,f:"PressStart2P"}),v=_({text:"a",c:"#fff",y:-innerHeight,x:-innerWidth,fs:1e-5})});const S=()=>{m+=.01,w=m>=1?1:m,m>=1.8&&(r.p=!0),m>=2.2&&(r.c="#f86a9a"),m>=2.6&&f("main")};l(()=>{[1.4,1.8,2.2,2.6].some(C=>{if(m<C)return m=C,!0})});const P=()=>{n(S),i=!0};(E=document==null?void 0:document.fonts)!=null&&E.ready?(b=document==null?void 0:document.fonts)==null||b.ready.then(P):P();const x=()=>a(()=>{g=!g,x()},250);return x(),()=>{const{cx:C,cy:R}=s();t.globalAlpha=i?1:0,v(),y(),m<1.8&&M(),m<1.4&&d(()=>{h(),u()},C,R,w),g&&p(),t.globalAlpha=1}},pe="ylp",fe="score",oe="difficulty",he="sound",se=[.14,.11,.09,.075],me=750,$e=350,ge=10,G=[];for(let t=0;t*ge<=me-$e;t++)G.push(me-t*ge);let q=null;const N=()=>{const t=h=>localStorage.getItem(`${pe}_${h}`),n=(h,u)=>localStorage.setItem(`${pe}_${h}`,u.toString()),d=()=>+(t(fe)||0),f=h=>n(fe,h),s=h=>{const u=d();f(u+h)},l=()=>+(t(oe)||0),o=h=>{const u=l();n(oe,Math.min(Math.max(u+h,0),se.length*G.length-1))};return{getScore:d,addScore:s,plusDifficulty:()=>o(1),minusDifficulty:()=>o(-5),getDifficultyRad:()=>{const h=l(),u=Math.floor(h/G.length);return se[u]||se[1]},getDifficultyTic:()=>{const h=l(),u=Math.floor(h/G.length),p=h-u*G.length;return G[p]||G[0]},resetDifficulty:()=>n(oe,0),getSound:()=>{if(q!==null)return q;const h=t(he);return!h||h==="true"?(q=!0,!0):(q=!1,!1)},setSound:h=>{q=h,n(he,h)}}};let ve=["./sounds/pop/pop1.mp3","./sounds/pop/pop2.mp3","./sounds/pop/pop3.mp3","./sounds/pop/pop4.mp3","./sounds/pop/pop5.mp3","./sounds/pop/pop6.mp3","./sounds/pop/pop7.mp3","./sounds/pop/pop8.mp3","./sounds/pop/pop9.mp3","./sounds/pop/pop10.mp3","./sounds/pop/pop11.mp3","./sounds/pop/pop12.mp3","./sounds/pop/pop13.mp3","./sounds/pop/pop14.mp3","./sounds/pop/pop15.mp3","./sounds/pop/pop16.mp3","./sounds/pop/pop17.mp3","./sounds/pop/pop18.mp3","./sounds/pop/pop19.mp3","./sounds/pop/pop20.mp3","./sounds/pop/pop21.mp3","./sounds/pop/pop22.mp3","./sounds/pop/pop23.mp3","./sounds/pop/pop24.mp3"],F=[...ve];const V=()=>{const{rand:t,playSound:n}=I(),{getSound:d}=N();return{playPop:()=>{if(!d())return;const a=t(F.length-1),e=F[a];F.splice(a,1),F.length||(F=[...ve]);const i=t(F.length-1);F=[...F.splice(i,F.length),...F],n(e)},playMissed:()=>{if(!d())return;n("./sounds/wrong.mp3")},playFail:()=>{if(!d())return;n("./sounds/fail.mp3")},playWin:()=>{if(!d())return;n("./sounds/win.mp3")},playComplete:()=>{if(!d())return;n("./sounds/complete.mp3")}}},j=100/2;let ye=0;const X=()=>{const{loop:t,ctx:n,shade:d,rand:f}=I(),{playPop:s,playMissed:l}=V(),o={},c=()=>{for(const i in o){const r=o[i];if(!r)return;const y=r.popit;if(!r.shake)r.tic+=j/5,r.tic>=j&&(r.dir=-1),r.withoutRad||(y.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:j-r.tic)));else{r.tic+=j/5;const M=f(1,2),h=f(1,2);y.x=r.origX+Math.random()*M*(Math.random()>.5?1:-1),y.y=r.origY+Math.random()*h*(Math.random()>.5?1:-1)}r.tic>=2*j&&(delete o[i],y.r=r.origR,y.x=r.origX,y.y=r.origY)}},a=(i,r=!1,y=!1)=>{var w;r?l():s(),(w=navigator==null?void 0:navigator.vibrate)==null||w.call(navigator,30),ye++;const M=`${new Date().valueOf().toString()}_${ye}`,h=1,u=1;let p=i.r,v=i.x,m=i.y;for(const g in o){const S=o[g];i===S.popit&&(p=S.origR,v=S.origX,m=S.origY)}o[M]={withoutRad:r,tic:h,dir:u,popit:i,origR:p,origX:v,origY:m,shake:y}},e=()=>{n.globalAlpha=.25;for(const i in o){const r=o[i];if(r.shake)continue;const y=r.popit;n.fillStyle=d(y.c||"red",-12),n.beginPath(),n.arc(y.x,y.y,y.r+r.origR*.001*(r.tic+(r.dir>0?0:j-r.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return t(c),{popEffect:a,render:e}},Ne=({color:t="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:l,navigate:o,addEventClick:c,intersect:a}=I(),{from:e}=l();let i,r,y;return d(()=>{const{cx:u,cy:p,s:v,m}=f(),w=Math.round(v*.25);i={c:t,r:Math.round(v*.08),x:u-w-1*m,y:p-w+1*m,p:(e==="score"||e==="opening"||e==="devs")&&!i},r=H(i),y=U({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"./media/star.svg"})}),s(()=>{i.p&&n(i,!1,!0),i.p=!1}),c((u,p)=>{a({x:u,y:p},i)&&(n(i),i.p=!0,s(()=>{o("score")},100))}),{render:()=>{r(),i.p||y()},point:()=>({x:i.x,y:i.y,r:i.r})}},Me=({color:t="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,navigate:l,addEventClick:o,intersect:c}=I();let a,e,i;return d(()=>{const{s:M}=f(),h=Math.round(M*.08);a={c:t,r:h,x:Math.round(1.6*h),y:Math.round(1.6*h),p:!a},e=H(a),i=U({x:Number(a.x)-h+Math.round(h*.4),y:Number(a.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"./media/back.svg"})}),s(()=>{a.p&&n(a,!1,!0),a.p=!1}),o((M,h)=>{c({x:M,y:h},a)&&(n(a),a.p=!0,s(()=>{l("main")},100))}),{render:()=>{e(),a.p||i()},point:()=>({x:a.x,y:a.y,r:a.r})}},Ye=({onClick:t,popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,addEventClick:l,intersect:o,rotate:c}=I(),{playPop:a}=V();let e,i,r;return d(()=>{const{s:h}=f(),u=Math.round(h*.08);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},i=H(e),r=U({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"./media/back.svg"})}),l((h,u)=>{o({x:h,y:u},e)&&(a(),e!=null&&e.p||n(e),e.p=!0,t(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||c(()=>{r()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Ge=({onClick:t,popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,addEventClick:l,intersect:o,rotate:c}=I(),{playPop:a}=V();let e,i,r;return d(()=>{const{s:h,isL:u}=f(),p=Math.round(h*.08),v=Math.round(u?innerWidth-1.6*p:innerWidth-1.6*p-2*p-.3*p),m=Math.round(u?innerHeight-1.6*p-2*p-.3*p:innerHeight-1.6*p);e={c:"#ff6347",r:p,x:v,y:m,p:!1},i=H(e),r=U({x:Number(e.x)-p+Math.round(p*.4),y:Number(e.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"./media/back.svg"})}),l((h,u)=>{o({x:h,y:u},e)&&(a(),e!=null&&e.p||n(e),e.p=!0,t(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||c(()=>{r()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},je=t=>{const{ctx:n,shade:d}=I(),f=Math.round(t.r/2.2),s=Math.round(.15*t.r),l=d(t.c||"blue",-3);return(o=n)=>{const{r:c,x:a=c,y:e=c}=t;o.lineCap="round",o.fillStyle=l,o.strokeStyle=l,o.lineWidth=f,o.beginPath(),o.moveTo(a+s,e),o.lineTo(a-s/2,e-s),o.lineTo(a-s/2,e+s),o.closePath(),o.fill(),o.beginPath(),o.moveTo(a+s,e),o.lineTo(a-s/2,e-s),o.moveTo(a-s/2,e-s),o.lineTo(a-s/2,e+s),o.moveTo(a-s/2,e+s),o.lineTo(a+s,e),o.stroke()}},Pe=({color:t="#bef181",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:l,navigate:o,addEventClick:c,intersect:a}=I(),{from:e,to:i}=l();let r,y,M;const h=()=>{const{cx:w,cy:g,s:S,m:P}=f(),x=w+Math.round(S*.25)+2*P,E=g+Math.round(S*.25);return{x,y:E}},u=()=>{const{cx:w,cy:g,s:S,isL:P,m:x}=f(),E=Math.round(S*.1);if(P){let b=Math.round(w+S/2)+x*2;const C=Math.round(g+S/2-E*2);return b=Math.min(b,Math.round(innerWidth-E*1.5)),{x:b,y:C}}else{const b=Math.round(w+S*.12);let C=Math.round(g+S/2+E*1.5);return C=Math.min(C,innerHeight-Math.round(E*1.5)),{x:b,y:C}}},p=()=>i==="main"?h():u();return d(()=>{const{s:w}=f();r={c:t,r:Math.round(w*.1),...p(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!r},y=H(r),M=je(r)}),s(()=>{r.p&&n(r,!1,!0),r.p=!1}),c((w,g)=>{a({x:w,y:g},r)&&(n(r),r.p=!0,s(()=>{o("game")},100))}),{render:()=>{y(),r.p||M()},point:()=>({x:r.x,y:r.y,r:r.r})}},Se=t=>{const{ctx:n,shade:d}=I(),f=Math.round(t.r/4),s=Math.round(.12*t.r);return(l=n)=>{const{r:o,x:c=o,y:a=o}=t,e=d(t.c||"blue",-3);l.lineCap="round",l.strokeStyle=e,l.lineWidth=f,l.beginPath(),l.moveTo(c-1.5*s,a-2*s),l.lineTo(c-1.5*s,a+2*s),l.stroke(),l.beginPath(),l.moveTo(c+1.5*s,a-2*s),l.lineTo(c+1.5*s,a+2*s),l.stroke()}},Xe=({popEffect:t=()=>{}})=>{const{addEventResize:n,useMeasure:d,useTimer:f,useScreenMeta:s,navigate:l,addEventClick:o,intersect:c}=I(),{from:a}=s();let e,i,r;const y=()=>{const{cx:u,cy:p,s:v,isL:m,m:w}=d(),g=Math.round(v*.1);if(m){let S=Math.round(u-v/2)-w;const P=Math.round(p-v/2+g*2);return S=Math.max(S,Math.round(g*1.5)),{x:S,y:P}}else{const S=Math.round(u-v*.12);let P=Math.round(p+v/2+g*1.5);return P=Math.min(P,innerHeight-Math.round(g*1.5)),{x:S,y:P}}};return n(()=>{const{s:u}=d();e={c:"#fd8059",r:Math.round(u*.08),...y(),p:(a==="game"||a==="opening")&&!e},i=H(e),r=Se(e)}),f(()=>{e.p&&t(e,!1,!0),e.p=!1},500),o((u,p)=>{c({x:u,y:p},e)&&(t(e),e.p=!0,f(()=>{l("main")},100))}),{render:()=>{i(),e.p||r()},point:()=>({x:e.x,y:e.y,r:e.r})}},qe=t=>{const{ctx:n,shade:d}=I(),f=Math.round(t.r/4),s=Math.round(.2*t.r),l=d(t.c||"blue",-5);return(o=n)=>{const{r:c,x:a=c,y:e=c}=t;o.lineCap="round",o.fillStyle=l,o.strokeStyle=l,o.lineWidth=f,o.beginPath(),o.ellipse(a-s,e+s,f,s,10*Math.PI/180,0,2*Math.PI),o.closePath(),o.fill(),o.beginPath(),o.moveTo(a-s/2,e+s),o.lineTo(a,e-s),o.lineTo(a+s,e-s),o.stroke(),t.on||(o.lineWidth=Math.round(f/3),o.beginPath(),o.moveTo(a-c/4,e-c/4),o.lineTo(a+c/4,e+c/4),o.stroke())}},Ue=({color:t="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:l,addEventClick:o,intersect:c}=I(),{from:a}=l(),{getSound:e,setSound:i}=N();let r,y,M;return d(()=>{const{cx:p,cy:v,s:m,m:w}=f(),g=Math.round(m*.25),S=Math.round(m*.065),P=e();r={c:t,r:S,x:p-g-S-w,y:v-g+3*S,p:(a==="opening"||a==="devs")&&!r,on:P},y=H(r),M=qe(r)}),s(()=>{r.p&&n(r,!1,!0),r.p=!1}),o((p,v)=>{if(c({x:p,y:v},r)){let m=e();m=!m,i(m),r.p=!0,r.on=m,n(r),s(()=>{r.p=!1},100)}}),{render:()=>{y(),r.p||M()},point:()=>({x:r.x,y:r.y,r:r.r})}},Ve=({color:t="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:l,addEventClick:o,intersect:c,navigate:a}=I(),{from:e}=l();let i,r,y,M,h=0;return d(()=>{const{cx:v,cy:m,s:w}=f(),g=Math.round(w*.25);i={c:t,x:v,y:m,r:g,p:(e==="opening"||e==="devs")&&!i},r=H(i),y=_({text:"Yola",c:"#f1f1f1",x:v,y:m-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2,f:"Tijuf"}),M=_({text:"PopiT",c:"#ffeb3b",x:v,y:m-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2,f:"Tijuf"})}),s(()=>{i.p&&n(i,!1,!0),i.p=!1}),o((v,m)=>{c({x:v,y:m},i)&&!(i!=null&&i.p)&&(h++,n(i),i.p=!0,s(()=>{h>12?a("devs"):(i!=null&&i.p&&n(i,!1,!0),i.p=!1)},200))}),{render:()=>{r(),i.p||(y(),M())},point:()=>({x:i.x,y:i.y,r:i.r})}},we=({color:t="#00dcfe",frequency:n=20})=>{const{addEventResize:d,useRandChain:f,useMeasure:s,rand:l,useTimer:o,setBackground:c,useScreenMeta:a}=I(),{from:e}=a();c(t);const i=l(0,999);let r=[],y=[];d(()=>{const p=f(i),{s:v}=s();r=[];const m=Math.round(v*.04),w=Math.round(innerWidth/m/2)-2,g=Math.round((innerWidth-2*m*w)/(w+1)),S=Math.round(innerHeight/m/2)-2,P=Math.round((innerHeight-2*m*S)/(S+1));for(let x=0;x<S;x++)for(let E=0;E<w;E++)p(p(n))<1&&r.push({x:g+m+E*m*2+g*E,y:P+m+x*m*2+P*x,r:m,c:t,p:e==="opening"?!0:p(1)>0});y=r.map(x=>H(x))});const M=()=>{o(()=>{const p=l(r.length-1);r[p]&&(r[p].p=!r[p].p),M()},750)};return e==="opening"?o(()=>{r.forEach(p=>p.p=l(1)>0),M()}):M(),{render:()=>{y.forEach(p=>p())},setIntersections:p=>{r=r.filter(({x:v,y:m,r:w})=>p(v,m,w)),y=r.map(v=>H(v))}}},ae=(t=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:f,setBackground:s,rand:l}=I(),{getDifficultyRad:o}=N();return n=[...n.splice(l(n.length-1),n.length),...n],t||d(()=>{const{s:a}=f(),e=o(),i=Math.round(a*e),r=Math.round(innerWidth/i/2)-1,y=(innerWidth-2*i*r)/(r+1),M=Math.round(innerHeight/i/2)-1,h=(innerHeight-2*i*M)/(M+1),u=innerWidth>=innerHeight,p=u?r:M,v=u?y:h,m=u?innerWidth:innerHeight;let w=0;const g=[];for(let P=0;P<p;P++)n[w]||(w=0),g.push(`${n[w]} ${(v+i+P*i*2+v*P)/m*100}%`),w++;s(`linear-gradient(${u?"to right":"to bottom"}, ${g.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},Ee=({palette:t,retry:n,popEffect:d=()=>{}})=>{const{addEventResize:f,useMeasure:s,rand:l,useTimer:o,useScreenMeta:c,navigate:a,addEventClick:e,intersect:i}=I(),{from:r}=c(),{getDifficultyRad:y}=N(),M=[];let h=[],u,p,v,m={x:0,y:0,r:0};const w=S=>Array.isArray(t)?t[S]:t;return f(()=>{const{s:S}=s();M.splice(0);const P=y(),x=Math.round(S*P),E=Math.round(innerWidth/x/2)-1,b=(innerWidth-2*x*E)/(E+1),C=Math.round(innerHeight/x/2)-1,R=(innerHeight-2*x*C)/(C+1),z=innerWidth>=innerHeight;let k=0;for(let L=0;L<C;L++){for(let A=0;A<E;A++){w(k)||(k=0);const T={x:b+x+A*x*2+b*A,y:R+x+L*x*2+R*L,r:x,c:w(k),p:!0};L===0&&A===E-1?(m={x:T.x,y:T.y,r:T.r,c:T.c,p:(r==="main"||r==="gameover"||r==="gamescore")&&!m.r},u=H(m),p=Se(m)):M.push(T),k+=z?1:0}k=z?0:k+1}n&&(v=M[l(M.length-1)],o(()=>{d(v,!1,!0),v.p=!1})),h=M.map(L=>H(L))}),o(()=>{m.p&&d(m,!1,!0),m.p=!1}),n&&e((S,P)=>{i({x:S,y:P},v)&&(d(v),v.p=!0,o(()=>{a("game")},100))}),e((S,P)=>{i({x:S,y:P},m)&&(d(m),m.p=!0,o(()=>{a("main")},100))}),{render:()=>{h.forEach(S=>S()),u(),m!=null&&m.p||p()},popits:M,pausePpt:m}},Y=100,K="#222",Ke=t=>{const n=(t==null?void 0:t[0])||0,d=(t==null?void 0:t[1])||0,f=(t==null?void 0:t[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(d<255?d<1?0:d:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},re={},Je=t=>{const{ctx:n,createImg:d,useRandChain:f,useTimer:s}=I();let l,o=!1,c=[];const a=t.r*2/Y/2;re[t.imgSrc]?l=re[t.imgSrc]:(l=re[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},l.img.src=t.imgSrc);const e=()=>s(()=>{o=!o,e()},250),i=(u,p=n)=>{const{x:v,y:m,c:w,r:g}=u;p.fillStyle=w||"red",p.beginPath(),p.arc(v+g,m+g,g,0,Math.PI*2),p.closePath(),p.fill()},r=(u=n,p=0,v=0)=>{u.fillStyle=K,u.beginPath(),u.roundRect(p,v,2*t.r,2*t.r,a),u.closePath(),u.fill()},y=()=>{const u=[];for(let g=0;g<Y;g++)for(let S=0;S<Y;S++){const P={x:S*a*2,y:g*a*2,r:a,c:K};u.push(P)}let p=t.score-t.winScore;const v=[...u],m=f(t.seed),w=(g=!1)=>{const S=m(v.length-1),P=v[S],x=u.indexOf(P);P.c=g?K:l.cols[x],v.splice(S,1),g&&c.push({...P,c:l.cols[x]})};for(let g=p;g>0;g--)w();if(t.winScore){c=[];for(let g=t.winScore;g>0;g--)w(!0);e()}return u},M=()=>{const u=y();l.drawImg=d((p=n)=>{r(p),u.filter(v=>v.c!==K).forEach(v=>i(v,p))},2*t.r)},h=async()=>{var v;const u=document.createElement("canvas");u.width=Y,u.height=Y;const p=u.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(l.img,0,0);for(let m=0;m<Y;m++){const w=[];for(let g=0;g<Y;g++){const S=(v=p==null?void 0:p.getImageData(g,m,1,1))==null?void 0:v.data;w.push(Ke(S))}l.cols.push(...w)}l.isFilled=!0,M()};return l.isFilled?(l.r!==t.r||l.score!==t.score)&&M():l.img.onload=h,(u=n)=>{const{x:p,y:v,r:m,winScore:w}=t;if(l.drawImg?u.drawImage(l.drawImg,p-m,v-m,2*m,2*m):r(u,p-m,v-m),o&&w&&l.drawImg)for(const g of c)u.fillStyle=g.c||"red",u.beginPath(),u.arc(p-m+g.x+g.r,v-m+g.y+g.r,g.r,0,Math.PI*2),u.closePath(),u.fill()}},ie=1e4,xe=(t=0,n=!1)=>{const{addEventResize:d,useMeasure:f,translate:s}=I(),{getScore:l}=N(),o=["./media/levels/sloth.png","./media/levels/rabbit.png","./media/levels/bear.png","./media/levels/horse.png","./media/levels/fish.png","./media/levels/lion.png","./media/levels/elephant.png","./media/levels/tiger.png","./media/levels/crocodile.png","./media/levels/beaver.png","./media/levels/giraffe.png","./media/levels/penguin.png","./media/levels/wolf.png","./media/levels/chiken.png","./media/levels/pig.png","./media/levels/shimp.png","./media/levels/corgi.png","./media/levels/cow.png","./media/levels/deer.png","./media/levels/donkey.png","./media/levels/panda.png","./media/levels/dinosaur.png","./media/levels/rat.png","./media/levels/turtle.png","./media/levels/cockroach.png","./media/levels/parrot.png","./media/levels/kangaroo.png","./media/levels/spider.png","./media/levels/squirrel.png","./media/levels/stork.png","./media/levels/whale.png","./media/levels/cat-c.png"],c=l();let a,e=0,i=0,r=!1,y=!1;const M=g=>Math.min(Math.floor(g/ie),o.length-1);let h=M(c-t);t&&(r=M(c)!==h,y=Math.floor(c/ie)>o.length-1);const u=()=>{const{cx:g,cy:S,s:P,isL:x}=f();a=[],e=(P-2*P*.055*1.6)/2,i=P*.05;let E=n?h:Math.max(h-1,0);for(E;E<(n?h+1:Math.min(h+2,o.length));E++){const b=o[E],C=x?g:g+E*e*2+E*i,R=x?S+E*e*2+E*i:S;a.push(Je({x:C,y:R,r:e,score:Math.min(c-E*ie,1e4),imgSrc:b,winScore:r||y?0:t,seed:E}))}};return d(u),{up:()=>{h=h+1<o.length?h+1:o.length-1,u()},down:()=>{h=h-1<0?0:h-1,u()},render:()=>{const{isL:g}=f(),S=g?0:-(h*e*2+h*i),P=g?-(h*e*2+h*i):0;s(()=>{a==null||a.forEach(x=>x())},S,P)},rect:()=>{const{cx:g,cy:S}=f(),P=innerWidth>innerHeight;return{x:P?g-e:0,y:P?0:S-e,w:P?2*e:innerWidth,h:P?innerHeight:2*e}},isJump:r,isCompleted:y}},Qe=({popits:t,pausePpt:n,popEffect:d=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:s,rand:l,addEventClick:o,addEventMove:c,intersect:a,navigate:e,addEventResize:i}=I(),{getScore:r,addScore:y,getDifficultyTic:M}=N();let h=[],u,p,v=!1,m=0,w=0,g=0,S,P,x=!1;const E=r(),b=M(),C=()=>{S&&P&&w&&!x&&new Date().getTime()-S.getTime()<=P*350&&(w=w*2),S=new Date,P=h.length,x=!1},R=T=>{const D=t.filter(B=>h.indexOf(B)===-1&&B!==T),O=l(D.length-1),W=D[O];W&&(d(W,!1,!0),W.p=!1,h.push(D[O]))},z=()=>{p=s(()=>{if(g=Math.max(g-10,50),t.length===h.length){v=!0,p==null||p.stop(),s(()=>{e("gameover")});return}R(),z()},g)},k=T=>{h=[];const D=t.length;let O=l(Math.round(D*.3),Math.round(D*.6));for(const B of t)B.p=!0;const W=[...t];if(T){const B=W.indexOf(T);W.splice(B,1)}for(let B=O;B>0;B--){const de=l(W.length-1),Z=W[de];Z.p=!1,d(Z,!1,!0),h.push(Z),W.splice(de,1)}g=b,u==null||u.stop(),p==null||p.stop(),p=null,E&&(u=s(()=>{f("SLOWLY"),z()},h.length*b)),m=m>0?m:l(3,5),C()},L=T=>{d(T),g=Math.min(g+5,b),w++,T.p=!0;const D=h.indexOf(T);h.splice(D,1),h.length<=0&&(m--,m>0?s(()=>{f(m>1?"Round":"Last"),k(T)},100):(C(),u==null||u.stop(),p==null||p.stop(),y(w),s(()=>{e("gamescore",{winScore:w})},100)))},A=(T,D,O=!1)=>{if(!v){for(const W of h)if(a({x:T,y:D},W)){L(W);return}if(!a({x:T,y:D},n)&&!O){for(const W of t)if(a({x:T,y:D},W)){d(W,!0),f("Popenalty"),x=!0,R(W),p===null&&(u==null||u.stop(),z());return}f("Popenalty"),x=!0,R()}}};o(A),c((T,D)=>A(T,D,!0)),i(()=>{s(()=>{m=0,w=0,f("Pop it"),k()})})},Ze=t=>{const{addEventResize:n,createImg:d,useMeasure:f,ctx:s,loop:l}=I();let o,c,a,e,i,r,y,M=!1,h=-2;const u=.1;return n(()=>{const{s:p,m:v,cy:m}=f();c=Math.round(p*.16),i=p,r=Math.round(c*1.5),a=0,e=Math.max(Math.round((innerHeight-m-p/2)/2-c/2)+v*4,Math.round(m-p/2-c*2)),y=e,M=e-c/2>-(c/2)+v*2;const w={fs:c,text:t,x:Math.round(p/2),y:c,c:"#f9f9f9",mw:Math.round(p*.8),f:"PressStart2P"},g=_(w);o=d((S=s)=>{g(S)},i,r)}),l(()=>{const{m:p}=f();e+=h,h+=u,e<=p&&(e=p),e>=y&&(e=y,h=-2)}),()=>{M&&s.drawImage(o,a,e,i,r)}},et=()=>{const{addEventResize:t,rand:n,useScreenMeta:d,sdk:f}=I(),{from:s}=d();s==="opening"?f.ready():s==="game"&&(f.gameplayStop(),f.showFullscreenAdv());const{popEffect:l,render:o}=X(),c=["#00dcfe","#5bb2f7","#92E6E6"],a=s==="opening"?c[0]:c[n(c.length-1)],{render:e,setIntersections:i}=we({color:a}),{render:r,point:y}=Ve({popEffect:l}),{render:M,point:h}=Pe({popEffect:l}),{render:u,point:p}=Ne({popEffect:l}),{render:v,point:m}=Ue({popEffect:l});return t(()=>{const w=p(),g=y(),S=h(),P=m();i((x,E,b)=>!$({x,y:E,r:b},w)&&!$({x,y:E,r:b},g)&&!$({x,y:E,r:b},S)&&!$({x,y:E,r:b},P))}),()=>{o(),e(),r(),M(),u(),v()}},tt=()=>{const{useMeasure:t,addEventResize:n,sdk:d}=I();d.gameplayStart();const f=ae(),{popEffect:s,render:l}=X(),{popits:o,render:c,pausePpt:a}=Ee({palette:f,popEffect:s});return Qe({popits:o,popEffect:s,pausePpt:a}),n(()=>{(o[0].y-o[0].r)/t().m}),()=>{l(),c()}},nt=()=>{const{setBackground:t,sdk:n}=I();n.gameplayStop();const d="#ff6347",{popEffect:f,render:s}=X(),{minusDifficulty:l}=N(),{render:o}=Ee({palette:d,retry:!0,popEffect:f}),{playFail:c}=V();return t(d),l(),c(),()=>{s(),o()}},ot=()=>{const{useScreenMeta:t,useTimer:n,navigate:d,sdk:f}=I();f.gameplayStop();const{plusDifficulty:s,resetDifficulty:l}=N(),o=ce(),{data:c}=t(),{popEffect:a,render:e}=X();ae();const{playWin:i,playComplete:r}=V(),{render:y,isJump:M,isCompleted:h}=xe(c==null?void 0:c.winScore,!0);let u,p;if(!h){const{render:m}=Pe({popEffect:a}),{render:w}=Xe({popEffect:a});u=m,p=w}const v=Ze(h?o.theEnd:M?o.complete:o.youWin);return M||h?(l(),r()):(s(),i()),h&&n(()=>{d("devs")},5e3),()=>{e(),y(),h||(u(),p()),v()}},st=()=>{const{addEventResize:t,rand:n,sdk:d}=I(),{popEffect:f,render:s}=X(),l=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],o=l[n(l.length-1)],{render:c,setIntersections:a}=we({color:o,frequency:10});d.showBannerAdv();const{render:e,rect:i,up:r,down:y}=xe(),{render:M,point:h}=Me({popEffect:f}),{render:u,point:p}=Ye({onClick:r,popEffect:f}),{render:v,point:m}=Ge({onClick:y,popEffect:f});return t(()=>{const w=h(),g=i(),S=p(),P=m();a((x,E,b)=>!$({x,y:E,r:b},w)&&!He({x,y:E,r:b},g)&&!$({x,y:E,r:b},S)&&!$({x,y:E,r:b},P))}),()=>{s(),c(),e(),M(),u(),v()}},rt=()=>{var g,S;const{addEventResize:t,setBackground:n,createImg:d,useMeasure:f,ctx:s,loop:l,navigate:o,useTimer:c}=I(),{popEffect:a,render:e}=X();let i=null;const r=ae(!0),y=ce();let M=[];const h=y.positions;let u=0,p=!1;const v=()=>{const{m:P,s:x}=f();M=[];const E=Math.round(x*.75),b=Math.round((innerWidth-E)/2);let C=0,R=Math.round(P*7);const z=_({text:"Yola",c:"#f1f1f1",x:E/2,y:R,fs:R}),k=_({text:"PopiT",c:"#ffeb3b",x:E/2,y:R*2,fs:R}),L=d((A=s)=>{z(A),k(A)},E,3*R);M.push({img:L,x:b,y:u,w:E,h:5*R}),u+=7*R,R=Math.round(P*3.5);for(const A of h){r[C]||(C=0);const T=_({text:A.toLocaleUpperCase(),x:0,y:R,c:r[C],fs:Math.round(R*.6),mw:E,a:"left",f:"PressStart2P"}),D=_({text:y.dev,x:E,y:R*1.9,c:"#f9f9f9",fs:Math.round(R*.5),mw:E,a:"right",f:"PressStart2P"}),O=d((W=s)=>{T(W),D(W)},E,2*R);M.push({img:O,x:b,y:u,w:E,h:5*R}),u+=5*R,C++}};t(v),n("#040404");const m=()=>{for(const x of M)x.y-=2;const P=M[M.length-1];P.y+P.h<0&&o("main")},w=()=>{u=innerHeight,v(),l(m),p=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(S=document==null?void 0:document.fonts)==null||S.ready.then(w):w(),c(()=>{const{render:P}=Me({popEffect:a});i=P},7500),()=>{s.globalAlpha=p?1:0,M.forEach(({img:P,x,y:E,w:b,h:C})=>{E+C>=0&&E<=innerHeight&&s.drawImage(P,x,E,b,C)}),e(),i==null||i(),s.globalAlpha=1}},it=()=>({ready:()=>{},showFullscreenAdv:()=>{},gameplayStart:()=>{},gameplayStop:()=>{},showBannerAdv:()=>{}}),ct=[{name:"opening",ctor:Oe},{name:"main",ctor:et},{name:"game",ctor:tt},{name:"gameover",ctor:nt},{name:"gamescore",ctor:ot},{name:"score",ctor:st},{name:"devs",ctor:rt}],at=["./sounds/pop/pop1.mp3","./sounds/pop/pop2.mp3","./sounds/pop/pop3.mp3","./sounds/pop/pop4.mp3","./sounds/pop/pop5.mp3","./sounds/pop/pop6.mp3","./sounds/pop/pop7.mp3","./sounds/pop/pop8.mp3","./sounds/pop/pop9.mp3","./sounds/pop/pop10.mp3","./sounds/pop/pop11.mp3","./sounds/pop/pop12.mp3","./sounds/pop/pop13.mp3","./sounds/pop/pop14.mp3","./sounds/pop/pop15.mp3","./sounds/pop/pop16.mp3","./sounds/pop/pop17.mp3","./sounds/pop/pop18.mp3","./sounds/pop/pop19.mp3","./sounds/pop/pop20.mp3","./sounds/pop/pop21.mp3","./sounds/pop/pop22.mp3","./sounds/pop/pop23.mp3","./sounds/pop/pop24.mp3","./sounds/fail.mp3","./sounds/wrong.mp3","./sounds/win.mp3","./sounds/complete.mp3"];document.title="Yo last Pop it";document.body.oncontextmenu=()=>!1;const dt=async()=>{const t="production";let n;n=it(),"serviceWorker"in navigator&&t!=="development"&&navigator.serviceWorker.register("./sw.js",{scope:"./"}),Fe(ct,at,n)};dt();
