(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const t of d.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function c(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function h(s){if(s.ep)return;s.ep=!0;const d=c(s);fetch(s.href,d)}})();const Ce=()=>{const n=document.createElement("canvas"),o=n.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const c=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},h=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return c(),document.body.appendChild(n),{ctx:o,render:h,resize:c,rotate:(e,r,i,m)=>{o.save(),o.translate(r,i),o.rotate(Math.PI*m),o.translate(-r,-i),e(),o.restore()},translate:(e,r,i)=>{o.save(),o.translate(r,i),e(),o.restore()},shade:(e,r)=>{e=e.substring(1);const i=parseInt(e,16),m=Math.round(2.55*r),w=(i>>16)+m,p=(i>>8&255)+m,u=(i&255)+m;return"#"+(16777216+(w<255?w<1?0:w:255)*65536+(p<255?p<1?0:p:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},setBackground:(e,r)=>{var i;document.body.style.background=e,document.body.style.backgroundColor=r||e,(i=document.querySelector('meta[name="theme-color"]'))==null||i.setAttribute("content",r||e)},createImg:(e,r,i=r)=>{const m=document.createElement("canvas"),w=m.getContext("2d");if(!w)throw new Error("CanvasRenderingContext2D is null");return m.width=r*devicePixelRatio,m.height=i*devicePixelRatio,w.scale(devicePixelRatio,devicePixelRatio),e(w),m}}},xe=n=>{let o="",c="",h;const s=a=>n.find(l=>l.name===a)||n[0],t={render:()=>{},navigate:(a,l)=>{const e=s(a);c=o||"",o=(e==null?void 0:e.name)||"",h=l,t.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:c,data:h})};return t},be=()=>{const n=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),o=[],c={};return{loop:(t,a)=>{if(Object.entries(c).find(([e,r])=>r===t)||a&&c[a])throw new Error(`Loop${a?" "+a:""} already specified`);a&&o.push(a),a=a||new Date().valueOf().toString(),c[a]=t;const l=()=>{t(),c[a]&&n(l)};l()},stop:t=>{if(typeof t=="string")delete c[t];else{const a=Object.entries(c).find(([l,e])=>e===t);a&&delete c[a[0]]}},stopAll:()=>{for(const t in c)o.indexOf(t)===-1&&delete c[t]}}};let J=[];const Ie=()=>{for(const n of J)clearTimeout(n);J=[]},Re=(n,o=400)=>{let c=new Date,h=o,s=setTimeout(n,h);return J.push(s),{pause:()=>{clearTimeout(s),h-=new Date-c},resume:()=>{c=new Date,clearTimeout(s),s=setTimeout(n,h),J.push(s)},stop:()=>{clearTimeout(s)}}},de=2147483646,ee=2147483647,Te=16807,ke=(n=Math.floor(Math.random()*ee))=>{n=n%ee,n<=0&&(n+=de);const o=()=>(n=n*Te%ee,n),c=()=>(o()-1)/de;return(s,d)=>(d===void 0&&(d=s,s=0),Math.floor(c()*(d-s+1))+s)},We=(n,o)=>(o===void 0&&(o=n,n=0),Math.floor(Math.random()*(o-n+1))+n),De=()=>{const n=[],o=[],c=[];return{addEventResize:r=>{r(),n.push(r)},onResizeEvents:()=>n.forEach(r=>r()),addEventClick:r=>o.push(r),onClickEvents:(r,i)=>o.forEach(m=>m(r,i)),addEventMove:r=>c.push(r),onMoveEvents:(r,i)=>c.forEach(m=>m(r,i)),removeAllEvents:()=>{n.splice(0),o.splice(0),c.splice(0)}}},B=(n,o)=>{const c=Math.pow(Math.abs(n.x-o.x),2),h=Math.pow(Math.abs(n.y-o.y),2),s=n.r||0,d=o.r||0,t=Math.pow(s+d,2);return c+h<=t},He=(n,o)=>{const c=n.r||0,h=o.w||0,s=o.h||0;return Math.abs(o.x+h/2-n.x)<=h/2+c&&Math.abs(o.y+s/2-n.y)<=s/2+c},Ae=(n,o)=>B(n,o),ze=n=>{const o=new AudioContext,c={},h=t=>{fetch(t).then(a=>a.arrayBuffer()).then(a=>(o==null?void 0:o.decodeAudioData(a))||null).then(a=>{a&&(c[t]=a)})};if(n.length)for(const t of n)h(t);let s=!0;const d=(t,a)=>{s&&setTimeout(async()=>{const l=o.createBufferSource();c[t]||(c[t]=await fetch(t).then(e=>e.arrayBuffer()).then(e=>(o==null?void 0:o.decodeAudioData(e))||null)),l.buffer=c[t],l.connect(o.destination),a&&(l.playbackRate.value=a),l.start()},0)};return window.onfocus=()=>{s=!0},window.onblur=()=>{s=!1},d};let Q;const Le=(n,o)=>{if(Q)throw new Error("Webcore already specified");const c=Ce(),h=xe(n),{loop:s,stop:d,stopAll:t}=be(),{addEventResize:a,onResizeEvents:l,addEventClick:e,onClickEvents:r,addEventMove:i,onMoveEvents:m,removeAllEvents:w}=De();let p=innerWidth/2,u=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight;const P=()=>({cx:p,cy:u,s:f,m:v,isL:g}),y=ze(o);Q={font:"Tijuf",ctx:c.ctx,shade:c.shade,rotate:c.rotate,translate:c.translate,setBackground:c.setBackground,createImg:c.createImg,useMeasure:P,useScreenMeta:h.useScreenMeta,navigate:(M,E)=>{if(!n.some(S=>S.name===M))throw new Error(`Screen ${M} not specified`);t(),Ie(),w(),new Promise(()=>h.navigate(M,E))},loop:s,loopStop:d,useTimer:Re,rand:We,useRandChain:ke,intersect:Ae,addEventResize:a,addEventClick:e,addEventMove:i,playSound:y},s(()=>c.render(h.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight,c.resize(),l()},document.onpointerdown=M=>{r(M.clientX,M.clientY)},document.onmousemove=M=>{m(M.clientX,M.clientY)},h.navigate()},b=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},H=n=>{const{shade:o,ctx:c,createImg:h}=b(),s=()=>{const{r:t,c:a="#ffffff",p:l}=n,e=c.createRadialGradient(t,t,t,t,t,t/5);return e.addColorStop(0,o(a,0)),e.addColorStop(.01,o(a,0)),e.addColorStop(.075,o(a,9)),e.addColorStop(.15,o(a,0)),e.addColorStop(.15,o(a,-15)),e.addColorStop(.18,o(a,-5)),e.addColorStop(.22,o(a,-15)),l?(e.addColorStop(.24,o(a,-10)),e.addColorStop(.3,o(a,-8)),e.addColorStop(.34,o(a,-12)),e.addColorStop(.6,o(a,-8)),e.addColorStop(1,o(a,-6))):(e.addColorStop(.24,o(a,-12)),e.addColorStop(.26,o(a,-8)),e.addColorStop(.3,o(a,-2)),e.addColorStop(.34,o(a,0)),e.addColorStop(.5,o(a,5)),e.addColorStop(1,o(a,18))),e},d=()=>{const{r:t,c:a="#ffffff",p:l}=n,e=`${a}_${l?"push":"pop"}_${t}`;if(te[e])return te[e];const r=h((i=c)=>{const m=s();i.fillStyle=m,i.beginPath(),i.arc(t,t,t,0,2*Math.PI),i.closePath(),i.fill()},2*t);return te[e]=r,r};return(t=c)=>{const{x:a,y:l,r:e}=n,r=d();t.drawImage(r,a-e,l-e,2*e,2*e)}},ne={},V=n=>{const{ctx:o}=b();let c;return ne[n.src]?c=ne[n.src]:(c=new Image,c.src=n.src,ne[n.src]=c),(h=o)=>{const{w:s,h:d=s,x:t=0,y:a=0}=n;c.complete&&h.drawImage(c,t,a,s,d)}},le=n=>{const{font:o,ctx:c}=b(),h=n.text,s=n.text.length,d=2*Math.PI/s/4;return(t=c)=>{const{x:a,y:l,r:e,s:r=0,fs:i}=n,m=i||Math.round(e/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${m}px ${o}`,t.save(),t.translate(a,l),t.rotate(r);for(let w=0;w<s;w++)t.save(),t.rotate(w*d),t.fillText(h[w],0,-e),t.restore();t.restore()}},O=n=>{const{font:o,ctx:c}=b();return(h=c)=>{const{text:s,x:d,c:t,y:a,fs:l,a:e="center",mw:r,f:i}=n;h.textAlign=e,h.fillStyle=t,h.font=`${l}px ${i||o}`,h.fillText(s,d,a,r)}},Fe=()=>{var E,S;const{ctx:n,loop:o,rotate:c,navigate:h,useMeasure:s,addEventClick:d,addEventResize:t,setBackground:a,useTimer:l}=b();a("#040404");let e=!1,r,i,m,w,p,u,f=-.2,v=0,g=!1;t(()=>{const{cx:C,cy:I,s:x}=s(),T=Math.round(x*.25);r={c:"#ff6347",x:C,y:I,r:T,p:!1},i=H(r),m=V({x:C-T+Math.round(T*.35),y:I-T+Math.round(T*.35),w:T*2-Math.round(T*.7),src:"/media/sloth.svg"}),w=le({text:"nezabotin",x:C,y:I,r:Math.round(T*1.1),s:Math.PI*1.6}),p=le({text:"production",x:C,y:I,r:Math.round(T*1.1),s:Math.PI*2.6}),u=O({text:"tab to skip",c:"#f1f1f1",y:innerHeight-Math.round(T/5),x:C,fs:Math.round(T/6),f:"Slackey"})});const P=()=>{f+=.01,v=f>=1?1:f,f>=1.8&&(r.p=!0),f>=2.2&&(r.c="#f86a9a"),f>=2.6&&h("main")};d(()=>{[1.4,1.8,2.2,2.6].some(C=>{if(f<C)return f=C,!0})});const y=()=>{o(P),e=!0};(E=document==null?void 0:document.fonts)!=null&&E.ready?(S=document==null?void 0:document.fonts)==null||S.ready.then(y):y();const M=()=>l(()=>{g=!g,M()},250);return M(),()=>{const{cx:C,cy:I}=s();n.globalAlpha=e?1:0,i(),f<1.8&&m(),f<1.4&&c(()=>{w(),p()},C,I,v),g&&u(),n.globalAlpha=1}},ue="ylp",pe="score",oe="difficulty",fe="sound",se=[.14,.11,.09,.075],he=750,_e=350,me=10,G=[];for(let n=0;n*me<=he-_e;n++)G.push(he-n*me);let U=null;const $=()=>{const n=p=>localStorage.getItem(`${ue}_${p}`),o=(p,u)=>localStorage.setItem(`${ue}_${p}`,u.toString()),c=()=>+(n(pe)||0),h=p=>o(pe,p),s=p=>{const u=c();h(u+p)},d=()=>+(n(oe)||0),t=p=>{const u=d();o(oe,Math.min(Math.max(u+p,0),se.length*G.length-1))};return{getScore:c,addScore:s,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const p=d(),u=Math.floor(p/G.length);return se[u]||se[1]},getDifficultyTic:()=>{const p=d(),u=Math.floor(p/G.length),f=p-u*G.length;return G[f]||G[0]},resetDifficulty:()=>o(oe,0),getSound:()=>{if(U!==null)return U;const p=n(fe);return!p||p==="true"?(U=!0,!0):(U=!1,!1)},setSound:p=>{U=p,o(fe,p)}}};let Me=["/sounds/pop/pop1.mp3","/sounds/pop/pop2.mp3","/sounds/pop/pop3.mp3","/sounds/pop/pop4.mp3","/sounds/pop/pop5.mp3","/sounds/pop/pop6.mp3","/sounds/pop/pop7.mp3","/sounds/pop/pop8.mp3","/sounds/pop/pop9.mp3","/sounds/pop/pop10.mp3","/sounds/pop/pop11.mp3","/sounds/pop/pop12.mp3","/sounds/pop/pop13.mp3","/sounds/pop/pop14.mp3","/sounds/pop/pop15.mp3","/sounds/pop/pop16.mp3","/sounds/pop/pop17.mp3","/sounds/pop/pop18.mp3","/sounds/pop/pop19.mp3","/sounds/pop/pop20.mp3","/sounds/pop/pop21.mp3","/sounds/pop/pop22.mp3","/sounds/pop/pop23.mp3","/sounds/pop/pop24.mp3"],L=[...Me];const q=()=>{const{rand:n,playSound:o}=b(),{getSound:c}=$();return{playPop:()=>{if(!c())return;const l=n(L.length-1),e=L[l];L.splice(l,1),L.length||(L=[...Me]);const r=n(L.length-1);L=[...L.splice(r,L.length),...L],o(e)},playMissed:()=>{if(!c())return;o("/sounds/wrong.mp3")},playFail:()=>{if(!c())return;o("/sounds/fail.mp3")},playWin:()=>{if(!c())return;o("/sounds/win.mp3")},playComplete:()=>{if(!c())return;o("/sounds/complete.mp3")}}},j=100/2;let ge=0;const X=()=>{const{loop:n,ctx:o,shade:c,rand:h}=b(),{playPop:s,playMissed:d}=q(),t={},a=()=>{for(const r in t){const i=t[r];if(!i)return;const m=i.popit;if(!i.shake)i.tic+=j/5,i.tic>=j&&(i.dir=-1),i.withoutRad||(m.r=i.origR+i.origR*75e-5*(i.tic+(i.dir>0?0:j-i.tic)));else{i.tic+=j/5;const w=h(1,2),p=h(1,2);m.x=i.origX+Math.random()*w*(Math.random()>.5?1:-1),m.y=i.origY+Math.random()*p*(Math.random()>.5?1:-1)}i.tic>=2*j&&(delete t[r],m.r=i.origR,m.x=i.origX,m.y=i.origY)}},l=(r,i=!1,m=!1)=>{var P;i?d():s(),(P=navigator==null?void 0:navigator.vibrate)==null||P.call(navigator,30),ge++;const w=`${new Date().valueOf().toString()}_${ge}`,p=1,u=1;let f=r.r,v=r.x,g=r.y;for(const y in t){const M=t[y];r===M.popit&&(f=M.origR,v=M.origX,g=M.origY)}t[w]={withoutRad:i,tic:p,dir:u,popit:r,origR:f,origX:v,origY:g,shake:m}},e=()=>{o.globalAlpha=.25;for(const r in t){const i=t[r];if(i.shake)continue;const m=i.popit;o.fillStyle=c(m.c||"red",-12),o.beginPath(),o.arc(m.x,m.y,m.r+i.origR*.001*(i.tic+(i.dir>0?0:j-i.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return n(a),{popEffect:l,render:e}},Be=({color:n="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:d,navigate:t,addEventClick:a,intersect:l}=b(),{from:e}=d();let r,i,m;return c(()=>{const{cx:u,cy:f,s:v,m:g}=h(),P=Math.round(v*.25);r={c:n,r:Math.round(v*.08),x:u-P-1*g,y:f-P+1*g,p:(e==="score"||e==="opening"||e==="devs")&&!r},i=H(r),m=V({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),a((u,f)=>{l({x:u,y:f},r)&&(o(r),r.p=!0,s(()=>{t("score")},100))}),{render:()=>{i(),r.p||m()},point:()=>({x:r.x,y:r.y,r:r.r})}},ye=({color:n="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,navigate:d,addEventClick:t,intersect:a}=b();let l,e,r;return c(()=>{const{s:w}=h(),p=Math.round(w*.08);l={c:n,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:!l},e=H(l),r=V({x:Number(l.x)-p+Math.round(p*.4),y:Number(l.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),s(()=>{l.p&&o(l,!1,!0),l.p=!1}),t((w,p)=>{a({x:w,y:p},l)&&(o(l),l.p=!0,s(()=>{d("main")},100))}),{render:()=>{e(),l.p||r()},point:()=>({x:l.x,y:l.y,r:l.r})}},Oe=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,addEventClick:d,intersect:t,rotate:a}=b(),{playPop:l}=q();let e,r,i;return c(()=>{const{s:p}=h(),u=Math.round(p*.08);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},r=H(e),i=V({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),d((p,u)=>{t({x:p,y:u},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{r(),e.p||a(()=>{i()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},$e=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,addEventClick:d,intersect:t,rotate:a}=b(),{playPop:l}=q();let e,r,i;return c(()=>{const{s:p}=h(),u=Math.round(p*.08),f=innerWidth<innerHeight?Math.round(innerWidth-1.6*u-2*u-.3*u):Math.round(innerWidth-1.6*u),v=innerWidth<innerHeight?Math.round(innerHeight-1.6*u):Math.round(innerHeight-1.6*u-2*u-.3*u);e={c:"#ff6347",r:u,x:f,y:v,p:!1},r=H(e),i=V({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),d((p,u)=>{t({x:p,y:u},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{r(),e.p||a(()=>{i()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Ne=n=>{const{ctx:o,shade:c}=b(),h=Math.round(n.r/2.2),s=Math.round(.15*n.r),d=c(n.c||"blue",-3);return(t=o)=>{const{r:a,x:l=a,y:e=a}=n;t.lineCap="round",t.fillStyle=d,t.strokeStyle=d,t.lineWidth=h,t.beginPath(),t.moveTo(l+s,e),t.lineTo(l-s/2,e-s),t.lineTo(l-s/2,e+s),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l+s,e),t.lineTo(l-s/2,e-s),t.moveTo(l-s/2,e-s),t.lineTo(l-s/2,e+s),t.moveTo(l-s/2,e+s),t.lineTo(l+s,e),t.stroke()}},ve=({color:n="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:d,navigate:t,addEventClick:a,intersect:l}=b(),{from:e,to:r}=d();let i,m,w;const p=()=>{const{cx:P,cy:y,s:M,m:E}=h(),S=P+Math.round(M*.25)+2*E,C=y+Math.round(M*.25);return{x:S,y:C}},u=()=>{const{cx:P,cy:y,s:M,isL:E,m:S}=h(),C=Math.round(M*.1);if(E){let I=Math.round(P+M/2)+S*2;const x=Math.round(y+M/2-C*2);return I=Math.min(I,Math.round(innerWidth-C*1.5)),{x:I,y:x}}else{const I=Math.round(P+M*.12);let x=Math.round(y+M/2+C*1.5);return x=Math.min(x,innerHeight-Math.round(C*1.5)),{x:I,y:x}}},f=()=>r==="main"?p():u();return c(()=>{const{s:P}=h();i={c:n,r:Math.round(P*.1),...f(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!i},m=H(i),w=Ne(i)}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),a((P,y)=>{l({x:P,y},i)&&(o(i),i.p=!0,s(()=>{t("game")},100))}),{render:()=>{m(),i.p||w()},point:()=>({x:i.x,y:i.y,r:i.r})}},Pe=n=>{const{ctx:o,shade:c}=b(),h=Math.round(n.r/4),s=Math.round(.12*n.r);return(d=o)=>{const{r:t,x:a=t,y:l=t}=n,e=c(n.c||"blue",-3);d.lineCap="round",d.strokeStyle=e,d.lineWidth=h,d.beginPath(),d.moveTo(a-1.5*s,l-2*s),d.lineTo(a-1.5*s,l+2*s),d.stroke(),d.beginPath(),d.moveTo(a+1.5*s,l-2*s),d.lineTo(a+1.5*s,l+2*s),d.stroke()}},Ye=({popEffect:n=()=>{}})=>{const{addEventResize:o,useMeasure:c,useTimer:h,useScreenMeta:s,navigate:d,addEventClick:t,intersect:a}=b(),{from:l}=s();let e,r,i;const m=()=>{const{cx:u,cy:f,s:v,isL:g,m:P}=c(),y=Math.round(v*.1);if(g){let M=Math.round(u-v/2)-P;const E=Math.round(f-v/2+y*2);return M=Math.max(M,Math.round(y*1.5)),{x:M,y:E}}else{const M=Math.round(u-v*.12);let E=Math.round(f+v/2+y*1.5);return E=Math.min(E,innerHeight-Math.round(y*1.5)),{x:M,y:E}}};return o(()=>{const{s:u}=c();e={c:"#fd8059",r:Math.round(u*.08),...m(),p:(l==="game"||l==="opening")&&!e},r=H(e),i=Pe(e)}),h(()=>{e.p&&n(e,!1,!0),e.p=!1},500),t((u,f)=>{a({x:u,y:f},e)&&(n(e),e.p=!0,h(()=>{d("main")},100))}),{render:()=>{r(),e.p||i()},point:()=>({x:e.x,y:e.y,r:e.r})}},Ge=n=>{const{ctx:o,shade:c}=b(),h=Math.round(n.r/4),s=Math.round(.2*n.r),d=c(n.c||"blue",-5);return(t=o)=>{const{r:a,x:l=a,y:e=a}=n;t.lineCap="round",t.fillStyle=d,t.strokeStyle=d,t.lineWidth=h,t.beginPath(),t.ellipse(l-s,e+s,h,s,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l-s/2,e+s),t.lineTo(l,e-s),t.lineTo(l+s,e-s),t.stroke(),n.on||(t.lineWidth=Math.round(h/3),t.beginPath(),t.moveTo(l-a/4,e-a/4),t.lineTo(l+a/4,e+a/4),t.stroke())}},je=({color:n="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:d,addEventClick:t,intersect:a}=b(),{from:l}=d(),{getSound:e,setSound:r}=$();let i,m,w;return c(()=>{const{cx:f,cy:v,s:g,m:P}=h(),y=Math.round(g*.25),M=Math.round(g*.065),E=e();i={c:n,r:M,x:f-y-M-P,y:v-y+3*M,p:(l==="opening"||l==="devs")&&!i,on:E},m=H(i),w=Ge(i)}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),t((f,v)=>{if(a({x:f,y:v},i)){let g=e();g=!g,r(g),i.p=!0,i.on=g,o(i),s(()=>{i.p=!1},100)}}),{render:()=>{m(),i.p||w()},point:()=>({x:i.x,y:i.y,r:i.r})}},Xe=({color:n="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:d,addEventClick:t,intersect:a,navigate:l}=b(),{from:e}=d();let r,i,m,w,p=0;return c(()=>{const{cx:v,cy:g,s:P}=h(),y=Math.round(P*.25);r={c:n,x:v,y:g,r:y,p:(e==="opening"||e==="devs")&&!r},i=H(r),m=O({text:"Yola",c:"#f1f1f1",x:v,y:g-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),w=O({text:"PopiT",c:"#ffeb3b",x:v,y:g-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),t((v,g)=>{a({x:v,y:g},r)&&!(r!=null&&r.p)&&(p++,o(r),r.p=!0,s(()=>{p>12?l("devs"):(r!=null&&r.p&&o(r,!1,!0),r.p=!1)},200))}),{render:()=>{i(),r.p||(m(),w())},point:()=>({x:r.x,y:r.y,r:r.r})}},we=({color:n="#00dcfe",frequency:o=20})=>{const{addEventResize:c,useRandChain:h,useMeasure:s,rand:d,useTimer:t,setBackground:a,useScreenMeta:l}=b(),{from:e}=l();a(n);const r=d(0,999);let i=[],m=[];c(()=>{const f=h(r),{s:v}=s();i=[];const g=Math.round(v*.04),P=Math.round(innerWidth/g/2)-2,y=Math.round((innerWidth-2*g*P)/(P+1)),M=Math.round(innerHeight/g/2)-2,E=Math.round((innerHeight-2*g*M)/(M+1));for(let S=0;S<M;S++)for(let C=0;C<P;C++)f(f(o))<1&&i.push({x:y+g+C*g*2+y*C,y:E+g+S*g*2+E*S,r:g,c:n,p:e==="opening"?!0:f(1)>0});m=i.map(S=>H(S))});const w=()=>{t(()=>{const f=d(i.length-1);i[f]&&(i[f].p=!i[f].p),w()},750)};return e==="opening"?t(()=>{i.forEach(f=>f.p=d(1)>0),w()}):w(),{render:()=>{m.forEach(f=>f())},setIntersections:f=>{i=i.filter(({x:v,y:g,r:P})=>f(v,g,P)),m=i.map(v=>H(v))}}},ce=(n=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:c,useMeasure:h,setBackground:s,rand:d}=b(),{getDifficultyRad:t}=$();return o=[...o.splice(d(o.length-1),o.length),...o],n||c(()=>{const{s:l}=h(),e=t(),r=Math.round(l*e),i=Math.round(innerWidth/r/2)-1,m=(innerWidth-2*r*i)/(i+1),w=Math.round(innerHeight/r/2)-1,p=(innerHeight-2*r*w)/(w+1),u=innerWidth>=innerHeight,f=u?i:w,v=u?m:p,g=u?innerWidth:innerHeight;let P=0;const y=[];for(let E=0;E<f;E++)o[P]||(P=0),y.push(`${o[P]} ${(v+r+E*r*2+v*E)/g*100}%`),P++;s(`linear-gradient(${u?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},Se=({palette:n,retry:o,popEffect:c=()=>{}})=>{const{addEventResize:h,useMeasure:s,rand:d,useTimer:t,useScreenMeta:a,navigate:l,addEventClick:e,intersect:r}=b(),{from:i}=a(),{getDifficultyRad:m}=$(),w=[];let p=[],u,f,v,g={x:0,y:0,r:0};const P=M=>Array.isArray(n)?n[M]:n;return h(()=>{const{s:M}=s();w.splice(0);const E=m(),S=Math.round(M*E),C=Math.round(innerWidth/S/2)-1,I=(innerWidth-2*S*C)/(C+1),x=Math.round(innerHeight/S/2)-1,T=(innerHeight-2*S*x)/(x+1),_=innerWidth>=innerHeight;let A=0;for(let D=0;D<x;D++){for(let z=0;z<C;z++){P(A)||(A=0);const R={x:I+S+z*S*2+I*z,y:T+S+D*S*2+T*D,r:S,c:P(A),p:!0};D===0&&z===C-1?(g={x:R.x,y:R.y,r:R.r,c:R.c,p:(i==="main"||i==="gameover"||i==="gamescore")&&!g.r},u=H(g),f=Pe(g)):w.push(R),A+=_?1:0}A=_?0:A+1}o&&(v=w[d(w.length-1)],t(()=>{c(v,!1,!0),v.p=!1})),p=w.map(D=>H(D))}),t(()=>{g.p&&c(g,!1,!0),g.p=!1}),o&&e((M,E)=>{r({x:M,y:E},v)&&(c(v),v.p=!0,t(()=>{l("game")},100))}),e((M,E)=>{r({x:M,y:E},g)&&(c(g),g.p=!0,t(()=>{l("main")},100))}),{render:()=>{p.forEach(M=>M()),u(),g!=null&&g.p||f()},popits:w,pausePpt:g}},Y=100,K="#222",Ue=n=>{const o=(n==null?void 0:n[0])||0,c=(n==null?void 0:n[1])||0,h=(n==null?void 0:n[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(c<255?c<1?0:c:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},re={},Ve=n=>{const{ctx:o,createImg:c,useRandChain:h,useTimer:s}=b();let d,t=!1,a=[];const l=n.r*2/Y/2;re[n.imgSrc]?d=re[n.imgSrc]:(d=re[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},d.img.src=n.imgSrc);const e=()=>s(()=>{t=!t,e()},250),r=(u,f=o)=>{const{x:v,y:g,c:P,r:y}=u;f.fillStyle=P||"red",f.beginPath(),f.arc(v+y,g+y,y,0,Math.PI*2),f.closePath(),f.fill()},i=(u=o,f=0,v=0)=>{u.fillStyle=K,u.beginPath(),u.roundRect(f,v,2*n.r,2*n.r,l),u.closePath(),u.fill()},m=()=>{const u=[];for(let y=0;y<Y;y++)for(let M=0;M<Y;M++){const E={x:M*l*2,y:y*l*2,r:l,c:K};u.push(E)}let f=n.score-n.winScore;const v=[...u],g=h(n.seed),P=(y=!1)=>{const M=g(v.length-1),E=v[M],S=u.indexOf(E);E.c=y?K:d.cols[S],v.splice(M,1),y&&a.push({...E,c:d.cols[S]})};for(let y=f;y>0;y--)P();if(n.winScore){a=[];for(let y=n.winScore;y>0;y--)P(!0);e()}return u},w=()=>{const u=m();d.drawImg=c((f=o)=>{i(f),u.filter(v=>v.c!==K).forEach(v=>r(v,f))},2*n.r)},p=async()=>{var v;const u=document.createElement("canvas");u.width=Y,u.height=Y;const f=u.getContext("2d",{willReadFrequently:!0});f==null||f.drawImage(d.img,0,0);for(let g=0;g<Y;g++){const P=[];for(let y=0;y<Y;y++){const M=(v=f==null?void 0:f.getImageData(y,g,1,1))==null?void 0:v.data;P.push(Ue(M))}d.cols.push(...P)}d.isFilled=!0,w()};return d.isFilled?(d.r!==n.r||d.score!==n.score)&&w():d.img.onload=p,(u=o)=>{const{x:f,y:v,r:g,winScore:P}=n;if(d.drawImg?u.drawImage(d.drawImg,f-g,v-g,2*g,2*g):i(u,f-g,v-g),t&&P&&d.drawImg)for(const y of a)u.fillStyle=y.c||"red",u.beginPath(),u.arc(f-g+y.x+y.r,v-g+y.y+y.r,y.r,0,Math.PI*2),u.closePath(),u.fill()}},ie=1e4,Ee=(n=0,o=!1)=>{const{addEventResize:c,useMeasure:h,translate:s}=b(),{getScore:d}=$(),t=["/media/levels/sloth.png","/media/levels/rabbit.png","/media/levels/bear.png","/media/levels/horse.png","/media/levels/fish.png","/media/levels/lion.png","/media/levels/elephant.png","/media/levels/tiger.png","/media/levels/crocodile.png","/media/levels/beaver.png","/media/levels/giraffe.png","/media/levels/penguin.png","/media/levels/wolf.png","/media/levels/chiken.png","/media/levels/pig.png","/media/levels/shimp.png","/media/levels/corgi.png","/media/levels/cow.png","/media/levels/deer.png","/media/levels/donkey.png","/media/levels/panda.png","/media/levels/dinosaur.png","/media/levels/rat.png","/media/levels/turtle.png","/media/levels/cockroach.png","/media/levels/parrot.png","/media/levels/kangaroo.png"],a=d();let l,e=0,r=0,i=!1,m=!1;const w=P=>Math.min(Math.floor(P/ie),t.length-1);let p=w(a-n);return n&&(i=w(a)!==p,m=Math.floor(a/ie)>t.length-1),c(()=>{const{cx:P,cy:y,s:M,isL:E}=h();l=[],e=(M-2*M*.055*1.6)/2,r=M*.05;let S=o?p:0;for(S;S<(o?p+1:t.length);S++){const C=t[S],I=E?P:P+S*e*2+S*r,x=E?y+S*e*2+S*r:y;l.push(Ve({x:I,y:x,r:e,score:Math.min(a-S*ie,1e4),imgSrc:C,winScore:i||m?0:n,seed:S}))}}),{up:()=>{p=p+1<t.length?p+1:t.length-1},down:()=>{p=p-1<0?0:p-1},render:()=>{const{isL:P}=h(),y=P?0:-(p*e*2+p*r),M=P?-(p*e*2+p*r):0;s(()=>{l==null||l.forEach((E,S)=>{(S<=p+1&&S>=p-1||o)&&E()})},y,M)},rect:()=>{const{cx:P,cy:y}=h(),M=innerWidth>innerHeight;return{x:M?P-e:0,y:M?0:y-e,w:M?2*e:innerWidth,h:M?innerHeight:2*e}},isJump:i,isCompleted:m}},qe=({popits:n,pausePpt:o,popEffect:c=()=>{},splashEffect:h=()=>{}})=>{const{useTimer:s,rand:d,addEventClick:t,addEventMove:a,intersect:l,navigate:e,addEventResize:r}=b(),{getScore:i,addScore:m,getDifficultyTic:w}=$();let p=[],u,f,v=!1,g=0,P=0,y=0,M,E,S=!1;const C=i(),I=w(),x=()=>{M&&E&&P&&!S&&new Date().getTime()-M.getTime()<=E*350&&(P=P*2),M=new Date,E=p.length,S=!1},T=R=>{const k=n.filter(N=>p.indexOf(N)===-1&&N!==R),F=d(k.length-1),W=k[F];W&&(c(W,!1,!0),W.p=!1,p.push(k[F]))},_=()=>{f=s(()=>{if(y=Math.max(y-10,50),n.length===p.length){v=!0,f==null||f.stop(),s(()=>{e("gameover")});return}T(),_()},y)},A=R=>{p=[];const k=n.length;let F=d(Math.round(k*.3),Math.round(k*.6));const W=[...n];if(R){const N=W.indexOf(R);W.splice(N,1)}for(let N=F;N>0;N--){const ae=d(W.length-1),Z=W[ae];Z.p=!1,c(Z,!1,!0),p.push(Z),W.splice(ae,1)}y=I,u==null||u.stop(),f==null||f.stop(),f=null,C&&(u=s(()=>{h("SLOWLY"),_()},p.length*I)),g=g>0?g:d(3,5),x()},D=R=>{c(R),y=Math.min(y+5,I),P++,R.p=!0;const k=p.indexOf(R);p.splice(k,1),p.length<=0&&(g--,g>0?s(()=>{h(g>1?"Round":"Last"),A(R)},100):(x(),u==null||u.stop(),f==null||f.stop(),m(P),s(()=>{e("gamescore",{winScore:P})},100)))},z=(R,k,F=!1)=>{if(!v){for(const W of p)if(l({x:R,y:k},W)){D(W);return}if(!l({x:R,y:k},o)&&!F){for(const W of n)if(l({x:R,y:k},W)){c(W,!0),h("Popenalty"),S=!0,T(W),f===null&&(u==null||u.stop(),_());return}h("Popenalty"),S=!0,T()}}};t(z),a((R,k)=>z(R,k,!0)),r(()=>{s(()=>{h("Pop it"),A()})})},Ke=n=>{const{addEventResize:o,createImg:c,useMeasure:h,ctx:s,loop:d}=b();let t,a,l,e,r,i,m,w=!1,p=-2;const u=.1;return o(()=>{const{s:f,m:v,cy:g}=h();a=Math.round(f*.16),r=f,i=Math.round(a*1.5),l=0,e=Math.max(Math.round((innerHeight-innerHeight/2-f/2)/2-a/2)+v*2,Math.round(g-f/2-a*2)),m=e,w=e-a/2>-(a/2)+v*2;const P={fs:a,text:n,x:Math.round(f/2),y:a,c:"#f9f9f9",mw:Math.round(f*.8)},y=O(P);t=c((M=s)=>{y(M)},r,i)}),d(()=>{const{m:f}=h();e+=p,p+=u,e<=f&&(e=f),e>=m&&(e=m,p=-2)}),()=>{w&&s.drawImage(t,l,e,r,i)}},Je=()=>{const{addEventResize:n,rand:o,useScreenMeta:c}=b(),{from:h}=c(),{popEffect:s,render:d}=X(),t=["#00dcfe","#5bb2f7","#92E6E6"],a=h==="opening"?t[0]:t[o(t.length-1)],{render:l,setIntersections:e}=we({color:a}),{render:r,point:i}=Xe({popEffect:s}),{render:m,point:w}=ve({popEffect:s}),{render:p,point:u}=Be({popEffect:s}),{render:f,point:v}=je({popEffect:s});return n(()=>{const g=u(),P=i(),y=w(),M=v();e((E,S,C)=>!B({x:E,y:S,r:C},g)&&!B({x:E,y:S,r:C},P)&&!B({x:E,y:S,r:C},y)&&!B({x:E,y:S,r:C},M))}),()=>{d(),l(),r(),m(),p(),f()}},Qe=()=>{const{useMeasure:n,addEventResize:o}=b(),c=ce(),{popEffect:h,render:s}=X(),{popits:d,render:t,pausePpt:a}=Se({palette:c,popEffect:h});return qe({popits:d,popEffect:h,pausePpt:a}),o(()=>{(d[0].y-d[0].r)/n().m}),()=>{s(),t()}},Ze=()=>{const n="#ff6347",{popEffect:o,render:c}=X(),{setBackground:h}=b(),{minusDifficulty:s}=$(),{render:d}=Se({palette:n,retry:!0,popEffect:o}),{playFail:t}=q();return h(n),s(),t(),()=>{c(),d()}},et=()=>{const{useScreenMeta:n,useTimer:o,navigate:c}=b(),{plusDifficulty:h,resetDifficulty:s}=$(),{data:d}=n(),{popEffect:t,render:a}=X();ce();const{playWin:l,playComplete:e}=q(),{render:r,isJump:i,isCompleted:m}=Ee(d==null?void 0:d.winScore,!0);let w,p;if(!m){const{render:f}=ve({popEffect:t}),{render:v}=Ye({popEffect:t});w=f,p=v}const u=Ke(m?"The end":i?"Complete":"You win");return i||m?(s(),e()):(h(),l()),m&&o(()=>{c("devs")},5e3),()=>{a(),r(),m||(w(),p()),u()}},tt=()=>{const{addEventResize:n,rand:o}=b(),{popEffect:c,render:h}=X(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],d=s[o(s.length-1)],{render:t,setIntersections:a}=we({color:d,frequency:10}),{render:l,rect:e,up:r,down:i}=Ee(),{render:m,point:w}=ye({popEffect:c}),{render:p,point:u}=Oe({onClick:r,popEffect:c}),{render:f,point:v}=$e({onClick:i,popEffect:c});return n(()=>{const g=w(),P=e(),y=u(),M=v();a((E,S,C)=>!B({x:E,y:S,r:C},g)&&!He({x:E,y:S,r:C},P)&&!B({x:E,y:S,r:C},y)&&!B({x:E,y:S,r:C},M))}),()=>{h(),t(),l(),m(),p(),f()}},nt=()=>{var P,y;const{addEventResize:n,setBackground:o,createImg:c,useMeasure:h,ctx:s,loop:d,navigate:t,useTimer:a}=b(),{popEffect:l,render:e}=X();let r=null;const i=ce(!0);let m=[];const w=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Motivator","Mentor"];let p=0,u=!1;const f=()=>{const{m:M,s:E}=h();m=[];const S=Math.round(E*.75),C=Math.round((innerWidth-S)/2);let I=0,x=Math.round(M*7);const T=O({text:"Yo last",c:"#f1f1f1",x:S/2,y:x,fs:x}),_=O({text:"Pop it",c:"#ffeb3b",x:S/2,y:x*2,fs:x}),A=c((D=s)=>{T(D),_(D)},S,3*x);m.push({img:A,x:C,y:p,w:S,h:5*x}),p+=7*x,x=Math.round(M*3.5);for(const D of w){i[I]||(I=0);const z=O({text:D.toLocaleUpperCase(),x:0,y:x,c:i[I],fs:Math.round(x*.6),mw:S,a:"left"}),R=O({text:"Maxim Nezabotin",x:S,y:x*1.5,c:"#f9f9f9",fs:Math.round(x*.6),mw:S,a:"right",f:"Slackey"}),k=c((F=s)=>{z(F),R(F)},S,2*x);m.push({img:k,x:C,y:p,w:S,h:5*x}),p+=5*x,I++}};n(f),o("#040404");const v=()=>{for(const E of m)E.y-=2;const M=m[m.length-1];M.y+M.h<0&&t("main")},g=()=>{p=innerHeight,f(),d(v),u=!0};return(P=document==null?void 0:document.fonts)!=null&&P.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(g):g(),a(()=>{const{render:M}=ye({popEffect:l});r=M},7500),()=>{s.globalAlpha=u?1:0,m.forEach(({img:M,x:E,y:S,w:C,h:I})=>{S+I>=0&&S<=innerHeight&&s.drawImage(M,E,S,C,I)}),e(),r==null||r(),s.globalAlpha=1}},ot=[{name:"opening",ctor:Fe},{name:"main",ctor:Je},{name:"game",ctor:Qe},{name:"gameover",ctor:Ze},{name:"gamescore",ctor:et},{name:"score",ctor:tt},{name:"devs",ctor:nt}],st=["/sounds/pop/pop1.mp3","/sounds/pop/pop2.mp3","/sounds/pop/pop3.mp3","/sounds/pop/pop4.mp3","/sounds/pop/pop5.mp3","/sounds/pop/pop6.mp3","/sounds/pop/pop7.mp3","/sounds/pop/pop8.mp3","/sounds/pop/pop9.mp3","/sounds/pop/pop10.mp3","/sounds/pop/pop11.mp3","/sounds/pop/pop12.mp3","/sounds/pop/pop13.mp3","/sounds/pop/pop14.mp3","/sounds/pop/pop15.mp3","/sounds/pop/pop16.mp3","/sounds/pop/pop17.mp3","/sounds/pop/pop18.mp3","/sounds/pop/pop19.mp3","/sounds/pop/pop20.mp3","/sounds/pop/pop21.mp3","/sounds/pop/pop22.mp3","/sounds/pop/pop23.mp3","/sounds/pop/pop24.mp3","/sounds/fail.mp3","/sounds/wrong.mp3","/sounds/win.mp3","/sounds/complete.mp3"];document.title="Yo last Pop it";const rt=async()=>{"serviceWorker"in navigator&&await navigator.serviceWorker.register("./sw.js"),Le(ot,st)};rt();
