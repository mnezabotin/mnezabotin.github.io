(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&u(r)}).observe(document,{childList:!0,subtree:!0});function d(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(i){if(i.ep)return;i.ep=!0;const a=d(i);fetch(i.href,a)}})();const ut=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},u=o=>{n.clearRect(0,0,innerWidth,innerHeight),o()};return d(),document.body.appendChild(e),{ctx:n,render:u,resize:d,rotate:(o,t,c,h)=>{n.save(),n.translate(t,c),n.rotate(Math.PI*h),n.translate(-t,-c),o(),n.restore()},translate:(o,t,c)=>{n.save(),n.translate(t,c),o(),n.restore()},shade:(o,t)=>{o=o.substring(1);const c=parseInt(o,16),h=Math.round(2.55*t),p=(c>>16)+h,P=(c>>8&255)+h,M=(c&255)+h;return"#"+(16777216+(p<255?p<1?0:p:255)*65536+(P<255?P<1?0:P:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(o,t)=>{var c;document.body.style.background=o,document.body.style.backgroundColor=t||o,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",t||o)},createImg:(o,t,c=t)=>{const h=document.createElement("canvas"),p=h.getContext("2d");if(!p)throw new Error("CanvasRenderingContext2D is null");return h.width=t*devicePixelRatio,h.height=c*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio),o(p),h}}},ft=e=>{let n="",d="",u;const i=s=>e.find(l=>l.name===s)||e[0],r={render:()=>{},navigate:(s,l)=>{const o=i(s);d=n||"",n=(o==null?void 0:o.name)||"",u=l,r.render=(o==null?void 0:o.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:d,data:u})};return r},ht=()=>{const e=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),n=[],d={};return{loop:(r,s)=>{if(Object.entries(d).find(([o,t])=>t===r)||s&&d[s])throw new Error(`Loop${s?" "+s:""} already specified`);s&&n.push(s),s=s||new Date().valueOf().toString(),d[s]=r;const l=()=>{r(),d[s]&&e(l)};l()},stop:r=>{if(typeof r=="string")delete d[r];else{const s=Object.entries(d).find(([l,o])=>o===r);s&&delete d[s[0]]}},stopAll:()=>{for(const r in d)n.indexOf(r)===-1&&delete d[r]}}};let N=[];const pt=()=>{for(const e of N)clearTimeout(e);N=[]},gt=(e,n=400)=>{let d=new Date,u=n,i=setTimeout(e,u);return N.push(i),{pause:()=>{clearTimeout(i),u-=new Date-d},resume:()=>{d=new Date,clearTimeout(i),i=setTimeout(e,u),N.push(i)},stop:()=>{clearTimeout(i)}}},J=2147483646,Y=2147483647,mt=16807,Mt=(e=Math.floor(Math.random()*Y))=>{e=e%Y,e<=0&&(e+=J);const n=()=>(e=e*mt%Y,e),d=()=>(n()-1)/J;return(i,a)=>(a===void 0&&(a=i,i=0),Math.floor(d()*(a-i+1))+i)},vt=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),yt=()=>{const e=[],n=[],d=[];return{addEventResize:t=>{t(),e.push(t)},onResizeEvents:()=>e.forEach(t=>t()),addEventClick:t=>n.push(t),onClickEvents:(t,c)=>n.forEach(h=>h(t,c)),addEventMove:t=>d.push(t),onMoveEvents:(t,c)=>d.forEach(h=>h(t,c)),removeAllEvents:()=>{e.splice(0),n.splice(0),d.splice(0)}}},A=(e,n)=>{const d=Math.pow(Math.abs(e.x-n.x),2),u=Math.pow(Math.abs(e.y-n.y),2),i=e.r||0,a=n.r||0,r=Math.pow(i+a,2);return d+u<=r},Et=(e,n)=>{const d=e.r||0,u=n.w||0,i=n.h||0;return Math.abs(n.x+u/2-e.x)<=u/2+d&&Math.abs(n.y+i/2-e.y)<=i/2+d},Pt=(e,n)=>A(e,n),St=e=>{const n={},d=i=>{const a=i.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const i of e){const a=new Audio(i);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const r=d(i);n[r]={audio:a,path:i}}})(),i=>{var l,o;const a=(l=n[i])==null?void 0:l.audio,r=(o=n[i])==null?void 0:o.path;if(!(!a||!r))if(a.currentTime===0)a.play();else{var s=new Audio(r);s.volume=.25,s.play()}}};let G;const wt=(e,n)=>{if(G)throw new Error("Webcore already specified");const d=ut(),u=ft(e),{loop:i,stop:a,stopAll:r}=ht(),{addEventResize:s,onResizeEvents:l,addEventClick:o,onClickEvents:t,addEventMove:c,onMoveEvents:h,removeAllEvents:p}=yt();let P=innerWidth/2,M=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:P,cy:M,s:f,m}),y=St([]);G={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:g,useScreenMeta:u.useScreenMeta,navigate:(v,S)=>{if(!e.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);r(),pt(),p(),new Promise(()=>u.navigate(v,S))},loop:i,loopStop:a,useTimer:gt,rand:vt,useRandChain:Mt,intersect:Pt,addEventResize:s,addEventClick:o,addEventMove:c,playAudio:y},i(()=>d.render(u.render),"draw"),window.onresize=()=>{P=innerWidth/2,M=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),d.resize(),l()},document.onpointerdown=v=>{t(v.clientX,v.clientY)},document.onmousemove=v=>{h(v.clientX,v.clientY)},u.navigate()},x=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},X={},b=e=>{const{shade:n,ctx:d,createImg:u}=x(),i=()=>{const{r,c:s="#ffffff",p:l}=e,o=d.createRadialGradient(r,r,r,r,r,r/5);return o.addColorStop(0,n(s,0)),o.addColorStop(.01,n(s,0)),o.addColorStop(.075,n(s,9)),o.addColorStop(.15,n(s,0)),o.addColorStop(.15,n(s,-15)),o.addColorStop(.18,n(s,-5)),o.addColorStop(.22,n(s,-15)),l?(o.addColorStop(.24,n(s,-10)),o.addColorStop(.3,n(s,-8)),o.addColorStop(.34,n(s,-12)),o.addColorStop(.6,n(s,-6)),o.addColorStop(1,n(s,-4))):(o.addColorStop(.24,n(s,-12)),o.addColorStop(.26,n(s,-8)),o.addColorStop(.3,n(s,-2)),o.addColorStop(.34,n(s,0)),o.addColorStop(.5,n(s,5)),o.addColorStop(1,n(s,10))),o},a=()=>{const{r,c:s="#ffffff",p:l}=e,o=`${s}_${l?"push":"pop"}_${r}`;if(X[o])return X[o];const t=u((c=d)=>{const h=i();c.fillStyle=h,c.beginPath(),c.arc(r,r,r,0,2*Math.PI),c.closePath(),c.fill()},2*r);return X[o]=t,t};return(r=d)=>{const{x:s,y:l,r:o}=e,t=a();r.drawImage(t,s-o,l-o,2*o,2*o)}},j={},$=e=>{const{ctx:n}=x();let d;return j[e.src]?d=j[e.src]:(d=new Image,d.src=e.src,j[e.src]=d),(u=n)=>{const{w:i,h:a=i,x:r=0,y:s=0}=e;d.complete&&u.drawImage(d,r,s,i,a)}},Q=e=>{const{font:n,ctx:d}=x(),u=e.text,i=e.text.length,a=2*Math.PI/i/4;return(r=d)=>{const{x:s,y:l,r:o,s:t=0,fs:c}=e,h=c||Math.round(o/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${h}px ${n}`,r.save(),r.translate(s,l),r.rotate(t);for(let p=0;p<i;p++)r.save(),r.rotate(p*a),r.fillText(u[p],0,-o),r.restore();r.restore()}},xt=()=>{var g,y;const{ctx:e,loop:n,rotate:d,navigate:u,useMeasure:i,addEventClick:a,addEventResize:r,setBackground:s}=x();s("#040404");let l=!1,o,t,c,h,p,P=-.2,M=0;r(()=>{const{cx:v,cy:S,s:w}=i(),E=Math.round(w*.25);o={c:"#ff6347",x:v,y:S,r:E,p:!1},t=b(o),c=$({x:v-E+Math.round(E*.35),y:S-E+Math.round(E*.35),w:E*2-Math.round(E*.7),src:"/media/sloth.svg"}),h=Q({text:"nezabotin",x:v,y:S,r:Math.round(E*1.1),s:Math.PI*1.6}),p=Q({text:"production",x:v,y:S,r:Math.round(E*1.1),s:Math.PI*2.6})});const f=()=>{P+=.01,M=P>=1?1:P,P>=1.8&&(o.p=!0),P>=2.2&&(o.c="#f86a9a"),P>=2.6&&u("main")};a(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(P<v)return P=v,!0})});const m=()=>{n(f),l=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(m):m(),()=>{const{cx:v,cy:S}=i();e.globalAlpha=l?1:0,t(),P<1.8&&c(),P<1.4&&d(()=>{h(),p()},v,S,M),e.globalAlpha=1}},L=100/2,O=()=>{const{loop:e,ctx:n,shade:d}=x(),u={},i=()=>{for(const s in u){const l=u[s];if(!l)return;const o=l.popit;l.tic+=L/5,l.tic>=L&&(l.dir=-1),l.withoutRad||(o.r=l.origR+l.origR*75e-5*(l.tic+(l.dir>0?0:L-l.tic))),l.tic>=2*L&&(delete u[s],o.r=l.origR)}},a=(s,l=!1)=>{const o=new Date().valueOf().toString(),t=1,c=1;u[o]={withoutRad:l,tic:t,dir:c,popit:s,origR:s.r}},r=()=>{n.globalAlpha=.25;for(const s in u){const l=u[s],o=l.popit;n.fillStyle=d(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+l.origR*.001*(l.tic+(l.dir>0?0:L-l.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(i),{popEffect:a,render:r}},Ct=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:i,useScreenMeta:a,navigate:r,addEventClick:s,intersect:l}=x(),{from:o}=a();let t,c,h;return d(()=>{const{cx:M,cy:f,s:m,m:g}=u(),y=Math.round(m*.25);t={c:e,r:Math.round(m*.08),x:M-y-1*g,y:f-y+1*g,p:(o==="score"||o==="opening")&&!t},c=b(t),h=$({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),i(()=>{t.p=!1}),s((M,f)=>{l({x:M,y:f},t)&&(n(t),t.p=!0,i(()=>{r("score")},100))}),{render:()=>{c(),t.p||h()},point:()=>({x:t.x,y:t.y,r:t.r})}},Rt=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:i,useScreenMeta:a,navigate:r,addEventClick:s,intersect:l}=x(),{from:o}=a();let t,c,h;return d(()=>{const{s:M}=u(),f=Math.round(M*.08);t={c:e,r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:o==="main"&&!t},c=b(t),h=$({x:Number(t.x)-f+Math.round(f*.4),y:Number(t.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),i(()=>{t.p=!1}),s((M,f)=>{l({x:M,y:f},t)&&(n(t),t.p=!0,i(()=>{r("main")},100))}),{render:()=>{c(),t.p||h()},point:()=>({x:t.x,y:t.y,r:t.r})}},bt=e=>{const{addEventResize:n,useMeasure:d,useTimer:u,addEventClick:i,intersect:a,rotate:r}=x();let s,l,o;return n(()=>{const{s:h}=d(),p=Math.round(h*.055);s={c:"#ff6347",r:p,x:Math.round(innerWidth-1.6*p),y:Math.round(innerHeight-1.6*p),p:!1},l=b(s),o=$({x:Number(s.x)-p+Math.round(p*.4),y:Number(s.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),i((h,p)=>{a({x:h,y:p},s)&&(s.p=!0,e(),u(()=>{s.p=!1},100))}),{render:()=>{l(),s.p||r(()=>{o()},s.x,s.y,-.5)},point:()=>({x:s.x,y:s.y,r:s.r})}},It=e=>{const{addEventResize:n,useMeasure:d,useTimer:u,addEventClick:i,intersect:a,rotate:r}=x();let s,l,o;return n(()=>{const{s:h}=d(),p=Math.round(h*.055);s={c:"#ff6347",r:p,x:Math.round(innerWidth-1.6*p),y:Math.round(innerHeight-1.6*p-2*p-.3*p),p:!1},l=b(s),o=$({x:Number(s.x)-p+Math.round(p*.4),y:Number(s.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),i((h,p)=>{a({x:h,y:p},s)&&(s.p=!0,e(),u(()=>{s.p=!1},100))}),{render:()=>{l(),s.p||r(()=>{o()},s.x,s.y,.5)},point:()=>({x:s.x,y:s.y,r:s.r})}},Tt=e=>{const{ctx:n,shade:d}=x(),u=Math.round(e.r/2.2),i=Math.round(.15*e.r),a=d(e.c||"blue",-3);return(r=n)=>{const{r:s,x:l=s,y:o=s}=e;r.lineCap="round",r.fillStyle=a,r.strokeStyle=a,r.lineWidth=u,r.beginPath(),r.moveTo(l+i,o),r.lineTo(l-i/2,o-i),r.lineTo(l-i/2,o+i),r.closePath(),r.fill(),r.beginPath(),r.moveTo(l+i,o),r.lineTo(l-i/2,o-i),r.moveTo(l-i/2,o-i),r.lineTo(l-i/2,o+i),r.moveTo(l-i/2,o+i),r.lineTo(l+i,o),r.stroke()}},st=({getX:e,getY:n,color:d="#bef181",popEffect:u=()=>{}})=>{const{addEventResize:i,useMeasure:a,useTimer:r,useScreenMeta:s,navigate:l,addEventClick:o,intersect:t}=x(),{from:c}=s();let h,p,P;return i(()=>{const{cx:m,cy:g,s:y,m:v}=a();h={c:d,r:Math.round(y*.1),x:e(m,y,v),y:n(g,y,v),p:(c==="gamescore"||c==="game"||c==="opening")&&!h},p=b(h),P=Tt(h)}),r(()=>{h.p=!1}),o((m,g)=>{t({x:m,y:g},h)&&(u(h),h.p=!0,r(()=>{l("game")},100))}),{render:()=>{p(),h.p||P()},point:()=>({x:h.x,y:h.y,r:h.r})}},it=e=>{const{ctx:n,shade:d}=x(),u=Math.round(e.r/4),i=Math.round(.12*e.r);return(a=n)=>{const{r,x:s=r,y:l=r}=e,o=d(e.c||"blue",-3);a.lineCap="round",a.strokeStyle=o,a.lineWidth=u,a.beginPath(),a.moveTo(s-1.5*i,l-2*i),a.lineTo(s-1.5*i,l+2*i),a.stroke(),a.beginPath(),a.moveTo(s+1.5*i,l-2*i),a.lineTo(s+1.5*i,l+2*i),a.stroke()}},Wt=({getX:e,getY:n,popEffect:d=()=>{}})=>{const{addEventResize:u,useMeasure:i,useTimer:a,useScreenMeta:r,navigate:s,addEventClick:l,intersect:o}=x(),{from:t}=r();let c,h,p;return u(()=>{const{cx:f,cy:m,s:g,m:y}=i();c={c:"#fd8059",r:Math.round(g*.08),x:e(f,g,y),y:n(m,g,y),p:(t==="game"||t==="opening")&&!c},h=b(c),p=it(c)}),a(()=>{c.p=!1}),l((f,m)=>{o({x:f,y:m},c)&&(d(c),c.p=!0,a(()=>{s("main")},100))}),{render:()=>{h(),c.p||p()},point:()=>({x:c.x,y:c.y,r:c.r})}},Z=e=>{const{font:n,ctx:d}=x();return(u=d)=>{const{text:i,x:a,c:r,y:s,fs:l,a:o="center",mw:t}=e;u.textAlign=o,u.fillStyle=r,u.font=`${l}px ${n}`,u.fillText(i,a,s,t)}},Dt=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:i,useScreenMeta:a,addEventClick:r,intersect:s,navigate:l}=x(),{from:o}=a();let t,c,h,p;return d(()=>{const{cx:f,cy:m,s:g}=u(),y=Math.round(g*.25);t={c:e,x:f,y:m,r:y,p:o==="opening"&&!t},c=b(t),h=Z({text:"Yola",c:"#f1f1f1",x:f,y:m-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),p=Z({text:"PopiT",c:"#ffeb3b",x:f,y:m-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),i(()=>t.p=!1),r((f,m)=>{s({x:f,y:m},t)&&(n(t),t.p=!0,i(()=>{l("opening")},100))}),{render:()=>{c(),t.p||(h(),p())},point:()=>({x:t.x,y:t.y,r:t.r})}},ct=({color:e="#00dcfe",frequency:n=25})=>{const{addEventResize:d,useRandChain:u,useMeasure:i,rand:a,useTimer:r,setBackground:s,useScreenMeta:l}=x(),{from:o}=l();s(e);const t=a(0,999);let c=[],h=[];d(()=>{const f=u(t),{s:m}=i();c=[];const g=Math.round(m*.05),y=Math.round(innerWidth/g/2)-1,v=Math.round((innerWidth-2*g*y)/(y+1)),S=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*S)/(S+1));for(let E=0;E<S;E++)for(let C=0;C<y;C++)f(f(n))<1&&c.push({x:v+g+C*g*2+v*C,y:w+g+E*g*2+w*E,r:g,c:e,p:o==="opening"?!0:f(1)>0});h=c.map(E=>b(E))});const p=()=>{r(()=>{const f=a(c.length-1);c[f]&&(c[f].p=!c[f].p),p()},750)};return o==="opening"?r(()=>{c.forEach(f=>f.p=a(1)>0),p()}):p(),{render:()=>{h.forEach(f=>f())},setIntersections:f=>{c=c.filter(({x:m,y:g,r:y})=>f(m,g,y)),h=c.map(m=>b(m))}}},tt="ylp",et="score",nt="difficulty",q=[.14,.11,.09,.075],ot=500,Ht=350,rt=5,k=[];for(let e=0;e*rt<=ot-Ht;e++)k.push(ot-e*rt);const z=()=>{const e=c=>localStorage.getItem(`${tt}_${c}`),n=(c,h)=>localStorage.setItem(`${tt}_${c}`,h.toString()),d=()=>+(e(et)||0),u=c=>n(et,c),i=c=>{const h=d();u(h+c)},a=()=>+(e(nt)||0),r=c=>{const h=a();n(nt,Math.min(Math.max(h+c,0),q.length*k.length-1))};return{getScore:d,addScore:i,plusDifficulty:()=>r(1),minusDifficulty:()=>r(-5),getDifficultyRad:()=>{const c=a(),h=Math.floor(c/k.length);return q[h]||q[1]},getDifficultyTic:()=>{const c=a(),h=Math.floor(c/k.length),p=c-h*k.length;return k[p]||k[0]}}},at=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:u,setBackground:i,rand:a}=x(),{getDifficultyRad:r}=z();return n=[...n.splice(a(n.length-1),n.length),...n],e||d(()=>{const{s:l}=u(),o=r(),t=Math.round(l*o),c=Math.round(innerWidth/t/2)-1,h=(innerWidth-2*t*c)/(c+1),p=Math.round(innerHeight/t/2)-1,P=(innerHeight-2*t*p)/(p+1),M=innerWidth>=innerHeight,f=M?c:p,m=M?h:P,g=M?innerWidth:innerHeight;let y=0;const v=[];for(let w=0;w<f;w++)n[y]||(y=0),v.push(`${n[y]} ${(m+t+w*t*2+m*w)/g*100}%`),y++;i(`linear-gradient(${M?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},dt=({palette:e,retry:n,popEffect:d=()=>{}})=>{const{addEventResize:u,useMeasure:i,rand:a,useTimer:r,useScreenMeta:s,navigate:l,addEventClick:o,intersect:t}=x(),{from:c}=s(),{getDifficultyRad:h}=z(),p=[];let P=[],M,f,m,g;const y=S=>Array.isArray(e)?e[S]:e;return u(()=>{const{s:S}=i();p.splice(0);const w=h(),E=Math.round(S*w),C=Math.round(innerWidth/E/2)-1,T=(innerWidth-2*E*C)/(C+1),R=Math.round(innerHeight/E/2)-1,I=(innerHeight-2*E*R)/(R+1),F=innerWidth>=innerHeight;let W=0;for(let D=0;D<R;D++){for(let _=0;_<C;_++){y(W)||(W=0);const K={x:T+E+_*E*2+T*_,y:I+E+D*E*2+I*D,r:E,c:y(W),p:!0};D===0&&_===C-1?(g={...K,p:(c==="main"||c==="gameover"||c==="gamescore")&&!g},M=b(g),f=it(g)):p.push(K),W+=F?1:0}W=F?0:W+1}n&&(m=p[a(p.length-1)],r(()=>{m.p=!1})),P=p.map(D=>b(D))}),r(()=>{g.p=!1}),n&&o((S,w)=>{t({x:S,y:w},m)&&(d(m),m.p=!0,r(()=>{l("game")},100))}),o((S,w)=>{t({x:S,y:w},g)&&(d(g),g.p=!0,r(()=>{l("main")},100))}),{render:()=>{P.forEach(S=>S()),M(),g!=null&&g.p||f()},popits:p}},H=100,B="#222",kt=e=>{const n=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,u=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(d<255?d<1?0:d:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},U={},At=e=>{const{ctx:n,createImg:d,useRandChain:u,useTimer:i}=x();let a,r=!1,s=[];const l=e.r*2/H/2;U[e.imgSrc]?a=U[e.imgSrc]:(a=U[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},a.img.src=e.imgSrc);const o=()=>i(()=>{r=!r,o()},250),t=(M,f=n)=>{const{x:m,y:g,c:y,r:v}=M;f.fillStyle=y||"red",f.beginPath(),f.arc(m+v,g+v,v,0,Math.PI*2),f.closePath(),f.fill()},c=(M=n,f=0,m=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(f,m,2*e.r,2*e.r,l),M.closePath(),M.fill()},h=()=>{const M=[];for(let v=0;v<H;v++)for(let S=0;S<H;S++){const w={x:S*l*2,y:v*l*2,r:l,c:B};M.push(w)}let f=e.score-e.winScore;const m=[...M],g=u(0),y=(v=!1)=>{const S=g(m.length-1),w=m[S],E=M.indexOf(w);w.c=v?B:a.cols[E],m.splice(S,1),v&&s.push({...w,c:a.cols[E]})};for(let v=f;v>0;v--)y();if(e.winScore){s=[];for(let v=e.winScore;v>0;v--)y(!0);o()}return M},p=()=>{const M=h();a.drawImg=d((f=n)=>{c(f),M.filter(m=>m.c!==B).forEach(m=>t(m,f))},2*e.r)},P=async()=>{var m;const M=document.createElement("canvas");M.width=H,M.height=H;const f=M.getContext("2d",{willReadFrequently:!0});f==null||f.drawImage(a.img,0,0);for(let g=0;g<H;g++){const y=[];for(let v=0;v<H;v++){const S=(m=f==null?void 0:f.getImageData(v,g,1,1))==null?void 0:m.data;y.push(kt(S))}a.cols.push(...y)}a.isFilled=!0,p()};return a.isFilled?(a.r!==e.r||a.score!==e.score)&&p():a.img.onload=P,(M=n)=>{const{x:f,y:m,r:g,winScore:y}=e;if(a.drawImg?M.drawImage(a.drawImg,f-g,m-g,2*g,2*g):c(M,f-g,m-g),r&&y&&a.drawImg)for(const v of s)M.fillStyle=v.c||"red",M.beginPath(),M.arc(f-g+v.x+v.r,m-g+v.y+v.r,v.r,0,Math.PI*2),M.closePath(),M.fill()}},V=1e4,lt=(e=0)=>{const{addEventResize:n,useMeasure:d,translate:u}=x(),{getScore:i}=z(),a=["/media/cat.png"],r=i();let s,l=0,o=0,t=Math.floor(r/V);return n(()=>{const{cx:M,cy:f,s:m}=d();s=[],l=(m-2*m*.055*1.6)/2,o=m*.05;for(let g=0;g<a.length;g++){const y=a[g];s.push(At({x:M,y:f+g*l*2+g*o,r:l,score:r-g*V<0?0:r-g*V,imgSrc:y,winScore:e}))}}),{up:()=>{t=t+1<a.length?t+1:a.length-1},down:()=>{t=t-1<0?0:t-1},render:()=>{u(()=>{s==null||s.forEach(M=>M())},0,-(t*l*2+t*o))},rect:()=>{const{cx:M,cy:f}=d(),m=innerWidth>innerHeight;return{x:m?M-l:0,y:m?0:f-l,w:m?2*l:innerWidth,h:m?innerHeight:2*l}}}},zt=({popits:e,popEffect:n=()=>{}})=>{const{useTimer:d,rand:u,addEventClick:i,addEventMove:a,intersect:r,navigate:s}=x(),{addScore:l,getDifficultyTic:o}=z();let t=[],c,h,p=!1,P=0,M=0,f=0;const m=o(),g=E=>{const C=e.filter(I=>t.indexOf(I)===-1&&I!==E),T=u(C.length-1),R=C[T];R&&(R.p=!1,t.push(C[T]))},y=()=>{h=d(()=>{if(f-=10,e.length===t.length){p=!0,h.stop(),d(()=>{s("gameover")});return}g(),y()},f)},v=E=>{t=[];const C=e.length;let T=u(Math.round(C*.3),Math.round(C*.6));const R=[...e];if(E){const I=R.indexOf(E);R.splice(I,1)}for(let I=T;I>0;I--){const F=u(R.length-1),W=R[F];W.p=!1,t.push(W),R.splice(F,1)}f=m,c==null||c.stop(),h==null||h.stop(),c=d(y,t.length*m),P=P>0?P:u(3,5)},S=E=>{n(E),f=Math.min(f+5,m),M++,E.p=!0;const C=t.indexOf(E);t.splice(C,1),t.length<=0&&(P--,P>0?d(()=>{v(E)},100):(c==null||c.stop(),h==null||h.stop(),l(M),d(()=>{s("gamescore",{winScore:M})},100)))},w=(E,C,T=!1)=>{if(!p){for(const R of t)if(r({x:E,y:C},R)){S(R);return}if(!T){for(const R of e)if(r({x:E,y:C},R)){n(R,!0),g(R);return}g()}}};i(w),a((E,C)=>w(E,C,!0)),d(()=>{v()})},Ft=()=>{const{addEventResize:e,rand:n,useScreenMeta:d}=x(),{from:u}=d(),{popEffect:i,render:a}=O(),r=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],s=u==="opening"?r[0]:r[n(r.length-1)],{render:l,setIntersections:o}=ct({color:s}),{render:t,point:c}=Dt({popEffect:i}),{render:h,point:p}=st({getX:(f,m,g)=>f+Math.round(m*.25)+2*g,getY:(f,m,g)=>f+Math.round(m*.25)+0*g,popEffect:i}),{render:P,point:M}=Ct({popEffect:i});return e(()=>{const f=M(),m=c(),g=p();o((y,v,S)=>!A({x:y,y:v,r:S},f)&&!A({x:y,y:v,r:S},m)&&!A({x:y,y:v,r:S},g))}),()=>{a(),l(),t(),h(),P()}},_t=()=>{const e=at(),{popEffect:n,render:d}=O(),{popits:u,render:i}=dt({palette:e,popEffect:n});return zt({popits:u,popEffect:n}),()=>{d(),i()}},Lt=()=>{const e="#ff6347",{popEffect:n,render:d}=O(),{setBackground:u}=x(),{minusDifficulty:i}=z(),{render:a}=dt({palette:e,retry:!0,popEffect:n});return u(e),i(),()=>{d(),a()}},$t=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:d}=z(),{data:u}=n(),{popEffect:i,render:a}=O();at();const{render:r}=lt(u==null?void 0:u.winScore),{render:s}=st({getX:(o,t,c)=>innerWidth>innerHeight?Math.min(o+(t-2*t*.055*1.6)/2+4*c+Math.round(t*.1),innerWidth-2*c-Math.round(t*.1)):o+(t-2*t*.055*1.6)/8+0*Math.round(t*.1)+2*c,getY:(o,t,c)=>innerWidth>innerHeight?o+(t-2*t*.055*1.6)/2-1*c-Math.round(t*.1):Math.min(o+(t-2*t*.055*1.6)/2+4*c+Math.round(t*.1),innerHeight-2*c-Math.round(t*.1)),popEffect:i}),{render:l}=Wt({getX:(o,t,c)=>innerWidth>innerHeight?Math.max(o-(t-2*t*.055*1.6)/2-4*c-Math.round(t*.1),2*c+Math.round(t*.1)):o+(t-2*t*.055*1.6)/8-2*Math.round(t*.1)-2*c,getY:(o,t,c)=>innerWidth>innerHeight?o-(t-2*t*.055*1.6)/2+0*c+Math.round(t*.1):Math.min(o+(t-2*t*.055*1.6)/2+4*c+Math.round(t*.1),innerHeight-2*c-Math.round(t*.1)),popEffect:i});return d(),()=>{a(),innerHeight>innerWidth?e(r,0,-Math.round(innerHeight*.07)):r(),s(),l()}},Ot=()=>{const{addEventResize:e,rand:n}=x(),{popEffect:d,render:u}=O(),i=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],a=i[n(i.length-1)],{render:r,setIntersections:s}=ct({color:a,frequency:10}),{render:l,rect:o,up:t,down:c}=lt(),{render:h,point:p}=Rt({popEffect:d}),{point:P}=bt(t),{point:M}=It(c);return e(()=>{const f=p(),m=o(),g=P(),y=M();s((v,S,w)=>!A({x:v,y:S,r:w},f)&&!Et({x:v,y:S,r:w},m)&&!A({x:v,y:S,r:w},g)&&!A({x:v,y:S,r:w},y))}),()=>{u(),r(),l(),h()}},Bt=()=>{const{ctx:e,addEventResize:n,loop:d}=x(),u={x:40,y:100};let i=1,a=1,r;const s=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return s(),n(s),d(()=>{u.x+=2*i,u.y+=3*a,i*=-1,a*=-1}),()=>{e.save();var l=Math.random()*2,o=Math.random()*3;e.translate(l,o),e.beginPath(),e.fillStyle="red",e.rect(u.x,u.y,r,r),e.fill(),e.restore()}},Nt=[{name:"opening",ctor:xt},{name:"main",ctor:Ft},{name:"game",ctor:_t},{name:"gameover",ctor:Lt},{name:"gamescore",ctor:$t},{name:"score",ctor:Ot},{name:"devs",ctor:Bt}];wt(Nt);document.title="Your's last Pop it";
