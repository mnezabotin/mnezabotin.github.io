(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function d(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(r){if(r.ep)return;r.ep=!0;const s=d(r);fetch(r.href,s)}})();const ye=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},u=o=>{t.clearRect(0,0,innerWidth,innerHeight),o()};return d(),document.body.appendChild(e),{ctx:t,render:u,resize:d,rotate:(o,n,l,f)=>{t.save(),t.translate(n,l),t.rotate(Math.PI*f),t.translate(-n,-l),o(),t.restore()},translate:(o,n,l)=>{t.save(),t.translate(n,l),o(),t.restore()},shade:(o,n)=>{o=o.substring(1);const l=parseInt(o,16),f=Math.round(2.55*n),a=(l>>16)+f,h=(l>>8&255)+f,p=(l&255)+f;return"#"+(16777216+(a<255?a<1?0:a:255)*65536+(h<255?h<1?0:h:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(o,n)=>{var l;document.body.style.background=o,document.body.style.backgroundColor=n||o,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",n||o)},createImg:(o,n,l=n)=>{const f=document.createElement("canvas"),a=f.getContext("2d");if(!a)throw new Error("CanvasRenderingContext2D is null");return f.width=n*devicePixelRatio,f.height=l*devicePixelRatio,a.scale(devicePixelRatio,devicePixelRatio),o(a),f}}},ve=e=>{let t="",d="",u;const r=c=>e.find(g=>g.name===c)||e[0],i={render:()=>{},navigate:(c,g)=>{const o=r(c);d=t||"",t=(o==null?void 0:o.name)||"",u=g,i.render=(o==null?void 0:o.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:d,data:u})};return i},Ee=()=>{const e=requestAnimationFrame||(i=>setTimeout(i,16.666666666666668)),t=[],d={};return{loop:(i,c)=>{if(Object.entries(d).find(([o,n])=>n===i)||c&&d[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&t.push(c),c=c||new Date().valueOf().toString(),d[c]=i;const g=()=>{i(),d[c]&&e(g)};g()},stop:i=>{if(typeof i=="string")delete d[i];else{const c=Object.entries(d).find(([g,o])=>o===i);c&&delete d[c[0]]}},stopAll:()=>{for(const i in d)t.indexOf(i)===-1&&delete d[i]}}};let X=[];const Pe=()=>{for(const e of X)clearTimeout(e);X=[]},Se=(e,t=400)=>{let d=new Date,u=t,r=setTimeout(e,u);return X.push(r),{pause:()=>{clearTimeout(r),u-=new Date-d},resume:()=>{d=new Date,clearTimeout(r),r=setTimeout(e,u),X.push(r)},stop:()=>{clearTimeout(r)}}},ne=2147483646,V=2147483647,xe=16807,we=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=ne);const t=()=>(e=e*xe%V,e),d=()=>(t()-1)/ne;return(r,s)=>(s===void 0&&(s=r,r=0),Math.floor(d()*(s-r+1))+r)},Ce=(e,t)=>(t===void 0&&(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e),be=()=>{const e=[],t=[],d=[];return{addEventResize:n=>{n(),e.push(n)},onResizeEvents:()=>e.forEach(n=>n()),addEventClick:n=>t.push(n),onClickEvents:(n,l)=>t.forEach(f=>f(n,l)),addEventMove:n=>d.push(n),onMoveEvents:(n,l)=>d.forEach(f=>f(n,l)),removeAllEvents:()=>{e.splice(0),t.splice(0),d.splice(0)}}},L=(e,t)=>{const d=Math.pow(Math.abs(e.x-t.x),2),u=Math.pow(Math.abs(e.y-t.y),2),r=e.r||0,s=t.r||0,i=Math.pow(r+s,2);return d+u<=i},Re=(e,t)=>{const d=e.r||0,u=t.w||0,r=t.h||0;return Math.abs(t.x+u/2-e.x)<=u/2+d&&Math.abs(t.y+r/2-e.y)<=r/2+d},Ie=(e,t)=>L(e,t),Te=()=>{let e=new AudioContext,t={};return async d=>{const u=e.createBufferSource();t[d]||(t[d]=await fetch(d).then(r=>r.arrayBuffer()).then(r=>(e==null?void 0:e.decodeAudioData(r))||null)),u.buffer=t[d],u.connect(e.destination),u.start()}};let j;const We=e=>{if(j)throw new Error("Webcore already specified");const t=ye(),d=ve(e),{loop:u,stop:r,stopAll:s}=Ee(),{addEventResize:i,onResizeEvents:c,addEventClick:g,onClickEvents:o,addEventMove:n,onMoveEvents:l,removeAllEvents:f}=be();let a=innerWidth/2,h=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight;const M=()=>({cx:a,cy:h,s:p,m,isL:E}),v=Te();j={font:"Tijuf",ctx:t.ctx,shade:t.shade,rotate:t.rotate,translate:t.translate,setBackground:t.setBackground,createImg:t.createImg,useMeasure:M,useScreenMeta:d.useScreenMeta,navigate:(y,P)=>{if(!e.some(x=>x.name===y))throw new Error(`Screen ${y} not specified`);s(),Pe(),f(),new Promise(()=>d.navigate(y,P))},loop:u,loopStop:r,useTimer:Se,rand:Ce,useRandChain:we,intersect:Ie,addEventResize:i,addEventClick:g,addEventMove:n,playSound:v},u(()=>t.render(d.render),"draw"),window.onresize=()=>{a=innerWidth/2,h=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight,t.resize(),c()},document.onpointerdown=y=>{o(y.clientX,y.clientY)},document.onmousemove=y=>{l(y.clientX,y.clientY)},d.navigate()},w=()=>{if(!j)throw new Error("Webcore not specified");return{...j}},U={},H=e=>{const{shade:t,ctx:d,createImg:u}=w(),r=()=>{const{r:i,c="#ffffff",p:g}=e,o=d.createRadialGradient(i,i,i,i,i,i/5);return o.addColorStop(0,t(c,0)),o.addColorStop(.01,t(c,0)),o.addColorStop(.075,t(c,9)),o.addColorStop(.15,t(c,0)),o.addColorStop(.15,t(c,-15)),o.addColorStop(.18,t(c,-5)),o.addColorStop(.22,t(c,-15)),g?(o.addColorStop(.24,t(c,-10)),o.addColorStop(.3,t(c,-8)),o.addColorStop(.34,t(c,-12)),o.addColorStop(.6,t(c,-6)),o.addColorStop(1,t(c,-4))):(o.addColorStop(.24,t(c,-12)),o.addColorStop(.26,t(c,-8)),o.addColorStop(.3,t(c,-2)),o.addColorStop(.34,t(c,0)),o.addColorStop(.5,t(c,5)),o.addColorStop(1,t(c,12))),o},s=()=>{const{r:i,c="#ffffff",p:g}=e,o=`${c}_${g?"push":"pop"}_${i}`;if(U[o])return U[o];const n=u((l=d)=>{const f=r();l.fillStyle=f,l.beginPath(),l.arc(i,i,i,0,2*Math.PI),l.closePath(),l.fill()},2*i);return U[o]=n,n};return(i=d)=>{const{x:c,y:g,r:o}=e,n=s();i.drawImage(n,c-o,g-o,2*o,2*o)}},K={},N=e=>{const{ctx:t}=w();let d;return K[e.src]?d=K[e.src]:(d=new Image,d.src=e.src,K[e.src]=d),(u=t)=>{const{w:r,h:s=r,x:i=0,y:c=0}=e;d.complete&&u.drawImage(d,i,c,r,s)}},oe=e=>{const{font:t,ctx:d}=w(),u=e.text,r=e.text.length,s=2*Math.PI/r/4;return(i=d)=>{const{x:c,y:g,r:o,s:n=0,fs:l}=e,f=l||Math.round(o/4);i.textAlign="center",i.fillStyle="#f9f9f9",i.font=`${f}px ${t}`,i.save(),i.translate(c,g),i.rotate(n);for(let a=0;a<r;a++)i.save(),i.rotate(a*s),i.fillText(u[a],0,-o),i.restore();i.restore()}},He=()=>{var M,v;const{ctx:e,loop:t,rotate:d,navigate:u,useMeasure:r,addEventClick:s,addEventResize:i,setBackground:c}=w();c("#040404");let g=!1,o,n,l,f,a,h=-.2,p=0;i(()=>{const{cx:y,cy:P,s:x}=r(),S=Math.round(x*.25);o={c:"#ff6347",x:y,y:P,r:S,p:!1},n=H(o),l=N({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),f=oe({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),a=oe({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{h+=.01,p=h>=1?1:h,h>=1.8&&(o.p=!0),h>=2.2&&(o.c="#f86a9a"),h>=2.6&&u("main")};s(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(h<y)return h=y,!0})});const E=()=>{t(m),g=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(E):E(),()=>{const{cx:y,cy:P}=r();e.globalAlpha=g?1:0,n(),h<1.8&&l(),h<1.4&&d(()=>{f(),a()},y,P,p),e.globalAlpha=1}},re=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3"];let W=[];const ke=()=>{const{rand:e,playSound:t}=w();return{playPop:()=>{W.length||(W=[...re]);const u=e(W.length-1),r=W[u];W.splice(u,1),W.length||(W=[...re]);const s=e(W.length-1);W=[...W.splice(s,W.length),...W],t(r)}}},F=100/2;let se=0;const O=()=>{const{loop:e,ctx:t,shade:d,rand:u}=w(),{playPop:r}=ke(),s={},i=()=>{for(const o in s){const n=s[o];if(!n)return;const l=n.popit;if(!n.shake)n.tic+=F/5,n.tic>=F&&(n.dir=-1),n.withoutRad||(l.r=n.origR+n.origR*75e-5*(n.tic+(n.dir>0?0:F-n.tic)));else{n.tic+=F/5;const f=u(1,2),a=u(1,2);l.x=n.origX+Math.random()*f*(Math.random()>.5?1:-1),l.y=n.origY+Math.random()*a*(Math.random()>.5?1:-1)}n.tic>=2*F&&(delete s[o],l.r=n.origR,l.x=n.origX,l.y=n.origY)}},c=(o,n=!1,l=!1)=>{!l&&!n&&r(),se++;const f=`${new Date().valueOf().toString()}_${se}`,a=1,h=1;s[f]={withoutRad:n,tic:a,dir:h,popit:o,origR:o.r,origX:o.x,origY:o.y,shake:l}},g=()=>{t.globalAlpha=.25;for(const o in s){const n=s[o];if(n.shake)continue;const l=n.popit;t.fillStyle=d(l.c||"red",-12),t.beginPath(),t.arc(l.x,l.y,l.r+n.origR*.001*(n.tic+(n.dir>0?0:F-n.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return e(i),{popEffect:c,render:g}},ee=e=>{const{font:t,ctx:d}=w();return(u=d)=>{const{text:r,x:s,c:i,y:c,fs:g,a:o="center",mw:n}=e;u.textAlign=o,u.fillStyle=i,u.font=`${g}px ${t}`,u.fillText(r,s,c,n)}},Y=100,ue=e=>{const{loop:t,ctx:d,useMeasure:u,rand:r}=w();let s=null;const i=()=>{if(!s)return;const{m:o}=u();if(s.tic<=Y)s.props.fs=((e==null?void 0:e.mfs)||6)/Y*s.tic*o;else{const n=r(1,1),l=r(1,1);s.props.x=s.origX+Math.random()*n*(Math.random()>.5?1:-1),s.props.y=s.origY+Math.random()*l*(Math.random()>.5?1:-1),s.shake=!0}s.tic+=s.tic>Y?1:10,s.tic>Y*2&&!(e!=null&&e.infinity)&&(s=null)},c=o=>{const{cx:n,m:l}=u(),f=0,a={x:n,y:Math.round(l*((e==null?void 0:e.dy)||16)),text:o,c:(e==null?void 0:e.color)||"#ffffff",fs:0},h=ee(a);s={props:a,shape:h,tic:f,origX:a.x,origY:a.y}},g=()=>{s&&(d.globalAlpha=.01*s.tic,s.shape(),d.globalAlpha=1)};return t(i),{splashEffect:c,render:g}},De=({color:e="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:g}=w(),{from:o}=s();let n,l,f;return d(()=>{const{cx:p,cy:m,s:E,m:M}=u(),v=Math.round(E*.25);n={c:e,r:Math.round(E*.08),x:p-v-1*M,y:m-v+1*M,p:(o==="score"||o==="opening")&&!n},l=H(n),f=N({x:Number(n.x)-n.r+Math.round(n.r*.5),y:Number(n.y)-n.r+Math.round(n.r*.5),w:n.r*2-Math.round(n.r*1),src:"/media/star.svg"})}),r(()=>{n.p&&t(n,!1,!0),n.p=!1}),c((p,m)=>{g({x:p,y:m},n)&&(t(n),n.p=!0,r(()=>{i("score")},100))}),{render:()=>{l(),n.p||f()},point:()=>({x:n.x,y:n.y,r:n.r})}},Ae=({color:e="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:g}=w(),{from:o}=s();let n,l,f;return d(()=>{const{s:p}=u(),m=Math.round(p*.08);n={c:e,r:m,x:Math.round(1.6*m),y:Math.round(1.6*m),p:o==="main"&&!n},l=H(n),f=N({x:Number(n.x)-m+Math.round(m*.4),y:Number(n.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),r(()=>{n.p&&t(n,!1,!0),n.p=!1}),c((p,m)=>{g({x:p,y:m},n)&&(t(n),n.p=!0,r(()=>{i("main")},100))}),{render:()=>{l(),n.p||f()},point:()=>({x:n.x,y:n.y,r:n.r})}},ze=({onClick:e})=>{const{addEventResize:t,useMeasure:d,useTimer:u,addEventClick:r,intersect:s,rotate:i}=w();let c,g,o;return t(()=>{const{s:f}=d(),a=Math.round(f*.08);c={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a),p:!1},g=H(c),o=N({x:Number(c.x)-a+Math.round(a*.4),y:Number(c.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),r((f,a)=>{s({x:f,y:a},c)&&(c.p=!0,e(),u(()=>{c.p=!1},100))}),{render:()=>{g(),c.p||i(()=>{o()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Le=({onClick:e})=>{const{addEventResize:t,useMeasure:d,useTimer:u,addEventClick:r,intersect:s,rotate:i}=w();let c,g,o;return t(()=>{const{s:f}=d(),a=Math.round(f*.08),h=innerWidth<innerHeight?Math.round(innerWidth-1.6*a-2*a-.3*a):Math.round(innerWidth-1.6*a),p=innerWidth<innerHeight?Math.round(innerHeight-1.6*a):Math.round(innerHeight-1.6*a-2*a-.3*a);c={c:"#ff6347",r:a,x:h,y:p,p:!1},g=H(c),o=N({x:Number(c.x)-a+Math.round(a*.4),y:Number(c.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),r((f,a)=>{s({x:f,y:a},c)&&(c.p=!0,e(),u(()=>{c.p=!1},100))}),{render:()=>{g(),c.p||i(()=>{o()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},_e=e=>{const{ctx:t,shade:d}=w(),u=Math.round(e.r/2.2),r=Math.round(.15*e.r),s=d(e.c||"blue",-3);return(i=t)=>{const{r:c,x:g=c,y:o=c}=e;i.lineCap="round",i.fillStyle=s,i.strokeStyle=s,i.lineWidth=u,i.beginPath(),i.moveTo(g+r,o),i.lineTo(g-r/2,o-r),i.lineTo(g-r/2,o+r),i.closePath(),i.fill(),i.beginPath(),i.moveTo(g+r,o),i.lineTo(g-r/2,o-r),i.moveTo(g-r/2,o-r),i.lineTo(g-r/2,o+r),i.moveTo(g-r/2,o+r),i.lineTo(g+r,o),i.stroke()}},fe=({getX:e,getY:t,color:d="#bef181",popEffect:u=()=>{}})=>{const{addEventResize:r,useMeasure:s,useTimer:i,useScreenMeta:c,navigate:g,addEventClick:o,intersect:n}=w(),{from:l}=c();let f,a,h;return r(()=>{const{cx:E,cy:M,s:v,m:y}=s();f={c:d,r:Math.round(v*.1),x:e(E,v,y),y:t(M,v,y),p:(l==="gamescore"||l==="game"||l==="opening")&&!f},a=H(f),h=_e(f)}),i(()=>{f.p&&u(f,!1,!0),f.p=!1}),o((E,M)=>{n({x:E,y:M},f)&&(u(f),f.p=!0,i(()=>{g("game")},100))}),{render:()=>{a(),f.p||h()},point:()=>({x:f.x,y:f.y,r:f.r})}},he=e=>{const{ctx:t,shade:d}=w(),u=Math.round(e.r/4),r=Math.round(.12*e.r);return(s=t)=>{const{r:i,x:c=i,y:g=i}=e,o=d(e.c||"blue",-3);s.lineCap="round",s.strokeStyle=o,s.lineWidth=u,s.beginPath(),s.moveTo(c-1.5*r,g-2*r),s.lineTo(c-1.5*r,g+2*r),s.stroke(),s.beginPath(),s.moveTo(c+1.5*r,g-2*r),s.lineTo(c+1.5*r,g+2*r),s.stroke()}},Fe=({getX:e,getY:t,popEffect:d=()=>{}})=>{const{addEventResize:u,useMeasure:r,useTimer:s,useScreenMeta:i,navigate:c,addEventClick:g,intersect:o}=w(),{from:n}=i();let l,f,a;return u(()=>{const{cx:m,cy:E,s:M,m:v}=r();l={c:"#fd8059",r:Math.round(M*.08),x:e(m,M,v),y:t(E,M,v),p:(n==="game"||n==="opening")&&!l},f=H(l),a=he(l)}),s(()=>{l.p&&d(l,!1,!0),l.p=!1}),g((m,E)=>{o({x:m,y:E},l)&&(d(l),l.p=!0,s(()=>{c("main")},100))}),{render:()=>{f(),l.p||a()},point:()=>({x:l.x,y:l.y,r:l.r})}},$e=({color:e="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:s,addEventClick:i,intersect:c,navigate:g}=w(),{from:o}=s();let n,l,f,a;return d(()=>{const{cx:m,cy:E,s:M}=u(),v=Math.round(M*.25);n={c:e,x:m,y:E,r:v,p:o==="opening"&&!n},l=H(n),f=ee({text:"Yola",c:"#f1f1f1",x:m,y:E-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),a=ee({text:"PopiT",c:"#ffeb3b",x:m,y:E-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{n.p&&t(n,!1,!0),n.p=!1}),i((m,E)=>{c({x:m,y:E},n)&&(t(n),n.p=!0,r(()=>{g("opening")},100))}),{render:()=>{l(),n.p||(f(),a())},point:()=>({x:n.x,y:n.y,r:n.r})}},ge=({color:e="#00dcfe",frequency:t=20})=>{const{addEventResize:d,useRandChain:u,useMeasure:r,rand:s,useTimer:i,setBackground:c,useScreenMeta:g}=w(),{from:o}=g();c(e);const n=s(0,999);let l=[],f=[];d(()=>{const m=u(n),{s:E}=r();l=[];const M=Math.round(E*.05),v=Math.round(innerWidth/M/2)-1,y=Math.round((innerWidth-2*M*v)/(v+1)),P=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*P)/(P+1));for(let S=0;S<P;S++)for(let R=0;R<v;R++)m(m(t))<1&&l.push({x:y+M+R*M*2+y*R,y:x+M+S*M*2+x*S,r:M,c:e,p:o==="opening"?!0:m(1)>0});f=l.map(S=>H(S))});const a=()=>{i(()=>{const m=s(l.length-1);l[m]&&(l[m].p=!l[m].p),a()},250)};return o==="opening"?i(()=>{l.forEach(m=>m.p=s(1)>0),a()}):a(),{render:()=>{f.forEach(m=>m())},setIntersections:m=>{l=l.filter(({x:E,y:M,r:v})=>m(E,M,v)),f=l.map(E=>H(E))}}},ie="ylp",ce="score",J="difficulty",Q=[.14,.11,.09,.075],ae=750,Be=350,de=5,z=[];for(let e=0;e*de<=ae-Be;e++)z.push(ae-e*de);const $=()=>{const e=f=>localStorage.getItem(`${ie}_${f}`),t=(f,a)=>localStorage.setItem(`${ie}_${f}`,a.toString()),d=()=>+(e(ce)||0),u=f=>t(ce,f),r=f=>{const a=d();u(a+f)},s=()=>+(e(J)||0),i=f=>{const a=s();t(J,Math.min(Math.max(a+f,0),Q.length*z.length-1))};return{getScore:d,addScore:r,plusDifficulty:()=>i(1),minusDifficulty:()=>i(-5),getDifficultyRad:()=>{const f=s(),a=Math.floor(f/z.length);return Q[a]||Q[1]},getDifficultyTic:()=>{const f=s(),a=Math.floor(f/z.length),h=f-a*z.length;return z[h]||z[0]},resetDifficulty:()=>t(J,0)}},pe=(e=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:u,setBackground:r,rand:s}=w(),{getDifficultyRad:i}=$();return t=[...t.splice(s(t.length-1),t.length),...t],e||d(()=>{const{s:g}=u(),o=i(),n=Math.round(g*o),l=Math.round(innerWidth/n/2)-1,f=(innerWidth-2*n*l)/(l+1),a=Math.round(innerHeight/n/2)-1,h=(innerHeight-2*n*a)/(a+1),p=innerWidth>=innerHeight,m=p?l:a,E=p?f:h,M=p?innerWidth:innerHeight;let v=0;const y=[];for(let x=0;x<m;x++)t[v]||(v=0),y.push(`${t[v]} ${(E+n+x*n*2+E*x)/M*100}%`),v++;r(`linear-gradient(${p?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},me=({palette:e,retry:t,popEffect:d=()=>{}})=>{const{addEventResize:u,useMeasure:r,rand:s,useTimer:i,useScreenMeta:c,navigate:g,addEventClick:o,intersect:n}=w(),{from:l}=c(),{getDifficultyRad:f}=$(),a=[];let h=[],p,m,E,M;const v=P=>Array.isArray(e)?e[P]:e;return u(()=>{const{s:P}=r();a.splice(0);const x=f(),S=Math.round(P*x),R=Math.round(innerWidth/S/2)-1,_=(innerWidth-2*S*R)/(R+1),D=Math.round(innerHeight/S/2)-1,B=(innerHeight-2*S*D)/(D+1),I=innerWidth>=innerHeight;let b=0;for(let T=0;T<D;T++){for(let C=0;C<R;C++){v(b)||(b=0);const k={x:_+S+C*S*2+_*C,y:B+S+T*S*2+B*T,r:S,c:v(b),p:!0};T===0&&C===R-1?(M={...k,p:(l==="main"||l==="gameover"||l==="gamescore")&&!M},p=H(M),m=he(M)):a.push(k),b+=I?1:0}b=I?0:b+1}t&&(E=a[s(a.length-1)],i(()=>{d(E,!1,!0),E.p=!1})),h=a.map(T=>H(T))}),i(()=>{M.p&&d(M,!1,!0),M.p=!1}),t&&o((P,x)=>{n({x:P,y:x},E)&&(d(E),E.p=!0,i(()=>{g("game")},100))}),o((P,x)=>{n({x:P,y:x},M)&&(d(M),M.p=!0,i(()=>{g("main")},100))}),{render:()=>{h.forEach(P=>P()),p(),M!=null&&M.p||m()},popits:a}},A=100,G="#222",Ne=e=>{const t=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,u=(e==null?void 0:e[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(d<255?d<1?0:d:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},Z={},Oe=e=>{const{ctx:t,createImg:d,useRandChain:u,useTimer:r}=w();let s,i=!1,c=[];const g=e.r*2/A/2;Z[e.imgSrc]?s=Z[e.imgSrc]:(s=Z[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},s.img.src=e.imgSrc);const o=()=>r(()=>{i=!i,o()},250),n=(p,m=t)=>{const{x:E,y:M,c:v,r:y}=p;m.fillStyle=v||"red",m.beginPath(),m.arc(E+y,M+y,y,0,Math.PI*2),m.closePath(),m.fill()},l=(p=t,m=0,E=0)=>{p.fillStyle=G,p.beginPath(),p.roundRect(m,E,2*e.r,2*e.r,g),p.closePath(),p.fill()},f=()=>{const p=[];for(let y=0;y<A;y++)for(let P=0;P<A;P++){const x={x:P*g*2,y:y*g*2,r:g,c:G};p.push(x)}let m=e.score-e.winScore;const E=[...p],M=u(e.seed),v=(y=!1)=>{const P=M(E.length-1),x=E[P],S=p.indexOf(x);x.c=y?G:s.cols[S],E.splice(P,1),y&&c.push({...x,c:s.cols[S]})};for(let y=m;y>0;y--)v();if(e.winScore){c=[];for(let y=e.winScore;y>0;y--)v(!0);o()}return p},a=()=>{const p=f();s.drawImg=d((m=t)=>{l(m),p.filter(E=>E.c!==G).forEach(E=>n(E,m))},2*e.r)},h=async()=>{var E;const p=document.createElement("canvas");p.width=A,p.height=A;const m=p.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(s.img,0,0);for(let M=0;M<A;M++){const v=[];for(let y=0;y<A;y++){const P=(E=m==null?void 0:m.getImageData(y,M,1,1))==null?void 0:E.data;v.push(Ne(P))}s.cols.push(...v)}s.isFilled=!0,a()};return s.isFilled?(s.r!==e.r||s.score!==e.score)&&a():s.img.onload=h,(p=t)=>{const{x:m,y:E,r:M,winScore:v}=e;if(s.drawImg?p.drawImage(s.drawImg,m-M,E-M,2*M,2*M):l(p,m-M,E-M),i&&v&&s.drawImg)for(const y of c)p.fillStyle=y.c||"red",p.beginPath(),p.arc(m-M+y.x+y.r,E-M+y.y+y.r,y.r,0,Math.PI*2),p.closePath(),p.fill()}},le=1e4,Me=(e=0,t=!1)=>{const{addEventResize:d,useMeasure:u,translate:r}=w(),{getScore:s}=$(),i=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],c=s();let g,o=0,n=0,l=!1,f=!1;const a=v=>Math.min(Math.floor(v/le),i.length-1);let h=a(c-e);if(e){const v=a(c);l=v!==h,f=v>i.length-1}return d(()=>{const{cx:v,cy:y,s:P,isL:x}=u();g=[],o=(P-2*P*.055*1.6)/2,n=P*.05;let S=t?h:0;for(S;S<(t?h+1:i.length);S++){const R=i[S],_=x?v:v+S*o*2+S*n,D=x?y+S*o*2+S*n:y;g.push(Oe({x:_,y:D,r:o,score:Math.min(c-S*le,1e4),imgSrc:R,winScore:e,seed:S}))}}),{up:()=>{h=h+1<i.length?h+1:i.length-1},down:()=>{h=h-1<0?0:h-1},render:()=>{const{isL:v}=u(),y=v?0:-(h*o*2+h*n),P=v?-(h*o*2+h*n):0;r(()=>{g==null||g.forEach(x=>x())},y,P)},rect:()=>{const{cx:v,cy:y}=u(),P=innerWidth>innerHeight;return{x:P?v-o:0,y:P?0:y-o,w:P?2*o:innerWidth,h:P?innerHeight:2*o}},isJump:l,isCompleted:f}},Ye=({popits:e,popEffect:t=()=>{},splashEffect:d=()=>{}})=>{const{useTimer:u,rand:r,addEventClick:s,addEventMove:i,intersect:c,navigate:g,addEventResize:o}=w(),{getScore:n,addScore:l,getDifficultyTic:f}=$();let a=[],h,p,m=!1,E=0,M=0,v=0;const y=n(),P=f(),x=I=>{const b=e.filter(k=>a.indexOf(k)===-1&&k!==I),T=r(b.length-1),C=b[T];C&&(t(C,!1,!0),C.p=!1,a.push(b[T]))},S=()=>{p=u(()=>{if(v=Math.max(v-10,50),e.length===a.length){m=!0,p.stop(),u(()=>{g("gameover")});return}x(),S()},v)},R=I=>{a=[];const b=e.length;let T=r(Math.round(b*.3),Math.round(b*.6));const C=[...e];if(I){const k=C.indexOf(I);C.splice(k,1)}for(let k=T;k>0;k--){const te=r(C.length-1),q=C[te];q.p=!1,t(q,!1,!0),a.push(q),C.splice(te,1)}v=P,h==null||h.stop(),p==null||p.stop(),y&&(h=u(()=>{d("SLOWLY"),S()},a.length*P)),E=E>0?E:r(3,5)},_=()=>y<1e4?10:y<2e4?5:y<3e4?2:1,D=I=>{t(I),v=Math.min(v+5,P),M++,I.p=!0;const b=a.indexOf(I);if(a.splice(b,1),a.length<=0)if(E--,E>0)u(()=>{d("Round"),R(I)},100);else{h==null||h.stop(),p==null||p.stop();const T=_();l(M*T),u(()=>{g("gamescore",{winScore:M*T})},100)}},B=(I,b,T=!1)=>{if(!m){for(const C of a)if(c({x:I,y:b},C)){D(C);return}if(!T){for(const C of e)if(c({x:I,y:b},C)){t(C,!0),d("Popenalty"),x(C);return}d("Popenalty"),x()}}};s(B),i((I,b)=>B(I,b,!0)),o(()=>{u(()=>{d("Pop it"),R()})})},Ge=()=>{const{addEventResize:e,rand:t,useScreenMeta:d}=w(),{from:u}=d(),{popEffect:r,render:s}=O(),i=["#00dcfe","#5bb2f7","#92E6E6"],c=u==="opening"?i[0]:i[t(i.length-1)],{render:g,setIntersections:o}=ge({color:c}),{render:n,point:l}=$e({popEffect:r}),{render:f,point:a}=fe({getX:(m,E,M)=>m+Math.round(E*.25)+2*M,getY:(m,E,M)=>m+Math.round(E*.25)+0*M,popEffect:r}),{render:h,point:p}=De({popEffect:r});return e(()=>{const m=p(),E=l(),M=a();o((v,y,P)=>!L({x:v,y,r:P},m)&&!L({x:v,y,r:P},E)&&!L({x:v,y,r:P},M))}),()=>{s(),g(),n(),f(),h()}},Xe=()=>{const{useMeasure:e,addEventResize:t}=w(),d=pe(),{popEffect:u,render:r}=O(),{popits:s,render:i}=me({palette:d,popEffect:u}),c={mfs:0,dy:0},{splashEffect:g,render:o}=ue(c);return Ye({popits:s,popEffect:u,splashEffect:g}),t(()=>{const n=(s[0].y-s[0].r)/e().m;c.mfs=n,c.dy=n}),()=>{r(),i(),o()}},je=()=>{const e="#ff6347",{popEffect:t,render:d}=O(),{setBackground:u}=w(),{minusDifficulty:r}=$(),{render:s}=me({palette:e,retry:!0,popEffect:t});return u(e),r(),()=>{d(),s()}},qe=()=>{const{translate:e,useScreenMeta:t}=w(),{plusDifficulty:d,resetDifficulty:u}=$(),{data:r}=t(),{popEffect:s,render:i}=O(),{splashEffect:c,render:g}=ue({infinity:!0});pe();const{render:o,isJump:n}=Me(r==null?void 0:r.winScore,!0),{render:l}=fe({getX:(a,h,p)=>innerWidth>innerHeight?Math.min(a+(h-2*h*.055*1.6)/2+4*p+Math.round(h*.1),innerWidth-2*p-Math.round(h*.1)):a+(h-2*h*.055*1.6)/8+0*Math.round(h*.1)+2*p,getY:(a,h,p)=>innerWidth>innerHeight?a+(h-2*h*.055*1.6)/2-1*p-Math.round(h*.1):Math.min(a+(h-2*h*.055*1.6)/2+4*p+Math.round(h*.1),innerHeight-2*p-Math.round(h*.1)),popEffect:s}),{render:f}=Fe({getX:(a,h,p)=>innerWidth>innerHeight?Math.max(a-(h-2*h*.055*1.6)/2-4*p-Math.round(h*.1),2*p+Math.round(h*.1)):a+(h-2*h*.055*1.6)/8-2*Math.round(h*.1)-2*p,getY:(a,h,p)=>innerWidth>innerHeight?a-(h-2*h*.055*1.6)/2+0*p+Math.round(h*.1):Math.min(a+(h-2*h*.055*1.6)/2+4*p+Math.round(h*.1),innerHeight-2*p-Math.round(h*.1)),popEffect:s});return n?u():d(),innerHeight>innerWidth&&c(n?"Picture filled":"You win"),()=>{i(),innerHeight>innerWidth?e(o,0,-Math.round(innerHeight*.05)):o(),l(),f(),g()}},Ve=()=>{const{addEventResize:e,rand:t}=w(),{popEffect:d,render:u}=O(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],s=r[t(r.length-1)],{render:i,setIntersections:c}=ge({color:s,frequency:10}),{render:g,rect:o,up:n,down:l}=Me(),{render:f,point:a}=Ae({popEffect:d}),{render:h,point:p}=ze({onClick:n,popEffect:d}),{render:m,point:E}=Le({onClick:l,popEffect:d});return e(()=>{const M=a(),v=o(),y=p(),P=E();c((x,S,R)=>!L({x,y:S,r:R},M)&&!Re({x,y:S,r:R},v)&&!L({x,y:S,r:R},y)&&!L({x,y:S,r:R},P))}),()=>{u(),i(),g(),f(),h(),m()}},Ue=()=>{const{ctx:e,addEventResize:t,loop:d}=w(),u={x:40,y:100};let r=1,s=1,i;const c=()=>{i=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),t(c),d(()=>{u.x+=2*r,u.y+=3*s,r*=-1,s*=-1}),()=>{e.save();var g=Math.random()*2,o=Math.random()*3;e.translate(g,o),e.beginPath(),e.fillStyle="red",e.rect(u.x,u.y,i,i),e.fill(),e.restore()}},Ke=[{name:"opening",ctor:He},{name:"main",ctor:Ge},{name:"game",ctor:Xe},{name:"gameover",ctor:je},{name:"gamescore",ctor:qe},{name:"score",ctor:Ve},{name:"devs",ctor:Ue}];We(Ke);document.title="Your's last Pop it";
