(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function u(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(e){if(e.ep)return;e.ep=!0;const a=u(e);fetch(e.href,a)}})();const ht=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const u=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},f=s=>{n.clearRect(0,0,innerWidth,innerHeight),s()};return u(),document.body.appendChild(t),{ctx:n,render:f,resize:u,rotate:(s,c,i,d)=>{n.save(),n.translate(c,i),n.rotate(Math.PI*d),n.translate(-c,-i),s(),n.restore()},translate:(s,c,i)=>{n.save(),n.translate(c,i),s(),n.restore()},shade:(s,c)=>{s=s.substring(1);const i=parseInt(s,16),d=Math.round(2.55*c),h=(i>>16)+d,P=(i>>8&255)+d,M=(i&255)+d;return"#"+(16777216+(h<255?h<1?0:h:255)*65536+(P<255?P<1?0:P:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(s,c)=>{var i;document.body.style.background=s,document.body.style.backgroundColor=c||s,(i=document.querySelector('meta[name="theme-color"]'))==null||i.setAttribute("content",c||s)},createImg:(s,c,i=c)=>{const d=document.createElement("canvas"),h=d.getContext("2d");if(!h)throw new Error("CanvasRenderingContext2D is null");return d.width=c*devicePixelRatio,d.height=i*devicePixelRatio,h.scale(devicePixelRatio,devicePixelRatio),s(h),d}}},pt=t=>{let n="",u="",f;const e=r=>t.find(l=>l.name===r)||t[0],o={render:()=>{},navigate:(r,l)=>{const s=e(r);u=n||"",n=(s==null?void 0:s.name)||"",f=l,o.render=(s==null?void 0:s.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:u,data:f})};return o},gt=()=>{const t=requestAnimationFrame||(o=>setTimeout(o,16.666666666666668)),n=[],u={};return{loop:(o,r)=>{if(Object.entries(u).find(([s,c])=>c===o)||r&&u[r])throw new Error(`Loop${r?" "+r:""} already specified`);r&&n.push(r),r=r||new Date().valueOf().toString(),u[r]=o;const l=()=>{o(),u[r]&&t(l)};l()},stop:o=>{if(typeof o=="string")delete u[o];else{const r=Object.entries(u).find(([l,s])=>s===o);r&&delete u[r[0]]}},stopAll:()=>{for(const o in u)n.indexOf(o)===-1&&delete u[o]}}};let G=[];const mt=()=>{for(const t of G)clearTimeout(t);G=[]},Mt=(t,n=400)=>{let u=new Date,f=n,e=setTimeout(t,f);return G.push(e),{pause:()=>{clearTimeout(e),f-=new Date-u},resume:()=>{u=new Date,clearTimeout(e),e=setTimeout(t,f),G.push(e)},stop:()=>{clearTimeout(e)}}},tt=2147483646,X=2147483647,yt=16807,vt=(t=Math.floor(Math.random()*X))=>{t=t%X,t<=0&&(t+=tt);const n=()=>(t=t*yt%X,t),u=()=>(n()-1)/tt;return(e,a)=>(a===void 0&&(a=e,e=0),Math.floor(u()*(a-e+1))+e)},Et=(t,n)=>(n===void 0&&(n=t,t=0),Math.floor(Math.random()*(n-t+1))+t),Pt=()=>{const t=[],n=[],u=[];return{addEventResize:c=>{c(),t.push(c)},onResizeEvents:()=>t.forEach(c=>c()),addEventClick:c=>n.push(c),onClickEvents:(c,i)=>n.forEach(d=>d(c,i)),addEventMove:c=>u.push(c),onMoveEvents:(c,i)=>u.forEach(d=>d(c,i)),removeAllEvents:()=>{t.splice(0),n.splice(0),u.splice(0)}}},z=(t,n)=>{const u=Math.pow(Math.abs(t.x-n.x),2),f=Math.pow(Math.abs(t.y-n.y),2),e=t.r||0,a=n.r||0,o=Math.pow(e+a,2);return u+f<=o},St=(t,n)=>{const u=t.r||0,f=n.w||0,e=n.h||0;return Math.abs(n.x+f/2-t.x)<=f/2+u&&Math.abs(n.y+e/2-t.y)<=e/2+u},wt=(t,n)=>z(t,n),xt=t=>{const n={},u=e=>{const a=e.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const e of t){const a=new Audio(e);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const o=u(e);n[o]={audio:a,path:e}}})(),e=>{var l,s;const a=(l=n[e])==null?void 0:l.audio,o=(s=n[e])==null?void 0:s.path;if(!(!a||!o))if(a.currentTime===0)a.play();else{var r=new Audio(o);r.volume=.25,r.play()}}};let Y;const Rt=(t,n)=>{if(Y)throw new Error("Webcore already specified");const u=ht(),f=pt(t),{loop:e,stop:a,stopAll:o}=gt(),{addEventResize:r,onResizeEvents:l,addEventClick:s,onClickEvents:c,addEventMove:i,onMoveEvents:d,removeAllEvents:h}=Pt();let P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const m=()=>({cx:P,cy:M,s:p,m:g}),v=xt([]);Y={font:"Tijuf",ctx:u.ctx,shade:u.shade,rotate:u.rotate,translate:u.translate,setBackground:u.setBackground,createImg:u.createImg,useMeasure:m,useScreenMeta:f.useScreenMeta,navigate:(y,E)=>{if(!t.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);o(),mt(),h(),new Promise(()=>f.navigate(y,E))},loop:e,loopStop:a,useTimer:Mt,rand:Et,useRandChain:vt,intersect:wt,addEventResize:r,addEventClick:s,addEventMove:i,playAudio:v},e(()=>u.render(f.render),"draw"),window.onresize=()=>{P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),u.resize(),l()},document.onpointerdown=y=>{c(y.clientX,y.clientY)},document.onmousemove=y=>{d(y.clientX,y.clientY)},f.navigate()},R=()=>{if(!Y)throw new Error("Webcore not specified");return{...Y}},j={},I=t=>{const{shade:n,ctx:u,createImg:f}=R(),e=()=>{const{r:o,c:r="#ffffff",p:l}=t,s=u.createRadialGradient(o,o,o,o,o,o/5);return s.addColorStop(0,n(r,0)),s.addColorStop(.01,n(r,0)),s.addColorStop(.075,n(r,9)),s.addColorStop(.15,n(r,0)),s.addColorStop(.15,n(r,-15)),s.addColorStop(.18,n(r,-5)),s.addColorStop(.22,n(r,-15)),l?(s.addColorStop(.24,n(r,-10)),s.addColorStop(.3,n(r,-8)),s.addColorStop(.34,n(r,-12)),s.addColorStop(.6,n(r,-6)),s.addColorStop(1,n(r,-4))):(s.addColorStop(.24,n(r,-12)),s.addColorStop(.26,n(r,-8)),s.addColorStop(.3,n(r,-2)),s.addColorStop(.34,n(r,0)),s.addColorStop(.5,n(r,5)),s.addColorStop(1,n(r,10))),s},a=()=>{const{r:o,c:r="#ffffff",p:l}=t,s=`${r}_${l?"push":"pop"}_${o}`;if(j[s])return j[s];const c=f((i=u)=>{const d=e();i.fillStyle=d,i.beginPath(),i.arc(o,o,o,0,2*Math.PI),i.closePath(),i.fill()},2*o);return j[s]=c,c};return(o=u)=>{const{x:r,y:l,r:s}=t,c=a();o.drawImage(c,r-s,l-s,2*s,2*s)}},q={},$=t=>{const{ctx:n}=R();let u;return q[t.src]?u=q[t.src]:(u=new Image,u.src=t.src,q[t.src]=u),(f=n)=>{const{w:e,h:a=e,x:o=0,y:r=0}=t;u.complete&&f.drawImage(u,o,r,e,a)}},et=t=>{const{font:n,ctx:u}=R(),f=t.text,e=t.text.length,a=2*Math.PI/e/4;return(o=u)=>{const{x:r,y:l,r:s,s:c=0,fs:i}=t,d=i||Math.round(s/4);o.textAlign="center",o.fillStyle="#f9f9f9",o.font=`${d}px ${n}`,o.save(),o.translate(r,l),o.rotate(c);for(let h=0;h<e;h++)o.save(),o.rotate(h*a),o.fillText(f[h],0,-s),o.restore();o.restore()}},bt=()=>{var m,v;const{ctx:t,loop:n,rotate:u,navigate:f,useMeasure:e,addEventClick:a,addEventResize:o,setBackground:r}=R();r("#040404");let l=!1,s,c,i,d,h,P=-.2,M=0;o(()=>{const{cx:y,cy:E,s:w}=e(),S=Math.round(w*.25);s={c:"#ff6347",x:y,y:E,r:S,p:!1},c=I(s),i=$({x:y-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),d=et({text:"nezabotin",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),h=et({text:"production",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{P+=.01,M=P>=1?1:P,P>=1.8&&(s.p=!0),P>=2.2&&(s.c="#f86a9a"),P>=2.6&&f("main")};a(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(P<y)return P=y,!0})});const g=()=>{n(p),l=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(g):g(),()=>{const{cx:y,cy:E}=e();t.globalAlpha=l?1:0,c(),P<1.8&&i(),P<1.4&&u(()=>{d(),h()},y,E,M),t.globalAlpha=1}},L=100/2,N=()=>{const{loop:t,ctx:n,shade:u}=R(),f={},e=()=>{for(const r in f){const l=f[r];if(!l)return;const s=l.popit;l.tic+=L/5,l.tic>=L&&(l.dir=-1),l.withoutRad||(s.r=l.origR+l.origR*75e-5*(l.tic+(l.dir>0?0:L-l.tic))),l.tic>=2*L&&(delete f[r],s.r=l.origR)}},a=(r,l=!1)=>{const s=new Date().valueOf().toString(),c=1,i=1;f[s]={withoutRad:l,tic:c,dir:i,popit:r,origR:r.r}},o=()=>{n.globalAlpha=.25;for(const r in f){const l=f[r],s=l.popit;n.fillStyle=u(s.c||"red",-12),n.beginPath(),n.arc(s.x,s.y,s.r+l.origR*.001*(l.tic+(l.dir>0?0:L-l.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return t(e),{popEffect:a,render:o}},J=t=>{const{font:n,ctx:u}=R();return(f=u)=>{const{text:e,x:a,c:o,y:r,fs:l,a:s="center",mw:c}=t;f.textAlign=s,f.fillStyle=o,f.font=`${l}px ${n}`,f.fillText(e,a,r,c)}},O=100,Q=t=>{const{loop:n,ctx:u,useMeasure:f}=R();let e=null;const a=()=>{if(!e)return;const{m:l}=f();e.tic<=O&&(e.props.fs=((t==null?void 0:t.mfs)||6)/O*e.tic*l),e.tic+=e.tic>O?1:10,e.tic>O*2&&(e=null)},o=l=>{const{cx:s,m:c}=f(),i=0,d={x:s,y:Math.round(c*((t==null?void 0:t.dy)||16)),text:l,c:(t==null?void 0:t.color)||"#ffffff",fs:0},h=J(d);e={props:d,shape:h,tic:i}},r=()=>{e&&(u.globalAlpha=.01*e.tic,e.shape(),u.globalAlpha=1)};return n(a),{splashEffect:o,render:r}},Ct=({color:t="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:e,useScreenMeta:a,navigate:o,addEventClick:r,intersect:l}=R(),{from:s}=a();let c,i,d;return u(()=>{const{cx:M,cy:p,s:g,m}=f(),v=Math.round(g*.25);c={c:t,r:Math.round(g*.08),x:M-v-1*m,y:p-v+1*m,p:(s==="score"||s==="opening")&&!c},i=I(c),d=$({x:Number(c.x)-c.r+Math.round(c.r*.5),y:Number(c.y)-c.r+Math.round(c.r*.5),w:c.r*2-Math.round(c.r*1),src:"/media/star.svg"})}),e(()=>{c.p=!1}),r((M,p)=>{l({x:M,y:p},c)&&(n(c),c.p=!0,e(()=>{o("score")},100))}),{render:()=>{i(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},It=({color:t="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:e,useScreenMeta:a,navigate:o,addEventClick:r,intersect:l}=R(),{from:s}=a();let c,i,d;return u(()=>{const{s:M}=f(),p=Math.round(M*.08);c={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:s==="main"&&!c},i=I(c),d=$({x:Number(c.x)-p+Math.round(p*.4),y:Number(c.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),e(()=>{c.p=!1}),r((M,p)=>{l({x:M,y:p},c)&&(n(c),c.p=!0,e(()=>{o("main")},100))}),{render:()=>{i(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},Tt=t=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:e,intersect:a,rotate:o}=R();let r,l,s;return n(()=>{const{s:d}=u(),h=Math.round(d*.055);r={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h),p:!1},l=I(r),s=$({x:Number(r.x)-h+Math.round(h*.4),y:Number(r.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),e((d,h)=>{a({x:d,y:h},r)&&(r.p=!0,t(),f(()=>{r.p=!1},100))}),{render:()=>{l(),r.p||o(()=>{s()},r.x,r.y,-.5)},point:()=>({x:r.x,y:r.y,r:r.r})}},Wt=t=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:e,intersect:a,rotate:o}=R();let r,l,s;return n(()=>{const{s:d}=u(),h=Math.round(d*.055);r={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h-2*h-.3*h),p:!1},l=I(r),s=$({x:Number(r.x)-h+Math.round(h*.4),y:Number(r.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),e((d,h)=>{a({x:d,y:h},r)&&(r.p=!0,t(),f(()=>{r.p=!1},100))}),{render:()=>{l(),r.p||o(()=>{s()},r.x,r.y,.5)},point:()=>({x:r.x,y:r.y,r:r.r})}},At=t=>{const{ctx:n,shade:u}=R(),f=Math.round(t.r/2.2),e=Math.round(.15*t.r),a=u(t.c||"blue",-3);return(o=n)=>{const{r,x:l=r,y:s=r}=t;o.lineCap="round",o.fillStyle=a,o.strokeStyle=a,o.lineWidth=f,o.beginPath(),o.moveTo(l+e,s),o.lineTo(l-e/2,s-e),o.lineTo(l-e/2,s+e),o.closePath(),o.fill(),o.beginPath(),o.moveTo(l+e,s),o.lineTo(l-e/2,s-e),o.moveTo(l-e/2,s-e),o.lineTo(l-e/2,s+e),o.moveTo(l-e/2,s+e),o.lineTo(l+e,s),o.stroke()}},it=({getX:t,getY:n,color:u="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:e,useMeasure:a,useTimer:o,useScreenMeta:r,navigate:l,addEventClick:s,intersect:c}=R(),{from:i}=r();let d,h,P;return e(()=>{const{cx:g,cy:m,s:v,m:y}=a();d={c:u,r:Math.round(v*.1),x:t(g,v,y),y:n(m,v,y),p:(i==="gamescore"||i==="game"||i==="opening")&&!d},h=I(d),P=At(d)}),o(()=>{d.p=!1}),s((g,m)=>{c({x:g,y:m},d)&&(f(d),d.p=!0,o(()=>{l("game")},100))}),{render:()=>{h(),d.p||P()},point:()=>({x:d.x,y:d.y,r:d.r})}},at=t=>{const{ctx:n,shade:u}=R(),f=Math.round(t.r/4),e=Math.round(.12*t.r);return(a=n)=>{const{r:o,x:r=o,y:l=o}=t,s=u(t.c||"blue",-3);a.lineCap="round",a.strokeStyle=s,a.lineWidth=f,a.beginPath(),a.moveTo(r-1.5*e,l-2*e),a.lineTo(r-1.5*e,l+2*e),a.stroke(),a.beginPath(),a.moveTo(r+1.5*e,l-2*e),a.lineTo(r+1.5*e,l+2*e),a.stroke()}},Dt=({getX:t,getY:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:e,useTimer:a,useScreenMeta:o,navigate:r,addEventClick:l,intersect:s}=R(),{from:c}=o();let i,d,h;return f(()=>{const{cx:p,cy:g,s:m,m:v}=e();i={c:"#fd8059",r:Math.round(m*.08),x:t(p,m,v),y:n(g,m,v),p:(c==="game"||c==="opening")&&!i},d=I(i),h=at(i)}),a(()=>{i.p=!1}),l((p,g)=>{s({x:p,y:g},i)&&(u(i),i.p=!0,a(()=>{r("main")},100))}),{render:()=>{d(),i.p||h()},point:()=>({x:i.x,y:i.y,r:i.r})}},Ht=({color:t="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:e,useScreenMeta:a,addEventClick:o,intersect:r,navigate:l}=R(),{from:s}=a();let c,i,d,h;return u(()=>{const{cx:p,cy:g,s:m}=f(),v=Math.round(m*.25);c={c:t,x:p,y:g,r:v,p:s==="opening"&&!c},i=I(c),d=J({text:"Yola",c:"#f1f1f1",x:p,y:g-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),h=J({text:"PopiT",c:"#ffeb3b",x:p,y:g-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),e(()=>c.p=!1),o((p,g)=>{r({x:p,y:g},c)&&(n(c),c.p=!0,e(()=>{l("opening")},100))}),{render:()=>{i(),c.p||(d(),h())},point:()=>({x:c.x,y:c.y,r:c.r})}},dt=({color:t="#00dcfe",frequency:n=25})=>{const{addEventResize:u,useRandChain:f,useMeasure:e,rand:a,useTimer:o,setBackground:r,useScreenMeta:l}=R(),{from:s}=l();r(t);const c=a(0,999);let i=[],d=[];u(()=>{const p=f(c),{s:g}=e();i=[];const m=Math.round(g*.05),v=Math.round(innerWidth/m/2)-1,y=Math.round((innerWidth-2*m*v)/(v+1)),E=Math.round(innerHeight/m/2)-1,w=Math.round((innerHeight-2*m*E)/(E+1));for(let S=0;S<E;S++)for(let x=0;x<v;x++)p(p(n))<1&&i.push({x:y+m+x*m*2+y*x,y:w+m+S*m*2+w*S,r:m,c:t,p:s==="opening"?!0:p(1)>0});d=i.map(S=>I(S))});const h=()=>{o(()=>{const p=a(i.length-1);i[p]&&(i[p].p=!i[p].p),h()},750)};return s==="opening"?o(()=>{i.forEach(p=>p.p=a(1)>0),h()}):h(),{render:()=>{d.forEach(p=>p())},setIntersections:p=>{i=i.filter(({x:g,y:m,r:v})=>p(g,m,v)),d=i.map(g=>I(g))}}},nt="ylp",ot="score",rt="difficulty",U=[.14,.11,.09,.075],st=500,kt=350,ct=5,k=[];for(let t=0;t*ct<=st-kt;t++)k.push(st-t*ct);const F=()=>{const t=i=>localStorage.getItem(`${nt}_${i}`),n=(i,d)=>localStorage.setItem(`${nt}_${i}`,d.toString()),u=()=>+(t(ot)||0),f=i=>n(ot,i),e=i=>{const d=u();f(d+i)},a=()=>+(t(rt)||0),o=i=>{const d=a();n(rt,Math.min(Math.max(d+i,0),U.length*k.length-1))};return{getScore:u,addScore:e,plusDifficulty:()=>o(1),minusDifficulty:()=>o(-5),getDifficultyRad:()=>{const i=a(),d=Math.floor(i/k.length);return U[d]||U[1]},getDifficultyTic:()=>{const i=a(),d=Math.floor(i/k.length),h=i-d*k.length;return k[h]||k[0]}}},lt=(t=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:u,useMeasure:f,setBackground:e,rand:a}=R(),{getDifficultyRad:o}=F();return n=[...n.splice(a(n.length-1),n.length),...n],t||u(()=>{const{s:l}=f(),s=o(),c=Math.round(l*s),i=Math.round(innerWidth/c/2)-1,d=(innerWidth-2*c*i)/(i+1),h=Math.round(innerHeight/c/2)-1,P=(innerHeight-2*c*h)/(h+1),M=innerWidth>=innerHeight,p=M?i:h,g=M?d:P,m=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)n[v]||(v=0),y.push(`${n[v]} ${(g+c+w*c*2+g*w)/m*100}%`),v++;e(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ut=({palette:t,retry:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:e,rand:a,useTimer:o,useScreenMeta:r,navigate:l,addEventClick:s,intersect:c}=R(),{from:i}=r(),{getDifficultyRad:d}=F(),h=[];let P=[],M,p,g,m;const v=E=>Array.isArray(t)?t[E]:t;return f(()=>{const{s:E}=e();h.splice(0);const w=d(),S=Math.round(E*w),x=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*x)/(x+1),T=Math.round(innerHeight/S/2)-1,b=(innerHeight-2*S*T)/(T+1),W=innerWidth>=innerHeight;let D=0;for(let A=0;A<T;A++){for(let _=0;_<x;_++){v(D)||(D=0);const Z={x:C+S+_*S*2+C*_,y:b+S+A*S*2+b*A,r:S,c:v(D),p:!0};A===0&&_===x-1?(m={...Z,p:(i==="main"||i==="gameover"||i==="gamescore")&&!m},M=I(m),p=at(m)):h.push(Z),D+=W?1:0}D=W?0:D+1}n&&(g=h[a(h.length-1)],o(()=>{g.p=!1})),P=h.map(A=>I(A))}),o(()=>{m.p=!1}),n&&s((E,w)=>{c({x:E,y:w},g)&&(u(g),g.p=!0,o(()=>{l("game")},100))}),s((E,w)=>{c({x:E,y:w},m)&&(u(m),m.p=!0,o(()=>{l("main")},100))}),{render:()=>{P.forEach(E=>E()),M(),m!=null&&m.p||p()},popits:h}},H=100,B="#222",zt=t=>{const n=(t==null?void 0:t[0])||0,u=(t==null?void 0:t[1])||0,f=(t==null?void 0:t[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(u<255?u<1?0:u:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:n,createImg:u,useRandChain:f,useTimer:e}=R();let a,o=!1,r=[];const l=t.r*2/H/2;V[t.imgSrc]?a=V[t.imgSrc]:(a=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},a.img.src=t.imgSrc);const s=()=>e(()=>{o=!o,s()},250),c=(M,p=n)=>{const{x:g,y:m,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(g+y,m+y,y,0,Math.PI*2),p.closePath(),p.fill()},i=(M=n,p=0,g=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,g,2*t.r,2*t.r,l),M.closePath(),M.fill()},d=()=>{const M=[];for(let y=0;y<H;y++)for(let E=0;E<H;E++){const w={x:E*l*2,y:y*l*2,r:l,c:B};M.push(w)}let p=t.score-t.winScore;const g=[...M],m=f(0),v=(y=!1)=>{const E=m(g.length-1),w=g[E],S=M.indexOf(w);w.c=y?B:a.cols[S],g.splice(E,1),y&&r.push({...w,c:a.cols[S]})};for(let y=p;y>0;y--)v();if(t.winScore){r=[];for(let y=t.winScore;y>0;y--)v(!0);s()}return M},h=()=>{const M=d();a.drawImg=u((p=n)=>{i(p),M.filter(g=>g.c!==B).forEach(g=>c(g,p))},2*t.r)},P=async()=>{var g;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(a.img,0,0);for(let m=0;m<H;m++){const v=[];for(let y=0;y<H;y++){const E=(g=p==null?void 0:p.getImageData(y,m,1,1))==null?void 0:g.data;v.push(zt(E))}a.cols.push(...v)}a.isFilled=!0,h()};return a.isFilled?(a.r!==t.r||a.score!==t.score)&&h():a.img.onload=P,(M=n)=>{const{x:p,y:g,r:m,winScore:v}=t;if(a.drawImg?M.drawImage(a.drawImg,p-m,g-m,2*m,2*m):i(M,p-m,g-m),o&&v&&a.drawImg)for(const y of r)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-m+y.x+y.r,g-m+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ft=(t=0)=>{const{addEventResize:n,useMeasure:u,translate:f}=R(),{getScore:e}=F(),a=["/media/cat.png"],o=e();let r,l=0,s=0,c=Math.floor(o/K);return n(()=>{const{cx:M,cy:p,s:g}=u();r=[],l=(g-2*g*.055*1.6)/2,s=g*.05;for(let m=0;m<a.length;m++){const v=a[m];r.push(Ft({x:M,y:p+m*l*2+m*s,r:l,score:o-m*K<0?0:o-m*K,imgSrc:v,winScore:t}))}}),{up:()=>{c=c+1<a.length?c+1:a.length-1},down:()=>{c=c-1<0?0:c-1},render:()=>{f(()=>{r==null||r.forEach(M=>M())},0,-(c*l*2+c*s))},rect:()=>{const{cx:M,cy:p}=u(),g=innerWidth>innerHeight;return{x:g?M-l:0,y:g?0:p-l,w:g?2*l:innerWidth,h:g?innerHeight:2*l}}}},_t=({popits:t,popEffect:n=()=>{},splashEffect:u=()=>{}})=>{const{useTimer:f,rand:e,addEventClick:a,addEventMove:o,intersect:r,navigate:l}=R(),{addScore:s,getDifficultyTic:c}=F();let i=[],d,h,P=!1,M=0,p=0,g=0;const m=c(),v=x=>{const C=t.filter(W=>i.indexOf(W)===-1&&W!==x),T=e(C.length-1),b=C[T];b&&(b.p=!1,i.push(C[T]))},y=()=>{h=f(()=>{if(g=Math.max(g-10,50),t.length===i.length){P=!0,h.stop(),f(()=>{l("gameover")});return}v(),y()},g)},E=x=>{i=[];const C=t.length;let T=e(Math.round(C*.3),Math.round(C*.6));const b=[...t];if(x){const W=b.indexOf(x);b.splice(W,1)}for(let W=T;W>0;W--){const D=e(b.length-1),A=b[D];A.p=!1,i.push(A),b.splice(D,1)}g=m,d==null||d.stop(),h==null||h.stop(),d=f(()=>{u("Too slow"),y()},i.length*m),M=M>0?M:e(3,5)},w=x=>{n(x),g=Math.min(g+5,m),p++,x.p=!0;const C=i.indexOf(x);i.splice(C,1),i.length<=0&&(M--,M>0?f(()=>{u("Round up"),E(x)},100):(d==null||d.stop(),h==null||h.stop(),s(p),f(()=>{l("gamescore",{winScore:p})},100)))},S=(x,C,T=!1)=>{if(!P){for(const b of i)if(r({x,y:C},b)){w(b);return}if(!T){for(const b of t)if(r({x,y:C},b)){n(b,!0),u("Popenalty"),v(b);return}u("Popenalty"),v()}}};a(S),o((x,C)=>S(x,C,!0)),f(()=>{E()})},Lt=()=>{const{addEventResize:t,rand:n,useScreenMeta:u}=R(),{from:f}=u(),{popEffect:e,render:a}=N(),o=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],r=f==="opening"?o[0]:o[n(o.length-1)],{render:l,setIntersections:s}=dt({color:r}),{render:c,point:i}=Ht({popEffect:e}),{render:d,point:h}=it({getX:(p,g,m)=>p+Math.round(g*.25)+2*m,getY:(p,g,m)=>p+Math.round(g*.25)+0*m,popEffect:e}),{render:P,point:M}=Ct({popEffect:e});return t(()=>{const p=M(),g=i(),m=h();s((v,y,E)=>!z({x:v,y,r:E},p)&&!z({x:v,y,r:E},g)&&!z({x:v,y,r:E},m))}),()=>{a(),l(),c(),d(),P()}},$t=()=>{const{useMeasure:t}=R(),n=lt(),{popEffect:u,render:f}=N(),{popits:e,render:a}=ut({palette:n,popEffect:u}),o=(e[0].y-e[0].r)/t().m,{splashEffect:r,render:l}=Q({mfs:o,dy:o});return _t({popits:e,popEffect:u,splashEffect:r}),()=>{f(),a(),l()}},Nt=()=>{const t="#ff6347",{popEffect:n,render:u}=N(),{setBackground:f}=R(),{minusDifficulty:e}=F(),{render:a}=ut({palette:t,retry:!0,popEffect:n});return f(t),e(),()=>{u(),a()}},Ot=()=>{const{translate:t,useScreenMeta:n}=R(),{plusDifficulty:u}=F(),{data:f}=n(),{popEffect:e,render:a}=N(),{splashEffect:o,render:r}=Q();lt();const{render:l}=ft(f==null?void 0:f.winScore),{render:s}=it({getX:(i,d,h)=>innerWidth>innerHeight?Math.min(i+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerWidth-2*h-Math.round(d*.1)):i+(d-2*d*.055*1.6)/8+0*Math.round(d*.1)+2*h,getY:(i,d,h)=>innerWidth>innerHeight?i+(d-2*d*.055*1.6)/2-1*h-Math.round(d*.1):Math.min(i+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerHeight-2*h-Math.round(d*.1)),popEffect:e}),{render:c}=Dt({getX:(i,d,h)=>innerWidth>innerHeight?Math.max(i-(d-2*d*.055*1.6)/2-4*h-Math.round(d*.1),2*h+Math.round(d*.1)):i+(d-2*d*.055*1.6)/8-2*Math.round(d*.1)-2*h,getY:(i,d,h)=>innerWidth>innerHeight?i-(d-2*d*.055*1.6)/2+0*h+Math.round(d*.1):Math.min(i+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerHeight-2*h-Math.round(d*.1)),popEffect:e});return u(),o("You win"),()=>{a(),innerHeight>innerWidth?t(l,0,-Math.round(innerHeight*.07)):l(),s(),c(),r()}},Bt=()=>{const{addEventResize:t,rand:n}=R(),{popEffect:u,render:f}=N(),{splashEffect:e,render:a}=Q(),o=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],r=o[n(o.length-1)],{render:l,setIntersections:s}=dt({color:r,frequency:10}),{render:c,rect:i,up:d,down:h}=ft(),{render:P,point:M}=It({popEffect:u}),{point:p}=Tt(d),{point:g}=Wt(h);return t(()=>{const m=M(),v=i(),y=p(),E=g();s((w,S,x)=>!z({x:w,y:S,r:x},m)&&!St({x:w,y:S,r:x},v)&&!z({x:w,y:S,r:x},y)&&!z({x:w,y:S,r:x},E))}),e("Score"),()=>{f(),l(),c(),P(),a()}},Gt=()=>{const{ctx:t,addEventResize:n,loop:u}=R(),f={x:40,y:100};let e=1,a=1,o;const r=()=>{o=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return r(),n(r),u(()=>{f.x+=2*e,f.y+=3*a,e*=-1,a*=-1}),()=>{t.save();var l=Math.random()*2,s=Math.random()*3;t.translate(l,s),t.beginPath(),t.fillStyle="red",t.rect(f.x,f.y,o,o),t.fill(),t.restore()}},Yt=[{name:"opening",ctor:bt},{name:"main",ctor:Lt},{name:"game",ctor:$t},{name:"gameover",ctor:Nt},{name:"gamescore",ctor:Ot},{name:"score",ctor:Bt},{name:"devs",ctor:Gt}];Rt(Yt);document.title="Your's last Pop it";
