(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const t of l.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function d(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(s){if(s.ep)return;s.ep=!0;const l=d(s);fetch(s.href,l)}})();const Pe=()=>{const e=document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=n=>{o.clearRect(0,0,innerWidth,innerHeight),n()};return d(),document.body.appendChild(e),{ctx:o,render:h,resize:d,rotate:(n,u,r,y)=>{o.save(),o.translate(u,r),o.rotate(Math.PI*y),o.translate(-u,-r),n(),o.restore()},translate:(n,u,r)=>{o.save(),o.translate(u,r),n(),o.restore()},shade:(n,u)=>{n=n.substring(1);const r=parseInt(n,16),y=Math.round(2.55*u),M=(r>>16)+y,c=(r>>8&255)+y,p=(r&255)+y;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(c<255?c<1?0:c:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(n,u)=>{var r;document.body.style.background=n,document.body.style.backgroundColor=u||n,(r=document.querySelector('meta[name="theme-color"]'))==null||r.setAttribute("content",u||n)},createImg:(n,u,r=u)=>{const y=document.createElement("canvas"),M=y.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return y.width=u*devicePixelRatio,y.height=r*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),n(M),y}}},Se=e=>{let o="",d="",h;const s=a=>e.find(i=>i.name===a)||e[0],t={render:()=>{},navigate:(a,i)=>{const n=s(a);d=o||"",o=(n==null?void 0:n.name)||"",h=i,t.render=(n==null?void 0:n.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:d,data:h})};return t},Ee=()=>{const e=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),o=[],d={};return{loop:(t,a)=>{if(Object.entries(d).find(([n,u])=>u===t)||a&&d[a])throw new Error(`Loop${a?" "+a:""} already specified`);a&&o.push(a),a=a||new Date().valueOf().toString(),d[a]=t;const i=()=>{t(),d[a]&&e(i)};i()},stop:t=>{if(typeof t=="string")delete d[t];else{const a=Object.entries(d).find(([i,n])=>n===t);a&&delete d[a[0]]}},stopAll:()=>{for(const t in d)o.indexOf(t)===-1&&delete d[t]}}};let q=[];const Ce=()=>{for(const e of q)clearTimeout(e);q=[]},xe=(e,o=400)=>{let d=new Date,h=o,s=setTimeout(e,h);return q.push(s),{pause:()=>{clearTimeout(s),h-=new Date-d},resume:()=>{d=new Date,clearTimeout(s),s=setTimeout(e,h),q.push(s)},stop:()=>{clearTimeout(s)}}},re=2147483646,J=2147483647,Ie=16807,be=(e=Math.floor(Math.random()*J))=>{e=e%J,e<=0&&(e+=re);const o=()=>(e=e*Ie%J,e),d=()=>(o()-1)/re;return(s,l)=>(l===void 0&&(l=s,s=0),Math.floor(d()*(l-s+1))+s)},Re=(e,o)=>(o===void 0&&(o=e,e=0),Math.floor(Math.random()*(o-e+1))+e),Te=()=>{const e=[],o=[],d=[];return{addEventResize:u=>{u(),e.push(u)},onResizeEvents:()=>e.forEach(u=>u()),addEventClick:u=>o.push(u),onClickEvents:(u,r)=>o.forEach(y=>y(u,r)),addEventMove:u=>d.push(u),onMoveEvents:(u,r)=>d.forEach(y=>y(u,r)),removeAllEvents:()=>{e.splice(0),o.splice(0),d.splice(0)}}},A=(e,o)=>{const d=Math.pow(Math.abs(e.x-o.x),2),h=Math.pow(Math.abs(e.y-o.y),2),s=e.r||0,l=o.r||0,t=Math.pow(s+l,2);return d+h<=t},We=(e,o)=>{const d=e.r||0,h=o.w||0,s=o.h||0;return Math.abs(o.x+h/2-e.x)<=h/2+d&&Math.abs(o.y+s/2-e.y)<=s/2+d},ke=(e,o)=>A(e,o),De=e=>{const o=new AudioContext,d={},h=l=>{fetch(l).then(t=>t.arrayBuffer()).then(t=>(o==null?void 0:o.decodeAudioData(t))||null).then(t=>{t&&(d[l]=t)})};if(e.length)for(const l of e)h(l);return(l,t)=>{setTimeout(async()=>{const a=o.createBufferSource();d[l]||(d[l]=await fetch(l).then(i=>i.arrayBuffer()).then(i=>(o==null?void 0:o.decodeAudioData(i))||null)),a.buffer=d[l],a.connect(o.destination),t&&(a.playbackRate.value=t),a.start()},0)}};let K;const He=(e,o)=>{if(K)throw new Error("Webcore already specified");const d=Pe(),h=Se(e),{loop:s,stop:l,stopAll:t}=Ee(),{addEventResize:a,onResizeEvents:i,addEventClick:n,onClickEvents:u,addEventMove:r,onMoveEvents:y,removeAllEvents:M}=Te();let c=innerWidth/2,p=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight;const P=()=>({cx:c,cy:p,s:f,m:w,isL:m}),g=De(o);K={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:P,useScreenMeta:h.useScreenMeta,navigate:(v,E)=>{if(!e.some(S=>S.name===v))throw new Error(`Screen ${v} not specified`);t(),Ce(),M(),new Promise(()=>h.navigate(v,E))},loop:s,loopStop:l,useTimer:xe,rand:Re,useRandChain:be,intersect:ke,addEventResize:a,addEventClick:n,addEventMove:r,playSound:g},s(()=>d.render(h.render),"draw"),window.onresize=()=>{c=innerWidth/2,p=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight,d.resize(),i()},document.onpointerdown=v=>{u(v.clientX,v.clientY)},document.onmousemove=v=>{y(v.clientX,v.clientY)},h.navigate()},x=()=>{if(!K)throw new Error("Webcore not specified");return{...K}},Q={},D=e=>{const{shade:o,ctx:d,createImg:h}=x(),s=()=>{const{r:t,c:a="#ffffff",p:i}=e,n=d.createRadialGradient(t,t,t,t,t,t/5);return n.addColorStop(0,o(a,0)),n.addColorStop(.01,o(a,0)),n.addColorStop(.075,o(a,9)),n.addColorStop(.15,o(a,0)),n.addColorStop(.15,o(a,-15)),n.addColorStop(.18,o(a,-5)),n.addColorStop(.22,o(a,-15)),i?(n.addColorStop(.24,o(a,-10)),n.addColorStop(.3,o(a,-8)),n.addColorStop(.34,o(a,-12)),n.addColorStop(.6,o(a,-8)),n.addColorStop(1,o(a,-6))):(n.addColorStop(.24,o(a,-12)),n.addColorStop(.26,o(a,-8)),n.addColorStop(.3,o(a,-2)),n.addColorStop(.34,o(a,0)),n.addColorStop(.5,o(a,5)),n.addColorStop(1,o(a,18))),n},l=()=>{const{r:t,c:a="#ffffff",p:i}=e,n=`${a}_${i?"push":"pop"}_${t}`;if(Q[n])return Q[n];const u=h((r=d)=>{const y=s();r.fillStyle=y,r.beginPath(),r.arc(t,t,t,0,2*Math.PI),r.closePath(),r.fill()},2*t);return Q[n]=u,u};return(t=d)=>{const{x:a,y:i,r:n}=e,u=l();t.drawImage(u,a-n,i-n,2*n,2*n)}},Z={},G=e=>{const{ctx:o}=x();let d;return Z[e.src]?d=Z[e.src]:(d=new Image,d.src=e.src,Z[e.src]=d),(h=o)=>{const{w:s,h:l=s,x:t=0,y:a=0}=e;d.complete&&h.drawImage(d,t,a,s,l)}},ie=e=>{const{font:o,ctx:d}=x(),h=e.text,s=e.text.length,l=2*Math.PI/s/4;return(t=d)=>{const{x:a,y:i,r:n,s:u=0,fs:r}=e,y=r||Math.round(n/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${y}px ${o}`,t.save(),t.translate(a,i),t.rotate(u);for(let M=0;M<s;M++)t.save(),t.rotate(M*l),t.fillText(h[M],0,-n),t.restore();t.restore()}},Ae=()=>{var m,P;const{ctx:e,loop:o,rotate:d,navigate:h,useMeasure:s,addEventClick:l,addEventResize:t,setBackground:a}=x();a("#040404");let i=!1,n,u,r,y,M,c=-.2,p=0;t(()=>{const{cx:g,cy:v,s:E}=s(),S=Math.round(E*.25);n={c:"#ff6347",x:g,y:v,r:S,p:!1},u=D(n),r=G({x:g-S+Math.round(S*.35),y:v-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),y=ie({text:"nezabotin",x:g,y:v,r:Math.round(S*1.1),s:Math.PI*1.6}),M=ie({text:"production",x:g,y:v,r:Math.round(S*1.1),s:Math.PI*2.6})});const f=()=>{c+=.01,p=c>=1?1:c,c>=1.8&&(n.p=!0),c>=2.2&&(n.c="#f86a9a"),c>=2.6&&h("main")};l(()=>{[1.4,1.8,2.2,2.6].some(g=>{if(c<g)return c=g,!0})});const w=()=>{o(f),i=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(P=document==null?void 0:document.fonts)==null||P.ready.then(w):w(),()=>{const{cx:g,cy:v}=s();e.globalAlpha=i?1:0,u(),c<1.8&&r(),c<1.4&&d(()=>{y(),M()},g,v,p),e.globalAlpha=1}},ce="ylp",ae="score",ee="difficulty",de="sound",te=[.14,.11,.09,.075],le=750,ze=350,ue=5,_=[];for(let e=0;e*ue<=le-ze;e++)_.push(le-e*ue);let N=null;const z=()=>{const e=c=>localStorage.getItem(`${ce}_${c}`),o=(c,p)=>localStorage.setItem(`${ce}_${c}`,p.toString()),d=()=>+(e(ae)||0),h=c=>o(ae,c),s=c=>{const p=d();h(p+c)},l=()=>+(e(ee)||0),t=c=>{const p=l();o(ee,Math.min(Math.max(p+c,0),te.length*_.length-1))};return{getScore:d,addScore:s,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const c=l(),p=Math.floor(c/_.length);return te[p]||te[1]},getDifficultyTic:()=>{const c=l(),p=Math.floor(c/_.length),f=c-p*_.length;return _[f]||_[0]},resetDifficulty:()=>o(ee,0),getSound:()=>{if(N!==null)return N;const c=e(de);return!c||c==="true"?(N=!0,!0):(N=!1,!1)},setSound:c=>{N=c,o(de,c)}}},pe=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav"];let H=[...pe];const j=()=>{const{rand:e,playSound:o}=x(),{getSound:d}=z();return{playPop:()=>{if(!d())return;const a=e(H.length-1),i=H[a];H.splice(a,1),H.length||(H=[...pe]);const n=e(H.length-1);H=[...H.splice(n,H.length),...H],o(i)},playMissed:()=>{if(!d())return;o("/sounds/new/wrong.mp3")},playFail:()=>{if(!d())return;o("/sounds/fail-fast.mp3")},playWin:()=>{if(!d())return;o("/sounds/win.mp3")}}},B=100/2;let fe=0;const O=()=>{const{loop:e,ctx:o,shade:d,rand:h}=x(),{playPop:s,playMissed:l}=j(),t={},a=()=>{for(const u in t){const r=t[u];if(!r)return;const y=r.popit;if(!r.shake)r.tic+=B/5,r.tic>=B&&(r.dir=-1),r.withoutRad||(y.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:B-r.tic)));else{r.tic+=B/5;const M=h(1,2),c=h(1,2);y.x=r.origX+Math.random()*M*(Math.random()>.5?1:-1),y.y=r.origY+Math.random()*c*(Math.random()>.5?1:-1)}r.tic>=2*B&&(delete t[u],y.r=r.origR,y.x=r.origX,y.y=r.origY)}},i=(u,r=!1,y=!1)=>{var f;r?l():s(),(f=navigator==null?void 0:navigator.vibrate)==null||f.call(navigator,30),fe++;const M=`${new Date().valueOf().toString()}_${fe}`,c=1,p=1;t[M]={withoutRad:r,tic:c,dir:p,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:y}},n=()=>{o.globalAlpha=.25;for(const u in t){const r=t[u];if(r.shake)continue;const y=r.popit;o.fillStyle=d(y.c||"red",-12),o.beginPath(),o.arc(y.x,y.y,y.r+r.origR*.001*(r.tic+(r.dir>0?0:B-r.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return e(a),{popEffect:i,render:n}},Y=e=>{const{font:o,ctx:d}=x();return(h=d)=>{const{text:s,x:l,c:t,y:a,fs:i,a:n="center",mw:u,f:r}=e;h.textAlign=n,h.fillStyle=t,h.font=`${i}px ${r||o}`,h.fillText(s,l,a,u)}},Le=({color:e="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:l,navigate:t,addEventClick:a,intersect:i}=x(),{from:n}=l();let u,r,y;return d(()=>{const{cx:p,cy:f,s:w,m}=h(),P=Math.round(w*.25);u={c:e,r:Math.round(w*.08),x:p-P-1*m,y:f-P+1*m,p:(n==="score"||n==="opening"||n==="devs")&&!u},r=D(u),y=G({x:Number(u.x)-u.r+Math.round(u.r*.5),y:Number(u.y)-u.r+Math.round(u.r*.5),w:u.r*2-Math.round(u.r*1),src:"/media/star.svg"})}),s(()=>{u.p&&o(u,!1,!0),u.p=!1}),a((p,f)=>{i({x:p,y:f},u)&&(o(u),u.p=!0,s(()=>{t("score")},100))}),{render:()=>{r(),u.p||y()},point:()=>({x:u.x,y:u.y,r:u.r})}},ge=({color:e="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,navigate:l,addEventClick:t,intersect:a}=x();let i,n,u;return d(()=>{const{s:M}=h(),c=Math.round(M*.08);i={c:e,r:c,x:Math.round(1.6*c),y:Math.round(1.6*c),p:!i},n=D(i),u=G({x:Number(i.x)-c+Math.round(c*.4),y:Number(i.y)-c+Math.round(c*.4),w:c*2-Math.round(c*.8),src:"/media/back.svg"})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),t((M,c)=>{a({x:M,y:c},i)&&(o(i),i.p=!0,s(()=>{l("main")},100))}),{render:()=>{n(),i.p||u()},point:()=>({x:i.x,y:i.y,r:i.r})}},Fe=({onClick:e})=>{const{addEventResize:o,useMeasure:d,useTimer:h,addEventClick:s,intersect:l,rotate:t}=x(),{playPop:a}=j();let i,n,u;return o(()=>{const{s:M}=d(),c=Math.round(M*.08);i={c:"#ff6347",r:c,x:Math.round(innerWidth-1.6*c),y:Math.round(innerHeight-1.6*c),p:!1},n=D(i),u=G({x:Number(i.x)-c+Math.round(c*.4),y:Number(i.y)-c+Math.round(c*.4),w:c*2-Math.round(c*.8),src:"/media/back.svg"})}),s((M,c)=>{l({x:M,y:c},i)&&(a(),i.p=!0,e(),h(()=>{i.p=!1},100))}),{render:()=>{n(),i.p||t(()=>{u()},i.x,i.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:i.x,y:i.y,r:i.r})}},_e=({onClick:e})=>{const{addEventResize:o,useMeasure:d,useTimer:h,addEventClick:s,intersect:l,rotate:t}=x(),{playPop:a}=j();let i,n,u;return o(()=>{const{s:M}=d(),c=Math.round(M*.08),p=innerWidth<innerHeight?Math.round(innerWidth-1.6*c-2*c-.3*c):Math.round(innerWidth-1.6*c),f=innerWidth<innerHeight?Math.round(innerHeight-1.6*c):Math.round(innerHeight-1.6*c-2*c-.3*c);i={c:"#ff6347",r:c,x:p,y:f,p:!1},n=D(i),u=G({x:Number(i.x)-c+Math.round(c*.4),y:Number(i.y)-c+Math.round(c*.4),w:c*2-Math.round(c*.8),src:"/media/back.svg"})}),s((M,c)=>{l({x:M,y:c},i)&&(a(),i.p=!0,e(),h(()=>{i.p=!1},100))}),{render:()=>{n(),i.p||t(()=>{u()},i.x,i.y,innerHeight>innerWidth?0:.5)},point:()=>({x:i.x,y:i.y,r:i.r})}},Be=e=>{const{ctx:o,shade:d}=x(),h=Math.round(e.r/2.2),s=Math.round(.15*e.r),l=d(e.c||"blue",-3);return(t=o)=>{const{r:a,x:i=a,y:n=a}=e;t.lineCap="round",t.fillStyle=l,t.strokeStyle=l,t.lineWidth=h,t.beginPath(),t.moveTo(i+s,n),t.lineTo(i-s/2,n-s),t.lineTo(i-s/2,n+s),t.closePath(),t.fill(),t.beginPath(),t.moveTo(i+s,n),t.lineTo(i-s/2,n-s),t.moveTo(i-s/2,n-s),t.lineTo(i-s/2,n+s),t.moveTo(i-s/2,n+s),t.lineTo(i+s,n),t.stroke()}},me=({color:e="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:l,navigate:t,addEventClick:a,intersect:i}=x(),{from:n,to:u}=l();let r,y,M;const c=()=>{const{cx:P,cy:g,s:v,m:E}=h(),S=P+Math.round(v*.25)+2*E,C=g+Math.round(v*.25);return{x:S,y:C}},p=()=>{const{cx:P,cy:g,s:v,isL:E,m:S}=h(),C=Math.round(v*.1);if(E){let W=Math.round(P+v/2)+S*2;const k=Math.round(g+v/2-C*2);return W=Math.min(W,Math.round(innerWidth-C*1.5)),{x:W,y:k}}else{const W=Math.round(P+v*.12);let k=Math.round(g+v/2+C*1.5);return k=Math.min(k,innerHeight-Math.round(C*1.5)),{x:W,y:k}}},f=()=>u==="main"?c():p();return d(()=>{const{s:P}=h();r={c:e,r:Math.round(P*.1),...f(),p:(n==="gamescore"||n==="game"||n==="gameover"||n==="opening"||n==="devs")&&!r},y=D(r),M=Be(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),a((P,g)=>{i({x:P,y:g},r)&&(o(r),r.p=!0,s(()=>{t("game")},100))}),{render:()=>{y(),r.p||M()},point:()=>({x:r.x,y:r.y,r:r.r})}},Me=e=>{const{ctx:o,shade:d}=x(),h=Math.round(e.r/4),s=Math.round(.12*e.r);return(l=o)=>{const{r:t,x:a=t,y:i=t}=e,n=d(e.c||"blue",-3);l.lineCap="round",l.strokeStyle=n,l.lineWidth=h,l.beginPath(),l.moveTo(a-1.5*s,i-2*s),l.lineTo(a-1.5*s,i+2*s),l.stroke(),l.beginPath(),l.moveTo(a+1.5*s,i-2*s),l.lineTo(a+1.5*s,i+2*s),l.stroke()}},Oe=({popEffect:e=()=>{}})=>{const{addEventResize:o,useMeasure:d,useTimer:h,useScreenMeta:s,navigate:l,addEventClick:t,intersect:a}=x(),{from:i}=s();let n,u,r;const y=()=>{const{cx:p,cy:f,s:w,isL:m,m:P}=d(),g=Math.round(w*.1);if(m){let v=Math.round(p-w/2)-P;const E=Math.round(f-w/2+g*2);return v=Math.max(v,Math.round(g*1.5)),{x:v,y:E}}else{const v=Math.round(p-w*.12);let E=Math.round(f+w/2+g*1.5);return E=Math.min(E,innerHeight-Math.round(g*1.5)),{x:v,y:E}}};return o(()=>{const{s:p}=d();n={c:"#fd8059",r:Math.round(p*.08),...y(),p:(i==="game"||i==="opening")&&!n},u=D(n),r=Me(n)}),h(()=>{n.p&&e(n,!1,!0),n.p=!1},600),t((p,f)=>{a({x:p,y:f},n)&&(e(n),n.p=!0,h(()=>{l("main")},100))}),{render:()=>{u(),n.p||r()},point:()=>({x:n.x,y:n.y,r:n.r})}},$e=e=>{const{ctx:o,shade:d}=x(),h=Math.round(e.r/4),s=Math.round(.2*e.r),l=d(e.c||"blue",-5);return(t=o)=>{const{r:a,x:i=a,y:n=a}=e;t.lineCap="round",t.fillStyle=l,t.strokeStyle=l,t.lineWidth=h,t.beginPath(),t.ellipse(i-s,n+s,h,s,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(i-s/2,n+s),t.lineTo(i,n-s),t.lineTo(i+s,n-s),t.stroke(),e.on||(t.lineWidth=Math.round(h/3),t.beginPath(),t.moveTo(i-a/4,n-a/4),t.lineTo(i+a/4,n+a/4),t.stroke())}},Ne=({color:e="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:l,addEventClick:t,intersect:a}=x(),{from:i}=l(),{getSound:n,setSound:u}=z();let r,y,M;return d(()=>{const{cx:f,cy:w,s:m,m:P}=h(),g=Math.round(m*.25),v=Math.round(m*.065),E=n();r={c:e,r:v,x:f-g-v-P,y:w-g+3*v,p:(i==="opening"||i==="devs")&&!r,on:E},y=D(r),M=$e(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),t((f,w)=>{if(a({x:f,y:w},r)){let m=n();m=!m,u(m),r.p=!0,r.on=m,o(r),s(()=>{r.p=!1},100)}}),{render:()=>{y(),r.p||M()},point:()=>({x:r.x,y:r.y,r:r.r})}},Ye=({color:e="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:l}=x(),{from:t}=l();let a,i,n,u;return d(()=>{const{cx:M,cy:c,s:p}=h(),f=Math.round(p*.25);a={c:e,x:M,y:c,r:f,p:(t==="opening"||t==="devs")&&!a},i=D(a),n=Y({text:"Yola",c:"#f1f1f1",x:M,y:c-f+Math.round(f*.9),fs:Math.round(f/2.6),mw:f*2}),u=Y({text:"PopiT",c:"#ffeb3b",x:M,y:c-f+Math.round(f*1.3),fs:Math.round(f/2.3),mw:f*2})}),s(()=>{a.p&&o(a,!1,!0),a.p=!1}),{render:()=>{i(),a.p||(n(),u())},point:()=>({x:a.x,y:a.y,r:a.r})}},ye=({color:e="#00dcfe",frequency:o=20})=>{const{addEventResize:d,useRandChain:h,useMeasure:s,rand:l,useTimer:t,setBackground:a,useScreenMeta:i}=x(),{from:n}=i();a(e);const u=l(0,999);let r=[],y=[];d(()=>{const f=h(u),{s:w}=s();r=[];const m=Math.round(w*.04),P=Math.round(innerWidth/m/2)-2,g=Math.round((innerWidth-2*m*P)/(P+1)),v=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*v)/(v+1));for(let S=0;S<v;S++)for(let C=0;C<P;C++)f(f(o))<1&&r.push({x:g+m+C*m*2+g*C,y:E+m+S*m*2+E*S,r:m,c:e,p:n==="opening"?!0:f(1)>0});y=r.map(S=>D(S))});const M=()=>{t(()=>{const f=l(r.length-1);r[f]&&(r[f].p=!r[f].p),M()},750)};return n==="opening"?t(()=>{r.forEach(f=>f.p=l(1)>0),M()}):M(),{render:()=>{y.forEach(f=>f())},setIntersections:f=>{r=r.filter(({x:w,y:m,r:P})=>f(w,m,P)),y=r.map(w=>D(w))}}},oe=(e=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:h,setBackground:s,rand:l}=x(),{getDifficultyRad:t}=z();return o=[...o.splice(l(o.length-1),o.length),...o],e||d(()=>{const{s:i}=h(),n=t(),u=Math.round(i*n),r=Math.round(innerWidth/u/2)-1,y=(innerWidth-2*u*r)/(r+1),M=Math.round(innerHeight/u/2)-1,c=(innerHeight-2*u*M)/(M+1),p=innerWidth>=innerHeight,f=p?r:M,w=p?y:c,m=p?innerWidth:innerHeight;let P=0;const g=[];for(let E=0;E<f;E++)o[P]||(P=0),g.push(`${o[P]} ${(w+u+E*u*2+w*E)/m*100}%`),P++;s(`linear-gradient(${p?"to right":"to bottom"}, ${g.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ve=({palette:e,retry:o,popEffect:d=()=>{}})=>{const{addEventResize:h,useMeasure:s,rand:l,useTimer:t,useScreenMeta:a,navigate:i,addEventClick:n,intersect:u}=x(),{from:r}=a(),{getDifficultyRad:y}=z(),M=[];let c=[],p,f,w,m={x:0,y:0,r:0};const P=v=>Array.isArray(e)?e[v]:e;return h(()=>{const{s:v}=s();M.splice(0);const E=y(),S=Math.round(v*E),C=Math.round(innerWidth/S/2)-1,W=(innerWidth-2*S*C)/(C+1),k=Math.round(innerHeight/S/2)-1,X=(innerHeight-2*S*k)/(k+1),$=innerWidth>=innerHeight;let I=0;for(let b=0;b<k;b++){for(let T=0;T<C;T++){P(I)||(I=0);const R={x:W+S+T*S*2+W*T,y:X+S+b*S*2+X*b,r:S,c:P(I),p:!0};b===0&&T===C-1?(m={x:R.x,y:R.y,r:R.r,c:R.c,p:(r==="main"||r==="gameover"||r==="gamescore")&&!m.r},p=D(m),f=Me(m)):M.push(R),I+=$?1:0}I=$?0:I+1}o&&(w=M[l(M.length-1)],t(()=>{d(w,!1,!0),w.p=!1})),c=M.map(b=>D(b))}),t(()=>{m.p&&d(m,!1,!0),m.p=!1}),o&&n((v,E)=>{u({x:v,y:E},w)&&(d(w),w.p=!0,t(()=>{i("game")},100))}),n((v,E)=>{u({x:v,y:E},m)&&(d(m),m.p=!0,t(()=>{i("main")},100))}),{render:()=>{c.forEach(v=>v()),p(),m!=null&&m.p||f()},popits:M,pausePpt:m}},F=100,V="#222",Ge=e=>{const o=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(d<255?d<1?0:d:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},ne={},je=e=>{const{ctx:o,createImg:d,useRandChain:h,useTimer:s}=x();let l,t=!1,a=[];const i=e.r*2/F/2;ne[e.imgSrc]?l=ne[e.imgSrc]:(l=ne[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},l.img.src=e.imgSrc);const n=()=>s(()=>{t=!t,n()},250),u=(p,f=o)=>{const{x:w,y:m,c:P,r:g}=p;f.fillStyle=P||"red",f.beginPath(),f.arc(w+g,m+g,g,0,Math.PI*2),f.closePath(),f.fill()},r=(p=o,f=0,w=0)=>{p.fillStyle=V,p.beginPath(),p.roundRect(f,w,2*e.r,2*e.r,i),p.closePath(),p.fill()},y=()=>{const p=[];for(let g=0;g<F;g++)for(let v=0;v<F;v++){const E={x:v*i*2,y:g*i*2,r:i,c:V};p.push(E)}let f=e.score-e.winScore;const w=[...p],m=h(e.seed),P=(g=!1)=>{const v=m(w.length-1),E=w[v],S=p.indexOf(E);E.c=g?V:l.cols[S],w.splice(v,1),g&&a.push({...E,c:l.cols[S]})};for(let g=f;g>0;g--)P();if(e.winScore){a=[];for(let g=e.winScore;g>0;g--)P(!0);n()}return p},M=()=>{const p=y();l.drawImg=d((f=o)=>{r(f),p.filter(w=>w.c!==V).forEach(w=>u(w,f))},2*e.r)},c=async()=>{var w;const p=document.createElement("canvas");p.width=F,p.height=F;const f=p.getContext("2d",{willReadFrequently:!0});f==null||f.drawImage(l.img,0,0);for(let m=0;m<F;m++){const P=[];for(let g=0;g<F;g++){const v=(w=f==null?void 0:f.getImageData(g,m,1,1))==null?void 0:w.data;P.push(Ge(v))}l.cols.push(...P)}l.isFilled=!0,M()};return l.isFilled?(l.r!==e.r||l.score!==e.score)&&M():l.img.onload=c,(p=o)=>{const{x:f,y:w,r:m,winScore:P}=e;if(l.drawImg?p.drawImage(l.drawImg,f-m,w-m,2*m,2*m):r(p,f-m,w-m),t&&P&&l.drawImg)for(const g of a)p.fillStyle=g.c||"red",p.beginPath(),p.arc(f-m+g.x+g.r,w-m+g.y+g.r,g.r,0,Math.PI*2),p.closePath(),p.fill()}},he=1e4,we=(e=0,o=!1)=>{const{addEventResize:d,useMeasure:h,translate:s}=x(),{getScore:l}=z(),t=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],a=l();let i,n=0,u=0,r=!1,y=!1;const M=P=>Math.min(Math.floor(P/he),t.length-1);let c=M(a-e);if(e){const P=M(a);r=P!==c,y=P>t.length-1}return d(()=>{const{cx:P,cy:g,s:v,isL:E}=h();i=[],n=(v-2*v*.055*1.6)/2,u=v*.05;let S=o?c:0;for(S;S<(o?c+1:t.length);S++){const C=t[S],W=E?P:P+S*n*2+S*u,k=E?g+S*n*2+S*u:g;i.push(je({x:W,y:k,r:n,score:Math.min(a-S*he,1e4),imgSrc:C,winScore:r?0:e,seed:S}))}}),{up:()=>{c=c+1<t.length?c+1:t.length-1},down:()=>{c=c-1<0?0:c-1},render:()=>{const{isL:P}=h(),g=P?0:-(c*n*2+c*u),v=P?-(c*n*2+c*u):0;s(()=>{i==null||i.forEach(E=>E())},g,v)},rect:()=>{const{cx:P,cy:g}=h(),v=innerWidth>innerHeight;return{x:v?P-n:0,y:v?0:g-n,w:v?2*n:innerWidth,h:v?innerHeight:2*n}},isJump:r,isCompleted:y}},Xe=({popits:e,pausePpt:o,popEffect:d=()=>{},splashEffect:h=()=>{}})=>{const{useTimer:s,rand:l,addEventClick:t,addEventMove:a,intersect:i,navigate:n,addEventResize:u}=x(),{getScore:r,addScore:y,getDifficultyTic:M}=z();let c=[],p,f,w=!1,m=0,P=0,g=0;const v=r(),E=M(),S=I=>{const b=e.filter(L=>c.indexOf(L)===-1&&L!==I),T=l(b.length-1),R=b[T];R&&(d(R,!1,!0),R.p=!1,c.push(b[T]))},C=()=>{f=s(()=>{if(g=Math.max(g-10,50),e.length===c.length){w=!0,f.stop(),s(()=>{n("gameover")});return}S(),C()},g)},W=I=>{c=[];const b=e.length;let T=l(Math.round(b*.3),Math.round(b*.6));const R=[...e];if(I){const L=R.indexOf(I);R.splice(L,1)}for(let L=T;L>0;L--){const se=l(R.length-1),U=R[se];U.p=!1,d(U,!1,!0),c.push(U),R.splice(se,1)}g=E,p==null||p.stop(),f==null||f.stop(),v&&(p=s(()=>{h("SLOWLY"),C()},c.length*E)),m=m>0?m:l(3,5)},k=()=>1,X=I=>{d(I),g=Math.min(g+5,E),P++,I.p=!0;const b=c.indexOf(I);if(c.splice(b,1),c.length<=0)if(m--,m>0)s(()=>{h("Round"),W(I)},100);else{p==null||p.stop(),f==null||f.stop();const T=k();y(P*T),s(()=>{n("gamescore",{winScore:P*T})},100)}},$=(I,b,T=!1)=>{if(!w){for(const R of c)if(i({x:I,y:b},R)){X(R);return}if(!i({x:I,y:b},o)&&!T){for(const R of e)if(i({x:I,y:b},R)){d(R,!0),h("Popenalty"),S(R);return}h("Popenalty"),S()}}};t($),a((I,b)=>$(I,b,!0)),u(()=>{s(()=>{h("Pop it"),W()})})},Ve=e=>{const{addEventResize:o,createImg:d,useMeasure:h,ctx:s,loop:l}=x();let t,a,i,n,u,r,y,M=!1,c=-2;const p=.1;return o(()=>{const{s:f,m:w}=h();a=Math.round(f*.16),u=f,r=Math.round(a*1.5),i=0,n=Math.round((innerHeight-innerHeight/2-f/2)/2-a/2)+w*2,y=n,M=n-a/2>-(a/2)+w*2;const m={fs:a,text:e,x:Math.round(f/2),y:a,c:"#f9f9f9",mw:Math.round(f*.8)},P=Y(m);t=d((g=s)=>{P(g)},u,r)}),l(()=>{const{m:f}=h();n+=c,c+=p,n<=f&&(n=f),n>=y&&(n=y,c=-2)}),()=>{M&&s.drawImage(t,i,n,u,r)}},qe=()=>{const{addEventResize:e,rand:o,useScreenMeta:d}=x(),{from:h}=d(),{popEffect:s,render:l}=O(),t=["#00dcfe","#5bb2f7","#92E6E6"],a=h==="opening"?t[0]:t[o(t.length-1)],{render:i,setIntersections:n}=ye({color:a}),{render:u,point:r}=Ye({popEffect:s}),{render:y,point:M}=me({popEffect:s}),{render:c,point:p}=Le({popEffect:s}),{render:f,point:w}=Ne({popEffect:s});return e(()=>{const m=p(),P=r(),g=M(),v=w();n((E,S,C)=>!A({x:E,y:S,r:C},m)&&!A({x:E,y:S,r:C},P)&&!A({x:E,y:S,r:C},g)&&!A({x:E,y:S,r:C},v))}),()=>{l(),i(),u(),y(),c(),f()}},Ke=()=>{const{useMeasure:e,addEventResize:o}=x(),d=oe(),{popEffect:h,render:s}=O(),{popits:l,render:t,pausePpt:a}=ve({palette:d,popEffect:h});return Xe({popits:l,popEffect:h,pausePpt:a}),o(()=>{(l[0].y-l[0].r)/e().m}),()=>{s(),t()}},Ue=()=>{const e="#ff6347",{popEffect:o,render:d}=O(),{setBackground:h}=x(),{minusDifficulty:s}=z(),{render:l}=ve({palette:e,retry:!0,popEffect:o}),{playFail:t}=j();return h(e),s(),t(),()=>{d(),l()}},Je=()=>{const{useScreenMeta:e}=x(),{plusDifficulty:o,resetDifficulty:d}=z(),{data:h}=e(),{popEffect:s,render:l}=O();oe();const{playWin:t}=j(),{render:a,isJump:i}=we(h==null?void 0:h.winScore,!0),{render:n}=me({popEffect:s}),{render:u}=Oe({popEffect:s}),r=Ve(i?"Complete":"You win");return i?d():o(),t(),()=>{l(),a(),n(),u(),r()}},Qe=()=>{const{addEventResize:e,rand:o}=x(),{popEffect:d,render:h}=O(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],l=s[o(s.length-1)],{render:t,setIntersections:a}=ye({color:l,frequency:10}),{render:i,rect:n,up:u,down:r}=we(),{render:y,point:M}=ge({popEffect:d}),{render:c,point:p}=Fe({onClick:u,popEffect:d}),{render:f,point:w}=_e({onClick:r,popEffect:d});return e(()=>{const m=M(),P=n(),g=p(),v=w();a((E,S,C)=>!A({x:E,y:S,r:C},m)&&!We({x:E,y:S,r:C},P)&&!A({x:E,y:S,r:C},g)&&!A({x:E,y:S,r:C},v))}),()=>{h(),t(),i(),y(),c(),f()}},Ze=()=>{const{addEventResize:e,setBackground:o,createImg:d,useMeasure:h,ctx:s,loop:l,navigate:t}=x(),{popEffect:a,render:i}=O(),{render:n}=ge({popEffect:a}),u=oe(!0);let r=[];const y=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let M=innerHeight;return e(()=>{const{m:c,s:p}=h();r=[];const f=Math.round(c*3.5),w=Math.round(p*.75),m=Math.round((innerWidth-w)/2);let P=0;for(const g of y){u[P]||(P=0);const v=Y({text:g,x:0,y:f,c:u[P],fs:Math.round(f*.6),mw:w,a:"left"}),E=Y({text:"Maksim Nezabotin",x:w,y:f*1.5,c:"#f9f9f9",fs:Math.round(f*.7),mw:w,a:"right"}),S=d((C=s)=>{v(C),E(C)},w,2*f);r.push({img:S,x:m,y:M,w,h:5*f}),M+=5*f,P++}}),o("#040404"),l(()=>{for(const p of r)p.y-=2;const c=r[r.length-1];c.y+c.h<0&&t("main")}),()=>{r.forEach(({img:c,x:p,y:f,w,h:m})=>{s.drawImage(c,p,f,w,m)}),i(),n()}},et=[{name:"opening",ctor:Ae},{name:"main",ctor:qe},{name:"game",ctor:Ke},{name:"gameover",ctor:Ue},{name:"gamescore",ctor:Je},{name:"score",ctor:Qe},{name:"devs",ctor:Ze}],tt=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3"];He(et,tt);document.title="Yo last Pop it";
