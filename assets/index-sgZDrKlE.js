(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const ye=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},l=n=>{t.clearRect(0,0,innerWidth,innerHeight),n()};return a(),document.body.appendChild(e),{ctx:t,render:l,resize:a,rotate:(n,o,u,f)=>{t.save(),t.translate(o,u),t.rotate(Math.PI*f),t.translate(-o,-u),n(),t.restore()},translate:(n,o,u)=>{t.save(),t.translate(o,u),n(),t.restore()},shade:(n,o)=>{n=n.substring(1);const u=parseInt(n,16),f=Math.round(2.55*o),d=(u>>16)+f,g=(u>>8&255)+f,m=(u&255)+f;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(g<255?g<1?0:g:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},setBackground:(n,o)=>{var u;document.body.style.background=n,document.body.style.backgroundColor=o||n,(u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",o||n)},createImg:(n,o,u=o)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d)throw new Error("CanvasRenderingContext2D is null");return f.width=o*devicePixelRatio,f.height=u*devicePixelRatio,d.scale(devicePixelRatio,devicePixelRatio),n(d),f}}},ve=e=>{let t="",a="",l;const r=c=>e.find(h=>h.name===c)||e[0],s={render:()=>{},navigate:(c,h)=>{const n=r(c);a=t||"",t=(n==null?void 0:n.name)||"",l=h,s.render=(n==null?void 0:n.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:a,data:l})};return s},Ee=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),t=[],a={};return{loop:(s,c)=>{if(Object.entries(a).find(([n,o])=>o===s)||c&&a[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&t.push(c),c=c||new Date().valueOf().toString(),a[c]=s;const h=()=>{s(),a[c]&&e(h)};h()},stop:s=>{if(typeof s=="string")delete a[s];else{const c=Object.entries(a).find(([h,n])=>n===s);c&&delete a[c[0]]}},stopAll:()=>{for(const s in a)t.indexOf(s)===-1&&delete a[s]}}};let j=[];const Pe=()=>{for(const e of j)clearTimeout(e);j=[]},Se=(e,t=400)=>{let a=new Date,l=t,r=setTimeout(e,l);return j.push(r),{pause:()=>{clearTimeout(r),l-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(e,l),j.push(r)},stop:()=>{clearTimeout(r)}}},oe=2147483646,U=2147483647,xe=16807,we=(e=Math.floor(Math.random()*U))=>{e=e%U,e<=0&&(e+=oe);const t=()=>(e=e*xe%U,e),a=()=>(t()-1)/oe;return(r,i)=>(i===void 0&&(i=r,r=0),Math.floor(a()*(i-r+1))+r)},Ce=(e,t)=>(t===void 0&&(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e),Re=()=>{const e=[],t=[],a=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>t.push(o),onClickEvents:(o,u)=>t.forEach(f=>f(o,u)),addEventMove:o=>a.push(o),onMoveEvents:(o,u)=>a.forEach(f=>f(o,u)),removeAllEvents:()=>{e.splice(0),t.splice(0),a.splice(0)}}},L=(e,t)=>{const a=Math.pow(Math.abs(e.x-t.x),2),l=Math.pow(Math.abs(e.y-t.y),2),r=e.r||0,i=t.r||0,s=Math.pow(r+i,2);return a+l<=s},be=(e,t)=>{const a=e.r||0,l=t.w||0,r=t.h||0;return Math.abs(t.x+l/2-e.x)<=l/2+a&&Math.abs(t.y+r/2-e.y)<=r/2+a},Ie=(e,t)=>L(e,t),Te=()=>{let e=null,t={};return async a=>{e=new AudioContext;const l=e.createBufferSource();t[a]||(t[a]=await fetch(a).then(r=>r.arrayBuffer()).then(r=>(e==null?void 0:e.decodeAudioData(r))||null)),l.buffer=t[a],l.connect(e.destination),l.start()}};let q;const We=e=>{if(q)throw new Error("Webcore already specified");const t=ye(),a=ve(e),{loop:l,stop:r,stopAll:i}=Ee(),{addEventResize:s,onResizeEvents:c,addEventClick:h,onClickEvents:n,addEventMove:o,onMoveEvents:u,removeAllEvents:f}=Re();let d=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,p=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight;const M=()=>({cx:d,cy:g,s:m,m:p,isL:E}),v=Te();q={font:"Tijuf",ctx:t.ctx,shade:t.shade,rotate:t.rotate,translate:t.translate,setBackground:t.setBackground,createImg:t.createImg,useMeasure:M,useScreenMeta:a.useScreenMeta,navigate:(y,P)=>{if(!e.some(x=>x.name===y))throw new Error(`Screen ${y} not specified`);i(),Pe(),f(),new Promise(()=>a.navigate(y,P))},loop:l,loopStop:r,useTimer:Se,rand:Ce,useRandChain:we,intersect:Ie,addEventResize:s,addEventClick:h,addEventMove:o,playSound:v},l(()=>t.render(a.render),"draw"),window.onresize=()=>{d=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,p=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight,t.resize(),c()},document.onpointerdown=y=>{n(y.clientX,y.clientY)},document.onmousemove=y=>{u(y.clientX,y.clientY)},a.navigate()},w=()=>{if(!q)throw new Error("Webcore not specified");return{...q}},K={},W=e=>{const{shade:t,ctx:a,createImg:l}=w(),r=()=>{const{r:s,c="#ffffff",p:h}=e,n=a.createRadialGradient(s,s,s,s,s,s/5);return n.addColorStop(0,t(c,0)),n.addColorStop(.01,t(c,0)),n.addColorStop(.075,t(c,9)),n.addColorStop(.15,t(c,0)),n.addColorStop(.15,t(c,-15)),n.addColorStop(.18,t(c,-5)),n.addColorStop(.22,t(c,-15)),h?(n.addColorStop(.24,t(c,-10)),n.addColorStop(.3,t(c,-8)),n.addColorStop(.34,t(c,-12)),n.addColorStop(.6,t(c,-6)),n.addColorStop(1,t(c,-4))):(n.addColorStop(.24,t(c,-12)),n.addColorStop(.26,t(c,-8)),n.addColorStop(.3,t(c,-2)),n.addColorStop(.34,t(c,0)),n.addColorStop(.5,t(c,5)),n.addColorStop(1,t(c,12))),n},i=()=>{const{r:s,c="#ffffff",p:h}=e,n=`${c}_${h?"push":"pop"}_${s}`;if(K[n])return K[n];const o=l((u=a)=>{const f=r();u.fillStyle=f,u.beginPath(),u.arc(s,s,s,0,2*Math.PI),u.closePath(),u.fill()},2*s);return K[n]=o,o};return(s=a)=>{const{x:c,y:h,r:n}=e,o=i();s.drawImage(o,c-n,h-n,2*n,2*n)}},J={},N=e=>{const{ctx:t}=w();let a;return J[e.src]?a=J[e.src]:(a=new Image,a.src=e.src,J[e.src]=a),(l=t)=>{const{w:r,h:i=r,x:s=0,y:c=0}=e;a.complete&&l.drawImage(a,s,c,r,i)}},re=e=>{const{font:t,ctx:a}=w(),l=e.text,r=e.text.length,i=2*Math.PI/r/4;return(s=a)=>{const{x:c,y:h,r:n,s:o=0,fs:u}=e,f=u||Math.round(n/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${f}px ${t}`,s.save(),s.translate(c,h),s.rotate(o);for(let d=0;d<r;d++)s.save(),s.rotate(d*i),s.fillText(l[d],0,-n),s.restore();s.restore()}},He=()=>{var M,v;const{ctx:e,loop:t,rotate:a,navigate:l,useMeasure:r,addEventClick:i,addEventResize:s,setBackground:c}=w();c("#040404");let h=!1,n,o,u,f,d,g=-.2,m=0;s(()=>{const{cx:y,cy:P,s:x}=r(),S=Math.round(x*.25);n={c:"#ff6347",x:y,y:P,r:S,p:!1},o=W(n),u=N({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),f=re({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),d=re({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{g+=.01,m=g>=1?1:g,g>=1.8&&(n.p=!0),g>=2.2&&(n.c="#f86a9a"),g>=2.6&&l("main")};i(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(g<y)return g=y,!0})});const E=()=>{t(p),h=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(E):E(),()=>{const{cx:y,cy:P}=r();e.globalAlpha=h?1:0,o(),g<1.8&&u(),g<1.4&&a(()=>{f(),d()},y,P,m),e.globalAlpha=1}},_=100/2;let se=0;const O=()=>{const{loop:e,ctx:t,shade:a,rand:l}=w(),r={},i=()=>{for(const h in r){const n=r[h];if(!n)return;const o=n.popit;if(!n.shake)n.tic+=_/5,n.tic>=_&&(n.dir=-1),n.withoutRad||(o.r=n.origR+n.origR*75e-5*(n.tic+(n.dir>0?0:_-n.tic)));else{n.tic+=_/5;const u=l(1,2),f=l(1,2);o.x=n.origX+Math.random()*u*(Math.random()>.5?1:-1),o.y=n.origY+Math.random()*f*(Math.random()>.5?1:-1)}n.tic>=2*_&&(delete r[h],o.r=n.origR,o.x=n.origX,o.y=n.origY)}},s=(h,n=!1,o=!1)=>{se++;const u=`${new Date().valueOf().toString()}_${se}`,f=1,d=1;r[u]={withoutRad:n,tic:f,dir:d,popit:h,origR:h.r,origX:h.x,origY:h.y,shake:o}},c=()=>{t.globalAlpha=.25;for(const h in r){const n=r[h];if(n.shake)continue;const o=n.popit;t.fillStyle=a(o.c||"red",-12),t.beginPath(),t.arc(o.x,o.y,o.r+n.origR*.001*(n.tic+(n.dir>0?0:_-n.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return e(i),{popEffect:s,render:c}},te=e=>{const{font:t,ctx:a}=w();return(l=a)=>{const{text:r,x:i,c:s,y:c,fs:h,a:n="center",mw:o}=e;l.textAlign=n,l.fillStyle=s,l.font=`${h}px ${t}`,l.fillText(r,i,c,o)}},G=100,ue=e=>{const{loop:t,ctx:a,useMeasure:l,rand:r}=w();let i=null;const s=()=>{if(!i)return;const{m:n}=l();if(i.tic<=G)i.props.fs=((e==null?void 0:e.mfs)||6)/G*i.tic*n;else{const o=r(1,1),u=r(1,1);i.props.x=i.origX+Math.random()*o*(Math.random()>.5?1:-1),i.props.y=i.origY+Math.random()*u*(Math.random()>.5?1:-1),i.shake=!0}i.tic+=i.tic>G?1:10,i.tic>G*2&&!(e!=null&&e.infinity)&&(i=null)},c=n=>{const{cx:o,m:u}=l(),f=0,d={x:o,y:Math.round(u*((e==null?void 0:e.dy)||16)),text:n,c:(e==null?void 0:e.color)||"#ffffff",fs:0},g=te(d);i={props:d,shape:g,tic:f,origX:d.x,origY:d.y}},h=()=>{i&&(a.globalAlpha=.01*i.tic,i.shape(),a.globalAlpha=1)};return t(s),{splashEffect:c,render:h}},ke=({color:e="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:h}=w(),{from:n}=i();let o,u,f;return a(()=>{const{cx:m,cy:p,s:E,m:M}=l(),v=Math.round(E*.25);o={c:e,r:Math.round(E*.08),x:m-v-1*M,y:p-v+1*M,p:(n==="score"||n==="opening")&&!o},u=W(o),f=N({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&t(o,!1,!0),o.p=!1}),c((m,p)=>{h({x:m,y:p},o)&&(t(o),o.p=!0,r(()=>{s("score")},100))}),{render:()=>{u(),o.p||f()},point:()=>({x:o.x,y:o.y,r:o.r})}},De=({color:e="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:h}=w(),{from:n}=i();let o,u,f;return a(()=>{const{s:m}=l(),p=Math.round(m*.08);o={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:n==="main"&&!o},u=W(o),f=N({x:Number(o.x)-p+Math.round(p*.4),y:Number(o.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{o.p&&t(o,!1,!0),o.p=!1}),c((m,p)=>{h({x:m,y:p},o)&&(t(o),o.p=!0,r(()=>{s("main")},100))}),{render:()=>{u(),o.p||f()},point:()=>({x:o.x,y:o.y,r:o.r})}},Ae=({onClick:e})=>{const{addEventResize:t,useMeasure:a,useTimer:l,addEventClick:r,intersect:i,rotate:s}=w();let c,h,n;return t(()=>{const{s:f}=a(),d=Math.round(f*.08);c={c:"#ff6347",r:d,x:Math.round(innerWidth-1.6*d),y:Math.round(innerHeight-1.6*d),p:!1},h=W(c),n=N({x:Number(c.x)-d+Math.round(d*.4),y:Number(c.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),r((f,d)=>{i({x:f,y:d},c)&&(c.p=!0,e(),l(()=>{c.p=!1},100))}),{render:()=>{h(),c.p||s(()=>{n()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},ze=({onClick:e})=>{const{addEventResize:t,useMeasure:a,useTimer:l,addEventClick:r,intersect:i,rotate:s}=w();let c,h,n;return t(()=>{const{s:f}=a(),d=Math.round(f*.08),g=innerWidth<innerHeight?Math.round(innerWidth-1.6*d-2*d-.3*d):Math.round(innerWidth-1.6*d),m=innerWidth<innerHeight?Math.round(innerHeight-1.6*d):Math.round(innerHeight-1.6*d-2*d-.3*d);c={c:"#ff6347",r:d,x:g,y:m,p:!1},h=W(c),n=N({x:Number(c.x)-d+Math.round(d*.4),y:Number(c.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),r((f,d)=>{i({x:f,y:d},c)&&(c.p=!0,e(),l(()=>{c.p=!1},100))}),{render:()=>{h(),c.p||s(()=>{n()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Le=e=>{const{ctx:t,shade:a}=w(),l=Math.round(e.r/2.2),r=Math.round(.15*e.r),i=a(e.c||"blue",-3);return(s=t)=>{const{r:c,x:h=c,y:n=c}=e;s.lineCap="round",s.fillStyle=i,s.strokeStyle=i,s.lineWidth=l,s.beginPath(),s.moveTo(h+r,n),s.lineTo(h-r/2,n-r),s.lineTo(h-r/2,n+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(h+r,n),s.lineTo(h-r/2,n-r),s.moveTo(h-r/2,n-r),s.lineTo(h-r/2,n+r),s.moveTo(h-r/2,n+r),s.lineTo(h+r,n),s.stroke()}},fe=({getX:e,getY:t,color:a="#bef181",popEffect:l=()=>{}})=>{const{addEventResize:r,useMeasure:i,useTimer:s,useScreenMeta:c,navigate:h,addEventClick:n,intersect:o}=w(),{from:u}=c();let f,d,g;return r(()=>{const{cx:E,cy:M,s:v,m:y}=i();f={c:a,r:Math.round(v*.1),x:e(E,v,y),y:t(M,v,y),p:(u==="gamescore"||u==="game"||u==="opening")&&!f},d=W(f),g=Le(f)}),s(()=>{f.p&&l(f,!1,!0),f.p=!1}),n((E,M)=>{o({x:E,y:M},f)&&(l(f),f.p=!0,s(()=>{h("game")},100))}),{render:()=>{d(),f.p||g()},point:()=>({x:f.x,y:f.y,r:f.r})}},he=e=>{const{ctx:t,shade:a}=w(),l=Math.round(e.r/4),r=Math.round(.12*e.r);return(i=t)=>{const{r:s,x:c=s,y:h=s}=e,n=a(e.c||"blue",-3);i.lineCap="round",i.strokeStyle=n,i.lineWidth=l,i.beginPath(),i.moveTo(c-1.5*r,h-2*r),i.lineTo(c-1.5*r,h+2*r),i.stroke(),i.beginPath(),i.moveTo(c+1.5*r,h-2*r),i.lineTo(c+1.5*r,h+2*r),i.stroke()}},_e=({getX:e,getY:t,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:r,useTimer:i,useScreenMeta:s,navigate:c,addEventClick:h,intersect:n}=w(),{from:o}=s();let u,f,d;return l(()=>{const{cx:p,cy:E,s:M,m:v}=r();u={c:"#fd8059",r:Math.round(M*.08),x:e(p,M,v),y:t(E,M,v),p:(o==="game"||o==="opening")&&!u},f=W(u),d=he(u)}),i(()=>{u.p&&a(u,!1,!0),u.p=!1}),h((p,E)=>{n({x:p,y:E},u)&&(a(u),u.p=!0,i(()=>{c("main")},100))}),{render:()=>{f(),u.p||d()},point:()=>({x:u.x,y:u.y,r:u.r})}},Fe=({color:e="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:a,useMeasure:l,useTimer:r,useScreenMeta:i,addEventClick:s,intersect:c,navigate:h}=w(),{from:n}=i();let o,u,f,d;return a(()=>{const{cx:p,cy:E,s:M}=l(),v=Math.round(M*.25);o={c:e,x:p,y:E,r:v,p:n==="opening"&&!o},u=W(o),f=te({text:"Yola",c:"#f1f1f1",x:p,y:E-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),d=te({text:"PopiT",c:"#ffeb3b",x:p,y:E-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{o.p&&t(o,!1,!0),o.p=!1}),s((p,E)=>{c({x:p,y:E},o)&&(t(o),o.p=!0,r(()=>{h("opening")},100))}),{render:()=>{u(),o.p||(f(),d())},point:()=>({x:o.x,y:o.y,r:o.r})}},ge=({color:e="#00dcfe",frequency:t=20})=>{const{addEventResize:a,useRandChain:l,useMeasure:r,rand:i,useTimer:s,setBackground:c,useScreenMeta:h}=w(),{from:n}=h();c(e);const o=i(0,999);let u=[],f=[];a(()=>{const p=l(o),{s:E}=r();u=[];const M=Math.round(E*.05),v=Math.round(innerWidth/M/2)-1,y=Math.round((innerWidth-2*M*v)/(v+1)),P=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<v;b++)p(p(t))<1&&u.push({x:y+M+b*M*2+y*b,y:x+M+S*M*2+x*S,r:M,c:e,p:n==="opening"?!0:p(1)>0});f=u.map(S=>W(S))});const d=()=>{s(()=>{const p=i(u.length-1);u[p]&&(u[p].p=!u[p].p),d()},250)};return n==="opening"?s(()=>{u.forEach(p=>p.p=i(1)>0),d()}):d(),{render:()=>{f.forEach(p=>p())},setIntersections:p=>{u=u.filter(({x:E,y:M,r:v})=>p(E,M,v)),f=u.map(E=>W(E))}}},ie="ylp",ce="score",Q="difficulty",Z=[.14,.11,.09,.075],ae=750,$e=350,de=5,z=[];for(let e=0;e*de<=ae-$e;e++)z.push(ae-e*de);const $=()=>{const e=f=>localStorage.getItem(`${ie}_${f}`),t=(f,d)=>localStorage.setItem(`${ie}_${f}`,d.toString()),a=()=>+(e(ce)||0),l=f=>t(ce,f),r=f=>{const d=a();l(d+f)},i=()=>+(e(Q)||0),s=f=>{const d=i();t(Q,Math.min(Math.max(d+f,0),Z.length*z.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const f=i(),d=Math.floor(f/z.length);return Z[d]||Z[1]},getDifficultyTic:()=>{const f=i(),d=Math.floor(f/z.length),g=f-d*z.length;return z[g]||z[0]},resetDifficulty:()=>t(Q,0)}},pe=(e=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:l,setBackground:r,rand:i}=w(),{getDifficultyRad:s}=$();return t=[...t.splice(i(t.length-1),t.length),...t],e||a(()=>{const{s:h}=l(),n=s(),o=Math.round(h*n),u=Math.round(innerWidth/o/2)-1,f=(innerWidth-2*o*u)/(u+1),d=Math.round(innerHeight/o/2)-1,g=(innerHeight-2*o*d)/(d+1),m=innerWidth>=innerHeight,p=m?u:d,E=m?f:g,M=m?innerWidth:innerHeight;let v=0;const y=[];for(let x=0;x<p;x++)t[v]||(v=0),y.push(`${t[v]} ${(E+o+x*o*2+E*x)/M*100}%`),v++;r(`linear-gradient(${m?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},me=({palette:e,retry:t,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:r,rand:i,useTimer:s,useScreenMeta:c,navigate:h,addEventClick:n,intersect:o}=w(),{from:u}=c(),{getDifficultyRad:f}=$(),d=[];let g=[],m,p,E,M;const v=P=>Array.isArray(e)?e[P]:e;return l(()=>{const{s:P}=r();d.splice(0);const x=f(),S=Math.round(P*x),b=Math.round(innerWidth/S/2)-1,H=(innerWidth-2*S*b)/(b+1),k=Math.round(innerHeight/S/2)-1,Y=(innerHeight-2*S*k)/(k+1),B=innerWidth>=innerHeight;let C=0;for(let R=0;R<k;R++){for(let T=0;T<b;T++){v(C)||(C=0);const I={x:H+S+T*S*2+H*T,y:Y+S+R*S*2+Y*R,r:S,c:v(C),p:!0};R===0&&T===b-1?(M={...I,p:(u==="main"||u==="gameover"||u==="gamescore")&&!M},m=W(M),p=he(M)):d.push(I),C+=B?1:0}C=B?0:C+1}t&&(E=d[i(d.length-1)],s(()=>{a(E,!1,!0),E.p=!1})),g=d.map(R=>W(R))}),s(()=>{M.p&&a(M,!1,!0),M.p=!1}),t&&n((P,x)=>{o({x:P,y:x},E)&&(a(E),E.p=!0,s(()=>{h("game")},100))}),n((P,x)=>{o({x:P,y:x},M)&&(a(M),M.p=!0,s(()=>{h("main")},100))}),{render:()=>{g.forEach(P=>P()),m(),M!=null&&M.p||p()},popits:d}},A=100,X="#222",Be=e=>{const t=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,l=(e==null?void 0:e[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(a<255?a<1?0:a:255)*256+(l<255?l<1?0:l:255)).toString(16).slice(1)},ee={},Ne=e=>{const{ctx:t,createImg:a,useRandChain:l,useTimer:r}=w();let i,s=!1,c=[];const h=e.r*2/A/2;ee[e.imgSrc]?i=ee[e.imgSrc]:(i=ee[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},i.img.src=e.imgSrc);const n=()=>r(()=>{s=!s,n()},250),o=(m,p=t)=>{const{x:E,y:M,c:v,r:y}=m;p.fillStyle=v||"red",p.beginPath(),p.arc(E+y,M+y,y,0,Math.PI*2),p.closePath(),p.fill()},u=(m=t,p=0,E=0)=>{m.fillStyle=X,m.beginPath(),m.roundRect(p,E,2*e.r,2*e.r,h),m.closePath(),m.fill()},f=()=>{const m=[];for(let y=0;y<A;y++)for(let P=0;P<A;P++){const x={x:P*h*2,y:y*h*2,r:h,c:X};m.push(x)}let p=e.score-e.winScore;const E=[...m],M=l(e.seed),v=(y=!1)=>{const P=M(E.length-1),x=E[P],S=m.indexOf(x);x.c=y?X:i.cols[S],E.splice(P,1),y&&c.push({...x,c:i.cols[S]})};for(let y=p;y>0;y--)v();if(e.winScore){c=[];for(let y=e.winScore;y>0;y--)v(!0);n()}return m},d=()=>{const m=f();i.drawImg=a((p=t)=>{u(p),m.filter(E=>E.c!==X).forEach(E=>o(E,p))},2*e.r)},g=async()=>{var E;const m=document.createElement("canvas");m.width=A,m.height=A;const p=m.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(i.img,0,0);for(let M=0;M<A;M++){const v=[];for(let y=0;y<A;y++){const P=(E=p==null?void 0:p.getImageData(y,M,1,1))==null?void 0:E.data;v.push(Be(P))}i.cols.push(...v)}i.isFilled=!0,d()};return i.isFilled?(i.r!==e.r||i.score!==e.score)&&d():i.img.onload=g,(m=t)=>{const{x:p,y:E,r:M,winScore:v}=e;if(i.drawImg?m.drawImage(i.drawImg,p-M,E-M,2*M,2*M):u(m,p-M,E-M),s&&v&&i.drawImg)for(const y of c)m.fillStyle=y.c||"red",m.beginPath(),m.arc(p-M+y.x+y.r,E-M+y.y+y.r,y.r,0,Math.PI*2),m.closePath(),m.fill()}},le=1e4,Me=(e=0,t=!1)=>{const{addEventResize:a,useMeasure:l,translate:r}=w(),{getScore:i}=$(),s=["/media/levels/cat.png","/media/levels/city.png","/media/levels/donut.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],c=i();let h,n=0,o=0,u=!1,f=!1;const d=v=>Math.min(Math.floor(v/le),s.length-1);let g=d(c-e);if(e){const v=d(c);u=v!==g,f=v>s.length-1}return a(()=>{const{cx:v,cy:y,s:P,isL:x}=l();h=[],n=(P-2*P*.055*1.6)/2,o=P*.05;let S=t?g:0;for(S;S<(t?g+1:s.length);S++){const b=s[S],H=x?v:v+S*n*2+S*o,k=x?y+S*n*2+S*o:y;h.push(Ne({x:H,y:k,r:n,score:Math.min(c-S*le,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{g=g+1<s.length?g+1:s.length-1},down:()=>{g=g-1<0?0:g-1},render:()=>{const{isL:v}=l(),y=v?0:-(g*n*2+g*o),P=v?-(g*n*2+g*o):0;r(()=>{h==null||h.forEach(x=>x())},y,P)},rect:()=>{const{cx:v,cy:y}=l(),P=innerWidth>innerHeight;return{x:P?v-n:0,y:P?0:y-n,w:P?2*n:innerWidth,h:P?innerHeight:2*n}},isJump:u,isCompleted:f}};let F=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3"];const Oe=()=>{const{rand:e,playSound:t}=w();return{playPop:()=>{const l=e(F.length-1),r=F[l];F=[...F.splice(l,F.length),...F],t(r)}}},Ye=({popits:e,popEffect:t=()=>{},splashEffect:a=()=>{}})=>{const{useTimer:l,rand:r,addEventClick:i,addEventMove:s,intersect:c,navigate:h,addEventResize:n}=w(),{playPop:o}=Oe(),{getScore:u,addScore:f,getDifficultyTic:d}=$();let g=[],m,p,E=!1,M=0,v=0,y=0;const P=u(),x=d(),S=C=>{const R=e.filter(D=>g.indexOf(D)===-1&&D!==C),T=r(R.length-1),I=R[T];I&&(t(I,!1,!0),I.p=!1,g.push(R[T]))},b=()=>{p=l(()=>{if(y=Math.max(y-10,50),e.length===g.length){E=!0,p.stop(),l(()=>{h("gameover")});return}S(),b()},y)},H=C=>{g=[];const R=e.length;let T=r(Math.round(R*.3),Math.round(R*.6));const I=[...e];if(C){const D=I.indexOf(C);I.splice(D,1)}for(let D=T;D>0;D--){const ne=r(I.length-1),V=I[ne];V.p=!1,t(V,!1,!0),g.push(V),I.splice(ne,1)}y=x,m==null||m.stop(),p==null||p.stop(),P&&(m=l(()=>{a("SLOWLY"),b()},g.length*x)),M=M>0?M:r(3,5)},k=()=>P<1e4?10:P<2e4?5:P<3e4?2:1,Y=C=>{t(C),y=Math.min(y+5,x),v++,C.p=!0;const R=g.indexOf(C);if(g.splice(R,1),g.length<=0)if(M--,M>0)l(()=>{a("Round"),H(C)},100);else{m==null||m.stop(),p==null||p.stop();const T=k();f(v*T),l(()=>{h("gamescore",{winScore:v*T})},100)}o()},B=(C,R,T=!1)=>{if(!E){for(const I of g)if(c({x:C,y:R},I)){Y(I);return}if(!T){for(const I of e)if(c({x:C,y:R},I)){t(I,!0),a("Popenalty"),S(I);return}a("Popenalty"),S()}}};i(B),s((C,R)=>B(C,R,!0)),n(()=>{l(()=>{a("Pop it"),H()})})},Ge=()=>{const{addEventResize:e,rand:t,useScreenMeta:a}=w(),{from:l}=a(),{popEffect:r,render:i}=O(),s=["#00dcfe","#5bb2f7","#92E6E6"],c=l==="opening"?s[0]:s[t(s.length-1)],{render:h,setIntersections:n}=ge({color:c}),{render:o,point:u}=Fe({popEffect:r}),{render:f,point:d}=fe({getX:(p,E,M)=>p+Math.round(E*.25)+2*M,getY:(p,E,M)=>p+Math.round(E*.25)+0*M,popEffect:r}),{render:g,point:m}=ke({popEffect:r});return e(()=>{const p=m(),E=u(),M=d();n((v,y,P)=>!L({x:v,y,r:P},p)&&!L({x:v,y,r:P},E)&&!L({x:v,y,r:P},M))}),()=>{i(),h(),o(),f(),g()}},Xe=()=>{const{useMeasure:e,addEventResize:t}=w(),a=pe(),{popEffect:l,render:r}=O(),{popits:i,render:s}=me({palette:a,popEffect:l}),c={mfs:0,dy:0},{splashEffect:h,render:n}=ue(c);return Ye({popits:i,popEffect:l,splashEffect:h}),t(()=>{const o=(i[0].y-i[0].r)/e().m;c.mfs=o,c.dy=o}),()=>{r(),s(),n()}},je=()=>{const e="#ff6347",{popEffect:t,render:a}=O(),{setBackground:l}=w(),{minusDifficulty:r}=$(),{render:i}=me({palette:e,retry:!0,popEffect:t});return l(e),r(),()=>{a(),i()}},qe=()=>{const{translate:e,useScreenMeta:t}=w(),{plusDifficulty:a,resetDifficulty:l}=$(),{data:r}=t(),{popEffect:i,render:s}=O(),{splashEffect:c,render:h}=ue({infinity:!0});pe();const{render:n,isJump:o}=Me(r==null?void 0:r.winScore,!0),{render:u}=fe({getX:(d,g,m)=>innerWidth>innerHeight?Math.min(d+(g-2*g*.055*1.6)/2+4*m+Math.round(g*.1),innerWidth-2*m-Math.round(g*.1)):d+(g-2*g*.055*1.6)/8+0*Math.round(g*.1)+2*m,getY:(d,g,m)=>innerWidth>innerHeight?d+(g-2*g*.055*1.6)/2-1*m-Math.round(g*.1):Math.min(d+(g-2*g*.055*1.6)/2+4*m+Math.round(g*.1),innerHeight-2*m-Math.round(g*.1)),popEffect:i}),{render:f}=_e({getX:(d,g,m)=>innerWidth>innerHeight?Math.max(d-(g-2*g*.055*1.6)/2-4*m-Math.round(g*.1),2*m+Math.round(g*.1)):d+(g-2*g*.055*1.6)/8-2*Math.round(g*.1)-2*m,getY:(d,g,m)=>innerWidth>innerHeight?d-(g-2*g*.055*1.6)/2+0*m+Math.round(g*.1):Math.min(d+(g-2*g*.055*1.6)/2+4*m+Math.round(g*.1),innerHeight-2*m-Math.round(g*.1)),popEffect:i});return o?l():a(),innerHeight>innerWidth&&c(o?"Picture filled":"You win"),()=>{s(),innerHeight>innerWidth?e(n,0,-Math.round(innerHeight*.05)):n(),u(),f(),h()}},Ve=()=>{const{addEventResize:e,rand:t}=w(),{popEffect:a,render:l}=O(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],i=r[t(r.length-1)],{render:s,setIntersections:c}=ge({color:i,frequency:10}),{render:h,rect:n,up:o,down:u}=Me(),{render:f,point:d}=De({popEffect:a}),{render:g,point:m}=Ae({onClick:o,popEffect:a}),{render:p,point:E}=ze({onClick:u,popEffect:a});return e(()=>{const M=d(),v=n(),y=m(),P=E();c((x,S,b)=>!L({x,y:S,r:b},M)&&!be({x,y:S,r:b},v)&&!L({x,y:S,r:b},y)&&!L({x,y:S,r:b},P))}),()=>{l(),s(),h(),f(),g(),p()}},Ue=()=>{const{ctx:e,addEventResize:t,loop:a}=w(),l={x:40,y:100};let r=1,i=1,s;const c=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),t(c),a(()=>{l.x+=2*r,l.y+=3*i,r*=-1,i*=-1}),()=>{e.save();var h=Math.random()*2,n=Math.random()*3;e.translate(h,n),e.beginPath(),e.fillStyle="red",e.rect(l.x,l.y,s,s),e.fill(),e.restore()}},Ke=[{name:"opening",ctor:He},{name:"main",ctor:Ge},{name:"game",ctor:Xe},{name:"gameover",ctor:je},{name:"gamescore",ctor:qe},{name:"score",ctor:Ve},{name:"devs",ctor:Ue}];We(Ke);document.title="Your's last Pop it";
