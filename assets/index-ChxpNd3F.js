(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const t of d.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&f(t)}).observe(document,{childList:!0,subtree:!0});function u(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(s){if(s.ep)return;s.ep=!0;const d=u(s);fetch(s.href,d)}})();const Pe=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const u=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},f=i=>{n.clearRect(0,0,innerWidth,innerHeight),i()};return u(),document.body.appendChild(e),{ctx:n,render:f,resize:u,rotate:(i,a,o,h)=>{n.save(),n.translate(a,o),n.rotate(Math.PI*h),n.translate(-a,-o),i(),n.restore()},translate:(i,a,o)=>{n.save(),n.translate(a,o),i(),n.restore()},shade:(i,a)=>{i=i.substring(1);const o=parseInt(i,16),h=Math.round(2.55*a),p=(o>>16)+h,r=(o>>8&255)+h,v=(o&255)+h;return"#"+(16777216+(p<255?p<1?0:p:255)*65536+(r<255?r<1?0:r:255)*256+(v<255?v<1?0:v:255)).toString(16).slice(1)},setBackground:(i,a)=>{var o;document.body.style.background=i,document.body.style.backgroundColor=a||i,(o=document.querySelector('meta[name="theme-color"]'))==null||o.setAttribute("content",a||i)},createImg:(i,a,o=a)=>{const h=document.createElement("canvas"),p=h.getContext("2d");if(!p)throw new Error("CanvasRenderingContext2D is null");return h.width=a*devicePixelRatio,h.height=o*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio),i(p),h}}},Se=e=>{let n="",u="",f;const s=l=>e.find(c=>c.name===l)||e[0],t={render:()=>{},navigate:(l,c)=>{const i=s(l);u=n||"",n=(i==null?void 0:i.name)||"",f=c,t.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:u,data:f})};return t},Ee=()=>{const e=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),n=[],u={};return{loop:(t,l)=>{if(Object.entries(u).find(([i,a])=>a===t)||l&&u[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&n.push(l),l=l||new Date().valueOf().toString(),u[l]=t;const c=()=>{t(),u[l]&&e(c)};c()},stop:t=>{if(typeof t=="string")delete u[t];else{const l=Object.entries(u).find(([c,i])=>i===t);l&&delete u[l[0]]}},stopAll:()=>{for(const t in u)n.indexOf(t)===-1&&delete u[t]}}};let q=[];const Ce=()=>{for(const e of q)clearTimeout(e);q=[]},be=(e,n=400)=>{let u=new Date,f=n,s=setTimeout(e,f);return q.push(s),{pause:()=>{clearTimeout(s),f-=new Date-u},resume:()=>{u=new Date,clearTimeout(s),s=setTimeout(e,f),q.push(s)},stop:()=>{clearTimeout(s)}}},ie=2147483646,J=2147483647,Ie=16807,Re=(e=Math.floor(Math.random()*J))=>{e=e%J,e<=0&&(e+=ie);const n=()=>(e=e*Ie%J,e),u=()=>(n()-1)/ie;return(s,d)=>(d===void 0&&(d=s,s=0),Math.floor(u()*(d-s+1))+s)},xe=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Te=()=>{const e=[],n=[],u=[];return{addEventResize:a=>{a(),e.push(a)},onResizeEvents:()=>e.forEach(a=>a()),addEventClick:a=>n.push(a),onClickEvents:(a,o)=>n.forEach(h=>h(a,o)),addEventMove:a=>u.push(a),onMoveEvents:(a,o)=>u.forEach(h=>h(a,o)),removeAllEvents:()=>{e.splice(0),n.splice(0),u.splice(0)}}},H=(e,n)=>{const u=Math.pow(Math.abs(e.x-n.x),2),f=Math.pow(Math.abs(e.y-n.y),2),s=e.r||0,d=n.r||0,t=Math.pow(s+d,2);return u+f<=t},We=(e,n)=>{const u=e.r||0,f=n.w||0,s=n.h||0;return Math.abs(n.x+f/2-e.x)<=f/2+u&&Math.abs(n.y+s/2-e.y)<=s/2+u},ke=(e,n)=>H(e,n),De=e=>{const n=new AudioContext,u={},f=d=>{fetch(d).then(t=>t.arrayBuffer()).then(t=>(n==null?void 0:n.decodeAudioData(t))||null).then(t=>{t&&(u[d]=t)})};if(e.length)for(const d of e)f(d);return(d,t)=>{setTimeout(async()=>{const l=n.createBufferSource();u[d]||(u[d]=await fetch(d).then(c=>c.arrayBuffer()).then(c=>(n==null?void 0:n.decodeAudioData(c))||null)),l.buffer=u[d],l.connect(n.destination),t&&(l.playbackRate.value=t),l.start()},0)}};let K;const He=(e,n)=>{if(K)throw new Error("Webcore already specified");const u=Pe(),f=Se(e),{loop:s,stop:d,stopAll:t}=Ee(),{addEventResize:l,onResizeEvents:c,addEventClick:i,onClickEvents:a,addEventMove:o,onMoveEvents:h,removeAllEvents:p}=Te();let r=innerWidth/2,v=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,y=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight;const w=()=>({cx:r,cy:v,s:g,m:y,isL:m}),M=De(n);K={font:"Tijuf",ctx:u.ctx,shade:u.shade,rotate:u.rotate,translate:u.translate,setBackground:u.setBackground,createImg:u.createImg,useMeasure:w,useScreenMeta:f.useScreenMeta,navigate:(P,E)=>{if(!e.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);t(),Ce(),p(),new Promise(()=>f.navigate(P,E))},loop:s,loopStop:d,useTimer:be,rand:xe,useRandChain:Re,intersect:ke,addEventResize:l,addEventClick:i,addEventMove:o,playSound:M},s(()=>u.render(f.render),"draw"),window.onresize=()=>{r=innerWidth/2,v=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,y=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight,u.resize(),c()},document.onpointerdown=P=>{a(P.clientX,P.clientY)},document.onmousemove=P=>{h(P.clientX,P.clientY)},f.navigate()},C=()=>{if(!K)throw new Error("Webcore not specified");return{...K}},Q={},W=e=>{const{shade:n,ctx:u,createImg:f}=C(),s=()=>{const{r:t,c:l="#ffffff",p:c}=e,i=u.createRadialGradient(t,t,t,t,t,t/5);return i.addColorStop(0,n(l,0)),i.addColorStop(.01,n(l,0)),i.addColorStop(.075,n(l,9)),i.addColorStop(.15,n(l,0)),i.addColorStop(.15,n(l,-15)),i.addColorStop(.18,n(l,-5)),i.addColorStop(.22,n(l,-15)),c?(i.addColorStop(.24,n(l,-10)),i.addColorStop(.3,n(l,-8)),i.addColorStop(.34,n(l,-12)),i.addColorStop(.6,n(l,-8)),i.addColorStop(1,n(l,-6))):(i.addColorStop(.24,n(l,-12)),i.addColorStop(.26,n(l,-8)),i.addColorStop(.3,n(l,-2)),i.addColorStop(.34,n(l,0)),i.addColorStop(.5,n(l,5)),i.addColorStop(1,n(l,18))),i},d=()=>{const{r:t,c:l="#ffffff",p:c}=e,i=`${l}_${c?"push":"pop"}_${t}`;if(Q[i])return Q[i];const a=f((o=u)=>{const h=s();o.fillStyle=h,o.beginPath(),o.arc(t,t,t,0,2*Math.PI),o.closePath(),o.fill()},2*t);return Q[i]=a,a};return(t=u)=>{const{x:l,y:c,r:i}=e,a=d();t.drawImage(a,l-i,c-i,2*i,2*i)}},Z={},Y=e=>{const{ctx:n}=C();let u;return Z[e.src]?u=Z[e.src]:(u=new Image,u.src=e.src,Z[e.src]=u),(f=n)=>{const{w:s,h:d=s,x:t=0,y:l=0}=e;u.complete&&f.drawImage(u,t,l,s,d)}},ce=e=>{const{font:n,ctx:u}=C(),f=e.text,s=e.text.length,d=2*Math.PI/s/4;return(t=u)=>{const{x:l,y:c,r:i,s:a=0,fs:o}=e,h=o||Math.round(i/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${h}px ${n}`,t.save(),t.translate(l,c),t.rotate(a);for(let p=0;p<s;p++)t.save(),t.rotate(p*d),t.fillText(f[p],0,-i),t.restore();t.restore()}},ze=()=>{var m,w;const{ctx:e,loop:n,rotate:u,navigate:f,useMeasure:s,addEventClick:d,addEventResize:t,setBackground:l}=C();l("#040404");let c=!1,i,a,o,h,p,r=-.2,v=0;t(()=>{const{cx:M,cy:P,s:E}=s(),S=Math.round(E*.25);i={c:"#ff6347",x:M,y:P,r:S,p:!1},a=W(i),o=Y({x:M-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=ce({text:"nezabotin",x:M,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),p=ce({text:"production",x:M,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const g=()=>{r+=.01,v=r>=1?1:r,r>=1.8&&(i.p=!0),r>=2.2&&(i.c="#f86a9a"),r>=2.6&&f("main")};d(()=>{[1.4,1.8,2.2,2.6].some(M=>{if(r<M)return r=M,!0})});const y=()=>{n(g),c=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(w=document==null?void 0:document.fonts)==null||w.ready.then(y):y(),()=>{const{cx:M,cy:P}=s();e.globalAlpha=c?1:0,a(),r<1.8&&o(),r<1.4&&u(()=>{h(),p()},M,P,v),e.globalAlpha=1}},ae="ylp",de="score",ee="difficulty",ue="sound",te=[.14,.11,.09,.075],le=750,Ae=350,pe=5,_=[];for(let e=0;e*pe<=le-Ae;e++)_.push(le-e*pe);let N=null;const z=()=>{const e=r=>localStorage.getItem(`${ae}_${r}`),n=(r,v)=>localStorage.setItem(`${ae}_${r}`,v.toString()),u=()=>+(e(de)||0),f=r=>n(de,r),s=r=>{const v=u();f(v+r)},d=()=>+(e(ee)||0),t=r=>{const v=d();n(ee,Math.min(Math.max(v+r,0),te.length*_.length-1))};return{getScore:u,addScore:s,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const r=d(),v=Math.floor(r/_.length);return te[v]||te[1]},getDifficultyTic:()=>{const r=d(),v=Math.floor(r/_.length),g=r-v*_.length;return _[g]||_[0]},resetDifficulty:()=>n(ee,0),getSound:()=>N!==null?N:e(ue)==="true"?(N=!0,!0):(N=!1,!1),setSound:r=>{N=r,n(ue,r)}}};let oe=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3"];oe=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav"];let D=[...oe];const G=()=>{const{rand:e,playSound:n}=C(),{getSound:u}=z();return{playPop:()=>{if(!u())return;const l=e(D.length-1),c=D[l];D.splice(l,1),D.length||(D=[...oe]);const i=e(D.length-1);D=[...D.splice(i,D.length),...D],n(c,1.2)},playMissed:()=>{if(!u())return;n("/sounds/new/wrong.mp3")},playFail:()=>{if(!u())return;n("/sounds/fail-fast.mp3")},playWin:()=>{if(!u())return;n("/sounds/win.mp3")}}},B=100/2;let fe=0;const O=()=>{const{loop:e,ctx:n,shade:u,rand:f}=C(),{playPop:s,playMissed:d}=G(),t={},l=()=>{for(const a in t){const o=t[a];if(!o)return;const h=o.popit;if(!o.shake)o.tic+=B/5,o.tic>=B&&(o.dir=-1),o.withoutRad||(h.r=o.origR+o.origR*75e-5*(o.tic+(o.dir>0?0:B-o.tic)));else{o.tic+=B/5;const p=f(1,2),r=f(1,2);h.x=o.origX+Math.random()*p*(Math.random()>.5?1:-1),h.y=o.origY+Math.random()*r*(Math.random()>.5?1:-1)}o.tic>=2*B&&(delete t[a],h.r=o.origR,h.x=o.origX,h.y=o.origY)}},c=(a,o=!1,h=!1)=>{var g;o?d():s(),(g=navigator==null?void 0:navigator.vibrate)==null||g.call(navigator,30),fe++;const p=`${new Date().valueOf().toString()}_${fe}`,r=1,v=1;t[p]={withoutRad:o,tic:r,dir:v,popit:a,origR:a.r,origX:a.x,origY:a.y,shake:h}},i=()=>{n.globalAlpha=.25;for(const a in t){const o=t[a];if(o.shake)continue;const h=o.popit;n.fillStyle=u(h.c||"red",-12),n.beginPath(),n.arc(h.x,h.y,h.r+o.origR*.001*(o.tic+(o.dir>0?0:B-o.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(l),{popEffect:c,render:i}},U=e=>{const{font:n,ctx:u}=C();return(f=u)=>{const{text:s,x:d,c:t,y:l,fs:c,a:i="center",mw:a,f:o}=e;f.textAlign=i,f.fillStyle=t,f.font=`${c}px ${o||n}`,f.fillText(s,d,l,a)}},Fe=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,useScreenMeta:d,navigate:t,addEventClick:l,intersect:c}=C(),{from:i}=d();let a,o,h;return u(()=>{const{cx:v,cy:g,s:y,m}=f(),w=Math.round(y*.25);a={c:e,r:Math.round(y*.08),x:v-w-1*m,y:g-w+1*m,p:(i==="score"||i==="opening"||i==="devs")&&!a},o=W(a),h=Y({x:Number(a.x)-a.r+Math.round(a.r*.5),y:Number(a.y)-a.r+Math.round(a.r*.5),w:a.r*2-Math.round(a.r*1),src:"/media/star.svg"})}),s(()=>{a.p&&n(a,!1,!0),a.p=!1}),l((v,g)=>{c({x:v,y:g},a)&&(n(a),a.p=!0,s(()=>{t("score")},100))}),{render:()=>{o(),a.p||h()},point:()=>({x:a.x,y:a.y,r:a.r})}},ge=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,navigate:d,addEventClick:t,intersect:l}=C();let c,i,a;return u(()=>{const{s:p}=f(),r=Math.round(p*.08);c={c:e,r,x:Math.round(1.6*r),y:Math.round(1.6*r),p:!c},i=W(c),a=Y({x:Number(c.x)-r+Math.round(r*.4),y:Number(c.y)-r+Math.round(r*.4),w:r*2-Math.round(r*.8),src:"/media/back.svg"})}),s(()=>{c.p&&n(c,!1,!0),c.p=!1}),t((p,r)=>{l({x:p,y:r},c)&&(n(c),c.p=!0,s(()=>{d("main")},100))}),{render:()=>{i(),c.p||a()},point:()=>({x:c.x,y:c.y,r:c.r})}},Le=({onClick:e})=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:s,intersect:d,rotate:t}=C(),{playPop:l}=G();let c,i,a;return n(()=>{const{s:p}=u(),r=Math.round(p*.08);c={c:"#ff6347",r,x:Math.round(innerWidth-1.6*r),y:Math.round(innerHeight-1.6*r),p:!1},i=W(c),a=Y({x:Number(c.x)-r+Math.round(r*.4),y:Number(c.y)-r+Math.round(r*.4),w:r*2-Math.round(r*.8),src:"/media/back.svg"})}),s((p,r)=>{d({x:p,y:r},c)&&(l(),c.p=!0,e(),f(()=>{c.p=!1},100))}),{render:()=>{i(),c.p||t(()=>{a()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},_e=({onClick:e})=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:s,intersect:d,rotate:t}=C(),{playPop:l}=G();let c,i,a;return n(()=>{const{s:p}=u(),r=Math.round(p*.08),v=innerWidth<innerHeight?Math.round(innerWidth-1.6*r-2*r-.3*r):Math.round(innerWidth-1.6*r),g=innerWidth<innerHeight?Math.round(innerHeight-1.6*r):Math.round(innerHeight-1.6*r-2*r-.3*r);c={c:"#ff6347",r,x:v,y:g,p:!1},i=W(c),a=Y({x:Number(c.x)-r+Math.round(r*.4),y:Number(c.y)-r+Math.round(r*.4),w:r*2-Math.round(r*.8),src:"/media/back.svg"})}),s((p,r)=>{d({x:p,y:r},c)&&(l(),c.p=!0,e(),f(()=>{c.p=!1},100))}),{render:()=>{i(),c.p||t(()=>{a()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Be=e=>{const{ctx:n,shade:u}=C(),f=Math.round(e.r/2.2),s=Math.round(.15*e.r),d=u(e.c||"blue",-3);return(t=n)=>{const{r:l,x:c=l,y:i=l}=e;t.lineCap="round",t.fillStyle=d,t.strokeStyle=d,t.lineWidth=f,t.beginPath(),t.moveTo(c+s,i),t.lineTo(c-s/2,i-s),t.lineTo(c-s/2,i+s),t.closePath(),t.fill(),t.beginPath(),t.moveTo(c+s,i),t.lineTo(c-s/2,i-s),t.moveTo(c-s/2,i-s),t.lineTo(c-s/2,i+s),t.moveTo(c-s/2,i+s),t.lineTo(c+s,i),t.stroke()}},me=({getX:e,getY:n,color:u="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:s,useMeasure:d,useTimer:t,useScreenMeta:l,navigate:c,addEventClick:i,intersect:a}=C(),{from:o}=l();let h,p,r;return s(()=>{const{cx:y,cy:m,s:w,m:M}=d();h={c:u,r:Math.round(w*.1),x:e(y,w,M),y:n(m,w,M),p:(o==="gamescore"||o==="game"||o==="gameover"||o==="opening"||o==="devs")&&!h},p=W(h),r=Be(h)}),t(()=>{h.p&&f(h,!1,!0),h.p=!1}),i((y,m)=>{a({x:y,y:m},h)&&(f(h),h.p=!0,t(()=>{c("game")},100))}),{render:()=>{p(),h.p||r()},point:()=>({x:h.x,y:h.y,r:h.r})}},ve=e=>{const{ctx:n,shade:u}=C(),f=Math.round(e.r/4),s=Math.round(.12*e.r);return(d=n)=>{const{r:t,x:l=t,y:c=t}=e,i=u(e.c||"blue",-3);d.lineCap="round",d.strokeStyle=i,d.lineWidth=f,d.beginPath(),d.moveTo(l-1.5*s,c-2*s),d.lineTo(l-1.5*s,c+2*s),d.stroke(),d.beginPath(),d.moveTo(l+1.5*s,c-2*s),d.lineTo(l+1.5*s,c+2*s),d.stroke()}},Oe=({getX:e,getY:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:s,useTimer:d,useScreenMeta:t,navigate:l,addEventClick:c,intersect:i}=C(),{from:a}=t();let o,h,p;return f(()=>{const{cx:g,cy:y,s:m,m:w}=s();o={c:"#fd8059",r:Math.round(m*.08),x:e(g,m,w),y:n(y,m,w),p:(a==="game"||a==="opening")&&!o},h=W(o),p=ve(o)}),d(()=>{o.p&&u(o,!1,!0),o.p=!1},500),c((g,y)=>{i({x:g,y},o)&&(u(o),o.p=!0,d(()=>{l("main")},100))}),{render:()=>{h(),o.p||p()},point:()=>({x:o.x,y:o.y,r:o.r})}},$e=e=>{const{ctx:n,shade:u}=C(),f=Math.round(e.r/4),s=Math.round(.2*e.r),d=u(e.c||"blue",-5);return(t=n)=>{const{r:l,x:c=l,y:i=l}=e;t.lineCap="round",t.fillStyle=d,t.strokeStyle=d,t.lineWidth=f,t.beginPath(),t.ellipse(c-s,i+s,f,s,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(c-s/2,i+s),t.lineTo(c,i-s),t.lineTo(c+s,i-s),t.stroke(),e.on||(t.lineWidth=Math.round(f/3),t.beginPath(),t.moveTo(c-l/4,i-l/4),t.lineTo(c+l/4,i+l/4),t.stroke())}},Ne=({color:e="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,useScreenMeta:d,addEventClick:t,intersect:l}=C(),{from:c}=d(),{getSound:i,setSound:a}=z();let o,h,p;return u(()=>{const{cx:g,cy:y,s:m,m:w}=f(),M=Math.round(m*.25),P=Math.round(m*.065),E=i();o={c:e,r:P,x:g-M-P-w,y:y-M+3*P,p:(c==="opening"||c==="devs")&&!o,on:E},h=W(o),p=$e(o)}),s(()=>{o.p&&n(o,!1,!0),o.p=!1}),t((g,y)=>{if(l({x:g,y},o)){let m=i();m=!m,a(m),o.p=!0,o.on=m,n(o),s(()=>{o.p=!1},100)}}),{render:()=>{h(),o.p||p()},point:()=>({x:o.x,y:o.y,r:o.r})}},Ye=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,useScreenMeta:d,addEventClick:t,intersect:l,navigate:c}=C(),{from:i}=d();let a,o,h,p;return u(()=>{const{cx:g,cy:y,s:m}=f(),w=Math.round(m*.25);a={c:e,x:g,y,r:w,p:(i==="opening"||i==="devs")&&!a},o=W(a),h=U({text:"Yola",c:"#f1f1f1",x:g,y:y-w+Math.round(w*.9),fs:Math.round(w/2.6),mw:w*2}),p=U({text:"PopiT",c:"#ffeb3b",x:g,y:y-w+Math.round(w*1.3),fs:Math.round(w/2.3),mw:w*2})}),s(()=>{a.p&&n(a,!1,!0),a.p=!1}),t((g,y)=>{l({x:g,y},a)&&(n(a),a.p=!0,s(()=>{c("devs")},100))}),{render:()=>{o(),a.p||(h(),p())},point:()=>({x:a.x,y:a.y,r:a.r})}},Me=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:u,useRandChain:f,useMeasure:s,rand:d,useTimer:t,setBackground:l,useScreenMeta:c}=C(),{from:i}=c();l(e);const a=d(0,999);let o=[],h=[];u(()=>{const g=f(a),{s:y}=s();o=[];const m=Math.round(y*.04),w=Math.round(innerWidth/m/2)-2,M=Math.round((innerWidth-2*m*w)/(w+1)),P=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<w;b++)g(g(n))<1&&o.push({x:M+m+b*m*2+M*b,y:E+m+S*m*2+E*S,r:m,c:e,p:i==="opening"?!0:g(1)>0});h=o.map(S=>W(S))});const p=()=>{t(()=>{const g=d(o.length-1);o[g]&&(o[g].p=!o[g].p),p()},750)};return i==="opening"?t(()=>{o.forEach(g=>g.p=d(1)>0),p()}):p(),{render:()=>{h.forEach(g=>g())},setIntersections:g=>{o=o.filter(({x:y,y:m,r:w})=>g(y,m,w)),h=o.map(y=>W(y))}}},se=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:u,useMeasure:f,setBackground:s,rand:d}=C(),{getDifficultyRad:t}=z();return n=[...n.splice(d(n.length-1),n.length),...n],e||u(()=>{const{s:c}=f(),i=t(),a=Math.round(c*i),o=Math.round(innerWidth/a/2)-1,h=(innerWidth-2*a*o)/(o+1),p=Math.round(innerHeight/a/2)-1,r=(innerHeight-2*a*p)/(p+1),v=innerWidth>=innerHeight,g=v?o:p,y=v?h:r,m=v?innerWidth:innerHeight;let w=0;const M=[];for(let E=0;E<g;E++)n[w]||(w=0),M.push(`${n[w]} ${(y+a+E*a*2+y*E)/m*100}%`),w++;s(`linear-gradient(${v?"to right":"to bottom"}, ${M.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ye=({palette:e,retry:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:s,rand:d,useTimer:t,useScreenMeta:l,navigate:c,addEventClick:i,intersect:a}=C(),{from:o}=l(),{getDifficultyRad:h}=z(),p=[];let r=[],v,g,y,m={x:0,y:0,r:0};const w=P=>Array.isArray(e)?e[P]:e;return f(()=>{const{s:P}=s();p.splice(0);const E=h(),S=Math.round(P*E),b=Math.round(innerWidth/S/2)-1,k=(innerWidth-2*S*b)/(b+1),A=Math.round(innerHeight/S/2)-1,X=(innerHeight-2*S*A)/(A+1),$=innerWidth>=innerHeight;let I=0;for(let R=0;R<A;R++){for(let T=0;T<b;T++){w(I)||(I=0);const x={x:k+S+T*S*2+k*T,y:X+S+R*S*2+X*R,r:S,c:w(I),p:!0};R===0&&T===b-1?(m={x:x.x,y:x.y,r:x.r,c:x.c,p:(o==="main"||o==="gameover"||o==="gamescore")&&!m.r},v=W(m),g=ve(m)):p.push(x),I+=$?1:0}I=$?0:I+1}n&&(y=p[d(p.length-1)],t(()=>{u(y,!1,!0),y.p=!1})),r=p.map(R=>W(R))}),t(()=>{m.p&&u(m,!1,!0),m.p=!1}),n&&i((P,E)=>{a({x:P,y:E},y)&&(u(y),y.p=!0,t(()=>{c("game")},100))}),i((P,E)=>{a({x:P,y:E},m)&&(u(m),m.p=!0,t(()=>{c("main")},100))}),{render:()=>{r.forEach(P=>P()),v(),m!=null&&m.p||g()},popits:p,pausePpt:m}},L=100,j="#222",Ge=e=>{const n=(e==null?void 0:e[0])||0,u=(e==null?void 0:e[1])||0,f=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(u<255?u<1?0:u:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},ne={},Xe=e=>{const{ctx:n,createImg:u,useRandChain:f,useTimer:s}=C();let d,t=!1,l=[];const c=e.r*2/L/2;ne[e.imgSrc]?d=ne[e.imgSrc]:(d=ne[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},d.img.src=e.imgSrc);const i=()=>s(()=>{t=!t,i()},250),a=(v,g=n)=>{const{x:y,y:m,c:w,r:M}=v;g.fillStyle=w||"red",g.beginPath(),g.arc(y+M,m+M,M,0,Math.PI*2),g.closePath(),g.fill()},o=(v=n,g=0,y=0)=>{v.fillStyle=j,v.beginPath(),v.roundRect(g,y,2*e.r,2*e.r,c),v.closePath(),v.fill()},h=()=>{const v=[];for(let M=0;M<L;M++)for(let P=0;P<L;P++){const E={x:P*c*2,y:M*c*2,r:c,c:j};v.push(E)}let g=e.score-e.winScore;const y=[...v],m=f(e.seed),w=(M=!1)=>{const P=m(y.length-1),E=y[P],S=v.indexOf(E);E.c=M?j:d.cols[S],y.splice(P,1),M&&l.push({...E,c:d.cols[S]})};for(let M=g;M>0;M--)w();if(e.winScore){l=[];for(let M=e.winScore;M>0;M--)w(!0);i()}return v},p=()=>{const v=h();d.drawImg=u((g=n)=>{o(g),v.filter(y=>y.c!==j).forEach(y=>a(y,g))},2*e.r)},r=async()=>{var y;const v=document.createElement("canvas");v.width=L,v.height=L;const g=v.getContext("2d",{willReadFrequently:!0});g==null||g.drawImage(d.img,0,0);for(let m=0;m<L;m++){const w=[];for(let M=0;M<L;M++){const P=(y=g==null?void 0:g.getImageData(M,m,1,1))==null?void 0:y.data;w.push(Ge(P))}d.cols.push(...w)}d.isFilled=!0,p()};return d.isFilled?(d.r!==e.r||d.score!==e.score)&&p():d.img.onload=r,(v=n)=>{const{x:g,y,r:m,winScore:w}=e;if(d.drawImg?v.drawImage(d.drawImg,g-m,y-m,2*m,2*m):o(v,g-m,y-m),t&&w&&d.drawImg)for(const M of l)v.fillStyle=M.c||"red",v.beginPath(),v.arc(g-m+M.x+M.r,y-m+M.y+M.r,M.r,0,Math.PI*2),v.closePath(),v.fill()}},he=1e4,we=(e=0,n=!1)=>{const{addEventResize:u,useMeasure:f,translate:s}=C(),{getScore:d}=z(),t=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=d();let c,i=0,a=0,o=!1,h=!1;const p=w=>Math.min(Math.floor(w/he),t.length-1);let r=p(l-e);if(e){const w=p(l);o=w!==r,h=w>t.length-1}return u(()=>{const{cx:w,cy:M,s:P,isL:E}=f();c=[],i=(P-2*P*.055*1.6)/2,a=P*.05;let S=n?r:0;for(S;S<(n?r+1:t.length);S++){const b=t[S],k=E?w:w+S*i*2+S*a,A=E?M+S*i*2+S*a:M;c.push(Xe({x:k,y:A,r:i,score:Math.min(l-S*he,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{r=r+1<t.length?r+1:t.length-1},down:()=>{r=r-1<0?0:r-1},render:()=>{const{isL:w}=f(),M=w?0:-(r*i*2+r*a),P=w?-(r*i*2+r*a):0;s(()=>{c==null||c.forEach(E=>E())},M,P)},rect:()=>{const{cx:w,cy:M}=f(),P=innerWidth>innerHeight;return{x:P?w-i:0,y:P?0:M-i,w:P?2*i:innerWidth,h:P?innerHeight:2*i}},isJump:o,isCompleted:h}},je=({popits:e,pausePpt:n,popEffect:u=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:s,rand:d,addEventClick:t,addEventMove:l,intersect:c,navigate:i,addEventResize:a}=C(),{getScore:o,addScore:h,getDifficultyTic:p}=z();let r=[],v,g,y=!1,m=0,w=0,M=0;const P=o(),E=p(),S=I=>{const R=e.filter(F=>r.indexOf(F)===-1&&F!==I),T=d(R.length-1),x=R[T];x&&(u(x,!1,!0),x.p=!1,r.push(R[T]))},b=()=>{g=s(()=>{if(M=Math.max(M-10,50),e.length===r.length){y=!0,g.stop(),s(()=>{i("gameover")});return}S(),b()},M)},k=I=>{r=[];const R=e.length;let T=d(Math.round(R*.3),Math.round(R*.6));const x=[...e];if(I){const F=x.indexOf(I);x.splice(F,1)}for(let F=T;F>0;F--){const re=d(x.length-1),V=x[re];V.p=!1,u(V,!1,!0),r.push(V),x.splice(re,1)}M=E,v==null||v.stop(),g==null||g.stop(),P&&(v=s(()=>{f("SLOWLY"),b()},r.length*E)),m=m>0?m:d(3,5)},A=()=>1,X=I=>{u(I),M=Math.min(M+5,E),w++,I.p=!0;const R=r.indexOf(I);if(r.splice(R,1),r.length<=0)if(m--,m>0)s(()=>{f("Round"),k(I)},100);else{v==null||v.stop(),g==null||g.stop();const T=A();h(w*T),s(()=>{i("gamescore",{winScore:w*T})},100)}},$=(I,R,T=!1)=>{if(!y){for(const x of r)if(c({x:I,y:R},x)){X(x);return}if(!c({x:I,y:R},n)&&!T){for(const x of e)if(c({x:I,y:R},x)){u(x,!0),f("Popenalty"),S(x);return}f("Popenalty"),S()}}};t($),l((I,R)=>$(I,R,!0)),a(()=>{s(()=>{f("Pop it"),k()})})},qe=()=>{const{addEventResize:e,rand:n,useScreenMeta:u}=C(),{from:f}=u(),{popEffect:s,render:d}=O(),t=["#00dcfe","#5bb2f7","#92E6E6"],l=f==="opening"?t[0]:t[n(t.length-1)],{render:c,setIntersections:i}=Me({color:l}),{render:a,point:o}=Ye({popEffect:s}),{render:h,point:p}=me({getX:(m,w,M)=>m+Math.round(w*.25)+2*M,getY:(m,w,M)=>m+Math.round(w*.25)+0*M,popEffect:s}),{render:r,point:v}=Fe({popEffect:s}),{render:g,point:y}=Ne({popEffect:s});return e(()=>{const m=v(),w=o(),M=p(),P=y();i((E,S,b)=>!H({x:E,y:S,r:b},m)&&!H({x:E,y:S,r:b},w)&&!H({x:E,y:S,r:b},M)&&!H({x:E,y:S,r:b},P))}),()=>{d(),c(),a(),h(),r(),g()}},Ke=()=>{const{useMeasure:e,addEventResize:n}=C(),u=se(),{popEffect:f,render:s}=O(),{popits:d,render:t,pausePpt:l}=ye({palette:u,popEffect:f});return je({popits:d,popEffect:f,pausePpt:l}),n(()=>{(d[0].y-d[0].r)/e().m}),()=>{s(),t()}},Ue=()=>{const e="#ff6347",{popEffect:n,render:u}=O(),{setBackground:f}=C(),{minusDifficulty:s}=z(),{render:d}=ye({palette:e,retry:!0,popEffect:n}),{playFail:t}=G();return f(e),s(),t(),()=>{u(),d()}},Ve=()=>{const{translate:e,useScreenMeta:n}=C(),{plusDifficulty:u,resetDifficulty:f}=z(),{data:s}=n(),{popEffect:d,render:t}=O();se();const{playWin:l}=G(),{render:c,isJump:i}=we(s==null?void 0:s.winScore,!0),{render:a}=me({getX:(h,p,r)=>innerWidth>innerHeight?Math.min(h+(p-2*p*.055*1.6)/2+4*r+Math.round(p*.1),innerWidth-2*r-Math.round(p*.1)):h+(p-2*p*.055*1.6)/8+0*Math.round(p*.1)+2*r,getY:(h,p,r)=>innerWidth>innerHeight?h+(p-2*p*.055*1.6)/2-1*r-Math.round(p*.1):Math.min(h+(p-2*p*.055*1.6)/2+4*r+Math.round(p*.1),innerHeight-2*r-Math.round(p*.1)),popEffect:d}),{render:o}=Oe({getX:(h,p,r)=>innerWidth>innerHeight?Math.max(h-(p-2*p*.055*1.6)/2-4*r-Math.round(p*.1),2*r+Math.round(p*.1)):h+(p-2*p*.055*1.6)/8-2*Math.round(p*.1)-2*r,getY:(h,p,r)=>innerWidth>innerHeight?h-(p-2*p*.055*1.6)/2+0*r+Math.round(p*.1):Math.min(h+(p-2*p*.055*1.6)/2+4*r+Math.round(p*.1),innerHeight-2*r-Math.round(p*.1)),popEffect:d});return i?f():u(),l(),()=>{t(),innerHeight>innerWidth?e(c,0,-Math.round(innerHeight*.05)):c(),a(),o()}},Je=()=>{const{addEventResize:e,rand:n}=C(),{popEffect:u,render:f}=O(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],d=s[n(s.length-1)],{render:t,setIntersections:l}=Me({color:d,frequency:10}),{render:c,rect:i,up:a,down:o}=we(),{render:h,point:p}=ge({popEffect:u}),{render:r,point:v}=Le({onClick:a,popEffect:u}),{render:g,point:y}=_e({onClick:o,popEffect:u});return e(()=>{const m=p(),w=i(),M=v(),P=y();l((E,S,b)=>!H({x:E,y:S,r:b},m)&&!We({x:E,y:S,r:b},w)&&!H({x:E,y:S,r:b},M)&&!H({x:E,y:S,r:b},P))}),()=>{f(),t(),c(),h(),r(),g()}},Qe=()=>{const{addEventResize:e,setBackground:n,createImg:u,useMeasure:f,ctx:s,loop:d,navigate:t}=C(),{popEffect:l,render:c}=O(),{render:i}=ge({popEffect:l,color:"#bdbdbd"}),a=se(!0);let o=[];const h=["Director","Producer","Author","Developer","Designer","Tester","Animator","Kitchener","Cleaner","Psych"];return e(()=>{const{m:p,cy:r,s:v}=f();o=[];const g=Math.round(p*3.5),y=Math.round(v*.75),m=Math.round((innerWidth-y)/2);let w=r,M=0;for(const P of h){a[M]||(M=0);const E=U({text:P,x:0,y:g,c:a[M],fs:Math.round(g*.5),mw:y,a:"left"}),S=U({text:"Maxim Nezabotin",x:y,y:g*1.5,c:"#fff",fs:Math.round(g*.6),mw:y,a:"right"}),b=u((k=s)=>{E(k),S(k)},y,2*g);o.push({img:b,x:m,y:w,w:y,h:5*g}),w+=5*g,M++}}),n("#040404"),d(()=>{for(const r of o)r.y-=2;const p=o[o.length-1];p.y+p.h<0&&t("main")}),()=>{o.forEach(({img:p,x:r,y:v,w:g,h:y})=>{s.drawImage(p,r,v,g,y)}),c(),i()}},Ze=[{name:"opening",ctor:ze},{name:"main",ctor:qe},{name:"game",ctor:Ke},{name:"gameover",ctor:Ue},{name:"gamescore",ctor:Ve},{name:"score",ctor:Je},{name:"devs",ctor:Qe}],et=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3"];He(Ze,et);document.title="Your's last Pop it";
