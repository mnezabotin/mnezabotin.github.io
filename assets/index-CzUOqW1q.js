(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function f(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}})();const ht=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");if(!e)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,e.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},f=s=>{e.clearRect(0,0,innerWidth,innerHeight),s()};return l(),document.body.appendChild(t),{ctx:e,render:f,resize:l,rotate:(s,c,d,h)=>{e.save(),e.translate(c,d),e.rotate(Math.PI*h),e.translate(-c,-d),s(),e.restore()},translate:(s,c,d)=>{e.save(),e.translate(c,d),s(),e.restore()},shade:(s,c)=>{s=s.substring(1);const d=parseInt(s,16),h=Math.round(2.55*c),a=(d>>16)+h,E=(d>>8&255)+h,M=(d&255)+h;return"#"+(16777216+(a<255?a<1?0:a:255)*65536+(E<255?E<1?0:E:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(s,c)=>{var d;document.body.style.background=s,document.body.style.backgroundColor=c||s,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",c||s)},createImg:(s,c,d=c)=>{const h=document.createElement("canvas"),a=h.getContext("2d");if(!a)throw new Error("CanvasRenderingContext2D is null");return h.width=c*devicePixelRatio,h.height=d*devicePixelRatio,a.scale(devicePixelRatio,devicePixelRatio),s(a),h}}},pt=t=>{let e="",l="",f;const r=o=>t.find(u=>u.name===o)||t[0],n={render:()=>{},navigate:(o,u)=>{const s=r(o);l=e||"",e=(s==null?void 0:s.name)||"",f=u,n.render=(s==null?void 0:s.ctor())||(()=>{})},useScreenMeta:()=>({to:e,from:l,data:f})};return n},gt=()=>{const t=requestAnimationFrame||(n=>setTimeout(n,16.666666666666668)),e=[],l={};return{loop:(n,o)=>{if(Object.entries(l).find(([s,c])=>c===n)||o&&l[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&e.push(o),o=o||new Date().valueOf().toString(),l[o]=n;const u=()=>{n(),l[o]&&t(u)};u()},stop:n=>{if(typeof n=="string")delete l[n];else{const o=Object.entries(l).find(([u,s])=>s===n);o&&delete l[o[0]]}},stopAll:()=>{for(const n in l)e.indexOf(n)===-1&&delete l[n]}}};let B=[];const mt=()=>{for(const t of B)clearTimeout(t);B=[]},Mt=(t,e=400)=>{let l=new Date,f=e,r=setTimeout(t,f);return B.push(r),{pause:()=>{clearTimeout(r),f-=new Date-l},resume:()=>{l=new Date,clearTimeout(r),r=setTimeout(t,f),B.push(r)},stop:()=>{clearTimeout(r)}}},tt=2147483646,Y=2147483647,vt=16807,yt=(t=Math.floor(Math.random()*Y))=>{t=t%Y,t<=0&&(t+=tt);const e=()=>(t=t*vt%Y,t),l=()=>(e()-1)/tt;return(r,i)=>(i===void 0&&(i=r,r=0),Math.floor(l()*(i-r+1))+r)},Et=(t,e)=>(e===void 0&&(e=t,t=0),Math.floor(Math.random()*(e-t+1))+t),Pt=()=>{const t=[],e=[],l=[];return{addEventResize:c=>{c(),t.push(c)},onResizeEvents:()=>t.forEach(c=>c()),addEventClick:c=>e.push(c),onClickEvents:(c,d)=>e.forEach(h=>h(c,d)),addEventMove:c=>l.push(c),onMoveEvents:(c,d)=>l.forEach(h=>h(c,d)),removeAllEvents:()=>{t.splice(0),e.splice(0),l.splice(0)}}},z=(t,e)=>{const l=Math.pow(Math.abs(t.x-e.x),2),f=Math.pow(Math.abs(t.y-e.y),2),r=t.r||0,i=e.r||0,n=Math.pow(r+i,2);return l+f<=n},St=(t,e)=>{const l=t.r||0,f=e.w||0,r=e.h||0;return Math.abs(e.x+f/2-t.x)<=f/2+l&&Math.abs(e.y+r/2-t.y)<=r/2+l},wt=(t,e)=>z(t,e),xt=t=>{const e={},l=r=>{const i=r.split("/");return i[i.length-1].split(".")[0]};return(()=>{for(const r of t){const i=new Audio(r);i.volume=.25,i.addEventListener("ended",function(){this.currentTime=0});const n=l(r);e[n]={audio:i,path:r}}})(),r=>{var u,s;const i=(u=e[r])==null?void 0:u.audio,n=(s=e[r])==null?void 0:s.path;if(!(!i||!n))if(i.currentTime===0)i.play();else{var o=new Audio(n);o.volume=.25,o.play()}}};let G;const Rt=(t,e)=>{if(G)throw new Error("Webcore already specified");const l=ht(),f=pt(t),{loop:r,stop:i,stopAll:n}=gt(),{addEventResize:o,onResizeEvents:u,addEventClick:s,onClickEvents:c,addEventMove:d,onMoveEvents:h,removeAllEvents:a}=Pt();let E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const m=()=>({cx:E,cy:M,s:p,m:g}),y=xt([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:m,useScreenMeta:f.useScreenMeta,navigate:(v,P)=>{if(!t.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);n(),mt(),a(),new Promise(()=>f.navigate(v,P))},loop:r,loopStop:i,useTimer:Mt,rand:Et,useRandChain:yt,intersect:wt,addEventResize:o,addEventClick:s,addEventMove:d,playAudio:y},r(()=>l.render(f.render),"draw"),window.onresize=()=>{E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),u()},document.onpointerdown=v=>{c(v.clientX,v.clientY)},document.onmousemove=v=>{h(v.clientX,v.clientY)},f.navigate()},R=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},X={},I=t=>{const{shade:e,ctx:l,createImg:f}=R(),r=()=>{const{r:n,c:o="#ffffff",p:u}=t,s=l.createRadialGradient(n,n,n,n,n,n/5);return s.addColorStop(0,e(o,0)),s.addColorStop(.01,e(o,0)),s.addColorStop(.075,e(o,9)),s.addColorStop(.15,e(o,0)),s.addColorStop(.15,e(o,-15)),s.addColorStop(.18,e(o,-5)),s.addColorStop(.22,e(o,-15)),u?(s.addColorStop(.24,e(o,-10)),s.addColorStop(.3,e(o,-8)),s.addColorStop(.34,e(o,-12)),s.addColorStop(.6,e(o,-6)),s.addColorStop(1,e(o,-4))):(s.addColorStop(.24,e(o,-12)),s.addColorStop(.26,e(o,-8)),s.addColorStop(.3,e(o,-2)),s.addColorStop(.34,e(o,0)),s.addColorStop(.5,e(o,5)),s.addColorStop(1,e(o,10))),s},i=()=>{const{r:n,c:o="#ffffff",p:u}=t,s=`${o}_${u?"push":"pop"}_${n}`;if(X[s])return X[s];const c=f((d=l)=>{const h=r();d.fillStyle=h,d.beginPath(),d.arc(n,n,n,0,2*Math.PI),d.closePath(),d.fill()},2*n);return X[s]=c,c};return(n=l)=>{const{x:o,y:u,r:s}=t,c=i();n.drawImage(c,o-s,u-s,2*s,2*s)}},j={},$=t=>{const{ctx:e}=R();let l;return j[t.src]?l=j[t.src]:(l=new Image,l.src=t.src,j[t.src]=l),(f=e)=>{const{w:r,h:i=r,x:n=0,y:o=0}=t;l.complete&&f.drawImage(l,n,o,r,i)}},et=t=>{const{font:e,ctx:l}=R(),f=t.text,r=t.text.length,i=2*Math.PI/r/4;return(n=l)=>{const{x:o,y:u,r:s,s:c=0,fs:d}=t,h=d||Math.round(s/4);n.textAlign="center",n.fillStyle="#f9f9f9",n.font=`${h}px ${e}`,n.save(),n.translate(o,u),n.rotate(c);for(let a=0;a<r;a++)n.save(),n.rotate(a*i),n.fillText(f[a],0,-s),n.restore();n.restore()}},bt=()=>{var m,y;const{ctx:t,loop:e,rotate:l,navigate:f,useMeasure:r,addEventClick:i,addEventResize:n,setBackground:o}=R();o("#040404");let u=!1,s,c,d,h,a,E=-.2,M=0;n(()=>{const{cx:v,cy:P,s:w}=r(),S=Math.round(w*.25);s={c:"#ff6347",x:v,y:P,r:S,p:!1},c=I(s),d=$({x:v-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=et({text:"nezabotin",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),a=et({text:"production",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,M=E>=1?1:E,E>=1.8&&(s.p=!0),E>=2.2&&(s.c="#f86a9a"),E>=2.6&&f("main")};i(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(E<v)return E=v,!0})});const g=()=>{e(p),u=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(g):g(),()=>{const{cx:v,cy:P}=r();t.globalAlpha=u?1:0,c(),E<1.8&&d(),E<1.4&&l(()=>{h(),a()},v,P,M),t.globalAlpha=1}},L=100/2,N=()=>{const{loop:t,ctx:e,shade:l}=R(),f={},r=()=>{for(const o in f){const u=f[o];if(!u)return;const s=u.popit;u.tic+=L/5,u.tic>=L&&(u.dir=-1),u.withoutRad||(s.r=u.origR+u.origR*75e-5*(u.tic+(u.dir>0?0:L-u.tic))),u.tic>=2*L&&(delete f[o],s.r=u.origR)}},i=(o,u=!1)=>{const s=new Date().valueOf().toString(),c=1,d=1;f[s]={withoutRad:u,tic:c,dir:d,popit:o,origR:o.r}},n=()=>{e.globalAlpha=.25;for(const o in f){const u=f[o],s=u.popit;e.fillStyle=l(s.c||"red",-12),e.beginPath(),e.arc(s.x,s.y,s.r+u.origR*.001*(u.tic+(u.dir>0?0:L-u.tic)),0,Math.PI*2),e.closePath(),e.fill()}e.globalAlpha=1};return t(r),{popEffect:i,render:n}},J=t=>{const{font:e,ctx:l}=R();return(f=l)=>{const{text:r,x:i,c:n,y:o,fs:u,a:s="center",mw:c}=t;f.textAlign=s,f.fillStyle=n,f.font=`${u}px ${e}`,f.fillText(r,i,o,c)}},q=100,Q=()=>{const{loop:t,ctx:e,useMeasure:l}=R();let f=null;const r=()=>{if(!f)return;const{m:o}=l();f.tic<=q&&(f.props.fs=o*2+.06*f.tic*o),f.tic+=f.tic>q?1:10,f.tic>q*2&&(f=null)},i=(o,u="#ffffff")=>{const{cx:s,m:c}=l(),d=0,h={x:s,y:Math.round(c*16),text:o,c:u,fs:20*c},a=J(h);f={props:h,shape:a,tic:d}},n=()=>{f&&(e.globalAlpha=.01*f.tic,f.shape(),e.globalAlpha=1)};return t(r),{splashEffect:i,render:n}},Ct=({color:t="#ba68c8",popEffect:e=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:r,useScreenMeta:i,navigate:n,addEventClick:o,intersect:u}=R(),{from:s}=i();let c,d,h;return l(()=>{const{cx:M,cy:p,s:g,m}=f(),y=Math.round(g*.25);c={c:t,r:Math.round(g*.08),x:M-y-1*m,y:p-y+1*m,p:(s==="score"||s==="opening")&&!c},d=I(c),h=$({x:Number(c.x)-c.r+Math.round(c.r*.5),y:Number(c.y)-c.r+Math.round(c.r*.5),w:c.r*2-Math.round(c.r*1),src:"/media/star.svg"})}),r(()=>{c.p=!1}),o((M,p)=>{u({x:M,y:p},c)&&(e(c),c.p=!0,r(()=>{n("score")},100))}),{render:()=>{d(),c.p||h()},point:()=>({x:c.x,y:c.y,r:c.r})}},It=({color:t="#ff6347",popEffect:e=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:r,useScreenMeta:i,navigate:n,addEventClick:o,intersect:u}=R(),{from:s}=i();let c,d,h;return l(()=>{const{s:M}=f(),p=Math.round(M*.08);c={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:s==="main"&&!c},d=I(c),h=$({x:Number(c.x)-p+Math.round(p*.4),y:Number(c.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{c.p=!1}),o((M,p)=>{u({x:M,y:p},c)&&(e(c),c.p=!0,r(()=>{n("main")},100))}),{render:()=>{d(),c.p||h()},point:()=>({x:c.x,y:c.y,r:c.r})}},Tt=t=>{const{addEventResize:e,useMeasure:l,useTimer:f,addEventClick:r,intersect:i,rotate:n}=R();let o,u,s;return e(()=>{const{s:h}=l(),a=Math.round(h*.055);o={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a),p:!1},u=I(o),s=$({x:Number(o.x)-a+Math.round(a*.4),y:Number(o.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),r((h,a)=>{i({x:h,y:a},o)&&(o.p=!0,t(),f(()=>{o.p=!1},100))}),{render:()=>{u(),o.p||n(()=>{s()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},Wt=t=>{const{addEventResize:e,useMeasure:l,useTimer:f,addEventClick:r,intersect:i,rotate:n}=R();let o,u,s;return e(()=>{const{s:h}=l(),a=Math.round(h*.055);o={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a-2*a-.3*a),p:!1},u=I(o),s=$({x:Number(o.x)-a+Math.round(a*.4),y:Number(o.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),r((h,a)=>{i({x:h,y:a},o)&&(o.p=!0,t(),f(()=>{o.p=!1},100))}),{render:()=>{u(),o.p||n(()=>{s()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},At=t=>{const{ctx:e,shade:l}=R(),f=Math.round(t.r/2.2),r=Math.round(.15*t.r),i=l(t.c||"blue",-3);return(n=e)=>{const{r:o,x:u=o,y:s=o}=t;n.lineCap="round",n.fillStyle=i,n.strokeStyle=i,n.lineWidth=f,n.beginPath(),n.moveTo(u+r,s),n.lineTo(u-r/2,s-r),n.lineTo(u-r/2,s+r),n.closePath(),n.fill(),n.beginPath(),n.moveTo(u+r,s),n.lineTo(u-r/2,s-r),n.moveTo(u-r/2,s-r),n.lineTo(u-r/2,s+r),n.moveTo(u-r/2,s+r),n.lineTo(u+r,s),n.stroke()}},it=({getX:t,getY:e,color:l="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:r,useMeasure:i,useTimer:n,useScreenMeta:o,navigate:u,addEventClick:s,intersect:c}=R(),{from:d}=o();let h,a,E;return r(()=>{const{cx:g,cy:m,s:y,m:v}=i();h={c:l,r:Math.round(y*.1),x:t(g,y,v),y:e(m,y,v),p:(d==="gamescore"||d==="game"||d==="opening")&&!h},a=I(h),E=At(h)}),n(()=>{h.p=!1}),s((g,m)=>{c({x:g,y:m},h)&&(f(h),h.p=!0,n(()=>{u("game")},100))}),{render:()=>{a(),h.p||E()},point:()=>({x:h.x,y:h.y,r:h.r})}},at=t=>{const{ctx:e,shade:l}=R(),f=Math.round(t.r/4),r=Math.round(.12*t.r);return(i=e)=>{const{r:n,x:o=n,y:u=n}=t,s=l(t.c||"blue",-3);i.lineCap="round",i.strokeStyle=s,i.lineWidth=f,i.beginPath(),i.moveTo(o-1.5*r,u-2*r),i.lineTo(o-1.5*r,u+2*r),i.stroke(),i.beginPath(),i.moveTo(o+1.5*r,u-2*r),i.lineTo(o+1.5*r,u+2*r),i.stroke()}},Dt=({getX:t,getY:e,popEffect:l=()=>{}})=>{const{addEventResize:f,useMeasure:r,useTimer:i,useScreenMeta:n,navigate:o,addEventClick:u,intersect:s}=R(),{from:c}=n();let d,h,a;return f(()=>{const{cx:p,cy:g,s:m,m:y}=r();d={c:"#fd8059",r:Math.round(m*.08),x:t(p,m,y),y:e(g,m,y),p:(c==="game"||c==="opening")&&!d},h=I(d),a=at(d)}),i(()=>{d.p=!1}),u((p,g)=>{s({x:p,y:g},d)&&(l(d),d.p=!0,i(()=>{o("main")},100))}),{render:()=>{h(),d.p||a()},point:()=>({x:d.x,y:d.y,r:d.r})}},Ht=({color:t="#f86a9a",popEffect:e=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:r,useScreenMeta:i,addEventClick:n,intersect:o,navigate:u}=R(),{from:s}=i();let c,d,h,a;return l(()=>{const{cx:p,cy:g,s:m}=f(),y=Math.round(m*.25);c={c:t,x:p,y:g,r:y,p:s==="opening"&&!c},d=I(c),h=J({text:"Yola",c:"#f1f1f1",x:p,y:g-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),a=J({text:"PopiT",c:"#ffeb3b",x:p,y:g-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),r(()=>c.p=!1),n((p,g)=>{o({x:p,y:g},c)&&(e(c),c.p=!0,r(()=>{u("opening")},100))}),{render:()=>{d(),c.p||(h(),a())},point:()=>({x:c.x,y:c.y,r:c.r})}},dt=({color:t="#00dcfe",frequency:e=25})=>{const{addEventResize:l,useRandChain:f,useMeasure:r,rand:i,useTimer:n,setBackground:o,useScreenMeta:u}=R(),{from:s}=u();o(t);const c=i(0,999);let d=[],h=[];l(()=>{const p=f(c),{s:g}=r();d=[];const m=Math.round(g*.05),y=Math.round(innerWidth/m/2)-1,v=Math.round((innerWidth-2*m*y)/(y+1)),P=Math.round(innerHeight/m/2)-1,w=Math.round((innerHeight-2*m*P)/(P+1));for(let S=0;S<P;S++)for(let x=0;x<y;x++)p(p(e))<1&&d.push({x:v+m+x*m*2+v*x,y:w+m+S*m*2+w*S,r:m,c:t,p:s==="opening"?!0:p(1)>0});h=d.map(S=>I(S))});const a=()=>{n(()=>{const p=i(d.length-1);d[p]&&(d[p].p=!d[p].p),a()},750)};return s==="opening"?n(()=>{d.forEach(p=>p.p=i(1)>0),a()}):a(),{render:()=>{h.forEach(p=>p())},setIntersections:p=>{d=d.filter(({x:g,y:m,r:y})=>p(g,m,y)),h=d.map(g=>I(g))}}},nt="ylp",ot="score",rt="difficulty",U=[.14,.11,.09,.075],st=500,kt=350,ct=5,k=[];for(let t=0;t*ct<=st-kt;t++)k.push(st-t*ct);const F=()=>{const t=d=>localStorage.getItem(`${nt}_${d}`),e=(d,h)=>localStorage.setItem(`${nt}_${d}`,h.toString()),l=()=>+(t(ot)||0),f=d=>e(ot,d),r=d=>{const h=l();f(h+d)},i=()=>+(t(rt)||0),n=d=>{const h=i();e(rt,Math.min(Math.max(h+d,0),U.length*k.length-1))};return{getScore:l,addScore:r,plusDifficulty:()=>n(1),minusDifficulty:()=>n(-5),getDifficultyRad:()=>{const d=i(),h=Math.floor(d/k.length);return U[h]||U[1]},getDifficultyTic:()=>{const d=i(),h=Math.floor(d/k.length),a=d-h*k.length;return k[a]||k[0]}}},lt=(t=!1)=>{let e=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:f,setBackground:r,rand:i}=R(),{getDifficultyRad:n}=F();return e=[...e.splice(i(e.length-1),e.length),...e],t||l(()=>{const{s:u}=f(),s=n(),c=Math.round(u*s),d=Math.round(innerWidth/c/2)-1,h=(innerWidth-2*c*d)/(d+1),a=Math.round(innerHeight/c/2)-1,E=(innerHeight-2*c*a)/(a+1),M=innerWidth>=innerHeight,p=M?d:a,g=M?h:E,m=M?innerWidth:innerHeight;let y=0;const v=[];for(let w=0;w<p;w++)e[y]||(y=0),v.push(`${e[y]} ${(g+c+w*c*2+g*w)/m*100}%`),y++;r(`linear-gradient(${M?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?e[0]:"#040404")}),e},ut=({palette:t,retry:e,popEffect:l=()=>{}})=>{const{addEventResize:f,useMeasure:r,rand:i,useTimer:n,useScreenMeta:o,navigate:u,addEventClick:s,intersect:c}=R(),{from:d}=o(),{getDifficultyRad:h}=F(),a=[];let E=[],M,p,g,m;const y=P=>Array.isArray(t)?t[P]:t;return f(()=>{const{s:P}=r();a.splice(0);const w=h(),S=Math.round(P*w),x=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*x)/(x+1),T=Math.round(innerHeight/S/2)-1,b=(innerHeight-2*S*T)/(T+1),W=innerWidth>=innerHeight;let D=0;for(let A=0;A<T;A++){for(let _=0;_<x;_++){y(D)||(D=0);const Z={x:C+S+_*S*2+C*_,y:b+S+A*S*2+b*A,r:S,c:y(D),p:!0};A===0&&_===x-1?(m={...Z,p:(d==="main"||d==="gameover"||d==="gamescore")&&!m},M=I(m),p=at(m)):a.push(Z),D+=W?1:0}D=W?0:D+1}e&&(g=a[i(a.length-1)],n(()=>{g.p=!1})),E=a.map(A=>I(A))}),n(()=>{m.p=!1}),e&&s((P,w)=>{c({x:P,y:w},g)&&(l(g),g.p=!0,n(()=>{u("game")},100))}),s((P,w)=>{c({x:P,y:w},m)&&(l(m),m.p=!0,n(()=>{u("main")},100))}),{render:()=>{E.forEach(P=>P()),M(),m!=null&&m.p||p()},popits:a}},H=100,O="#222",zt=t=>{const e=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,f=(t==null?void 0:t[2])||0;return"#"+(16777216+(e<255?e<1?0:e:255)*65536+(l<255?l<1?0:l:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:e,createImg:l,useRandChain:f,useTimer:r}=R();let i,n=!1,o=[];const u=t.r*2/H/2;V[t.imgSrc]?i=V[t.imgSrc]:(i=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},i.img.src=t.imgSrc);const s=()=>r(()=>{n=!n,s()},250),c=(M,p=e)=>{const{x:g,y:m,c:y,r:v}=M;p.fillStyle=y||"red",p.beginPath(),p.arc(g+v,m+v,v,0,Math.PI*2),p.closePath(),p.fill()},d=(M=e,p=0,g=0)=>{M.fillStyle=O,M.beginPath(),M.roundRect(p,g,2*t.r,2*t.r,u),M.closePath(),M.fill()},h=()=>{const M=[];for(let v=0;v<H;v++)for(let P=0;P<H;P++){const w={x:P*u*2,y:v*u*2,r:u,c:O};M.push(w)}let p=t.score-t.winScore;const g=[...M],m=f(0),y=(v=!1)=>{const P=m(g.length-1),w=g[P],S=M.indexOf(w);w.c=v?O:i.cols[S],g.splice(P,1),v&&o.push({...w,c:i.cols[S]})};for(let v=p;v>0;v--)y();if(t.winScore){o=[];for(let v=t.winScore;v>0;v--)y(!0);s()}return M},a=()=>{const M=h();i.drawImg=l((p=e)=>{d(p),M.filter(g=>g.c!==O).forEach(g=>c(g,p))},2*t.r)},E=async()=>{var g;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(i.img,0,0);for(let m=0;m<H;m++){const y=[];for(let v=0;v<H;v++){const P=(g=p==null?void 0:p.getImageData(v,m,1,1))==null?void 0:g.data;y.push(zt(P))}i.cols.push(...y)}i.isFilled=!0,a()};return i.isFilled?(i.r!==t.r||i.score!==t.score)&&a():i.img.onload=E,(M=e)=>{const{x:p,y:g,r:m,winScore:y}=t;if(i.drawImg?M.drawImage(i.drawImg,p-m,g-m,2*m,2*m):d(M,p-m,g-m),n&&y&&i.drawImg)for(const v of o)M.fillStyle=v.c||"red",M.beginPath(),M.arc(p-m+v.x+v.r,g-m+v.y+v.r,v.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ft=(t=0)=>{const{addEventResize:e,useMeasure:l,translate:f}=R(),{getScore:r}=F(),i=["/media/cat.png"],n=r();let o,u=0,s=0,c=Math.floor(n/K);return e(()=>{const{cx:M,cy:p,s:g}=l();o=[],u=(g-2*g*.055*1.6)/2,s=g*.05;for(let m=0;m<i.length;m++){const y=i[m];o.push(Ft({x:M,y:p+m*u*2+m*s,r:u,score:n-m*K<0?0:n-m*K,imgSrc:y,winScore:t}))}}),{up:()=>{c=c+1<i.length?c+1:i.length-1},down:()=>{c=c-1<0?0:c-1},render:()=>{f(()=>{o==null||o.forEach(M=>M())},0,-(c*u*2+c*s))},rect:()=>{const{cx:M,cy:p}=l(),g=innerWidth>innerHeight;return{x:g?M-u:0,y:g?0:p-u,w:g?2*u:innerWidth,h:g?innerHeight:2*u}}}},_t=({popits:t,popEffect:e=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:f,rand:r,addEventClick:i,addEventMove:n,intersect:o,navigate:u}=R(),{addScore:s,getDifficultyTic:c}=F();let d=[],h,a,E=!1,M=0,p=0,g=0;const m=c(),y=x=>{const C=t.filter(W=>d.indexOf(W)===-1&&W!==x),T=r(C.length-1),b=C[T];b&&(b.p=!1,d.push(C[T]))},v=()=>{a=f(()=>{if(g=Math.max(g-10,50),t.length===d.length){E=!0,a.stop(),f(()=>{u("gameover")});return}y(),v()},g)},P=x=>{d=[];const C=t.length;let T=r(Math.round(C*.3),Math.round(C*.6));const b=[...t];if(x){const W=b.indexOf(x);b.splice(W,1)}for(let W=T;W>0;W--){const D=r(b.length-1),A=b[D];A.p=!1,d.push(A),b.splice(D,1)}g=m,h==null||h.stop(),a==null||a.stop(),h=f(()=>{l("Too slow"),v()},d.length*m),M=M>0?M:r(3,5)},w=x=>{e(x),g=Math.min(g+5,m),p++,x.p=!0;const C=d.indexOf(x);d.splice(C,1),d.length<=0&&(M--,M>0?f(()=>{l("Round up"),P(x)},100):(h==null||h.stop(),a==null||a.stop(),s(p),f(()=>{u("gamescore",{winScore:p})},100)))},S=(x,C,T=!1)=>{if(!E){for(const b of d)if(o({x,y:C},b)){w(b);return}if(!T){for(const b of t)if(o({x,y:C},b)){e(b,!0),l("Popenalty"),y(b);return}l("Popenalty"),y()}}};i(S),n((x,C)=>S(x,C,!0)),f(()=>{P()})},Lt=()=>{const{addEventResize:t,rand:e,useScreenMeta:l}=R(),{from:f}=l(),{popEffect:r,render:i}=N(),n=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],o=f==="opening"?n[0]:n[e(n.length-1)],{render:u,setIntersections:s}=dt({color:o}),{render:c,point:d}=Ht({popEffect:r}),{render:h,point:a}=it({getX:(p,g,m)=>p+Math.round(g*.25)+2*m,getY:(p,g,m)=>p+Math.round(g*.25)+0*m,popEffect:r}),{render:E,point:M}=Ct({popEffect:r});return t(()=>{const p=M(),g=d(),m=a();s((y,v,P)=>!z({x:y,y:v,r:P},p)&&!z({x:y,y:v,r:P},g)&&!z({x:y,y:v,r:P},m))}),()=>{i(),u(),c(),h(),E()}},$t=()=>{const t=lt(),{popEffect:e,render:l}=N(),{splashEffect:f,render:r}=Q(),{popits:i,render:n}=ut({palette:t,popEffect:e});return _t({popits:i,popEffect:e,splashEffect:f}),()=>{l(),n(),r()}},Nt=()=>{const t="#ff6347",{popEffect:e,render:l}=N(),{setBackground:f}=R(),{minusDifficulty:r}=F(),{render:i}=ut({palette:t,retry:!0,popEffect:e});return f(t),r(),()=>{l(),i()}},Ot=()=>{const{translate:t,useScreenMeta:e}=R(),{plusDifficulty:l}=F(),{data:f}=e(),{popEffect:r,render:i}=N(),{splashEffect:n,render:o}=Q(),u=lt(),{render:s}=ft(f==null?void 0:f.winScore),{render:c}=it({getX:(h,a,E)=>innerWidth>innerHeight?Math.min(h+(a-2*a*.055*1.6)/2+4*E+Math.round(a*.1),innerWidth-2*E-Math.round(a*.1)):h+(a-2*a*.055*1.6)/8+0*Math.round(a*.1)+2*E,getY:(h,a,E)=>innerWidth>innerHeight?h+(a-2*a*.055*1.6)/2-1*E-Math.round(a*.1):Math.min(h+(a-2*a*.055*1.6)/2+4*E+Math.round(a*.1),innerHeight-2*E-Math.round(a*.1)),popEffect:r}),{render:d}=Dt({getX:(h,a,E)=>innerWidth>innerHeight?Math.max(h-(a-2*a*.055*1.6)/2-4*E-Math.round(a*.1),2*E+Math.round(a*.1)):h+(a-2*a*.055*1.6)/8-2*Math.round(a*.1)-2*E,getY:(h,a,E)=>innerWidth>innerHeight?h-(a-2*a*.055*1.6)/2+0*E+Math.round(a*.1):Math.min(h+(a-2*a*.055*1.6)/2+4*E+Math.round(a*.1),innerHeight-2*E-Math.round(a*.1)),popEffect:r});return l(),n("You win",u[u.length-1]),()=>{i(),innerHeight>innerWidth?t(s,0,-Math.round(innerHeight*.07)):s(),c(),d(),o()}},Bt=()=>{const{addEventResize:t,rand:e}=R(),{popEffect:l,render:f}=N(),{splashEffect:r,render:i}=Q(),n=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],o=n[e(n.length-1)],{render:u,setIntersections:s}=dt({color:o,frequency:10}),{render:c,rect:d,up:h,down:a}=ft(),{render:E,point:M}=It({popEffect:l}),{point:p}=Tt(h),{point:g}=Wt(a);return t(()=>{const m=M(),y=d(),v=p(),P=g();s((w,S,x)=>!z({x:w,y:S,r:x},m)&&!St({x:w,y:S,r:x},y)&&!z({x:w,y:S,r:x},v)&&!z({x:w,y:S,r:x},P))}),r("Score"),()=>{f(),u(),c(),E(),i()}},Gt=()=>{const{ctx:t,addEventResize:e,loop:l}=R(),f={x:40,y:100};let r=1,i=1,n;const o=()=>{n=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),e(o),l(()=>{f.x+=2*r,f.y+=3*i,r*=-1,i*=-1}),()=>{t.save();var u=Math.random()*2,s=Math.random()*3;t.translate(u,s),t.beginPath(),t.fillStyle="red",t.rect(f.x,f.y,n,n),t.fill(),t.restore()}},Yt=[{name:"opening",ctor:bt},{name:"main",ctor:Lt},{name:"game",ctor:$t},{name:"gameover",ctor:Nt},{name:"gamescore",ctor:Ot},{name:"score",ctor:Bt},{name:"devs",ctor:Gt}];Rt(Yt);document.title="Your's last Pop it";
