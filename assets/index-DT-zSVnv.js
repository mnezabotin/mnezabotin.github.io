(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&h(i)}).observe(document,{childList:!0,subtree:!0});function l(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(r){if(r.ep)return;r.ep=!0;const s=l(r);fetch(r.href,s)}})();const pt=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},h=e=>{n.clearRect(0,0,innerWidth,innerHeight),e()};return l(),document.body.appendChild(t),{ctx:n,render:h,resize:l,rotate:(e,o,d,a)=>{n.save(),n.translate(o,d),n.rotate(Math.PI*a),n.translate(-o,-d),e(),n.restore()},translate:(e,o,d)=>{n.save(),n.translate(o,d),e(),n.restore()},shade:(e,o)=>{e=e.substring(1);const d=parseInt(e,16),a=Math.round(2.55*o),u=(d>>16)+a,E=(d>>8&255)+a,y=(d&255)+a;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(E<255?E<1?0:E:255)*256+(y<255?y<1?0:y:255)).toString(16).slice(1)},setBackground:(e,o)=>{var d;document.body.style.background=e,document.body.style.backgroundColor=o||e,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",o||e)},createImg:(e,o,d=o)=>{const a=document.createElement("canvas"),u=a.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return a.width=o*devicePixelRatio,a.height=d*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),e(u),a}}},gt=t=>{let n="",l="",h;const r=c=>t.find(f=>f.name===c)||t[0],i={render:()=>{},navigate:(c,f)=>{const e=r(c);l=n||"",n=(e==null?void 0:e.name)||"",h=f,i.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:l,data:h})};return i},mt=()=>{const t=requestAnimationFrame||(i=>setTimeout(i,16.666666666666668)),n=[],l={};return{loop:(i,c)=>{if(Object.entries(l).find(([e,o])=>o===i)||c&&l[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&n.push(c),c=c||new Date().valueOf().toString(),l[c]=i;const f=()=>{i(),l[c]&&t(f)};f()},stop:i=>{if(typeof i=="string")delete l[i];else{const c=Object.entries(l).find(([f,e])=>e===i);c&&delete l[c[0]]}},stopAll:()=>{for(const i in l)n.indexOf(i)===-1&&delete l[i]}}};let B=[];const Mt=()=>{for(const t of B)clearTimeout(t);B=[]},yt=(t,n=400)=>{let l=new Date,h=n,r=setTimeout(t,h);return B.push(r),{pause:()=>{clearTimeout(r),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(r),r=setTimeout(t,h),B.push(r)},stop:()=>{clearTimeout(r)}}},Z=2147483646,X=2147483647,vt=16807,Et=(t=Math.floor(Math.random()*X))=>{t=t%X,t<=0&&(t+=Z);const n=()=>(t=t*vt%X,t),l=()=>(n()-1)/Z;return(r,s)=>(s===void 0&&(s=r,r=0),Math.floor(l()*(s-r+1))+r)},Pt=(t,n)=>(n===void 0&&(n=t,t=0),Math.floor(Math.random()*(n-t+1))+t),St=()=>{const t=[],n=[],l=[];return{addEventResize:o=>{o(),t.push(o)},onResizeEvents:()=>t.forEach(o=>o()),addEventClick:o=>n.push(o),onClickEvents:(o,d)=>n.forEach(a=>a(o,d)),addEventMove:o=>l.push(o),onMoveEvents:(o,d)=>l.forEach(a=>a(o,d)),removeAllEvents:()=>{t.splice(0),n.splice(0),l.splice(0)}}},_=(t,n)=>{const l=Math.pow(Math.abs(t.x-n.x),2),h=Math.pow(Math.abs(t.y-n.y),2),r=t.r||0,s=n.r||0,i=Math.pow(r+s,2);return l+h<=i},wt=(t,n)=>{const l=t.r||0,h=n.w||0,r=n.h||0;return Math.abs(n.x+h/2-t.x)<=h/2+l&&Math.abs(n.y+r/2-t.y)<=r/2+l},xt=(t,n)=>_(t,n),Rt=t=>{const n={},l=r=>{const s=r.split("/");return s[s.length-1].split(".")[0]};return(()=>{for(const r of t){const s=new Audio(r);s.volume=.25,s.addEventListener("ended",function(){this.currentTime=0});const i=l(r);n[i]={audio:s,path:r}}})(),r=>{var f,e;const s=(f=n[r])==null?void 0:f.audio,i=(e=n[r])==null?void 0:e.path;if(!(!s||!i))if(s.currentTime===0)s.play();else{var c=new Audio(i);c.volume=.25,c.play()}}};let G;const bt=(t,n)=>{if(G)throw new Error("Webcore already specified");const l=pt(),h=gt(t),{loop:r,stop:s,stopAll:i}=mt(),{addEventResize:c,onResizeEvents:f,addEventClick:e,onClickEvents:o,addEventMove:d,onMoveEvents:a,removeAllEvents:u}=St();let E=innerWidth/2,y=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:E,cy:y,s:p,m}),v=Rt([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(M,P)=>{if(!t.some(S=>S.name===M))throw new Error(`Screen ${M} not specified`);i(),Mt(),u(),new Promise(()=>h.navigate(M,P))},loop:r,loopStop:s,useTimer:yt,rand:Pt,useRandChain:Et,intersect:xt,addEventResize:c,addEventClick:e,addEventMove:d,playAudio:v},r(()=>l.render(h.render),"draw"),window.onresize=()=>{E=innerWidth/2,y=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),f()},"ontouchstart"in window?document.ontouchstart=M=>{const P=M.touches||[];for(const S of P)o(S.clientX,S.clientY)}:document.onpointerdown=M=>{o(M.clientX,M.clientY)},document.onmousemove=M=>{a(M.clientX,M.clientY)},h.navigate()},x=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},j={},W=t=>{const{shade:n,ctx:l,createImg:h}=x(),r=()=>{const{r:i,c="#ffffff",p:f}=t,e=l.createRadialGradient(i,i,i,i,i,i/5);return e.addColorStop(0,n(c,0)),e.addColorStop(.01,n(c,0)),e.addColorStop(.075,n(c,9)),e.addColorStop(.15,n(c,0)),e.addColorStop(.15,n(c,-15)),e.addColorStop(.18,n(c,-5)),e.addColorStop(.22,n(c,-15)),f?(e.addColorStop(.24,n(c,-10)),e.addColorStop(.3,n(c,-8)),e.addColorStop(.34,n(c,-12)),e.addColorStop(.6,n(c,-6)),e.addColorStop(1,n(c,-4))):(e.addColorStop(.24,n(c,-12)),e.addColorStop(.26,n(c,-8)),e.addColorStop(.3,n(c,-2)),e.addColorStop(.34,n(c,0)),e.addColorStop(.5,n(c,5)),e.addColorStop(1,n(c,12))),e},s=()=>{const{r:i,c="#ffffff",p:f}=t,e=`${c}_${f?"push":"pop"}_${i}`;if(j[e])return j[e];const o=h((d=l)=>{const a=r();d.fillStyle=a,d.beginPath(),d.arc(i,i,i,0,2*Math.PI),d.closePath(),d.fill()},2*i);return j[e]=o,o};return(i=l)=>{const{x:c,y:f,r:e}=t,o=s();i.drawImage(o,c-e,f-e,2*e,2*e)}},q={},L=t=>{const{ctx:n}=x();let l;return q[t.src]?l=q[t.src]:(l=new Image,l.src=t.src,q[t.src]=l),(h=n)=>{const{w:r,h:s=r,x:i=0,y:c=0}=t;l.complete&&h.drawImage(l,i,c,r,s)}},tt=t=>{const{font:n,ctx:l}=x(),h=t.text,r=t.text.length,s=2*Math.PI/r/4;return(i=l)=>{const{x:c,y:f,r:e,s:o=0,fs:d}=t,a=d||Math.round(e/4);i.textAlign="center",i.fillStyle="#f9f9f9",i.font=`${a}px ${n}`,i.save(),i.translate(c,f),i.rotate(o);for(let u=0;u<r;u++)i.save(),i.rotate(u*s),i.fillText(h[u],0,-e),i.restore();i.restore()}},Ct=()=>{var g,v;const{ctx:t,loop:n,rotate:l,navigate:h,useMeasure:r,addEventClick:s,addEventResize:i,setBackground:c}=x();c("#040404");let f=!1,e,o,d,a,u,E=-.2,y=0;i(()=>{const{cx:M,cy:P,s:S}=r(),w=Math.round(S*.25);e={c:"#ff6347",x:M,y:P,r:w,p:!1},o=W(e),d=L({x:M-w+Math.round(w*.35),y:P-w+Math.round(w*.35),w:w*2-Math.round(w*.7),src:"/media/sloth.svg"}),a=tt({text:"nezabotin",x:M,y:P,r:Math.round(w*1.1),s:Math.PI*1.6}),u=tt({text:"production",x:M,y:P,r:Math.round(w*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,y=E>=1?1:E,E>=1.8&&(e.p=!0),E>=2.2&&(e.c="#f86a9a"),E>=2.6&&h("main")};s(()=>{[1.4,1.8,2.2,2.6].some(M=>{if(E<M)return E=M,!0})});const m=()=>{n(p),f=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:M,cy:P}=r();t.globalAlpha=f?1:0,o(),E<1.8&&d(),E<1.4&&l(()=>{a(),u()},M,P,y),t.globalAlpha=1}},F=100/2;let et=0;const N=()=>{const{loop:t,ctx:n,shade:l,rand:h}=x(),r={},s=()=>{for(const f in r){const e=r[f];if(!e)return;const o=e.popit;if(!e.shake)e.tic+=F/5,e.tic>=F&&(e.dir=-1),e.withoutRad||(o.r=e.origR+e.origR*75e-5*(e.tic+(e.dir>0?0:F-e.tic)));else{e.tic+=F/5;const d=h(1,2),a=h(1,2);o.x=e.origX+Math.random()*d*(Math.random()>.5?1:-1),o.y=e.origY+Math.random()*a*(Math.random()>.5?1:-1)}e.tic>=2*F&&(delete r[f],o.r=e.origR,o.x=e.origX,o.y=e.origY)}},i=(f,e=!1,o=!1)=>{et++;const d=`${new Date().valueOf().toString()}_${et}`,a=1,u=1;r[d]={withoutRad:e,tic:a,dir:u,popit:f,origR:f.r,origX:f.x,origY:f.y,shake:o}},c=()=>{n.globalAlpha=.25;for(const f in r){const e=r[f];if(e.shake)continue;const o=e.popit;n.fillStyle=l(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+e.origR*.001*(e.tic+(e.dir>0?0:F-e.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return t(s),{popEffect:i,render:c}},J=t=>{const{font:n,ctx:l}=x();return(h=l)=>{const{text:r,x:s,c:i,y:c,fs:f,a:e="center",mw:o}=t;h.textAlign=e,h.fillStyle=i,h.font=`${f}px ${n}`,h.fillText(r,s,c,o)}},O=100,ct=t=>{const{loop:n,ctx:l,useMeasure:h,rand:r}=x();let s=null;const i=()=>{if(!s)return;const{m:e}=h();if(s.tic<=O)s.props.fs=((t==null?void 0:t.mfs)||6)/O*s.tic*e;else{const o=r(1,1),d=r(1,1);s.props.x=s.origX+Math.random()*o*(Math.random()>.5?1:-1),s.props.y=s.origY+Math.random()*d*(Math.random()>.5?1:-1),s.shake=!0}s.tic+=s.tic>O?1:10,s.tic>O*2&&(s=null)},c=e=>{const{cx:o,m:d}=h(),a=0,u={x:o,y:Math.round(d*((t==null?void 0:t.dy)||16)),text:e,c:(t==null?void 0:t.color)||"#ffffff",fs:0},E=J(u);s={props:u,shape:E,tic:a,origX:u.x,origY:u.y}},f=()=>{s&&(l.globalAlpha=.01*s.tic,s.shape(),l.globalAlpha=1)};return n(i),{splashEffect:c,render:f}},It=({color:t="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:f}=x(),{from:e}=s();let o,d,a;return l(()=>{const{cx:y,cy:p,s:m,m:g}=h(),v=Math.round(m*.25);o={c:t,r:Math.round(m*.08),x:y-v-1*g,y:p-v+1*g,p:(e==="score"||e==="opening")&&!o},d=W(o),a=L({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((y,p)=>{f({x:y,y:p},o)&&(n(o),o.p=!0,r(()=>{i("score")},100))}),{render:()=>{d(),o.p||a()},point:()=>({x:o.x,y:o.y,r:o.r})}},Tt=({color:t="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:f}=x(),{from:e}=s();let o,d,a;return l(()=>{const{s:y}=h(),p=Math.round(y*.08);o={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:e==="main"&&!o},d=W(o),a=L({x:Number(o.x)-p+Math.round(p*.4),y:Number(o.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((y,p)=>{f({x:y,y:p},o)&&(n(o),o.p=!0,r(()=>{i("main")},100))}),{render:()=>{d(),o.p||a()},point:()=>({x:o.x,y:o.y,r:o.r})}},Wt=t=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:r,intersect:s,rotate:i}=x();let c,f,e;return n(()=>{const{s:a}=l(),u=Math.round(a*.055);c={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},f=W(c),e=L({x:Number(c.x)-u+Math.round(u*.4),y:Number(c.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((a,u)=>{s({x:a,y:u},c)&&(c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{f(),c.p||i(()=>{e()},c.x,c.y,-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},kt=t=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:r,intersect:s,rotate:i}=x();let c,f,e;return n(()=>{const{s:a}=l(),u=Math.round(a*.055);c={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},f=W(c),e=L({x:Number(c.x)-u+Math.round(u*.4),y:Number(c.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((a,u)=>{s({x:a,y:u},c)&&(c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{f(),c.p||i(()=>{e()},c.x,c.y,.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},At=t=>{const{ctx:n,shade:l}=x(),h=Math.round(t.r/2.2),r=Math.round(.15*t.r),s=l(t.c||"blue",-3);return(i=n)=>{const{r:c,x:f=c,y:e=c}=t;i.lineCap="round",i.fillStyle=s,i.strokeStyle=s,i.lineWidth=h,i.beginPath(),i.moveTo(f+r,e),i.lineTo(f-r/2,e-r),i.lineTo(f-r/2,e+r),i.closePath(),i.fill(),i.beginPath(),i.moveTo(f+r,e),i.lineTo(f-r/2,e-r),i.moveTo(f-r/2,e-r),i.lineTo(f-r/2,e+r),i.moveTo(f-r/2,e+r),i.lineTo(f+r,e),i.stroke()}},at=({getX:t,getY:n,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:r,useMeasure:s,useTimer:i,useScreenMeta:c,navigate:f,addEventClick:e,intersect:o}=x(),{from:d}=c();let a,u,E;return r(()=>{const{cx:m,cy:g,s:v,m:M}=s();a={c:l,r:Math.round(v*.1),x:t(m,v,M),y:n(g,v,M),p:(d==="gamescore"||d==="game"||d==="opening")&&!a},u=W(a),E=At(a)}),i(()=>{a.p&&h(a,!1,!0),a.p=!1}),e((m,g)=>{o({x:m,y:g},a)&&(h(a),a.p=!0,i(()=>{f("game")},100))}),{render:()=>{u(),a.p||E()},point:()=>({x:a.x,y:a.y,r:a.r})}},dt=t=>{const{ctx:n,shade:l}=x(),h=Math.round(t.r/4),r=Math.round(.12*t.r);return(s=n)=>{const{r:i,x:c=i,y:f=i}=t,e=l(t.c||"blue",-3);s.lineCap="round",s.strokeStyle=e,s.lineWidth=h,s.beginPath(),s.moveTo(c-1.5*r,f-2*r),s.lineTo(c-1.5*r,f+2*r),s.stroke(),s.beginPath(),s.moveTo(c+1.5*r,f-2*r),s.lineTo(c+1.5*r,f+2*r),s.stroke()}},Ht=({getX:t,getY:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:r,useTimer:s,useScreenMeta:i,navigate:c,addEventClick:f,intersect:e}=x(),{from:o}=i();let d,a,u;return h(()=>{const{cx:p,cy:m,s:g,m:v}=r();d={c:"#fd8059",r:Math.round(g*.08),x:t(p,g,v),y:n(m,g,v),p:(o==="game"||o==="opening")&&!d},a=W(d),u=dt(d)}),s(()=>{d.p&&l(d,!1,!0),d.p=!1}),f((p,m)=>{e({x:p,y:m},d)&&(l(d),d.p=!0,s(()=>{c("main")},100))}),{render:()=>{a(),d.p||u()},point:()=>({x:d.x,y:d.y,r:d.r})}},Dt=({color:t="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,addEventClick:i,intersect:c,navigate:f}=x(),{from:e}=s();let o,d,a,u;return l(()=>{const{cx:p,cy:m,s:g}=h(),v=Math.round(g*.25);o={c:t,x:p,y:m,r:v,p:e==="opening"&&!o},d=W(o),a=J({text:"Yola",c:"#f1f1f1",x:p,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),u=J({text:"PopiT",c:"#ffeb3b",x:p,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),i((p,m)=>{c({x:p,y:m},o)&&(n(o),o.p=!0,r(()=>{f("opening")},100))}),{render:()=>{d(),o.p||(a(),u())},point:()=>({x:o.x,y:o.y,r:o.r})}},lt=({color:t="#00dcfe",frequency:n=20})=>{const{addEventResize:l,useRandChain:h,useMeasure:r,rand:s,useTimer:i,setBackground:c,useScreenMeta:f}=x(),{from:e}=f();c(t);const o=s(0,999);let d=[],a=[];l(()=>{const p=h(o),{s:m}=r();d=[];const g=Math.round(m*.05),v=Math.round(innerWidth/g/2)-1,M=Math.round((innerWidth-2*g*v)/(v+1)),P=Math.round(innerHeight/g/2)-1,S=Math.round((innerHeight-2*g*P)/(P+1));for(let w=0;w<P;w++)for(let T=0;T<v;T++)p(p(n))<1&&d.push({x:M+g+T*g*2+M*T,y:S+g+w*g*2+S*w,r:g,c:t,p:e==="opening"?!0:p(1)>0});a=d.map(w=>W(w))});const u=()=>{i(()=>{const p=s(d.length-1);d[p]&&(d[p].p=!d[p].p),u()},250)};return e==="opening"?i(()=>{d.forEach(p=>p.p=s(1)>0),u()}):u(),{render:()=>{a.forEach(p=>p())},setIntersections:p=>{d=d.filter(({x:m,y:g,r:v})=>p(m,g,v)),a=d.map(m=>W(m))}}},nt="ylp",ot="score",rt="difficulty",U=[.14,.11,.09,.075],st=500,zt=350,it=5,z=[];for(let t=0;t*it<=st-zt;t++)z.push(st-t*it);const $=()=>{const t=d=>localStorage.getItem(`${nt}_${d}`),n=(d,a)=>localStorage.setItem(`${nt}_${d}`,a.toString()),l=()=>+(t(ot)||0),h=d=>n(ot,d),r=d=>{const a=l();h(a+d)},s=()=>+(t(rt)||0),i=d=>{const a=s();n(rt,Math.min(Math.max(a+d,0),U.length*z.length-1))};return{getScore:l,addScore:r,plusDifficulty:()=>i(1),minusDifficulty:()=>i(-5),getDifficultyRad:()=>{const d=s(),a=Math.floor(d/z.length);return U[a]||U[1]},getDifficultyTic:()=>{const d=s(),a=Math.floor(d/z.length),u=d-a*z.length;return z[u]||z[0]}}},ut=(t=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:r,rand:s}=x(),{getDifficultyRad:i}=$();return n=[...n.splice(s(n.length-1),n.length),...n],t||l(()=>{const{s:f}=h(),e=i(),o=Math.round(f*e),d=Math.round(innerWidth/o/2)-1,a=(innerWidth-2*o*d)/(d+1),u=Math.round(innerHeight/o/2)-1,E=(innerHeight-2*o*u)/(u+1),y=innerWidth>=innerHeight,p=y?d:u,m=y?a:E,g=y?innerWidth:innerHeight;let v=0;const M=[];for(let S=0;S<p;S++)n[v]||(v=0),M.push(`${n[v]} ${(m+o+S*o*2+m*S)/g*100}%`),v++;r(`linear-gradient(${y?"to right":"to bottom"}, ${M.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ft=({palette:t,retry:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:r,rand:s,useTimer:i,useScreenMeta:c,navigate:f,addEventClick:e,intersect:o}=x(),{from:d}=c(),{getDifficultyRad:a}=$(),u=[];let E=[],y,p,m,g;const v=P=>Array.isArray(t)?t[P]:t;return h(()=>{const{s:P}=r();u.splice(0);const S=a(),w=Math.round(P*S),T=Math.round(innerWidth/w/2)-1,b=(innerWidth-2*w*T)/(T+1),C=Math.round(innerHeight/w/2)-1,A=(innerHeight-2*w*C)/(C+1),R=innerWidth>=innerHeight;let I=0;for(let k=0;k<C;k++){for(let H=0;H<T;H++){v(I)||(I=0);const Q={x:b+w+H*w*2+b*H,y:A+w+k*w*2+A*k,r:w,c:v(I),p:!0};k===0&&H===T-1?(g={...Q,p:(d==="main"||d==="gameover"||d==="gamescore")&&!g},y=W(g),p=dt(g)):u.push(Q),I+=R?1:0}I=R?0:I+1}n&&(m=u[s(u.length-1)],i(()=>{l(m,!1,!0),m.p=!1})),E=u.map(k=>W(k))}),i(()=>{g.p&&l(g,!1,!0),g.p=!1}),n&&e((P,S)=>{o({x:P,y:S},m)&&(l(m),m.p=!0,i(()=>{f("game")},100))}),e((P,S)=>{o({x:P,y:S},g)&&(l(g),g.p=!0,i(()=>{f("main")},100))}),{render:()=>{E.forEach(P=>P()),y(),g!=null&&g.p||p()},popits:u}},D=100,Y="#222",_t=t=>{const n=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:n,createImg:l,useRandChain:h,useTimer:r}=x();let s,i=!1,c=[];const f=t.r*2/D/2;V[t.imgSrc]?s=V[t.imgSrc]:(s=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},s.img.src=t.imgSrc);const e=()=>r(()=>{i=!i,e()},250),o=(y,p=n)=>{const{x:m,y:g,c:v,r:M}=y;p.fillStyle=v||"red",p.beginPath(),p.arc(m+M,g+M,M,0,Math.PI*2),p.closePath(),p.fill()},d=(y=n,p=0,m=0)=>{y.fillStyle=Y,y.beginPath(),y.roundRect(p,m,2*t.r,2*t.r,f),y.closePath(),y.fill()},a=()=>{const y=[];for(let M=0;M<D;M++)for(let P=0;P<D;P++){const S={x:P*f*2,y:M*f*2,r:f,c:Y};y.push(S)}let p=t.score-t.winScore;const m=[...y],g=h(0),v=(M=!1)=>{const P=g(m.length-1),S=m[P],w=y.indexOf(S);S.c=M?Y:s.cols[w],m.splice(P,1),M&&c.push({...S,c:s.cols[w]})};for(let M=p;M>0;M--)v();if(t.winScore){c=[];for(let M=t.winScore;M>0;M--)v(!0);e()}return y},u=()=>{const y=a();s.drawImg=l((p=n)=>{d(p),y.filter(m=>m.c!==Y).forEach(m=>o(m,p))},2*t.r)},E=async()=>{var m;const y=document.createElement("canvas");y.width=D,y.height=D;const p=y.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(s.img,0,0);for(let g=0;g<D;g++){const v=[];for(let M=0;M<D;M++){const P=(m=p==null?void 0:p.getImageData(M,g,1,1))==null?void 0:m.data;v.push(_t(P))}s.cols.push(...v)}s.isFilled=!0,u()};return s.isFilled?(s.r!==t.r||s.score!==t.score)&&u():s.img.onload=E,(y=n)=>{const{x:p,y:m,r:g,winScore:v}=t;if(s.drawImg?y.drawImage(s.drawImg,p-g,m-g,2*g,2*g):d(y,p-g,m-g),i&&v&&s.drawImg)for(const M of c)y.fillStyle=M.c||"red",y.beginPath(),y.arc(p-g+M.x+M.r,m-g+M.y+M.r,M.r,0,Math.PI*2),y.closePath(),y.fill()}},K=1e4,ht=(t=0)=>{const{addEventResize:n,useMeasure:l,translate:h}=x(),{getScore:r}=$(),s=["/media/max.png"],i=r();let c,f=0,e=0,o=Math.floor(i/K);return n(()=>{const{cx:y,cy:p,s:m}=l();c=[],f=(m-2*m*.055*1.6)/2,e=m*.05;for(let g=0;g<s.length;g++){const v=s[g];c.push(Ft({x:y,y:p+g*f*2+g*e,r:f,score:i-g*K<0?0:i-g*K,imgSrc:v,winScore:t}))}}),{up:()=>{o=o+1<s.length?o+1:s.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{h(()=>{c==null||c.forEach(y=>y())},0,-(o*f*2+o*e))},rect:()=>{const{cx:y,cy:p}=l(),m=innerWidth>innerHeight;return{x:m?y-f:0,y:m?0:p-f,w:m?2*f:innerWidth,h:m?innerHeight:2*f}}}},$t=({popits:t,popEffect:n=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:h,rand:r,addEventClick:s,addEventMove:i,intersect:c,navigate:f,addEventResize:e}=x(),{addScore:o,getDifficultyTic:d}=$();let a=[],u,E,y=!1,p=0,m=0,g=0;const v=d(),M=b=>{const C=t.filter(I=>a.indexOf(I)===-1&&I!==b),A=r(C.length-1),R=C[A];R&&(n(R,!1,!0),R.p=!1,a.push(C[A]))},P=()=>{E=h(()=>{if(g=Math.max(g-10,50),t.length===a.length){y=!0,E.stop(),h(()=>{f("gameover")});return}M(),P()},g)},S=b=>{a=[];const C=t.length;let A=r(Math.round(C*.3),Math.round(C*.6));const R=[...t];if(b){const I=R.indexOf(b);R.splice(I,1)}for(let I=A;I>0;I--){const k=r(R.length-1),H=R[k];H.p=!1,n(H,!1,!0),a.push(H),R.splice(k,1)}g=v,u==null||u.stop(),E==null||E.stop(),u=h(()=>{l("Too slow"),P()},a.length*v),p=p>0?p:r(3,5)},w=b=>{n(b),g=Math.min(g+5,v),m++,b.p=!0;const C=a.indexOf(b);a.splice(C,1),a.length<=0&&(p--,p>0?h(()=>{l("Round"),S(b)},100):(u==null||u.stop(),E==null||E.stop(),o(m),h(()=>{f("gamescore",{winScore:m})},100)))},T=(b,C,A=!1)=>{if(!y){for(const R of a)if(c({x:b,y:C},R)){w(R);return}if(!A){for(const R of t)if(c({x:b,y:C},R)){n(R,!0),l("Popenalty"),M(R);return}l("Popenalty"),M()}}};s(T),i((b,C)=>T(b,C,!0)),e(()=>{h(()=>{l("Go"),S()})})},Lt=()=>{const{addEventResize:t,rand:n,useScreenMeta:l}=x(),{from:h}=l(),{popEffect:r,render:s}=N(),i=["#00dcfe","#5bb2f7","#92E6E6"],c=h==="opening"?i[0]:i[n(i.length-1)],{render:f,setIntersections:e}=lt({color:c}),{render:o,point:d}=Dt({popEffect:r}),{render:a,point:u}=at({getX:(p,m,g)=>p+Math.round(m*.25)+2*g,getY:(p,m,g)=>p+Math.round(m*.25)+0*g,popEffect:r}),{render:E,point:y}=It({popEffect:r});return t(()=>{const p=y(),m=d(),g=u();e((v,M,P)=>!_({x:v,y:M,r:P},p)&&!_({x:v,y:M,r:P},m)&&!_({x:v,y:M,r:P},g))}),()=>{s(),f(),o(),a(),E()}},Nt=()=>{const{useMeasure:t,addEventResize:n}=x(),l=ut(),{popEffect:h,render:r}=N(),{popits:s,render:i}=ft({palette:l,popEffect:h}),c={mfs:0,dy:0},{splashEffect:f,render:e}=ct(c);return $t({popits:s,popEffect:h,splashEffect:f}),n(()=>{const o=(s[0].y-s[0].r)/t().m;c.mfs=o,c.dy=o}),()=>{r(),i(),e()}},Ot=()=>{const t="#ff6347",{popEffect:n,render:l}=N(),{setBackground:h}=x(),{minusDifficulty:r}=$(),{render:s}=ft({palette:t,retry:!0,popEffect:n});return h(t),r(),()=>{l(),s()}},Yt=()=>{const{translate:t,useScreenMeta:n}=x(),{plusDifficulty:l}=$(),{data:h}=n(),{popEffect:r,render:s}=N(),{splashEffect:i,render:c}=ct();ut();const{render:f}=ht(h==null?void 0:h.winScore),{render:e}=at({getX:(d,a,u)=>innerWidth>innerHeight?Math.min(d+(a-2*a*.055*1.6)/2+4*u+Math.round(a*.1),innerWidth-2*u-Math.round(a*.1)):d+(a-2*a*.055*1.6)/8+0*Math.round(a*.1)+2*u,getY:(d,a,u)=>innerWidth>innerHeight?d+(a-2*a*.055*1.6)/2-1*u-Math.round(a*.1):Math.min(d+(a-2*a*.055*1.6)/2+4*u+Math.round(a*.1),innerHeight-2*u-Math.round(a*.1)),popEffect:r}),{render:o}=Ht({getX:(d,a,u)=>innerWidth>innerHeight?Math.max(d-(a-2*a*.055*1.6)/2-4*u-Math.round(a*.1),2*u+Math.round(a*.1)):d+(a-2*a*.055*1.6)/8-2*Math.round(a*.1)-2*u,getY:(d,a,u)=>innerWidth>innerHeight?d-(a-2*a*.055*1.6)/2+0*u+Math.round(a*.1):Math.min(d+(a-2*a*.055*1.6)/2+4*u+Math.round(a*.1),innerHeight-2*u-Math.round(a*.1)),popEffect:r});return l(),i("You win"),()=>{s(),innerHeight>innerWidth?t(f,0,-Math.round(innerHeight*.07)):f(),e(),o(),c()}},Bt=()=>{const{addEventResize:t,rand:n}=x(),{popEffect:l,render:h}=N(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],s=r[n(r.length-1)],{render:i,setIntersections:c}=lt({color:s,frequency:10}),{render:f,rect:e,up:o,down:d}=ht(),{render:a,point:u}=Tt({popEffect:l}),{point:E}=Wt(o),{point:y}=kt(d);return t(()=>{const p=u(),m=e(),g=E(),v=y();c((M,P,S)=>!_({x:M,y:P,r:S},p)&&!wt({x:M,y:P,r:S},m)&&!_({x:M,y:P,r:S},g)&&!_({x:M,y:P,r:S},v))}),()=>{h(),i(),f(),a()}},Gt=()=>{const{ctx:t,addEventResize:n,loop:l}=x(),h={x:40,y:100};let r=1,s=1,i;const c=()=>{i=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),n(c),l(()=>{h.x+=2*r,h.y+=3*s,r*=-1,s*=-1}),()=>{t.save();var f=Math.random()*2,e=Math.random()*3;t.translate(f,e),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,i,i),t.fill(),t.restore()}},Xt=[{name:"opening",ctor:Ct},{name:"main",ctor:Lt},{name:"game",ctor:Nt},{name:"gameover",ctor:Ot},{name:"gamescore",ctor:Yt},{name:"score",ctor:Bt},{name:"devs",ctor:Gt}];bt(Xt);document.title="Your's last Pop it";
