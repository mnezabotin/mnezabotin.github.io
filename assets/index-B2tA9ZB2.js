(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const e of d.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&h(e)}).observe(document,{childList:!0,subtree:!0});function l(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function h(i){if(i.ep)return;i.ep=!0;const d=l(i);fetch(i.href,d)}})();const Pe=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},h=r=>{n.clearRect(0,0,innerWidth,innerHeight),r()};return l(),document.body.appendChild(t),{ctx:n,render:h,resize:l,rotate:(r,u,s,g)=>{n.save(),n.translate(u,s),n.rotate(Math.PI*g),n.translate(-u,-s),r(),n.restore()},translate:(r,u,s)=>{n.save(),n.translate(u,s),r(),n.restore()},shade:(r,u)=>{r=r.substring(1);const s=parseInt(r,16),g=Math.round(2.55*u),f=(s>>16)+g,o=(s>>8&255)+g,M=(s&255)+g;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(o<255?o<1?0:o:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(r,u)=>{var s;document.body.style.background=r,document.body.style.backgroundColor=u||r,(s=document.querySelector('meta[name="theme-color"]'))==null||s.setAttribute("content",u||r)},createImg:(r,u,s=u)=>{const g=document.createElement("canvas"),f=g.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return g.width=u*devicePixelRatio,g.height=s*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),r(f),g}}},Se=t=>{let n="",l="",h;const i=a=>t.find(c=>c.name===a)||t[0],e={render:()=>{},navigate:(a,c)=>{const r=i(a);l=n||"",n=(r==null?void 0:r.name)||"",h=c,e.render=(r==null?void 0:r.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:l,data:h})};return e},Ee=()=>{const t=requestAnimationFrame||(e=>setTimeout(e,16.666666666666668)),n=[],l={};return{loop:(e,a)=>{if(Object.entries(l).find(([r,u])=>u===e)||a&&l[a])throw new Error(`Loop${a?" "+a:""} already specified`);a&&n.push(a),a=a||new Date().valueOf().toString(),l[a]=e;const c=()=>{e(),l[a]&&t(c)};c()},stop:e=>{if(typeof e=="string")delete l[e];else{const a=Object.entries(l).find(([c,r])=>r===e);a&&delete l[a[0]]}},stopAll:()=>{for(const e in l)n.indexOf(e)===-1&&delete l[e]}}};let q=[];const Ce=()=>{for(const t of q)clearTimeout(t);q=[]},xe=(t,n=400)=>{let l=new Date,h=n,i=setTimeout(t,h);return q.push(i),{pause:()=>{clearTimeout(i),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(i),i=setTimeout(t,h),q.push(i)},stop:()=>{clearTimeout(i)}}},se=2147483646,J=2147483647,Ie=16807,be=(t=Math.floor(Math.random()*J))=>{t=t%J,t<=0&&(t+=se);const n=()=>(t=t*Ie%J,t),l=()=>(n()-1)/se;return(i,d)=>(d===void 0&&(d=i,i=0),Math.floor(l()*(d-i+1))+i)},Re=(t,n)=>(n===void 0&&(n=t,t=0),Math.floor(Math.random()*(n-t+1))+t),Te=()=>{const t=[],n=[],l=[];return{addEventResize:u=>{u(),t.push(u)},onResizeEvents:()=>t.forEach(u=>u()),addEventClick:u=>n.push(u),onClickEvents:(u,s)=>n.forEach(g=>g(u,s)),addEventMove:u=>l.push(u),onMoveEvents:(u,s)=>l.forEach(g=>g(u,s)),removeAllEvents:()=>{t.splice(0),n.splice(0),l.splice(0)}}},D=(t,n)=>{const l=Math.pow(Math.abs(t.x-n.x),2),h=Math.pow(Math.abs(t.y-n.y),2),i=t.r||0,d=n.r||0,e=Math.pow(i+d,2);return l+h<=e},We=(t,n)=>{const l=t.r||0,h=n.w||0,i=n.h||0;return Math.abs(n.x+h/2-t.x)<=h/2+l&&Math.abs(n.y+i/2-t.y)<=i/2+l},ke=(t,n)=>D(t,n),De=t=>{const n=new AudioContext,l={},h=d=>{fetch(d).then(e=>e.arrayBuffer()).then(e=>(n==null?void 0:n.decodeAudioData(e))||null).then(e=>{e&&(l[d]=e)})};if(t.length)for(const d of t)h(d);return(d,e)=>{setTimeout(async()=>{const a=n.createBufferSource();l[d]||(l[d]=await fetch(d).then(c=>c.arrayBuffer()).then(c=>(n==null?void 0:n.decodeAudioData(c))||null)),a.buffer=l[d],a.connect(n.destination),e&&(a.playbackRate.value=e),a.start()},0)}};let K;const He=(t,n)=>{if(K)throw new Error("Webcore already specified");const l=Pe(),h=Se(t),{loop:i,stop:d,stopAll:e}=Ee(),{addEventResize:a,onResizeEvents:c,addEventClick:r,onClickEvents:u,addEventMove:s,onMoveEvents:g,removeAllEvents:f}=Te();let o=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,y=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight;const w=()=>({cx:o,cy:M,s:p,m:y,isL:m}),v=De(n);K={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:w,useScreenMeta:h.useScreenMeta,navigate:(P,E)=>{if(!t.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);e(),Ce(),f(),new Promise(()=>h.navigate(P,E))},loop:i,loopStop:d,useTimer:xe,rand:Re,useRandChain:be,intersect:ke,addEventResize:a,addEventClick:r,addEventMove:s,playSound:v},i(()=>l.render(h.render),"draw"),window.onresize=()=>{o=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,y=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight,l.resize(),c()},document.onpointerdown=P=>{u(P.clientX,P.clientY)},document.onmousemove=P=>{g(P.clientX,P.clientY)},h.navigate()},C=()=>{if(!K)throw new Error("Webcore not specified");return{...K}},Q={},W=t=>{const{shade:n,ctx:l,createImg:h}=C(),i=()=>{const{r:e,c:a="#ffffff",p:c}=t,r=l.createRadialGradient(e,e,e,e,e,e/5);return r.addColorStop(0,n(a,0)),r.addColorStop(.01,n(a,0)),r.addColorStop(.075,n(a,9)),r.addColorStop(.15,n(a,0)),r.addColorStop(.15,n(a,-15)),r.addColorStop(.18,n(a,-5)),r.addColorStop(.22,n(a,-15)),c?(r.addColorStop(.24,n(a,-10)),r.addColorStop(.3,n(a,-8)),r.addColorStop(.34,n(a,-12)),r.addColorStop(.6,n(a,-8)),r.addColorStop(1,n(a,-6))):(r.addColorStop(.24,n(a,-12)),r.addColorStop(.26,n(a,-8)),r.addColorStop(.3,n(a,-2)),r.addColorStop(.34,n(a,0)),r.addColorStop(.5,n(a,5)),r.addColorStop(1,n(a,18))),r},d=()=>{const{r:e,c:a="#ffffff",p:c}=t,r=`${a}_${c?"push":"pop"}_${e}`;if(Q[r])return Q[r];const u=h((s=l)=>{const g=i();s.fillStyle=g,s.beginPath(),s.arc(e,e,e,0,2*Math.PI),s.closePath(),s.fill()},2*e);return Q[r]=u,u};return(e=l)=>{const{x:a,y:c,r}=t,u=d();e.drawImage(u,a-r,c-r,2*r,2*r)}},Z={},G=t=>{const{ctx:n}=C();let l;return Z[t.src]?l=Z[t.src]:(l=new Image,l.src=t.src,Z[t.src]=l),(h=n)=>{const{w:i,h:d=i,x:e=0,y:a=0}=t;l.complete&&h.drawImage(l,e,a,i,d)}},ie=t=>{const{font:n,ctx:l}=C(),h=t.text,i=t.text.length,d=2*Math.PI/i/4;return(e=l)=>{const{x:a,y:c,r,s:u=0,fs:s}=t,g=s||Math.round(r/4);e.textAlign="center",e.fillStyle="#f9f9f9",e.font=`${g}px ${n}`,e.save(),e.translate(a,c),e.rotate(u);for(let f=0;f<i;f++)e.save(),e.rotate(f*d),e.fillText(h[f],0,-r),e.restore();e.restore()}},Ae=()=>{var m,w;const{ctx:t,loop:n,rotate:l,navigate:h,useMeasure:i,addEventClick:d,addEventResize:e,setBackground:a}=C();a("#040404");let c=!1,r,u,s,g,f,o=-.2,M=0;e(()=>{const{cx:v,cy:P,s:E}=i(),S=Math.round(E*.25);r={c:"#ff6347",x:v,y:P,r:S,p:!1},u=W(r),s=G({x:v-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),g=ie({text:"nezabotin",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),f=ie({text:"production",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{o+=.01,M=o>=1?1:o,o>=1.8&&(r.p=!0),o>=2.2&&(r.c="#f86a9a"),o>=2.6&&h("main")};d(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(o<v)return o=v,!0})});const y=()=>{n(p),c=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(w=document==null?void 0:document.fonts)==null||w.ready.then(y):y(),()=>{const{cx:v,cy:P}=i();t.globalAlpha=c?1:0,u(),o<1.8&&s(),o<1.4&&l(()=>{g(),f()},v,P,M),t.globalAlpha=1}},ce="ylp",ae="score",ee="difficulty",de="sound",te=[.14,.11,.09,.075],le=750,ze=350,ue=5,_=[];for(let t=0;t*ue<=le-ze;t++)_.push(le-t*ue);let N=null;const H=()=>{const t=o=>localStorage.getItem(`${ce}_${o}`),n=(o,M)=>localStorage.setItem(`${ce}_${o}`,M.toString()),l=()=>+(t(ae)||0),h=o=>n(ae,o),i=o=>{const M=l();h(M+o)},d=()=>+(t(ee)||0),e=o=>{const M=d();n(ee,Math.min(Math.max(M+o,0),te.length*_.length-1))};return{getScore:l,addScore:i,plusDifficulty:()=>e(1),minusDifficulty:()=>e(-5),getDifficultyRad:()=>{const o=d(),M=Math.floor(o/_.length);return te[M]||te[1]},getDifficultyTic:()=>{const o=d(),M=Math.floor(o/_.length),p=o-M*_.length;return _[p]||_[0]},resetDifficulty:()=>n(ee,0),getSound:()=>{if(N!==null)return N;const o=t(de);return!o||o==="true"?(N=!0,!0):(N=!1,!1)},setSound:o=>{N=o,n(de,o)}}},pe=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav"];let k=[...pe];const X=()=>{const{rand:t,playSound:n}=C(),{getSound:l}=H();return{playPop:()=>{if(!l())return;const a=t(k.length-1),c=k[a];k.splice(a,1),k.length||(k=[...pe]);const r=t(k.length-1);k=[...k.splice(r,k.length),...k],n(c)},playMissed:()=>{if(!l())return;n("/sounds/new/wrong.mp3")},playFail:()=>{if(!l())return;n("/sounds/fail-fast.mp3")},playWin:()=>{if(!l())return;n("/sounds/win.mp3")}}},B=100/2;let fe=0;const O=()=>{const{loop:t,ctx:n,shade:l,rand:h}=C(),{playPop:i,playMissed:d}=X(),e={},a=()=>{for(const u in e){const s=e[u];if(!s)return;const g=s.popit;if(!s.shake)s.tic+=B/5,s.tic>=B&&(s.dir=-1),s.withoutRad||(g.r=s.origR+s.origR*75e-5*(s.tic+(s.dir>0?0:B-s.tic)));else{s.tic+=B/5;const f=h(1,2),o=h(1,2);g.x=s.origX+Math.random()*f*(Math.random()>.5?1:-1),g.y=s.origY+Math.random()*o*(Math.random()>.5?1:-1)}s.tic>=2*B&&(delete e[u],g.r=s.origR,g.x=s.origX,g.y=s.origY)}},c=(u,s=!1,g=!1)=>{var p;s?d():i(),(p=navigator==null?void 0:navigator.vibrate)==null||p.call(navigator,30),fe++;const f=`${new Date().valueOf().toString()}_${fe}`,o=1,M=1;e[f]={withoutRad:s,tic:o,dir:M,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:g}},r=()=>{n.globalAlpha=.25;for(const u in e){const s=e[u];if(s.shake)continue;const g=s.popit;n.fillStyle=l(g.c||"red",-12),n.beginPath(),n.arc(g.x,g.y,g.r+s.origR*.001*(s.tic+(s.dir>0?0:B-s.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return t(a),{popEffect:c,render:r}},Y=t=>{const{font:n,ctx:l}=C();return(h=l)=>{const{text:i,x:d,c:e,y:a,fs:c,a:r="center",mw:u,f:s}=t;h.textAlign=r,h.fillStyle=e,h.font=`${c}px ${s||n}`,h.fillText(i,d,a,u)}},Le=({color:t="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:i,useScreenMeta:d,navigate:e,addEventClick:a,intersect:c}=C(),{from:r}=d();let u,s,g;return l(()=>{const{cx:M,cy:p,s:y,m}=h(),w=Math.round(y*.25);u={c:t,r:Math.round(y*.08),x:M-w-1*m,y:p-w+1*m,p:(r==="score"||r==="opening"||r==="devs")&&!u},s=W(u),g=G({x:Number(u.x)-u.r+Math.round(u.r*.5),y:Number(u.y)-u.r+Math.round(u.r*.5),w:u.r*2-Math.round(u.r*1),src:"/media/star.svg"})}),i(()=>{u.p&&n(u,!1,!0),u.p=!1}),a((M,p)=>{c({x:M,y:p},u)&&(n(u),u.p=!0,i(()=>{e("score")},100))}),{render:()=>{s(),u.p||g()},point:()=>({x:u.x,y:u.y,r:u.r})}},ge=({color:t="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:i,navigate:d,addEventClick:e,intersect:a}=C();let c,r,u;return l(()=>{const{s:f}=h(),o=Math.round(f*.08);c={c:t,r:o,x:Math.round(1.6*o),y:Math.round(1.6*o),p:!c},r=W(c),u=G({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),i(()=>{c.p&&n(c,!1,!0),c.p=!1}),e((f,o)=>{a({x:f,y:o},c)&&(n(c),c.p=!0,i(()=>{d("main")},100))}),{render:()=>{r(),c.p||u()},point:()=>({x:c.x,y:c.y,r:c.r})}},Fe=({onClick:t})=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:i,intersect:d,rotate:e}=C(),{playPop:a}=X();let c,r,u;return n(()=>{const{s:f}=l(),o=Math.round(f*.08);c={c:"#ff6347",r:o,x:Math.round(innerWidth-1.6*o),y:Math.round(innerHeight-1.6*o),p:!1},r=W(c),u=G({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),i((f,o)=>{d({x:f,y:o},c)&&(a(),c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{r(),c.p||e(()=>{u()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},_e=({onClick:t})=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:i,intersect:d,rotate:e}=C(),{playPop:a}=X();let c,r,u;return n(()=>{const{s:f}=l(),o=Math.round(f*.08),M=innerWidth<innerHeight?Math.round(innerWidth-1.6*o-2*o-.3*o):Math.round(innerWidth-1.6*o),p=innerWidth<innerHeight?Math.round(innerHeight-1.6*o):Math.round(innerHeight-1.6*o-2*o-.3*o);c={c:"#ff6347",r:o,x:M,y:p,p:!1},r=W(c),u=G({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),i((f,o)=>{d({x:f,y:o},c)&&(a(),c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{r(),c.p||e(()=>{u()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Be=t=>{const{ctx:n,shade:l}=C(),h=Math.round(t.r/2.2),i=Math.round(.15*t.r),d=l(t.c||"blue",-3);return(e=n)=>{const{r:a,x:c=a,y:r=a}=t;e.lineCap="round",e.fillStyle=d,e.strokeStyle=d,e.lineWidth=h,e.beginPath(),e.moveTo(c+i,r),e.lineTo(c-i/2,r-i),e.lineTo(c-i/2,r+i),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c+i,r),e.lineTo(c-i/2,r-i),e.moveTo(c-i/2,r-i),e.lineTo(c-i/2,r+i),e.moveTo(c-i/2,r+i),e.lineTo(c+i,r),e.stroke()}},me=({getX:t,getY:n,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:i,useMeasure:d,useTimer:e,useScreenMeta:a,navigate:c,addEventClick:r,intersect:u}=C(),{from:s}=a();let g,f,o;return i(()=>{const{cx:y,cy:m,s:w,m:v}=d();g={c:l,r:Math.round(w*.1),x:t(y,w,v),y:n(m,w,v),p:(s==="gamescore"||s==="game"||s==="gameover"||s==="opening"||s==="devs")&&!g},f=W(g),o=Be(g)}),e(()=>{g.p&&h(g,!1,!0),g.p=!1}),r((y,m)=>{u({x:y,y:m},g)&&(h(g),g.p=!0,e(()=>{c("game")},100))}),{render:()=>{f(),g.p||o()},point:()=>({x:g.x,y:g.y,r:g.r})}},Me=t=>{const{ctx:n,shade:l}=C(),h=Math.round(t.r/4),i=Math.round(.12*t.r);return(d=n)=>{const{r:e,x:a=e,y:c=e}=t,r=l(t.c||"blue",-3);d.lineCap="round",d.strokeStyle=r,d.lineWidth=h,d.beginPath(),d.moveTo(a-1.5*i,c-2*i),d.lineTo(a-1.5*i,c+2*i),d.stroke(),d.beginPath(),d.moveTo(a+1.5*i,c-2*i),d.lineTo(a+1.5*i,c+2*i),d.stroke()}},Oe=({getX:t,getY:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:i,useTimer:d,useScreenMeta:e,navigate:a,addEventClick:c,intersect:r}=C(),{from:u}=e();let s,g,f;return h(()=>{const{cx:p,cy:y,s:m,m:w}=i();s={c:"#fd8059",r:Math.round(m*.08),x:t(p,m,w),y:n(y,m,w),p:(u==="game"||u==="opening")&&!s},g=W(s),f=Me(s)}),d(()=>{s.p&&l(s,!1,!0),s.p=!1},500),c((p,y)=>{r({x:p,y},s)&&(l(s),s.p=!0,d(()=>{a("main")},100))}),{render:()=>{g(),s.p||f()},point:()=>({x:s.x,y:s.y,r:s.r})}},$e=t=>{const{ctx:n,shade:l}=C(),h=Math.round(t.r/4),i=Math.round(.2*t.r),d=l(t.c||"blue",-5);return(e=n)=>{const{r:a,x:c=a,y:r=a}=t;e.lineCap="round",e.fillStyle=d,e.strokeStyle=d,e.lineWidth=h,e.beginPath(),e.ellipse(c-i,r+i,h,i,10*Math.PI/180,0,2*Math.PI),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c-i/2,r+i),e.lineTo(c,r-i),e.lineTo(c+i,r-i),e.stroke(),t.on||(e.lineWidth=Math.round(h/3),e.beginPath(),e.moveTo(c-a/4,r-a/4),e.lineTo(c+a/4,r+a/4),e.stroke())}},Ne=({color:t="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:i,useScreenMeta:d,addEventClick:e,intersect:a}=C(),{from:c}=d(),{getSound:r,setSound:u}=H();let s,g,f;return l(()=>{const{cx:p,cy:y,s:m,m:w}=h(),v=Math.round(m*.25),P=Math.round(m*.065),E=r();s={c:t,r:P,x:p-v-P-w,y:y-v+3*P,p:(c==="opening"||c==="devs")&&!s,on:E},g=W(s),f=$e(s)}),i(()=>{s.p&&n(s,!1,!0),s.p=!1}),e((p,y)=>{if(a({x:p,y},s)){let m=r();m=!m,u(m),s.p=!0,s.on=m,n(s),i(()=>{s.p=!1},100)}}),{render:()=>{g(),s.p||f()},point:()=>({x:s.x,y:s.y,r:s.r})}},Ye=({color:t="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:i,useScreenMeta:d}=C(),{from:e}=d();let a,c,r,u;return l(()=>{const{cx:f,cy:o,s:M}=h(),p=Math.round(M*.25);a={c:t,x:f,y:o,r:p,p:(e==="opening"||e==="devs")&&!a},c=W(a),r=Y({text:"Yola",c:"#f1f1f1",x:f,y:o-p+Math.round(p*.9),fs:Math.round(p/2.6),mw:p*2}),u=Y({text:"PopiT",c:"#ffeb3b",x:f,y:o-p+Math.round(p*1.3),fs:Math.round(p/2.3),mw:p*2})}),i(()=>{a.p&&n(a,!1,!0),a.p=!1}),{render:()=>{c(),a.p||(r(),u())},point:()=>({x:a.x,y:a.y,r:a.r})}},ve=({color:t="#00dcfe",frequency:n=20})=>{const{addEventResize:l,useRandChain:h,useMeasure:i,rand:d,useTimer:e,setBackground:a,useScreenMeta:c}=C(),{from:r}=c();a(t);const u=d(0,999);let s=[],g=[];l(()=>{const p=h(u),{s:y}=i();s=[];const m=Math.round(y*.04),w=Math.round(innerWidth/m/2)-2,v=Math.round((innerWidth-2*m*w)/(w+1)),P=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*P)/(P+1));for(let S=0;S<P;S++)for(let x=0;x<w;x++)p(p(n))<1&&s.push({x:v+m+x*m*2+v*x,y:E+m+S*m*2+E*S,r:m,c:t,p:r==="opening"?!0:p(1)>0});g=s.map(S=>W(S))});const f=()=>{e(()=>{const p=d(s.length-1);s[p]&&(s[p].p=!s[p].p),f()},750)};return r==="opening"?e(()=>{s.forEach(p=>p.p=d(1)>0),f()}):f(),{render:()=>{g.forEach(p=>p())},setIntersections:p=>{s=s.filter(({x:y,y:m,r:w})=>p(y,m,w)),g=s.map(y=>W(y))}}},oe=(t=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:i,rand:d}=C(),{getDifficultyRad:e}=H();return n=[...n.splice(d(n.length-1),n.length),...n],t||l(()=>{const{s:c}=h(),r=e(),u=Math.round(c*r),s=Math.round(innerWidth/u/2)-1,g=(innerWidth-2*u*s)/(s+1),f=Math.round(innerHeight/u/2)-1,o=(innerHeight-2*u*f)/(f+1),M=innerWidth>=innerHeight,p=M?s:f,y=M?g:o,m=M?innerWidth:innerHeight;let w=0;const v=[];for(let E=0;E<p;E++)n[w]||(w=0),v.push(`${n[w]} ${(y+u+E*u*2+y*E)/m*100}%`),w++;i(`linear-gradient(${M?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ye=({palette:t,retry:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:i,rand:d,useTimer:e,useScreenMeta:a,navigate:c,addEventClick:r,intersect:u}=C(),{from:s}=a(),{getDifficultyRad:g}=H(),f=[];let o=[],M,p,y,m={x:0,y:0,r:0};const w=P=>Array.isArray(t)?t[P]:t;return h(()=>{const{s:P}=i();f.splice(0);const E=g(),S=Math.round(P*E),x=Math.round(innerWidth/S/2)-1,A=(innerWidth-2*S*x)/(x+1),z=Math.round(innerHeight/S/2)-1,j=(innerHeight-2*S*z)/(z+1),$=innerWidth>=innerHeight;let I=0;for(let b=0;b<z;b++){for(let T=0;T<x;T++){w(I)||(I=0);const R={x:A+S+T*S*2+A*T,y:j+S+b*S*2+j*b,r:S,c:w(I),p:!0};b===0&&T===x-1?(m={x:R.x,y:R.y,r:R.r,c:R.c,p:(s==="main"||s==="gameover"||s==="gamescore")&&!m.r},M=W(m),p=Me(m)):f.push(R),I+=$?1:0}I=$?0:I+1}n&&(y=f[d(f.length-1)],e(()=>{l(y,!1,!0),y.p=!1})),o=f.map(b=>W(b))}),e(()=>{m.p&&l(m,!1,!0),m.p=!1}),n&&r((P,E)=>{u({x:P,y:E},y)&&(l(y),y.p=!0,e(()=>{c("game")},100))}),r((P,E)=>{u({x:P,y:E},m)&&(l(m),m.p=!0,e(()=>{c("main")},100))}),{render:()=>{o.forEach(P=>P()),M(),m!=null&&m.p||p()},popits:f,pausePpt:m}},F=100,V="#222",Ge=t=>{const n=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},ne={},Xe=t=>{const{ctx:n,createImg:l,useRandChain:h,useTimer:i}=C();let d,e=!1,a=[];const c=t.r*2/F/2;ne[t.imgSrc]?d=ne[t.imgSrc]:(d=ne[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},d.img.src=t.imgSrc);const r=()=>i(()=>{e=!e,r()},250),u=(M,p=n)=>{const{x:y,y:m,c:w,r:v}=M;p.fillStyle=w||"red",p.beginPath(),p.arc(y+v,m+v,v,0,Math.PI*2),p.closePath(),p.fill()},s=(M=n,p=0,y=0)=>{M.fillStyle=V,M.beginPath(),M.roundRect(p,y,2*t.r,2*t.r,c),M.closePath(),M.fill()},g=()=>{const M=[];for(let v=0;v<F;v++)for(let P=0;P<F;P++){const E={x:P*c*2,y:v*c*2,r:c,c:V};M.push(E)}let p=t.score-t.winScore;const y=[...M],m=h(t.seed),w=(v=!1)=>{const P=m(y.length-1),E=y[P],S=M.indexOf(E);E.c=v?V:d.cols[S],y.splice(P,1),v&&a.push({...E,c:d.cols[S]})};for(let v=p;v>0;v--)w();if(t.winScore){a=[];for(let v=t.winScore;v>0;v--)w(!0);r()}return M},f=()=>{const M=g();d.drawImg=l((p=n)=>{s(p),M.filter(y=>y.c!==V).forEach(y=>u(y,p))},2*t.r)},o=async()=>{var y;const M=document.createElement("canvas");M.width=F,M.height=F;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(d.img,0,0);for(let m=0;m<F;m++){const w=[];for(let v=0;v<F;v++){const P=(y=p==null?void 0:p.getImageData(v,m,1,1))==null?void 0:y.data;w.push(Ge(P))}d.cols.push(...w)}d.isFilled=!0,f()};return d.isFilled?(d.r!==t.r||d.score!==t.score)&&f():d.img.onload=o,(M=n)=>{const{x:p,y,r:m,winScore:w}=t;if(d.drawImg?M.drawImage(d.drawImg,p-m,y-m,2*m,2*m):s(M,p-m,y-m),e&&w&&d.drawImg)for(const v of a)M.fillStyle=v.c||"red",M.beginPath(),M.arc(p-m+v.x+v.r,y-m+v.y+v.r,v.r,0,Math.PI*2),M.closePath(),M.fill()}},he=1e4,we=(t=0,n=!1)=>{const{addEventResize:l,useMeasure:h,translate:i}=C(),{getScore:d}=H(),e=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],a=d();let c,r=0,u=0,s=!1,g=!1;const f=w=>Math.min(Math.floor(w/he),e.length-1);let o=f(a-t);if(t){const w=f(a);s=w!==o,g=w>e.length-1}return l(()=>{const{cx:w,cy:v,s:P,isL:E}=h();c=[],r=(P-2*P*.055*1.6)/2,u=P*.05;let S=n?o:0;for(S;S<(n?o+1:e.length);S++){const x=e[S],A=E?w:w+S*r*2+S*u,z=E?v+S*r*2+S*u:v;c.push(Xe({x:A,y:z,r,score:Math.min(a-S*he,1e4),imgSrc:x,winScore:s?0:t,seed:S}))}}),{up:()=>{o=o+1<e.length?o+1:e.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{const{isL:w}=h(),v=w?0:-(o*r*2+o*u),P=w?-(o*r*2+o*u):0;i(()=>{c==null||c.forEach(E=>E())},v,P)},rect:()=>{const{cx:w,cy:v}=h(),P=innerWidth>innerHeight;return{x:P?w-r:0,y:P?0:v-r,w:P?2*r:innerWidth,h:P?innerHeight:2*r}},isJump:s,isCompleted:g}},je=({popits:t,pausePpt:n,popEffect:l=()=>{},splashEffect:h=()=>{}})=>{const{useTimer:i,rand:d,addEventClick:e,addEventMove:a,intersect:c,navigate:r,addEventResize:u}=C(),{getScore:s,addScore:g,getDifficultyTic:f}=H();let o=[],M,p,y=!1,m=0,w=0,v=0;const P=s(),E=f(),S=I=>{const b=t.filter(L=>o.indexOf(L)===-1&&L!==I),T=d(b.length-1),R=b[T];R&&(l(R,!1,!0),R.p=!1,o.push(b[T]))},x=()=>{p=i(()=>{if(v=Math.max(v-10,50),t.length===o.length){y=!0,p.stop(),i(()=>{r("gameover")});return}S(),x()},v)},A=I=>{o=[];const b=t.length;let T=d(Math.round(b*.3),Math.round(b*.6));const R=[...t];if(I){const L=R.indexOf(I);R.splice(L,1)}for(let L=T;L>0;L--){const re=d(R.length-1),U=R[re];U.p=!1,l(U,!1,!0),o.push(U),R.splice(re,1)}v=E,M==null||M.stop(),p==null||p.stop(),P&&(M=i(()=>{h("SLOWLY"),x()},o.length*E)),m=m>0?m:d(3,5)},z=()=>1,j=I=>{l(I),v=Math.min(v+5,E),w++,I.p=!0;const b=o.indexOf(I);if(o.splice(b,1),o.length<=0)if(m--,m>0)i(()=>{h("Round"),A(I)},100);else{M==null||M.stop(),p==null||p.stop();const T=z();g(w*T),i(()=>{r("gamescore",{winScore:w*T})},100)}},$=(I,b,T=!1)=>{if(!y){for(const R of o)if(c({x:I,y:b},R)){j(R);return}if(!c({x:I,y:b},n)&&!T){for(const R of t)if(c({x:I,y:b},R)){l(R,!0),h("Popenalty"),S(R);return}h("Popenalty"),S()}}};e($),a((I,b)=>$(I,b,!0)),u(()=>{i(()=>{h("Pop it"),A()})})},Ve=t=>{const{addEventResize:n,createImg:l,useMeasure:h,ctx:i,loop:d}=C();let e,a,c,r,u,s,g,f=!1,o=-2;const M=.1;return n(()=>{const{s:p}=h();a=Math.round(p*(t.length===7?.18:.15)),u=p,s=Math.round(a*1.5),c=0,r=Math.round((innerHeight-innerHeight/2-p/2)/2-a/2),g=r,f=r-a/2>-(a/2);const y={fs:a,text:t,x:Math.round(p/2),y:a,c:"#f9f9f9",mw:Math.round(p*.8)},m=Y(y);e=l((w=i)=>{m(w)},u,s)}),d(()=>{const{m:p}=h();r+=o,o+=M,r<=p&&(r=p),r>=g&&(r=g,o=-2)}),()=>{f&&i.drawImage(e,c,r,u,s)}},qe=()=>{const{addEventResize:t,rand:n,useScreenMeta:l}=C(),{from:h}=l(),{popEffect:i,render:d}=O(),e=["#00dcfe","#5bb2f7","#92E6E6"],a=h==="opening"?e[0]:e[n(e.length-1)],{render:c,setIntersections:r}=ve({color:a}),{render:u,point:s}=Ye({popEffect:i}),{render:g,point:f}=me({getX:(m,w,v)=>m+Math.round(w*.25)+2*v,getY:(m,w,v)=>m+Math.round(w*.25)+0*v,popEffect:i}),{render:o,point:M}=Le({popEffect:i}),{render:p,point:y}=Ne({popEffect:i});return t(()=>{const m=M(),w=s(),v=f(),P=y();r((E,S,x)=>!D({x:E,y:S,r:x},m)&&!D({x:E,y:S,r:x},w)&&!D({x:E,y:S,r:x},v)&&!D({x:E,y:S,r:x},P))}),()=>{d(),c(),u(),g(),o(),p()}},Ke=()=>{const{useMeasure:t,addEventResize:n}=C(),l=oe(),{popEffect:h,render:i}=O(),{popits:d,render:e,pausePpt:a}=ye({palette:l,popEffect:h});return je({popits:d,popEffect:h,pausePpt:a}),n(()=>{(d[0].y-d[0].r)/t().m}),()=>{i(),e()}},Ue=()=>{const t="#ff6347",{popEffect:n,render:l}=O(),{setBackground:h}=C(),{minusDifficulty:i}=H(),{render:d}=ye({palette:t,retry:!0,popEffect:n}),{playFail:e}=X();return h(t),i(),e(),()=>{l(),d()}},Je=()=>{const{useScreenMeta:t}=C(),{plusDifficulty:n,resetDifficulty:l}=H(),{data:h}=t(),{popEffect:i,render:d}=O();oe();const{playWin:e}=X(),{render:a,isJump:c}=we(h==null?void 0:h.winScore,!0),{render:r}=me({getX:(g,f,o)=>innerWidth>innerHeight?Math.min(g+(f-2*f*.055*1.6)/2+4*o+Math.round(f*.1),innerWidth-2*o-Math.round(f*.1)):g+(f-2*f*.055*1.6)/8+0*Math.round(f*.1)+2*o,getY:(g,f,o)=>innerWidth>innerHeight?g+(f-2*f*.055*1.6)/2-1*o-Math.round(f*.1):Math.min(g+(f-2*f*.055*1.6)/2+4*o+Math.round(f*.1),innerHeight-2*o-Math.round(f*.1)),popEffect:i}),{render:u}=Oe({getX:(g,f,o)=>innerWidth>innerHeight?Math.max(g-(f-2*f*.055*1.6)/2-4*o-Math.round(f*.1),2*o+Math.round(f*.1)):g+(f-2*f*.055*1.6)/8-2*Math.round(f*.1)-2*o,getY:(g,f,o)=>innerWidth>innerHeight?g-(f-2*f*.055*1.6)/2+0*o+Math.round(f*.1):Math.min(g+(f-2*f*.055*1.6)/2+4*o+Math.round(f*.1),innerHeight-2*o-Math.round(f*.1)),popEffect:i}),s=Ve(c?"Completed":"You win");return c?l():n(),e(),()=>{d(),a(),r(),u(),s()}},Qe=()=>{const{addEventResize:t,rand:n}=C(),{popEffect:l,render:h}=O(),i=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],d=i[n(i.length-1)],{render:e,setIntersections:a}=ve({color:d,frequency:10}),{render:c,rect:r,up:u,down:s}=we(),{render:g,point:f}=ge({popEffect:l}),{render:o,point:M}=Fe({onClick:u,popEffect:l}),{render:p,point:y}=_e({onClick:s,popEffect:l});return t(()=>{const m=f(),w=r(),v=M(),P=y();a((E,S,x)=>!D({x:E,y:S,r:x},m)&&!We({x:E,y:S,r:x},w)&&!D({x:E,y:S,r:x},v)&&!D({x:E,y:S,r:x},P))}),()=>{h(),e(),c(),g(),o(),p()}},Ze=()=>{const{addEventResize:t,setBackground:n,createImg:l,useMeasure:h,ctx:i,loop:d,navigate:e}=C(),{popEffect:a,render:c}=O(),{render:r}=ge({popEffect:a}),u=oe(!0);let s=[];const g=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let f=innerHeight;return t(()=>{const{m:o,s:M}=h();s=[];const p=Math.round(o*3.5),y=Math.round(M*.75),m=Math.round((innerWidth-y)/2);let w=0;for(const v of g){u[w]||(w=0);const P=Y({text:v,x:0,y:p,c:u[w],fs:Math.round(p*.6),mw:y,a:"left"}),E=Y({text:"Maksim Nezabotin",x:y,y:p*1.5,c:"#f9f9f9",fs:Math.round(p*.7),mw:y,a:"right"}),S=l((x=i)=>{P(x),E(x)},y,2*p);s.push({img:S,x:m,y:f,w:y,h:5*p}),f+=5*p,w++}}),n("#040404"),d(()=>{for(const M of s)M.y-=2;const o=s[s.length-1];o.y+o.h<0&&e("main")}),()=>{s.forEach(({img:o,x:M,y:p,w:y,h:m})=>{i.drawImage(o,M,p,y,m)}),c(),r()}},et=[{name:"opening",ctor:Ae},{name:"main",ctor:qe},{name:"game",ctor:Ke},{name:"gameover",ctor:Ue},{name:"gamescore",ctor:Je},{name:"score",ctor:Qe},{name:"devs",ctor:Ze}],tt=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3"];He(et,tt);document.title="Yo last Pop it";
