(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&h(n)}).observe(document,{childList:!0,subtree:!0});function c(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(s){if(s.ep)return;s.ep=!0;const r=c(s);fetch(s.href,r)}})();const ve=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const c=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=i=>{t.clearRect(0,0,innerWidth,innerHeight),i()};return c(),document.body.appendChild(e),{ctx:t,render:h,resize:c,rotate:(i,o,a,f)=>{t.save(),t.translate(o,a),t.rotate(Math.PI*f),t.translate(-o,-a),i(),t.restore()},translate:(i,o,a)=>{t.save(),t.translate(o,a),i(),t.restore()},shade:(i,o)=>{i=i.substring(1);const a=parseInt(i,16),f=Math.round(2.55*o),p=(a>>16)+f,d=(a>>8&255)+f,g=(a&255)+f;return"#"+(16777216+(p<255?p<1?0:p:255)*65536+(d<255?d<1?0:d:255)*256+(g<255?g<1?0:g:255)).toString(16).slice(1)},setBackground:(i,o)=>{var a;document.body.style.background=i,document.body.style.backgroundColor=o||i,(a=document.querySelector('meta[name="theme-color"]'))==null||a.setAttribute("content",o||i)},createImg:(i,o,a=o)=>{const f=document.createElement("canvas"),p=f.getContext("2d");if(!p)throw new Error("CanvasRenderingContext2D is null");return f.width=o*devicePixelRatio,f.height=a*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio),i(p),f}}},Pe=e=>{let t="",c="",h;const s=u=>e.find(l=>l.name===u)||e[0],n={render:()=>{},navigate:(u,l)=>{const i=s(u);c=t||"",t=(i==null?void 0:i.name)||"",h=l,n.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:c,data:h})};return n},Ee=()=>{const e=requestAnimationFrame||(n=>setTimeout(n,16.666666666666668)),t=[],c={};return{loop:(n,u)=>{if(Object.entries(c).find(([i,o])=>o===n)||u&&c[u])throw new Error(`Loop${u?" "+u:""} already specified`);u&&t.push(u),u=u||new Date().valueOf().toString(),c[u]=n;const l=()=>{n(),c[u]&&e(l)};l()},stop:n=>{if(typeof n=="string")delete c[n];else{const u=Object.entries(c).find(([l,i])=>i===n);u&&delete c[u[0]]}},stopAll:()=>{for(const n in c)t.indexOf(n)===-1&&delete c[n]}}};let X=[];const Se=()=>{for(const e of X)clearTimeout(e);X=[]},xe=(e,t=400)=>{let c=new Date,h=t,s=setTimeout(e,h);return X.push(s),{pause:()=>{clearTimeout(s),h-=new Date-c},resume:()=>{c=new Date,clearTimeout(s),s=setTimeout(e,h),X.push(s)},stop:()=>{clearTimeout(s)}}},oe=2147483646,V=2147483647,we=16807,Ce=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=oe);const t=()=>(e=e*we%V,e),c=()=>(t()-1)/oe;return(s,r)=>(r===void 0&&(r=s,s=0),Math.floor(c()*(r-s+1))+s)},Re=(e,t)=>(t===void 0&&(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e),be=()=>{const e=[],t=[],c=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>t.push(o),onClickEvents:(o,a)=>t.forEach(f=>f(o,a)),addEventMove:o=>c.push(o),onMoveEvents:(o,a)=>c.forEach(f=>f(o,a)),removeAllEvents:()=>{e.splice(0),t.splice(0),c.splice(0)}}},L=(e,t)=>{const c=Math.pow(Math.abs(e.x-t.x),2),h=Math.pow(Math.abs(e.y-t.y),2),s=e.r||0,r=t.r||0,n=Math.pow(s+r,2);return c+h<=n},Ie=(e,t)=>{const c=e.r||0,h=t.w||0,s=t.h||0;return Math.abs(t.x+h/2-e.x)<=h/2+c&&Math.abs(t.y+s/2-e.y)<=s/2+c},Te=(e,t)=>L(e,t),We=e=>{const t=new AudioContext,c={},h=r=>{fetch(r).then(n=>n.arrayBuffer()).then(n=>(t==null?void 0:t.decodeAudioData(n))||null).then(n=>{n&&(c[r]=n)})};if(e.length)for(const r of e)h(r);return async r=>{const n=t.createBufferSource();c[r]||(c[r]=await fetch(r).then(u=>u.arrayBuffer()).then(u=>(t==null?void 0:t.decodeAudioData(u))||null)),n.buffer=c[r],n.connect(t.destination),n.start()}};let j;const He=(e,t)=>{if(j)throw new Error("Webcore already specified");const c=ve(),h=Pe(e),{loop:s,stop:r,stopAll:n}=Ee(),{addEventResize:u,onResizeEvents:l,addEventClick:i,onClickEvents:o,addEventMove:a,onMoveEvents:f,removeAllEvents:p}=be();let d=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight;const y=()=>({cx:d,cy:g,s:m,m:v,isL:M}),P=We(t);j={font:"Tijuf",ctx:c.ctx,shade:c.shade,rotate:c.rotate,translate:c.translate,setBackground:c.setBackground,createImg:c.createImg,useMeasure:y,useScreenMeta:h.useScreenMeta,navigate:(E,x)=>{if(!e.some(S=>S.name===E))throw new Error(`Screen ${E} not specified`);n(),Se(),p(),new Promise(()=>h.navigate(E,x))},loop:s,loopStop:r,useTimer:xe,rand:Re,useRandChain:Ce,intersect:Te,addEventResize:u,addEventClick:i,addEventMove:a,playSound:P},s(()=>c.render(h.render),"draw"),window.onresize=()=>{d=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight,c.resize(),l()},document.onpointerdown=E=>{o(E.clientX,E.clientY)},document.onmousemove=E=>{f(E.clientX,E.clientY)},h.navigate()},w=()=>{if(!j)throw new Error("Webcore not specified");return{...j}},U={},W=e=>{const{shade:t,ctx:c,createImg:h}=w(),s=()=>{const{r:n,c:u="#ffffff",p:l}=e,i=c.createRadialGradient(n,n,n,n,n,n/5);return i.addColorStop(0,t(u,0)),i.addColorStop(.01,t(u,0)),i.addColorStop(.075,t(u,9)),i.addColorStop(.15,t(u,0)),i.addColorStop(.15,t(u,-15)),i.addColorStop(.18,t(u,-5)),i.addColorStop(.22,t(u,-15)),l?(i.addColorStop(.24,t(u,-10)),i.addColorStop(.3,t(u,-8)),i.addColorStop(.34,t(u,-12)),i.addColorStop(.6,t(u,-6)),i.addColorStop(1,t(u,-4))):(i.addColorStop(.24,t(u,-12)),i.addColorStop(.26,t(u,-8)),i.addColorStop(.3,t(u,-2)),i.addColorStop(.34,t(u,0)),i.addColorStop(.5,t(u,5)),i.addColorStop(1,t(u,12))),i},r=()=>{const{r:n,c:u="#ffffff",p:l}=e,i=`${u}_${l?"push":"pop"}_${n}`;if(U[i])return U[i];const o=h((a=c)=>{const f=s();a.fillStyle=f,a.beginPath(),a.arc(n,n,n,0,2*Math.PI),a.closePath(),a.fill()},2*n);return U[i]=o,o};return(n=c)=>{const{x:u,y:l,r:i}=e,o=r();n.drawImage(o,u-i,l-i,2*i,2*i)}},K={},N=e=>{const{ctx:t}=w();let c;return K[e.src]?c=K[e.src]:(c=new Image,c.src=e.src,K[e.src]=c),(h=t)=>{const{w:s,h:r=s,x:n=0,y:u=0}=e;c.complete&&h.drawImage(c,n,u,s,r)}},re=e=>{const{font:t,ctx:c}=w(),h=e.text,s=e.text.length,r=2*Math.PI/s/4;return(n=c)=>{const{x:u,y:l,r:i,s:o=0,fs:a}=e,f=a||Math.round(i/4);n.textAlign="center",n.fillStyle="#f9f9f9",n.font=`${f}px ${t}`,n.save(),n.translate(u,l),n.rotate(o);for(let p=0;p<s;p++)n.save(),n.rotate(p*r),n.fillText(h[p],0,-i),n.restore();n.restore()}},De=()=>{var M,y;const{ctx:e,loop:t,rotate:c,navigate:h,useMeasure:s,addEventClick:r,addEventResize:n,setBackground:u}=w();u("#040404");let l=!1,i,o,a,f,p,d=-.2,g=0;n(()=>{const{cx:P,cy:E,s:x}=s(),S=Math.round(x*.25);i={c:"#ff6347",x:P,y:E,r:S,p:!1},o=W(i),a=N({x:P-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),f=re({text:"nezabotin",x:P,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),p=re({text:"production",x:P,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{d+=.01,g=d>=1?1:d,d>=1.8&&(i.p=!0),d>=2.2&&(i.c="#f86a9a"),d>=2.6&&h("main")};r(()=>{[1.4,1.8,2.2,2.6].some(P=>{if(d<P)return d=P,!0})});const v=()=>{t(m),l=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:P,cy:E}=s();e.globalAlpha=l?1:0,o(),d<1.8&&a(),d<1.4&&c(()=>{f(),p()},P,E,g),e.globalAlpha=1}},ue=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];let D=[...ue];const te=()=>{const{rand:e,playSound:t}=w(),c=()=>{const s=e(D.length-1),r=D[s];D.splice(s,1),D.length||(D=[...ue]);const n=e(D.length-1);D=[...D.splice(n,D.length),...D],t(r)};return{playPop:c,playPush:()=>{c()}}},F=100/2;let se=0;const O=()=>{const{loop:e,ctx:t,shade:c,rand:h}=w(),{playPop:s,playPush:r}=te(),n={},u=()=>{for(const o in n){const a=n[o];if(!a)return;const f=a.popit;if(!a.shake)a.tic+=F/5,a.tic>=F&&(a.dir=-1),a.withoutRad||(f.r=a.origR+a.origR*75e-5*(a.tic+(a.dir>0?0:F-a.tic)));else{a.tic+=F/5;const p=h(1,2),d=h(1,2);f.x=a.origX+Math.random()*p*(Math.random()>.5?1:-1),f.y=a.origY+Math.random()*d*(Math.random()>.5?1:-1)}a.tic>=2*F&&(delete n[o],f.r=a.origR,f.x=a.origX,f.y=a.origY)}},l=(o,a=!1,f=!1)=>{!f&&!a?s():f&&r(),se++;const p=`${new Date().valueOf().toString()}_${se}`,d=1,g=1;n[p]={withoutRad:a,tic:d,dir:g,popit:o,origR:o.r,origX:o.x,origY:o.y,shake:f}},i=()=>{t.globalAlpha=.25;for(const o in n){const a=n[o];if(a.shake)continue;const f=a.popit;t.fillStyle=c(f.c||"red",-12),t.beginPath(),t.arc(f.x,f.y,f.r+a.origR*.001*(a.tic+(a.dir>0?0:F-a.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return e(u),{popEffect:l,render:i}},ee=e=>{const{font:t,ctx:c}=w();return(h=c)=>{const{text:s,x:r,c:n,y:u,fs:l,a:i="center",mw:o}=e;h.textAlign=i,h.fillStyle=n,h.font=`${l}px ${t}`,h.fillText(s,r,u,o)}},Y=100,fe=e=>{const{loop:t,ctx:c,useMeasure:h,rand:s}=w();let r=null;const n=()=>{if(!r)return;const{m:i}=h();if(r.tic<=Y)r.props.fs=((e==null?void 0:e.mfs)||6)/Y*r.tic*i;else{const o=s(1,1),a=s(1,1);r.props.x=r.origX+Math.random()*o*(Math.random()>.5?1:-1),r.props.y=r.origY+Math.random()*a*(Math.random()>.5?1:-1),r.shake=!0}r.tic+=r.tic>Y?1:10,r.tic>Y*2&&!(e!=null&&e.infinity)&&(r=null)},u=i=>{const{cx:o,m:a}=h(),f=0,p={x:o,y:Math.round(a*((e==null?void 0:e.dy)||16)),text:i,c:(e==null?void 0:e.color)||"#ffffff",fs:0},d=ee(p);r={props:p,shape:d,tic:f,origX:p.x,origY:p.y}},l=()=>{r&&(c.globalAlpha=.01*r.tic,r.shape(),c.globalAlpha=1)};return t(n),{splashEffect:u,render:l}},ke=({color:e="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:r,navigate:n,addEventClick:u,intersect:l}=w(),{from:i}=r();let o,a,f;return c(()=>{const{cx:g,cy:m,s:v,m:M}=h(),y=Math.round(v*.25);o={c:e,r:Math.round(v*.08),x:g-y-1*M,y:m-y+1*M,p:(i==="score"||i==="opening")&&!o},a=W(o),f=N({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),s(()=>{o.p&&t(o,!1,!0),o.p=!1}),u((g,m)=>{l({x:g,y:m},o)&&(t(o),o.p=!0,s(()=>{n("score")},100))}),{render:()=>{a(),o.p||f()},point:()=>({x:o.x,y:o.y,r:o.r})}},Ae=({color:e="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:r,navigate:n,addEventClick:u,intersect:l}=w(),{from:i}=r();let o,a,f;return c(()=>{const{s:g}=h(),m=Math.round(g*.08);o={c:e,r:m,x:Math.round(1.6*m),y:Math.round(1.6*m),p:i==="main"&&!o},a=W(o),f=N({x:Number(o.x)-m+Math.round(m*.4),y:Number(o.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),s(()=>{o.p&&t(o,!1,!0),o.p=!1}),u((g,m)=>{l({x:g,y:m},o)&&(t(o),o.p=!0,s(()=>{n("main")},100))}),{render:()=>{a(),o.p||f()},point:()=>({x:o.x,y:o.y,r:o.r})}},ze=({onClick:e})=>{const{addEventResize:t,useMeasure:c,useTimer:h,addEventClick:s,intersect:r,rotate:n}=w(),{playPop:u}=te();let l,i,o;return t(()=>{const{s:p}=c(),d=Math.round(p*.08);l={c:"#ff6347",r:d,x:Math.round(innerWidth-1.6*d),y:Math.round(innerHeight-1.6*d),p:!1},i=W(l),o=N({x:Number(l.x)-d+Math.round(d*.4),y:Number(l.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),s((p,d)=>{r({x:p,y:d},l)&&(u(),l.p=!0,e(),h(()=>{l.p=!1},100))}),{render:()=>{i(),l.p||n(()=>{o()},l.x,l.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:l.x,y:l.y,r:l.r})}},Le=({onClick:e})=>{const{addEventResize:t,useMeasure:c,useTimer:h,addEventClick:s,intersect:r,rotate:n}=w(),{playPop:u}=te();let l,i,o;return t(()=>{const{s:p}=c(),d=Math.round(p*.08),g=innerWidth<innerHeight?Math.round(innerWidth-1.6*d-2*d-.3*d):Math.round(innerWidth-1.6*d),m=innerWidth<innerHeight?Math.round(innerHeight-1.6*d):Math.round(innerHeight-1.6*d-2*d-.3*d);l={c:"#ff6347",r:d,x:g,y:m,p:!1},i=W(l),o=N({x:Number(l.x)-d+Math.round(d*.4),y:Number(l.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),s((p,d)=>{r({x:p,y:d},l)&&(u(),l.p=!0,e(),h(()=>{l.p=!1},100))}),{render:()=>{i(),l.p||n(()=>{o()},l.x,l.y,innerHeight>innerWidth?0:.5)},point:()=>({x:l.x,y:l.y,r:l.r})}},_e=e=>{const{ctx:t,shade:c}=w(),h=Math.round(e.r/2.2),s=Math.round(.15*e.r),r=c(e.c||"blue",-3);return(n=t)=>{const{r:u,x:l=u,y:i=u}=e;n.lineCap="round",n.fillStyle=r,n.strokeStyle=r,n.lineWidth=h,n.beginPath(),n.moveTo(l+s,i),n.lineTo(l-s/2,i-s),n.lineTo(l-s/2,i+s),n.closePath(),n.fill(),n.beginPath(),n.moveTo(l+s,i),n.lineTo(l-s/2,i-s),n.moveTo(l-s/2,i-s),n.lineTo(l-s/2,i+s),n.moveTo(l-s/2,i+s),n.lineTo(l+s,i),n.stroke()}},he=({getX:e,getY:t,color:c="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:s,useMeasure:r,useTimer:n,useScreenMeta:u,navigate:l,addEventClick:i,intersect:o}=w(),{from:a}=u();let f,p,d;return s(()=>{const{cx:v,cy:M,s:y,m:P}=r();f={c,r:Math.round(y*.1),x:e(v,y,P),y:t(M,y,P),p:(a==="gamescore"||a==="game"||a==="opening")&&!f},p=W(f),d=_e(f)}),n(()=>{f.p&&h(f,!1,!0),f.p=!1}),i((v,M)=>{o({x:v,y:M},f)&&(h(f),f.p=!0,n(()=>{l("game")},100))}),{render:()=>{p(),f.p||d()},point:()=>({x:f.x,y:f.y,r:f.r})}},pe=e=>{const{ctx:t,shade:c}=w(),h=Math.round(e.r/4),s=Math.round(.12*e.r);return(r=t)=>{const{r:n,x:u=n,y:l=n}=e,i=c(e.c||"blue",-3);r.lineCap="round",r.strokeStyle=i,r.lineWidth=h,r.beginPath(),r.moveTo(u-1.5*s,l-2*s),r.lineTo(u-1.5*s,l+2*s),r.stroke(),r.beginPath(),r.moveTo(u+1.5*s,l-2*s),r.lineTo(u+1.5*s,l+2*s),r.stroke()}},Fe=({getX:e,getY:t,popEffect:c=()=>{}})=>{const{addEventResize:h,useMeasure:s,useTimer:r,useScreenMeta:n,navigate:u,addEventClick:l,intersect:i}=w(),{from:o}=n();let a,f,p;return h(()=>{const{cx:m,cy:v,s:M,m:y}=s();a={c:"#fd8059",r:Math.round(M*.08),x:e(m,M,y),y:t(v,M,y),p:(o==="game"||o==="opening")&&!a},f=W(a),p=pe(a)}),r(()=>{a.p&&c(a,!1,!0),a.p=!1},500),l((m,v)=>{i({x:m,y:v},a)&&(c(a),a.p=!0,r(()=>{u("main")},100))}),{render:()=>{f(),a.p||p()},point:()=>({x:a.x,y:a.y,r:a.r})}},$e=({color:e="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:c,useMeasure:h,useTimer:s,useScreenMeta:r,addEventClick:n,intersect:u,navigate:l}=w(),{from:i}=r();let o,a,f,p;return c(()=>{const{cx:m,cy:v,s:M}=h(),y=Math.round(M*.25);o={c:e,x:m,y:v,r:y,p:i==="opening"&&!o},a=W(o),f=ee({text:"Yola",c:"#f1f1f1",x:m,y:v-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),p=ee({text:"PopiT",c:"#ffeb3b",x:m,y:v-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),s(()=>{o.p&&t(o,!1,!0),o.p=!1}),n((m,v)=>{u({x:m,y:v},o)&&(t(o),o.p=!0,s(()=>{l("opening")},100))}),{render:()=>{a(),o.p||(f(),p())},point:()=>({x:o.x,y:o.y,r:o.r})}},ge=({color:e="#00dcfe",frequency:t=20})=>{const{addEventResize:c,useRandChain:h,useMeasure:s,rand:r,useTimer:n,setBackground:u,useScreenMeta:l}=w(),{from:i}=l();u(e);const o=r(0,999);let a=[],f=[];c(()=>{const m=h(o),{s:v}=s();a=[];const M=Math.round(v*.05),y=Math.round(innerWidth/M/2)-1,P=Math.round((innerWidth-2*M*y)/(y+1)),E=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*E)/(E+1));for(let S=0;S<E;S++)for(let b=0;b<y;b++)m(m(t))<1&&a.push({x:P+M+b*M*2+P*b,y:x+M+S*M*2+x*S,r:M,c:e,p:i==="opening"?!0:m(1)>0});f=a.map(S=>W(S))});const p=()=>{n(()=>{const m=r(a.length-1);a[m]&&(a[m].p=!a[m].p),p()},250)};return i==="opening"?n(()=>{a.forEach(m=>m.p=r(1)>0),p()}):p(),{render:()=>{f.forEach(m=>m())},setIntersections:m=>{a=a.filter(({x:v,y:M,r:y})=>m(v,M,y)),f=a.map(v=>W(v))}}},ie="ylp",ce="score",J="difficulty",Q=[.14,.11,.09,.075],ae=750,Be=350,de=5,z=[];for(let e=0;e*de<=ae-Be;e++)z.push(ae-e*de);const $=()=>{const e=f=>localStorage.getItem(`${ie}_${f}`),t=(f,p)=>localStorage.setItem(`${ie}_${f}`,p.toString()),c=()=>+(e(ce)||0),h=f=>t(ce,f),s=f=>{const p=c();h(p+f)},r=()=>+(e(J)||0),n=f=>{const p=r();t(J,Math.min(Math.max(p+f,0),Q.length*z.length-1))};return{getScore:c,addScore:s,plusDifficulty:()=>n(1),minusDifficulty:()=>n(-5),getDifficultyRad:()=>{const f=r(),p=Math.floor(f/z.length);return Q[p]||Q[1]},getDifficultyTic:()=>{const f=r(),p=Math.floor(f/z.length),d=f-p*z.length;return z[d]||z[0]},resetDifficulty:()=>t(J,0)}},me=(e=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:c,useMeasure:h,setBackground:s,rand:r}=w(),{getDifficultyRad:n}=$();return t=[...t.splice(r(t.length-1),t.length),...t],e||c(()=>{const{s:l}=h(),i=n(),o=Math.round(l*i),a=Math.round(innerWidth/o/2)-1,f=(innerWidth-2*o*a)/(a+1),p=Math.round(innerHeight/o/2)-1,d=(innerHeight-2*o*p)/(p+1),g=innerWidth>=innerHeight,m=g?a:p,v=g?f:d,M=g?innerWidth:innerHeight;let y=0;const P=[];for(let x=0;x<m;x++)t[y]||(y=0),P.push(`${t[y]} ${(v+o+x*o*2+v*x)/M*100}%`),y++;s(`linear-gradient(${g?"to right":"to bottom"}, ${P.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},Me=({palette:e,retry:t,popEffect:c=()=>{}})=>{const{addEventResize:h,useMeasure:s,rand:r,useTimer:n,useScreenMeta:u,navigate:l,addEventClick:i,intersect:o}=w(),{from:a}=u(),{getDifficultyRad:f}=$(),p=[];let d=[],g,m,v,M;const y=E=>Array.isArray(e)?e[E]:e;return h(()=>{const{s:E}=s();p.splice(0);const x=f(),S=Math.round(E*x),b=Math.round(innerWidth/S/2)-1,_=(innerWidth-2*S*b)/(b+1),k=Math.round(innerHeight/S/2)-1,B=(innerHeight-2*S*k)/(k+1),I=innerWidth>=innerHeight;let R=0;for(let T=0;T<k;T++){for(let C=0;C<b;C++){y(R)||(R=0);const H={x:_+S+C*S*2+_*C,y:B+S+T*S*2+B*T,r:S,c:y(R),p:!0};T===0&&C===b-1?(M={...H,p:(a==="main"||a==="gameover"||a==="gamescore")&&!M},g=W(M),m=pe(M)):p.push(H),R+=I?1:0}R=I?0:R+1}t&&(v=p[r(p.length-1)],n(()=>{c(v,!1,!0),v.p=!1})),d=p.map(T=>W(T))}),n(()=>{M.p&&c(M,!1,!0),M.p=!1}),t&&i((E,x)=>{o({x:E,y:x},v)&&(c(v),v.p=!0,n(()=>{l("game")},100))}),i((E,x)=>{o({x:E,y:x},M)&&(c(M),M.p=!0,n(()=>{l("main")},100))}),{render:()=>{d.forEach(E=>E()),g(),M!=null&&M.p||m()},popits:p}},A=100,G="#222",Ne=e=>{const t=(e==null?void 0:e[0])||0,c=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(c<255?c<1?0:c:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},Z={},Oe=e=>{const{ctx:t,createImg:c,useRandChain:h,useTimer:s}=w();let r,n=!1,u=[];const l=e.r*2/A/2;Z[e.imgSrc]?r=Z[e.imgSrc]:(r=Z[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},r.img.src=e.imgSrc);const i=()=>s(()=>{n=!n,i()},250),o=(g,m=t)=>{const{x:v,y:M,c:y,r:P}=g;m.fillStyle=y||"red",m.beginPath(),m.arc(v+P,M+P,P,0,Math.PI*2),m.closePath(),m.fill()},a=(g=t,m=0,v=0)=>{g.fillStyle=G,g.beginPath(),g.roundRect(m,v,2*e.r,2*e.r,l),g.closePath(),g.fill()},f=()=>{const g=[];for(let P=0;P<A;P++)for(let E=0;E<A;E++){const x={x:E*l*2,y:P*l*2,r:l,c:G};g.push(x)}let m=e.score-e.winScore;const v=[...g],M=h(e.seed),y=(P=!1)=>{const E=M(v.length-1),x=v[E],S=g.indexOf(x);x.c=P?G:r.cols[S],v.splice(E,1),P&&u.push({...x,c:r.cols[S]})};for(let P=m;P>0;P--)y();if(e.winScore){u=[];for(let P=e.winScore;P>0;P--)y(!0);i()}return g},p=()=>{const g=f();r.drawImg=c((m=t)=>{a(m),g.filter(v=>v.c!==G).forEach(v=>o(v,m))},2*e.r)},d=async()=>{var v;const g=document.createElement("canvas");g.width=A,g.height=A;const m=g.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(r.img,0,0);for(let M=0;M<A;M++){const y=[];for(let P=0;P<A;P++){const E=(v=m==null?void 0:m.getImageData(P,M,1,1))==null?void 0:v.data;y.push(Ne(E))}r.cols.push(...y)}r.isFilled=!0,p()};return r.isFilled?(r.r!==e.r||r.score!==e.score)&&p():r.img.onload=d,(g=t)=>{const{x:m,y:v,r:M,winScore:y}=e;if(r.drawImg?g.drawImage(r.drawImg,m-M,v-M,2*M,2*M):a(g,m-M,v-M),n&&y&&r.drawImg)for(const P of u)g.fillStyle=P.c||"red",g.beginPath(),g.arc(m-M+P.x+P.r,v-M+P.y+P.r,P.r,0,Math.PI*2),g.closePath(),g.fill()}},le=1e4,ye=(e=0,t=!1)=>{const{addEventResize:c,useMeasure:h,translate:s}=w(),{getScore:r}=$(),n=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],u=r();let l,i=0,o=0,a=!1,f=!1;const p=y=>Math.min(Math.floor(y/le),n.length-1);let d=p(u-e);if(e){const y=p(u);a=y!==d,f=y>n.length-1}return c(()=>{const{cx:y,cy:P,s:E,isL:x}=h();l=[],i=(E-2*E*.055*1.6)/2,o=E*.05;let S=t?d:0;for(S;S<(t?d+1:n.length);S++){const b=n[S],_=x?y:y+S*i*2+S*o,k=x?P+S*i*2+S*o:P;l.push(Oe({x:_,y:k,r:i,score:Math.min(u-S*le,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{d=d+1<n.length?d+1:n.length-1},down:()=>{d=d-1<0?0:d-1},render:()=>{const{isL:y}=h(),P=y?0:-(d*i*2+d*o),E=y?-(d*i*2+d*o):0;s(()=>{l==null||l.forEach(x=>x())},P,E)},rect:()=>{const{cx:y,cy:P}=h(),E=innerWidth>innerHeight;return{x:E?y-i:0,y:E?0:P-i,w:E?2*i:innerWidth,h:E?innerHeight:2*i}},isJump:a,isCompleted:f}},Ye=({popits:e,popEffect:t=()=>{},splashEffect:c=()=>{}})=>{const{useTimer:h,rand:s,addEventClick:r,addEventMove:n,intersect:u,navigate:l,addEventResize:i}=w(),{getScore:o,addScore:a,getDifficultyTic:f}=$();let p=[],d,g,m=!1,v=0,M=0,y=0;const P=o(),E=f(),x=I=>{const R=e.filter(H=>p.indexOf(H)===-1&&H!==I),T=s(R.length-1),C=R[T];C&&(t(C,!1,!0),C.p=!1,p.push(R[T]))},S=()=>{g=h(()=>{if(y=Math.max(y-10,50),e.length===p.length){m=!0,g.stop(),h(()=>{l("gameover")});return}x(),S()},y)},b=I=>{p=[];const R=e.length;let T=s(Math.round(R*.3),Math.round(R*.6));const C=[...e];if(I){const H=C.indexOf(I);C.splice(H,1)}for(let H=T;H>0;H--){const ne=s(C.length-1),q=C[ne];q.p=!1,t(q,!1,!0),p.push(q),C.splice(ne,1)}y=E,d==null||d.stop(),g==null||g.stop(),P&&(d=h(()=>{c("SLOWLY"),S()},p.length*E)),v=v>0?v:s(3,5)},_=()=>P<1e4?10:P<2e4?5:P<3e4?2:1,k=I=>{t(I),y=Math.min(y+5,E),M++,I.p=!0;const R=p.indexOf(I);if(p.splice(R,1),p.length<=0)if(v--,v>0)h(()=>{c("Round"),b(I)},100);else{d==null||d.stop(),g==null||g.stop();const T=_();a(M*T),h(()=>{l("gamescore",{winScore:M*T})},100)}},B=(I,R,T=!1)=>{if(!m){for(const C of p)if(u({x:I,y:R},C)){k(C);return}if(!T){for(const C of e)if(u({x:I,y:R},C)){t(C,!0),c("Popenalty"),x(C);return}c("Popenalty"),x()}}};r(B),n((I,R)=>B(I,R,!0)),i(()=>{h(()=>{c("Pop it"),b()})})},Ge=()=>{const{addEventResize:e,rand:t,useScreenMeta:c}=w(),{from:h}=c(),{popEffect:s,render:r}=O(),n=["#00dcfe","#5bb2f7","#92E6E6"],u=h==="opening"?n[0]:n[t(n.length-1)],{render:l,setIntersections:i}=ge({color:u}),{render:o,point:a}=$e({popEffect:s}),{render:f,point:p}=he({getX:(m,v,M)=>m+Math.round(v*.25)+2*M,getY:(m,v,M)=>m+Math.round(v*.25)+0*M,popEffect:s}),{render:d,point:g}=ke({popEffect:s});return e(()=>{const m=g(),v=a(),M=p();i((y,P,E)=>!L({x:y,y:P,r:E},m)&&!L({x:y,y:P,r:E},v)&&!L({x:y,y:P,r:E},M))}),()=>{r(),l(),o(),f(),d()}},Xe=()=>{const{useMeasure:e,addEventResize:t}=w(),c=me(),{popEffect:h,render:s}=O(),{popits:r,render:n}=Me({palette:c,popEffect:h}),u={mfs:0,dy:0},{splashEffect:l,render:i}=fe(u);return Ye({popits:r,popEffect:h,splashEffect:l}),t(()=>{const o=(r[0].y-r[0].r)/e().m;u.mfs=o,u.dy=o}),()=>{s(),n(),i()}},je=()=>{const e="#ff6347",{popEffect:t,render:c}=O(),{setBackground:h}=w(),{minusDifficulty:s}=$(),{render:r}=Me({palette:e,retry:!0,popEffect:t});return h(e),s(),()=>{c(),r()}},qe=()=>{const{translate:e,useScreenMeta:t}=w(),{plusDifficulty:c,resetDifficulty:h}=$(),{data:s}=t(),{popEffect:r,render:n}=O(),{splashEffect:u,render:l}=fe({infinity:!0});me();const{render:i,isJump:o}=ye(s==null?void 0:s.winScore,!0),{render:a}=he({getX:(p,d,g)=>innerWidth>innerHeight?Math.min(p+(d-2*d*.055*1.6)/2+4*g+Math.round(d*.1),innerWidth-2*g-Math.round(d*.1)):p+(d-2*d*.055*1.6)/8+0*Math.round(d*.1)+2*g,getY:(p,d,g)=>innerWidth>innerHeight?p+(d-2*d*.055*1.6)/2-1*g-Math.round(d*.1):Math.min(p+(d-2*d*.055*1.6)/2+4*g+Math.round(d*.1),innerHeight-2*g-Math.round(d*.1)),popEffect:r}),{render:f}=Fe({getX:(p,d,g)=>innerWidth>innerHeight?Math.max(p-(d-2*d*.055*1.6)/2-4*g-Math.round(d*.1),2*g+Math.round(d*.1)):p+(d-2*d*.055*1.6)/8-2*Math.round(d*.1)-2*g,getY:(p,d,g)=>innerWidth>innerHeight?p-(d-2*d*.055*1.6)/2+0*g+Math.round(d*.1):Math.min(p+(d-2*d*.055*1.6)/2+4*g+Math.round(d*.1),innerHeight-2*g-Math.round(d*.1)),popEffect:r});return o?h():c(),innerHeight>innerWidth&&u(o?"Picture filled":"You win"),()=>{n(),innerHeight>innerWidth?e(i,0,-Math.round(innerHeight*.05)):i(),a(),f(),l()}},Ve=()=>{const{addEventResize:e,rand:t}=w(),{popEffect:c,render:h}=O(),s=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],r=s[t(s.length-1)],{render:n,setIntersections:u}=ge({color:r,frequency:10}),{render:l,rect:i,up:o,down:a}=ye(),{render:f,point:p}=Ae({popEffect:c}),{render:d,point:g}=ze({onClick:o,popEffect:c}),{render:m,point:v}=Le({onClick:a,popEffect:c});return e(()=>{const M=p(),y=i(),P=g(),E=v();u((x,S,b)=>!L({x,y:S,r:b},M)&&!Ie({x,y:S,r:b},y)&&!L({x,y:S,r:b},P)&&!L({x,y:S,r:b},E))}),()=>{h(),n(),l(),f(),d(),m()}},Ue=()=>{const{ctx:e,addEventResize:t,loop:c}=w(),h={x:40,y:100};let s=1,r=1,n;const u=()=>{n=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return u(),t(u),c(()=>{h.x+=2*s,h.y+=3*r,s*=-1,r*=-1}),()=>{e.save();var l=Math.random()*2,i=Math.random()*3;e.translate(l,i),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,n,n),e.fill(),e.restore()}},Ke=[{name:"opening",ctor:De},{name:"main",ctor:Ge},{name:"game",ctor:Xe},{name:"gameover",ctor:je},{name:"gamescore",ctor:qe},{name:"score",ctor:Ve},{name:"devs",ctor:Ue}],Je=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop7.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];He(Ke,Je);document.title="Your's last Pop it";
