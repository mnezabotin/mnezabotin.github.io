(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&h(e)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();const pt=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const d=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},h=n=>{o.clearRect(0,0,innerWidth,innerHeight),n()};return d(),document.body.appendChild(t),{ctx:o,render:h,resize:d,rotate:(n,r,l,c)=>{o.save(),o.translate(r,l),o.rotate(Math.PI*c),o.translate(-r,-l),n(),o.restore()},translate:(n,r,l)=>{o.save(),o.translate(r,l),n(),o.restore()},shade:(n,r)=>{n=n.substring(1);const l=parseInt(n,16),c=Math.round(2.55*r),f=(l>>16)+c,E=(l>>8&255)+c,M=(l&255)+c;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(E<255?E<1?0:E:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(n,r)=>{var l;document.body.style.background=n,document.body.style.backgroundColor=r||n,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",r||n)},createImg:(n,r,l=r)=>{const c=document.createElement("canvas"),f=c.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return c.width=r*devicePixelRatio,c.height=l*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),n(f),c}}},gt=t=>{let o="",d="",h;const s=i=>t.find(u=>u.name===i)||t[0],e={render:()=>{},navigate:(i,u)=>{const n=s(i);d=o||"",o=(n==null?void 0:n.name)||"",h=u,e.render=(n==null?void 0:n.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:d,data:h})};return e},mt=()=>{const t=requestAnimationFrame||(e=>setTimeout(e,16.666666666666668)),o=[],d={};return{loop:(e,i)=>{if(Object.entries(d).find(([n,r])=>r===e)||i&&d[i])throw new Error(`Loop${i?" "+i:""} already specified`);i&&o.push(i),i=i||new Date().valueOf().toString(),d[i]=e;const u=()=>{e(),d[i]&&t(u)};u()},stop:e=>{if(typeof e=="string")delete d[e];else{const i=Object.entries(d).find(([u,n])=>n===e);i&&delete d[i[0]]}},stopAll:()=>{for(const e in d)o.indexOf(e)===-1&&delete d[e]}}};let Y=[];const Mt=()=>{for(const t of Y)clearTimeout(t);Y=[]},yt=(t,o=400)=>{let d=new Date,h=o,s=setTimeout(t,h);return Y.push(s),{pause:()=>{clearTimeout(s),h-=new Date-d},resume:()=>{d=new Date,clearTimeout(s),s=setTimeout(t,h),Y.push(s)},stop:()=>{clearTimeout(s)}}},Z=2147483646,X=2147483647,vt=16807,Et=(t=Math.floor(Math.random()*X))=>{t=t%X,t<=0&&(t+=Z);const o=()=>(t=t*vt%X,t),d=()=>(o()-1)/Z;return(s,a)=>(a===void 0&&(a=s,s=0),Math.floor(d()*(a-s+1))+s)},Pt=(t,o)=>(o===void 0&&(o=t,t=0),Math.floor(Math.random()*(o-t+1))+t),St=()=>{const t=[],o=[],d=[];return{addEventResize:r=>{r(),t.push(r)},onResizeEvents:()=>t.forEach(r=>r()),addEventClick:r=>o.push(r),onClickEvents:(r,l)=>o.forEach(c=>c(r,l)),addEventMove:r=>d.push(r),onMoveEvents:(r,l)=>d.forEach(c=>c(r,l)),removeAllEvents:()=>{t.splice(0),o.splice(0),d.splice(0)}}},_=(t,o)=>{const d=Math.pow(Math.abs(t.x-o.x),2),h=Math.pow(Math.abs(t.y-o.y),2),s=t.r||0,a=o.r||0,e=Math.pow(s+a,2);return d+h<=e},xt=(t,o)=>{const d=t.r||0,h=o.w||0,s=o.h||0;return Math.abs(o.x+h/2-t.x)<=h/2+d&&Math.abs(o.y+s/2-t.y)<=s/2+d},wt=(t,o)=>_(t,o),Rt=t=>{const o={},d=s=>{const a=s.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const s of t){const a=new Audio(s);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const e=d(s);o[e]={audio:a,path:s}}})(),s=>{var u,n;const a=(u=o[s])==null?void 0:u.audio,e=(n=o[s])==null?void 0:n.path;if(!(!a||!e))if(a.currentTime===0)a.play();else{var i=new Audio(e);i.volume=.25,i.play()}}};let G;const bt=(t,o)=>{if(G)throw new Error("Webcore already specified");const d=pt(),h=gt(t),{loop:s,stop:a,stopAll:e}=mt(),{addEventResize:i,onResizeEvents:u,addEventClick:n,onClickEvents:r,addEventMove:l,onMoveEvents:c,removeAllEvents:f}=St();let E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:E,cy:M,s:p,m}),v=Rt([]);G={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(y,P)=>{if(!t.some(S=>S.name===y))throw new Error(`Screen ${y} not specified`);e(),Mt(),f(),new Promise(()=>h.navigate(y,P))},loop:s,loopStop:a,useTimer:yt,rand:Pt,useRandChain:Et,intersect:wt,addEventResize:i,addEventClick:n,addEventMove:l,playAudio:v},s(()=>d.render(h.render),"draw"),window.onresize=()=>{E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),d.resize(),u()},document.onpointerdown=y=>{r(y.clientX,y.clientY)},document.onmousemove=y=>{c(y.clientX,y.clientY)},h.navigate()},w=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},j={},W=t=>{const{shade:o,ctx:d,createImg:h}=w(),s=()=>{const{r:e,c:i="#ffffff",p:u}=t,n=d.createRadialGradient(e,e,e,e,e,e/5);return n.addColorStop(0,o(i,0)),n.addColorStop(.01,o(i,0)),n.addColorStop(.075,o(i,9)),n.addColorStop(.15,o(i,0)),n.addColorStop(.15,o(i,-15)),n.addColorStop(.18,o(i,-5)),n.addColorStop(.22,o(i,-15)),u?(n.addColorStop(.24,o(i,-10)),n.addColorStop(.3,o(i,-8)),n.addColorStop(.34,o(i,-12)),n.addColorStop(.6,o(i,-6)),n.addColorStop(1,o(i,-4))):(n.addColorStop(.24,o(i,-12)),n.addColorStop(.26,o(i,-8)),n.addColorStop(.3,o(i,-2)),n.addColorStop(.34,o(i,0)),n.addColorStop(.5,o(i,5)),n.addColorStop(1,o(i,12))),n},a=()=>{const{r:e,c:i="#ffffff",p:u}=t,n=`${i}_${u?"push":"pop"}_${e}`;if(j[n])return j[n];const r=h((l=d)=>{const c=s();l.fillStyle=c,l.beginPath(),l.arc(e,e,e,0,2*Math.PI),l.closePath(),l.fill()},2*e);return j[n]=r,r};return(e=d)=>{const{x:i,y:u,r:n}=t,r=a();e.drawImage(r,i-n,u-n,2*n,2*n)}},q={},L=t=>{const{ctx:o}=w();let d;return q[t.src]?d=q[t.src]:(d=new Image,d.src=t.src,q[t.src]=d),(h=o)=>{const{w:s,h:a=s,x:e=0,y:i=0}=t;d.complete&&h.drawImage(d,e,i,s,a)}},tt=t=>{const{font:o,ctx:d}=w(),h=t.text,s=t.text.length,a=2*Math.PI/s/4;return(e=d)=>{const{x:i,y:u,r:n,s:r=0,fs:l}=t,c=l||Math.round(n/4);e.textAlign="center",e.fillStyle="#f9f9f9",e.font=`${c}px ${o}`,e.save(),e.translate(i,u),e.rotate(r);for(let f=0;f<s;f++)e.save(),e.rotate(f*a),e.fillText(h[f],0,-n),e.restore();e.restore()}},Ct=()=>{var g,v;const{ctx:t,loop:o,rotate:d,navigate:h,useMeasure:s,addEventClick:a,addEventResize:e,setBackground:i}=w();i("#040404");let u=!1,n,r,l,c,f,E=-.2,M=0;e(()=>{const{cx:y,cy:P,s:S}=s(),x=Math.round(S*.25);n={c:"#ff6347",x:y,y:P,r:x,p:!1},r=W(n),l=L({x:y-x+Math.round(x*.35),y:P-x+Math.round(x*.35),w:x*2-Math.round(x*.7),src:"/media/sloth.svg"}),c=tt({text:"nezabotin",x:y,y:P,r:Math.round(x*1.1),s:Math.PI*1.6}),f=tt({text:"production",x:y,y:P,r:Math.round(x*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,M=E>=1?1:E,E>=1.8&&(n.p=!0),E>=2.2&&(n.c="#f86a9a"),E>=2.6&&h("main")};a(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(E<y)return E=y,!0})});const m=()=>{o(p),u=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:y,cy:P}=s();t.globalAlpha=u?1:0,r(),E<1.8&&l(),E<1.4&&d(()=>{c(),f()},y,P,M),t.globalAlpha=1}},$=100/2;let et=0;const N=()=>{const{loop:t,ctx:o,shade:d,rand:h}=w(),s={},a=()=>{for(const u in s){const n=s[u];if(!n)return;const r=n.popit;if(!n.shake)n.tic+=$/5,n.tic>=$&&(n.dir=-1),n.withoutRad||(r.r=n.origR+n.origR*75e-5*(n.tic+(n.dir>0?0:$-n.tic)));else{n.tic+=$/5;const l=h(1,2),c=h(1,2);r.x=n.origX+Math.random()*l*(Math.random()>.5?1:-1),r.y=n.origY+Math.random()*c*(Math.random()>.5?1:-1)}n.tic>=2*$&&(delete s[u],r.r=n.origR,r.x=n.origX,r.y=n.origY)}},e=(u,n=!1,r=!1)=>{et++;const l=`${new Date().valueOf().toString()}_${et}`,c=1,f=1;s[l]={withoutRad:n,tic:c,dir:f,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:r}},i=()=>{o.globalAlpha=.25;for(const u in s){const n=s[u];if(n.shake)continue;const r=n.popit;o.fillStyle=d(r.c||"red",-12),o.beginPath(),o.arc(r.x,r.y,r.r+n.origR*.001*(n.tic+(n.dir>0?0:$-n.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return t(a),{popEffect:e,render:i}},J=t=>{const{font:o,ctx:d}=w();return(h=d)=>{const{text:s,x:a,c:e,y:i,fs:u,a:n="center",mw:r}=t;h.textAlign=n,h.fillStyle=e,h.font=`${u}px ${o}`,h.fillText(s,a,i,r)}},O=100,ct=t=>{const{loop:o,ctx:d,useMeasure:h,rand:s,font:a}=w();let e=null;const i=()=>{if(!e)return;const{m:r}=h();if(e.tic<=O)e.props.fs=((t==null?void 0:t.mfs)||6)/O*e.tic*r;else{const l=s(1,1),c=s(1,1);e.props.x=e.origX+Math.random()*l*(Math.random()>.5?1:-1),e.props.y=e.origY+Math.random()*c*(Math.random()>.5?1:-1),e.shake=!0}e.tic+=e.tic>O?1:10,e.tic>O*2&&(e=null)},u=r=>{const{cx:l,m:c}=h(),f=0,E={x:l,y:Math.round(c*((t==null?void 0:t.dy)||16)),text:r,c:(t==null?void 0:t.color)||"#ffffff",fs:0},M=J(E);e={props:E,shape:M,tic:f,origX:E.x,origY:E.y}},n=()=>{e&&(d.globalAlpha=.01*e.tic,d.textAlign="center",d.fillStyle="#000",d.font=`${e.props.fs+.5}px ${a}`,d.fillText(e.props.text,e.props.x,e.props.y),e.shape(),d.globalAlpha=1)};return o(i),{splashEffect:u,render:n}},It=({color:t="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,navigate:e,addEventClick:i,intersect:u}=w(),{from:n}=a();let r,l,c;return d(()=>{const{cx:M,cy:p,s:m,m:g}=h(),v=Math.round(m*.25);r={c:t,r:Math.round(m*.08),x:M-v-1*g,y:p-v+1*g,p:(n==="score"||n==="opening")&&!r},l=W(r),c=L({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),i((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,s(()=>{e("score")},100))}),{render:()=>{l(),r.p||c()},point:()=>({x:r.x,y:r.y,r:r.r})}},Tt=({color:t="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,navigate:e,addEventClick:i,intersect:u}=w(),{from:n}=a();let r,l,c;return d(()=>{const{s:M}=h(),p=Math.round(M*.08);r={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:n==="main"&&!r},l=W(r),c=L({x:Number(r.x)-p+Math.round(p*.4),y:Number(r.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),i((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,s(()=>{e("main")},100))}),{render:()=>{l(),r.p||c()},point:()=>({x:r.x,y:r.y,r:r.r})}},Wt=t=>{const{addEventResize:o,useMeasure:d,useTimer:h,addEventClick:s,intersect:a,rotate:e}=w();let i,u,n;return o(()=>{const{s:c}=d(),f=Math.round(c*.055);i={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f),p:!1},u=W(i),n=L({x:Number(i.x)-f+Math.round(f*.4),y:Number(i.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),s((c,f)=>{a({x:c,y:f},i)&&(i.p=!0,t(),h(()=>{i.p=!1},100))}),{render:()=>{u(),i.p||e(()=>{n()},i.x,i.y,-.5)},point:()=>({x:i.x,y:i.y,r:i.r})}},kt=t=>{const{addEventResize:o,useMeasure:d,useTimer:h,addEventClick:s,intersect:a,rotate:e}=w();let i,u,n;return o(()=>{const{s:c}=d(),f=Math.round(c*.055);i={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f-2*f-.3*f),p:!1},u=W(i),n=L({x:Number(i.x)-f+Math.round(f*.4),y:Number(i.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),s((c,f)=>{a({x:c,y:f},i)&&(i.p=!0,t(),h(()=>{i.p=!1},100))}),{render:()=>{u(),i.p||e(()=>{n()},i.x,i.y,.5)},point:()=>({x:i.x,y:i.y,r:i.r})}},At=t=>{const{ctx:o,shade:d}=w(),h=Math.round(t.r/2.2),s=Math.round(.15*t.r),a=d(t.c||"blue",-3);return(e=o)=>{const{r:i,x:u=i,y:n=i}=t;e.lineCap="round",e.fillStyle=a,e.strokeStyle=a,e.lineWidth=h,e.beginPath(),e.moveTo(u+s,n),e.lineTo(u-s/2,n-s),e.lineTo(u-s/2,n+s),e.closePath(),e.fill(),e.beginPath(),e.moveTo(u+s,n),e.lineTo(u-s/2,n-s),e.moveTo(u-s/2,n-s),e.lineTo(u-s/2,n+s),e.moveTo(u-s/2,n+s),e.lineTo(u+s,n),e.stroke()}},at=({getX:t,getY:o,color:d="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:s,useMeasure:a,useTimer:e,useScreenMeta:i,navigate:u,addEventClick:n,intersect:r}=w(),{from:l}=i();let c,f,E;return s(()=>{const{cx:m,cy:g,s:v,m:y}=a();c={c:d,r:Math.round(v*.1),x:t(m,v,y),y:o(g,v,y),p:(l==="gamescore"||l==="game"||l==="opening")&&!c},f=W(c),E=At(c)}),e(()=>{c.p&&h(c,!1,!0),c.p=!1}),n((m,g)=>{r({x:m,y:g},c)&&(h(c),c.p=!0,e(()=>{u("game")},100))}),{render:()=>{f(),c.p||E()},point:()=>({x:c.x,y:c.y,r:c.r})}},dt=t=>{const{ctx:o,shade:d}=w(),h=Math.round(t.r/4),s=Math.round(.12*t.r);return(a=o)=>{const{r:e,x:i=e,y:u=e}=t,n=d(t.c||"blue",-3);a.lineCap="round",a.strokeStyle=n,a.lineWidth=h,a.beginPath(),a.moveTo(i-1.5*s,u-2*s),a.lineTo(i-1.5*s,u+2*s),a.stroke(),a.beginPath(),a.moveTo(i+1.5*s,u-2*s),a.lineTo(i+1.5*s,u+2*s),a.stroke()}},Ht=({getX:t,getY:o,popEffect:d=()=>{}})=>{const{addEventResize:h,useMeasure:s,useTimer:a,useScreenMeta:e,navigate:i,addEventClick:u,intersect:n}=w(),{from:r}=e();let l,c,f;return h(()=>{const{cx:p,cy:m,s:g,m:v}=s();l={c:"#fd8059",r:Math.round(g*.08),x:t(p,g,v),y:o(m,g,v),p:(r==="game"||r==="opening")&&!l},c=W(l),f=dt(l)}),a(()=>{l.p&&d(l,!1,!0),l.p=!1}),u((p,m)=>{n({x:p,y:m},l)&&(d(l),l.p=!0,a(()=>{i("main")},100))}),{render:()=>{c(),l.p||f()},point:()=>({x:l.x,y:l.y,r:l.r})}},Dt=({color:t="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,addEventClick:e,intersect:i,navigate:u}=w(),{from:n}=a();let r,l,c,f;return d(()=>{const{cx:p,cy:m,s:g}=h(),v=Math.round(g*.25);r={c:t,x:p,y:m,r:v,p:n==="opening"&&!r},l=W(r),c=J({text:"Yola",c:"#f1f1f1",x:p,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),f=J({text:"PopiT",c:"#ffeb3b",x:p,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),e((p,m)=>{i({x:p,y:m},r)&&(o(r),r.p=!0,s(()=>{u("opening")},100))}),{render:()=>{l(),r.p||(c(),f())},point:()=>({x:r.x,y:r.y,r:r.r})}},lt=({color:t="#00dcfe",frequency:o=20})=>{const{addEventResize:d,useRandChain:h,useMeasure:s,rand:a,useTimer:e,setBackground:i,useScreenMeta:u}=w(),{from:n}=u();i(t);const r=a(0,999);let l=[],c=[];d(()=>{const p=h(r),{s:m}=s();l=[];const g=Math.round(m*.05),v=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*v)/(v+1)),P=Math.round(innerHeight/g/2)-1,S=Math.round((innerHeight-2*g*P)/(P+1));for(let x=0;x<P;x++)for(let T=0;T<v;T++)p(p(o))<1&&l.push({x:y+g+T*g*2+y*T,y:S+g+x*g*2+S*x,r:g,c:t,p:n==="opening"?!0:p(1)>0});c=l.map(x=>W(x))});const f=()=>{e(()=>{const p=a(l.length-1);l[p]&&(l[p].p=!l[p].p),f()},250)};return n==="opening"?e(()=>{l.forEach(p=>p.p=a(1)>0),f()}):f(),{render:()=>{c.forEach(p=>p())},setIntersections:p=>{l=l.filter(({x:m,y:g,r:v})=>p(m,g,v)),c=l.map(m=>W(m))}}},nt="ylp",ot="score",rt="difficulty",U=[.14,.11,.09,.075],st=500,zt=350,it=5,z=[];for(let t=0;t*it<=st-zt;t++)z.push(st-t*it);const F=()=>{const t=l=>localStorage.getItem(`${nt}_${l}`),o=(l,c)=>localStorage.setItem(`${nt}_${l}`,c.toString()),d=()=>+(t(ot)||0),h=l=>o(ot,l),s=l=>{const c=d();h(c+l)},a=()=>+(t(rt)||0),e=l=>{const c=a();o(rt,Math.min(Math.max(c+l,0),U.length*z.length-1))};return{getScore:d,addScore:s,plusDifficulty:()=>e(1),minusDifficulty:()=>e(-5),getDifficultyRad:()=>{const l=a(),c=Math.floor(l/z.length);return U[c]||U[1]},getDifficultyTic:()=>{const l=a(),c=Math.floor(l/z.length),f=l-c*z.length;return z[f]||z[0]}}},ut=(t=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:h,setBackground:s,rand:a}=w(),{getDifficultyRad:e}=F();return o=[...o.splice(a(o.length-1),o.length),...o],t||d(()=>{const{s:u}=h(),n=e(),r=Math.round(u*n),l=Math.round(innerWidth/r/2)-1,c=(innerWidth-2*r*l)/(l+1),f=Math.round(innerHeight/r/2)-1,E=(innerHeight-2*r*f)/(f+1),M=innerWidth>=innerHeight,p=M?l:f,m=M?c:E,g=M?innerWidth:innerHeight;let v=0;const y=[];for(let S=0;S<p;S++)o[v]||(v=0),y.push(`${o[v]} ${(m+r+S*r*2+m*S)/g*100}%`),v++;s(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ft=({palette:t,retry:o,popEffect:d=()=>{}})=>{const{addEventResize:h,useMeasure:s,rand:a,useTimer:e,useScreenMeta:i,navigate:u,addEventClick:n,intersect:r}=w(),{from:l}=i(),{getDifficultyRad:c}=F(),f=[];let E=[],M,p,m,g;const v=P=>Array.isArray(t)?t[P]:t;return h(()=>{const{s:P}=s();f.splice(0);const S=c(),x=Math.round(P*S),T=Math.round(innerWidth/x/2)-1,b=(innerWidth-2*x*T)/(T+1),C=Math.round(innerHeight/x/2)-1,A=(innerHeight-2*x*C)/(C+1),R=innerWidth>=innerHeight;let I=0;for(let k=0;k<C;k++){for(let H=0;H<T;H++){v(I)||(I=0);const Q={x:b+x+H*x*2+b*H,y:A+x+k*x*2+A*k,r:x,c:v(I),p:!0};k===0&&H===T-1?(g={...Q,p:(l==="main"||l==="gameover"||l==="gamescore")&&!g},M=W(g),p=dt(g)):f.push(Q),I+=R?1:0}I=R?0:I+1}o&&(m=f[a(f.length-1)],e(()=>{d(m,!1,!0),m.p=!1})),E=f.map(k=>W(k))}),e(()=>{g.p&&d(g,!1,!0),g.p=!1}),o&&n((P,S)=>{r({x:P,y:S},m)&&(d(m),m.p=!0,e(()=>{u("game")},100))}),n((P,S)=>{r({x:P,y:S},g)&&(d(g),g.p=!0,e(()=>{u("main")},100))}),{render:()=>{E.forEach(P=>P()),M(),g!=null&&g.p||p()},popits:f}},D=100,B="#222",_t=t=>{const o=(t==null?void 0:t[0])||0,d=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(d<255?d<1?0:d:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},V={},$t=t=>{const{ctx:o,createImg:d,useRandChain:h,useTimer:s}=w();let a,e=!1,i=[];const u=t.r*2/D/2;V[t.imgSrc]?a=V[t.imgSrc]:(a=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},a.img.src=t.imgSrc);const n=()=>s(()=>{e=!e,n()},250),r=(M,p=o)=>{const{x:m,y:g,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(m+y,g+y,y,0,Math.PI*2),p.closePath(),p.fill()},l=(M=o,p=0,m=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,m,2*t.r,2*t.r,u),M.closePath(),M.fill()},c=()=>{const M=[];for(let y=0;y<D;y++)for(let P=0;P<D;P++){const S={x:P*u*2,y:y*u*2,r:u,c:B};M.push(S)}let p=t.score-t.winScore;const m=[...M],g=h(0),v=(y=!1)=>{const P=g(m.length-1),S=m[P],x=M.indexOf(S);S.c=y?B:a.cols[x],m.splice(P,1),y&&i.push({...S,c:a.cols[x]})};for(let y=p;y>0;y--)v();if(t.winScore){i=[];for(let y=t.winScore;y>0;y--)v(!0);n()}return M},f=()=>{const M=c();a.drawImg=d((p=o)=>{l(p),M.filter(m=>m.c!==B).forEach(m=>r(m,p))},2*t.r)},E=async()=>{var m;const M=document.createElement("canvas");M.width=D,M.height=D;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(a.img,0,0);for(let g=0;g<D;g++){const v=[];for(let y=0;y<D;y++){const P=(m=p==null?void 0:p.getImageData(y,g,1,1))==null?void 0:m.data;v.push(_t(P))}a.cols.push(...v)}a.isFilled=!0,f()};return a.isFilled?(a.r!==t.r||a.score!==t.score)&&f():a.img.onload=E,(M=o)=>{const{x:p,y:m,r:g,winScore:v}=t;if(a.drawImg?M.drawImage(a.drawImg,p-g,m-g,2*g,2*g):l(M,p-g,m-g),e&&v&&a.drawImg)for(const y of i)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-g+y.x+y.r,m-g+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ht=(t=0)=>{const{addEventResize:o,useMeasure:d,translate:h}=w(),{getScore:s}=F(),a=["/media/max.png"],e=s();let i,u=0,n=0,r=Math.floor(e/K);return o(()=>{const{cx:M,cy:p,s:m}=d();i=[],u=(m-2*m*.055*1.6)/2,n=m*.05;for(let g=0;g<a.length;g++){const v=a[g];i.push($t({x:M,y:p+g*u*2+g*n,r:u,score:e-g*K<0?0:e-g*K,imgSrc:v,winScore:t}))}}),{up:()=>{r=r+1<a.length?r+1:a.length-1},down:()=>{r=r-1<0?0:r-1},render:()=>{h(()=>{i==null||i.forEach(M=>M())},0,-(r*u*2+r*n))},rect:()=>{const{cx:M,cy:p}=d(),m=innerWidth>innerHeight;return{x:m?M-u:0,y:m?0:p-u,w:m?2*u:innerWidth,h:m?innerHeight:2*u}}}},Ft=({popits:t,popEffect:o=()=>{},splashEffect:d=()=>{}})=>{const{useTimer:h,rand:s,addEventClick:a,addEventMove:e,intersect:i,navigate:u,addEventResize:n}=w(),{addScore:r,getDifficultyTic:l}=F();let c=[],f,E,M=!1,p=0,m=0,g=0;const v=l(),y=b=>{const C=t.filter(I=>c.indexOf(I)===-1&&I!==b),A=s(C.length-1),R=C[A];R&&(o(R,!1,!0),R.p=!1,c.push(C[A]))},P=()=>{E=h(()=>{if(g=Math.max(g-10,50),t.length===c.length){M=!0,E.stop(),h(()=>{u("gameover")});return}y(),P()},g)},S=b=>{c=[];const C=t.length;let A=s(Math.round(C*.3),Math.round(C*.6));const R=[...t];if(b){const I=R.indexOf(b);R.splice(I,1)}for(let I=A;I>0;I--){const k=s(R.length-1),H=R[k];H.p=!1,o(H,!1,!0),c.push(H),R.splice(k,1)}g=v,f==null||f.stop(),E==null||E.stop(),f=h(()=>{d("Too slow"),P()},c.length*v),p=p>0?p:s(3,5)},x=b=>{o(b),g=Math.min(g+5,v),m++,b.p=!0;const C=c.indexOf(b);c.splice(C,1),c.length<=0&&(p--,p>0?h(()=>{d("Round"),S(b)},100):(f==null||f.stop(),E==null||E.stop(),r(m),h(()=>{u("gamescore",{winScore:m})},100)))},T=(b,C,A=!1)=>{if(!M){for(const R of c)if(i({x:b,y:C},R)){x(R);return}if(!A){for(const R of t)if(i({x:b,y:C},R)){o(R,!0),d("Popenalty"),y(R);return}d("Popenalty"),y()}}};a(T),e((b,C)=>T(b,C,!0)),n(()=>{h(()=>{d("Go"),S()})})},Lt=()=>{const{addEventResize:t,rand:o,useScreenMeta:d}=w(),{from:h}=d(),{popEffect:s,render:a}=N(),e=["#00dcfe","#5bb2f7","#92E6E6"],i=h==="opening"?e[0]:e[o(e.length-1)],{render:u,setIntersections:n}=lt({color:i}),{render:r,point:l}=Dt({popEffect:s}),{render:c,point:f}=at({getX:(p,m,g)=>p+Math.round(m*.25)+2*g,getY:(p,m,g)=>p+Math.round(m*.25)+0*g,popEffect:s}),{render:E,point:M}=It({popEffect:s});return t(()=>{const p=M(),m=l(),g=f();n((v,y,P)=>!_({x:v,y,r:P},p)&&!_({x:v,y,r:P},m)&&!_({x:v,y,r:P},g))}),()=>{a(),u(),r(),c(),E()}},Nt=()=>{const{useMeasure:t,addEventResize:o}=w(),d=ut(),{popEffect:h,render:s}=N(),{popits:a,render:e}=ft({palette:d,popEffect:h}),i={mfs:0,dy:0},{splashEffect:u,render:n}=ct(i);return Ft({popits:a,popEffect:h,splashEffect:u}),o(()=>{const r=(a[0].y-a[0].r)/t().m;i.mfs=r,i.dy=r}),()=>{s(),e(),n()}},Ot=()=>{const t="#ff6347",{popEffect:o,render:d}=N(),{setBackground:h}=w(),{minusDifficulty:s}=F(),{render:a}=ft({palette:t,retry:!0,popEffect:o});return h(t),s(),()=>{d(),a()}},Bt=()=>{const{translate:t,useScreenMeta:o}=w(),{plusDifficulty:d}=F(),{data:h}=o(),{popEffect:s,render:a}=N(),{splashEffect:e,render:i}=ct();ut();const{render:u}=ht(h==null?void 0:h.winScore),{render:n}=at({getX:(l,c,f)=>innerWidth>innerHeight?Math.min(l+(c-2*c*.055*1.6)/2+4*f+Math.round(c*.1),innerWidth-2*f-Math.round(c*.1)):l+(c-2*c*.055*1.6)/8+0*Math.round(c*.1)+2*f,getY:(l,c,f)=>innerWidth>innerHeight?l+(c-2*c*.055*1.6)/2-1*f-Math.round(c*.1):Math.min(l+(c-2*c*.055*1.6)/2+4*f+Math.round(c*.1),innerHeight-2*f-Math.round(c*.1)),popEffect:s}),{render:r}=Ht({getX:(l,c,f)=>innerWidth>innerHeight?Math.max(l-(c-2*c*.055*1.6)/2-4*f-Math.round(c*.1),2*f+Math.round(c*.1)):l+(c-2*c*.055*1.6)/8-2*Math.round(c*.1)-2*f,getY:(l,c,f)=>innerWidth>innerHeight?l-(c-2*c*.055*1.6)/2+0*f+Math.round(c*.1):Math.min(l+(c-2*c*.055*1.6)/2+4*f+Math.round(c*.1),innerHeight-2*f-Math.round(c*.1)),popEffect:s});return d(),e("You win"),()=>{a(),innerHeight>innerWidth?t(u,0,-Math.round(innerHeight*.07)):u(),n(),r(),i()}},Yt=()=>{const{addEventResize:t,rand:o}=w(),{popEffect:d,render:h}=N(),s=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],a=s[o(s.length-1)],{render:e,setIntersections:i}=lt({color:a,frequency:10}),{render:u,rect:n,up:r,down:l}=ht(),{render:c,point:f}=Tt({popEffect:d}),{point:E}=Wt(r),{point:M}=kt(l);return t(()=>{const p=f(),m=n(),g=E(),v=M();i((y,P,S)=>!_({x:y,y:P,r:S},p)&&!xt({x:y,y:P,r:S},m)&&!_({x:y,y:P,r:S},g)&&!_({x:y,y:P,r:S},v))}),()=>{h(),e(),u(),c()}},Gt=()=>{const{ctx:t,addEventResize:o,loop:d}=w(),h={x:40,y:100};let s=1,a=1,e;const i=()=>{e=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return i(),o(i),d(()=>{h.x+=2*s,h.y+=3*a,s*=-1,a*=-1}),()=>{t.save();var u=Math.random()*2,n=Math.random()*3;t.translate(u,n),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,e,e),t.fill(),t.restore()}},Xt=[{name:"opening",ctor:Ct},{name:"main",ctor:Lt},{name:"game",ctor:Nt},{name:"gameover",ctor:Ot},{name:"gamescore",ctor:Bt},{name:"score",ctor:Yt},{name:"devs",ctor:Gt}];bt(Xt);document.title="Your's last Pop it";
