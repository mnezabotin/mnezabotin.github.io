(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function h(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const dt=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(e),{ctx:n,render:h,resize:a,rotate:(t,l,d,f)=>{n.save(),n.translate(l,d),n.rotate(Math.PI*f),n.translate(-l,-d),t(),n.restore()},translate:(t,l,d)=>{n.save(),n.translate(l,d),t(),n.restore()},shade:(t,l)=>{t=t.substring(1);const d=parseInt(t,16),f=Math.round(2.55*l),u=(d>>16)+f,m=(d>>8&255)+f,p=(d&255)+f;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(m<255?m<1?0:m:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(t,l)=>{var d;document.body.style.background=t,document.body.style.backgroundColor=l||t,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",l||t)},createImg:(t,l,d=l)=>{const f=document.createElement("canvas"),u=f.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return f.width=l*devicePixelRatio,f.height=d*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),t(u),f}}},lt=e=>{let n="",a="",h;const s=o=>e.find(c=>c.name===o)||e[0],r={render:()=>{},navigate:(o,c)=>{const t=s(o);a=n||"",n=(t==null?void 0:t.name)||"",h=c,r.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:h})};return r},ut=()=>{const e=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),n=[],a={};return{loop:(r,o)=>{if(Object.entries(a).find(([t,l])=>l===r)||o&&a[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&n.push(o),o=o||new Date().valueOf().toString(),a[o]=r;const c=()=>{r(),a[o]&&e(c)};c()},stop:r=>{if(typeof r=="string")delete a[r];else{const o=Object.entries(a).find(([c,t])=>t===r);o&&delete a[o[0]]}},stopAll:()=>{for(const r in a)n.indexOf(r)===-1&&delete a[r]}}};let $=[];const ht=()=>{for(const e of $)clearTimeout(e);$=[]},ft=(e,n=400)=>{let a=new Date,h=n,s=setTimeout(e,h);return $.push(s),{pause:()=>{clearTimeout(s),h-=new Date-a},resume:()=>{a=new Date,clearTimeout(s),s=setTimeout(e,h),$.push(s)},stop:()=>{clearTimeout(s)}}},V=2147483646,B=2147483647,pt=16807,gt=(e=Math.floor(Math.random()*B))=>{e=e%B,e<=0&&(e+=V);const n=()=>(e=e*pt%B,e),a=()=>(n()-1)/V;return(s,i)=>(i===void 0&&(i=s,s=0),Math.floor(a()*(i-s+1))+s)},mt=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Mt=()=>{const e=[],n=[],a=[];return{addEventResize:l=>{l(),e.push(l)},onResizeEvents:()=>e.forEach(l=>l()),addEventClick:l=>n.push(l),onClickEvents:(l,d)=>n.forEach(f=>f(l,d)),addEventMove:l=>a.push(l),onMoveEvents:(l,d)=>a.forEach(f=>f(l,d)),removeAllEvents:()=>{e.splice(0),n.splice(0),a.splice(0)}}},k=(e,n)=>{const a=Math.pow(Math.abs(e.x-n.x),2),h=Math.pow(Math.abs(e.y-n.y),2),s=e.r||0,i=n.r||0,r=Math.pow(s+i,2);return a+h<=r},vt=(e,n)=>{const a=e.r||0,h=n.w||0,s=n.h||0;return Math.abs(n.x+h/2-e.x)<=h/2+a&&Math.abs(n.y+s/2-e.y)<=s/2+a},yt=(e,n)=>k(e,n),Et=e=>{const n={},a=s=>{const i=s.split("/");return i[i.length-1].split(".")[0]};return(()=>{for(const s of e){const i=new Audio(s);i.volume=.25,i.addEventListener("ended",function(){this.currentTime=0});const r=a(s);n[r]={audio:i,path:s}}})(),s=>{var c,t;const i=(c=n[s])==null?void 0:c.audio,r=(t=n[s])==null?void 0:t.path;if(!(!i||!r))if(i.currentTime===0)i.play();else{var o=new Audio(r);o.volume=.25,o.play()}}};let O;const St=(e,n)=>{if(O)throw new Error("Webcore already specified");const a=dt(),h=lt(e),{loop:s,stop:i,stopAll:r}=ut(),{addEventResize:o,onResizeEvents:c,addEventClick:t,onClickEvents:l,addEventMove:d,onMoveEvents:f,removeAllEvents:u}=Mt();let m=innerWidth/2,p=innerHeight/2,M=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:m,cy:p,s:M,m:v}),E=Et([]);O={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(y,w)=>{if(!e.some(S=>S.name===y))throw new Error(`Screen ${y} not specified`);r(),ht(),u(),new Promise(()=>h.navigate(y,w))},loop:s,loopStop:i,useTimer:ft,rand:mt,useRandChain:gt,intersect:yt,addEventResize:o,addEventClick:t,addEventMove:d,playAudio:E},s(()=>a.render(h.render),"draw"),window.onresize=()=>{m=innerWidth/2,p=innerHeight/2,M=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),c()},document.onpointerdown=y=>{l(y.clientX,y.clientY)},document.onmousemove=y=>{f(y.clientX,y.clientY)},h.navigate()},x=()=>{if(!O)throw new Error("Webcore not specified");return{...O}},N={},I=e=>{const{shade:n,ctx:a,createImg:h}=x(),s=()=>{const{r,c:o="#ffffff",p:c}=e,t=a.createRadialGradient(r,r,r,r,r,r/5);return t.addColorStop(0,n(o,0)),t.addColorStop(.01,n(o,0)),t.addColorStop(.075,n(o,9)),t.addColorStop(.15,n(o,0)),t.addColorStop(.15,n(o,-15)),t.addColorStop(.18,n(o,-5)),t.addColorStop(.22,n(o,-15)),c?(t.addColorStop(.24,n(o,-10)),t.addColorStop(.3,n(o,-8)),t.addColorStop(.34,n(o,-12)),t.addColorStop(.6,n(o,-6)),t.addColorStop(1,n(o,-4))):(t.addColorStop(.24,n(o,-12)),t.addColorStop(.26,n(o,-8)),t.addColorStop(.3,n(o,-2)),t.addColorStop(.34,n(o,0)),t.addColorStop(.5,n(o,5)),t.addColorStop(1,n(o,10))),t},i=()=>{const{r,c:o="#ffffff",p:c}=e,t=`${o}_${c?"push":"pop"}_${r}`;if(N[t])return N[t];const l=h((d=a)=>{const f=s();d.fillStyle=f,d.beginPath(),d.arc(r,r,r,0,2*Math.PI),d.closePath(),d.fill()},2*r);return N[t]=l,l};return(r=a)=>{const{x:o,y:c,r:t}=e,l=i();r.drawImage(l,o-t,c-t,2*t,2*t)}},G={},_=e=>{const{ctx:n}=x();let a;return G[e.src]?a=G[e.src]:(a=new Image,a.src=e.src,G[e.src]=a),(h=n)=>{const{w:s,h:i=s,x:r=0,y:o=0}=e;a.complete&&h.drawImage(a,r,o,s,i)}},K=e=>{const{font:n,ctx:a}=x(),h=e.text,s=e.text.length,i=2*Math.PI/s/4;return(r=a)=>{const{x:o,y:c,r:t,s:l=0,fs:d}=e,f=d||Math.round(t/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${f}px ${n}`,r.save(),r.translate(o,c),r.rotate(l);for(let u=0;u<s;u++)r.save(),r.rotate(u*i),r.fillText(h[u],0,-t),r.restore();r.restore()}},Pt=()=>{var g,E;const{ctx:e,loop:n,rotate:a,navigate:h,useMeasure:s,addEventClick:i,addEventResize:r,setBackground:o}=x();o("#040404");let c=!1,t,l,d,f,u,m=-.2,p=0;r(()=>{const{cx:y,cy:w,s:S}=s(),P=Math.round(S*.25);t={c:"#ff6347",x:y,y:w,r:P,p:!1},l=I(t),d=_({x:y-P+Math.round(P*.35),y:w-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),f=K({text:"nezabotin",x:y,y:w,r:Math.round(P*1.1),s:Math.PI*1.6}),u=K({text:"production",x:y,y:w,r:Math.round(P*1.1),s:Math.PI*2.6})});const M=()=>{m+=.01,p=m>=1?1:m,m>=1.8&&(t.p=!0),m>=2.2&&(t.c="#f86a9a"),m>=2.6&&h("main")};i(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(m<y)return m=y,!0})});const v=()=>{n(M),c=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(v):v(),()=>{const{cx:y,cy:w}=s();e.globalAlpha=c?1:0,l(),m<1.8&&d(),m<1.4&&a(()=>{f(),u()},y,w,p),e.globalAlpha=1}},wt=(e="#ba68c8")=>{const{addEventResize:n,useMeasure:a,useTimer:h,useScreenMeta:s,navigate:i,addEventClick:r,intersect:o}=x(),{from:c}=s();let t,l,d;return n(()=>{const{cx:m,cy:p,s:M,m:v}=a(),g=Math.round(M*.25);t={c:e,r:Math.round(M*.08),x:m-g-1*v,y:p-g+1*v,p:(c==="score"||c==="opening")&&!t},l=I(t),d=_({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),h(()=>{t.p=!1}),r((m,p)=>{o({x:m,y:p},t)&&(t.p=!0,h(()=>{i("score")},100))}),{render:()=>{l(),t.p||d()},point:()=>({x:t.x,y:t.y,r:t.r})}},xt=(e="#ff6347")=>{const{addEventResize:n,useMeasure:a,useTimer:h,useScreenMeta:s,navigate:i,addEventClick:r,intersect:o}=x(),{from:c}=s();let t,l,d;return n(()=>{const{s:m}=a(),p=Math.round(m*.08);t={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:c==="main"&&!t},l=I(t),d=_({x:Number(t.x)-p+Math.round(p*.4),y:Number(t.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),h(()=>{t.p=!1}),r((m,p)=>{o({x:m,y:p},t)&&(t.p=!0,h(()=>{i("main")},100))}),{render:()=>{l(),t.p||d()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ct=e=>{const{addEventResize:n,useMeasure:a,useTimer:h,addEventClick:s,intersect:i,rotate:r}=x();let o,c,t;return n(()=>{const{s:f}=a(),u=Math.round(f*.055);o={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},c=I(o),t=_({x:Number(o.x)-u+Math.round(u*.4),y:Number(o.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),s((f,u)=>{i({x:f,y:u},o)&&(o.p=!0,e(),h(()=>{o.p=!1},100))}),{render:()=>{c(),o.p||r(()=>{t()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},bt=e=>{const{addEventResize:n,useMeasure:a,useTimer:h,addEventClick:s,intersect:i,rotate:r}=x();let o,c,t;return n(()=>{const{s:f}=a(),u=Math.round(f*.055);o={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},c=I(o),t=_({x:Number(o.x)-u+Math.round(u*.4),y:Number(o.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),s((f,u)=>{i({x:f,y:u},o)&&(o.p=!0,e(),h(()=>{o.p=!1},100))}),{render:()=>{c(),o.p||r(()=>{t()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},It=e=>{const{ctx:n,shade:a}=x(),h=Math.round(e.r/2.2),s=Math.round(.15*e.r),i=a(e.c||"blue",-3);return(r=n)=>{const{r:o,x:c=o,y:t=o}=e;r.lineCap="round",r.fillStyle=i,r.strokeStyle=i,r.lineWidth=h,r.beginPath(),r.moveTo(c+s,t),r.lineTo(c-s/2,t-s),r.lineTo(c-s/2,t+s),r.closePath(),r.fill(),r.beginPath(),r.moveTo(c+s,t),r.lineTo(c-s/2,t-s),r.moveTo(c-s/2,t-s),r.lineTo(c-s/2,t+s),r.moveTo(c-s/2,t+s),r.lineTo(c+s,t),r.stroke()}},ot=({getX:e,getY:n,color:a="#bef181"})=>{const{addEventResize:h,useMeasure:s,useTimer:i,useScreenMeta:r,navigate:o,addEventClick:c,intersect:t}=x(),{from:l}=r();let d,f,u;return h(()=>{const{cx:M,cy:v,s:g,m:E}=s();d={c:a,r:Math.round(g*.1),x:e(M,g,E),y:n(v,g,E),p:(l==="gamescore"||l==="game"||l==="opening")&&!d},f=I(d),u=It(d)}),i(()=>{d.p=!1}),c((M,v)=>{t({x:M,y:v},d)&&(d.p=!0,i(()=>{o("game")},100))}),{render:()=>{f(),d.p||u()},point:()=>({x:d.x,y:d.y,r:d.r})}},rt=e=>{const{ctx:n,shade:a}=x(),h=Math.round(e.r/4),s=Math.round(.12*e.r);return(i=n)=>{const{r,x:o=r,y:c=r}=e,t=a(e.c||"blue",-3);i.lineCap="round",i.strokeStyle=t,i.lineWidth=h,i.beginPath(),i.moveTo(o-1.5*s,c-2*s),i.lineTo(o-1.5*s,c+2*s),i.stroke(),i.beginPath(),i.moveTo(o+1.5*s,c-2*s),i.lineTo(o+1.5*s,c+2*s),i.stroke()}},Rt=({getX:e,getY:n})=>{const{addEventResize:a,useMeasure:h,useTimer:s,useScreenMeta:i,navigate:r,addEventClick:o,intersect:c}=x(),{from:t}=i();let l,d,f;return a(()=>{const{cx:p,cy:M,s:v,m:g}=h();l={c:"#fd8059",r:Math.round(v*.08),x:e(p,v,g),y:n(M,v,g),p:(t==="game"||t==="opening")&&!l},d=I(l),f=rt(l)}),s(()=>{l.p=!1}),o((p,M)=>{c({x:p,y:M},l)&&(l.p=!0,s(()=>{r("main")},100))}),{render:()=>{d(),l.p||f()},point:()=>({x:l.x,y:l.y,r:l.r})}},J=e=>{const{font:n,ctx:a}=x();return(h=a)=>{const{text:s,x:i,c:r,y:o,fs:c,a:t="center",mw:l}=e;h.textAlign=t,h.fillStyle=r,h.font=`${c}px ${n}`,h.fillText(s,i,o,l)}},Tt=(e="#f86a9a")=>{const{addEventResize:n,useMeasure:a,useTimer:h,useScreenMeta:s,addEventClick:i,intersect:r,navigate:o}=x(),{from:c}=s();let t,l,d,f;return n(()=>{const{cx:p,cy:M,s:v}=a(),g=Math.round(v*.25);t={c:e,x:p,y:M,r:g,p:c==="opening"&&!t},l=I(t),d=J({text:"Yola",c:"#f1f1f1",x:p,y:M-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2}),f=J({text:"PopiT",c:"#ffeb3b",x:p,y:M-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2})}),h(()=>t.p=!1),i((p,M)=>{r({x:p,y:M},t)&&(t.p=!0,h(()=>{o("opening")},100))}),{render:()=>{l(),t.p||(d(),f())},point:()=>({x:t.x,y:t.y,r:t.r})}},st=({color:e="#00dcfe",frequency:n=25})=>{const{addEventResize:a,useRandChain:h,useMeasure:s,rand:i,useTimer:r,setBackground:o,useScreenMeta:c}=x(),{from:t}=c();o(e);const l=i(0,999);let d=[],f=[];a(()=>{const M=h(l),{s:v}=s();d=[];const g=Math.round(v*.05),E=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*E)/(E+1)),w=Math.round(innerHeight/g/2)-1,S=Math.round((innerHeight-2*g*w)/(w+1));for(let P=0;P<w;P++)for(let C=0;C<E;C++)M(M(n))<1&&d.push({x:y+g+C*g*2+y*C,y:S+g+P*g*2+S*P,r:g,c:e,p:t==="opening"?!0:M(1)>0});f=d.map(P=>I(P))});const u=()=>{r(()=>{const M=i(d.length-1);d[M]&&(d[M].p=!d[M].p),u()},750)};return t==="opening"?r(()=>{d.forEach(M=>M.p=i(1)>0),u()}):u(),{render:()=>{f.forEach(M=>M())},setIntersections:M=>{d=d.filter(({x:v,y:g,r:E})=>M(v,g,E)),f=d.map(v=>I(v))}}},Q="ylp",Z="score",tt="difficulty",Y=[.14,.11,.09,.075],et=500,Wt=350,nt=5,D=[];for(let e=0;e*nt<=et-Wt;e++)D.push(et-e*nt);const z=()=>{const e=d=>localStorage.getItem(`${Q}_${d}`),n=(d,f)=>localStorage.setItem(`${Q}_${d}`,f.toString()),a=()=>+(e(Z)||0),h=d=>n(Z,d),s=d=>{const f=a();h(f+d)},i=()=>+(e(tt)||0),r=d=>{const f=i();n(tt,Math.min(Math.max(f+d,0),Y.length*D.length-1))};return{getScore:a,addScore:s,plusDifficulty:()=>r(1),minusDifficulty:()=>r(-1),getDifficultyRad:()=>{const d=i(),f=Math.floor(d/D.length);return Y[f]||Y[1]},getDifficultyTic:()=>{const d=i(),f=Math.floor(d/D.length),u=d-f*D.length;return D[u]||D[0]}}},it=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:h,setBackground:s,rand:i}=x(),{getDifficultyRad:r}=z();return n=[...n.splice(i(n.length-1),n.length),...n],e||a(()=>{const{s:c}=h(),t=r(),l=Math.round(c*t),d=Math.round(innerWidth/l/2)-1,f=(innerWidth-2*l*d)/(d+1),u=Math.round(innerHeight/l/2)-1,m=(innerHeight-2*l*u)/(u+1),p=innerWidth>=innerHeight,M=p?d:u,v=p?f:m,g=p?innerWidth:innerHeight;let E=0;const y=[];for(let S=0;S<M;S++)n[E]||(E=0),y.push(`${n[E]} ${(v+l+S*l*2+v*S)/g*100}%`),E++;s(`linear-gradient(${p?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ct=({palette:e,retry:n})=>{const{addEventResize:a,useMeasure:h,rand:s,useTimer:i,useScreenMeta:r,navigate:o,addEventClick:c,intersect:t}=x(),{from:l}=r(),{getDifficultyRad:d}=z(),f=[];let u=[],m,p,M,v;const g=y=>Array.isArray(e)?e[y]:e;return a(()=>{const{s:y}=h();f.splice(0);const w=d(),S=Math.round(y*w),P=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*P)/(P+1),b=Math.round(innerHeight/S/2)-1,T=(innerHeight-2*S*b)/(b+1),A=innerWidth>=innerHeight;let R=0;for(let W=0;W<b;W++){for(let F=0;F<P;F++){g(R)||(R=0);const U={x:C+S+F*S*2+C*F,y:T+S+W*S*2+T*W,r:S,c:g(R),p:!0};W===0&&F===P-1?(v={...U,p:(l==="main"||l==="gameover"||l==="gamescore")&&!v},m=I(v),p=rt(v)):f.push(U),R+=A?1:0}R=A?0:R+1}n&&(M=f[s(f.length-1)],i(()=>{M.p=!1})),u=f.map(W=>I(W))}),i(()=>{v.p=!1}),n&&c((y,w)=>{t({x:y,y:w},M)&&(M.p=!0,i(()=>{o("game")},100))}),c((y,w)=>{t({x:y,y:w},v)&&(v.p=!0,i(()=>{o("main")},100))}),{render:()=>{u.forEach(y=>y()),m(),v!=null&&v.p||p()},popits:f}},H=100,X=0,L="#222",Ht=e=>{const n=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},j={},Dt=e=>{const{ctx:n,createImg:a,useRandChain:h,useTimer:s}=x();let i,r=!1,o=[];j[e.imgSrc]?i=j[e.imgSrc]:(i=j[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},i.img.src=e.imgSrc);const c=()=>s(()=>{r=!r,c()},250),t=(u,m=n)=>{const{x:p,y:M,c:v,r:g}=u;m.fillStyle=v||"red",m.beginPath(),m.arc(p+g,M+g,g,0,Math.PI*2),m.closePath(),m.fill()},l=()=>{const u=[],m=(e.r*2-2*X)/H;for(let E=0;E<H;E++)for(let y=0;y<H;y++){const w={x:X+y*m,y:X+E*m,r:m/2,c:L};u.push(w)}let p=e.score-e.winScore;const M=[...u],v=h(0),g=(E=!1)=>{const y=v(M.length-1),w=M[y],S=u.indexOf(w);w.c=E?L:i.cols[S],M.splice(y,1),E&&o.push({...w,c:i.cols[S]})};for(let E=p;E>0;E--)g();if(e.winScore){o=[];for(let E=e.winScore;E>0;E--)g(!0);c()}return u},d=()=>{const u=l();i.drawImg=a((m=n)=>{m.fillStyle=L,m.beginPath(),m.rect(0,0,2*e.r,2*e.r),m.closePath(),m.fill(),u.filter(p=>p.c!==L).forEach(p=>t(p,m))},2*e.r)},f=async()=>{var p;const u=document.createElement("canvas");u.width=H,u.height=H;const m=u.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(i.img,0,0);for(let M=0;M<H;M++){const v=[];for(let g=0;g<H;g++){const E=(p=m==null?void 0:m.getImageData(g,M,1,1))==null?void 0:p.data;v.push(Ht(E))}i.cols.push(...v)}i.isFilled=!0,d()};return i.isFilled?(i.r!==e.r||i.score!==e.score)&&d():i.img.onload=f,(u=n)=>{const{x:m,y:p,r:M,winScore:v}=e;if(i.drawImg&&u.drawImage(i.drawImg,m-M,p-M,2*M,2*M),r&&v)for(const g of o)u.fillStyle=g.c||"red",u.beginPath(),u.arc(m-M+g.x+g.r,p-M+g.y+g.r,g.r,0,Math.PI*2),u.closePath(),u.fill()}},q=1e4,at=(e=0)=>{const{addEventResize:n,useMeasure:a,translate:h}=x(),{getScore:s}=z(),i=["/media/cat.png"],r=s();let o,c=0,t=0,l=Math.floor(r/q);return n(()=>{const{cx:p,cy:M,s:v}=a();o=[],c=(v-2*v*.055*1.6)/2,t=v*.05;for(let g=0;g<i.length;g++){const E=i[g];o.push(Dt({x:p,y:M+g*c*2+g*t,r:c,score:r-g*q<0?0:r-g*q,imgSrc:E,winScore:e}))}}),{up:()=>{l=l+1<i.length?l+1:i.length-1},down:()=>{l=l-1<0?0:l-1},render:()=>{h(()=>{o==null||o.forEach(p=>p())},0,-(l*c*2+l*t))},rect:()=>{const{cx:p,cy:M}=a(),v=innerWidth>innerHeight;return{x:v?p-c:0,y:v?0:M-c,w:v?2*c:innerWidth,h:v?innerHeight:2*c}}}},kt=e=>{const{useTimer:n,rand:a,addEventClick:h,addEventMove:s,intersect:i,navigate:r}=x(),{addScore:o,getDifficultyTic:c}=z();let t=[],l,d,f=!1,u=0,m=0,p=0;const M=c(),v=()=>{const S=e.filter(b=>t.indexOf(b)===-1),P=a(S.length-1),C=S[P];C&&(C.p=!1,t.push(S[P]))},g=()=>{d=n(()=>{if(p=Math.max(p-10,250),e.length===t.length){f=!0,d.stop(),n(()=>{r("gameover")});return}v(),g()},p)},E=S=>{t=[];const P=e.length;let C=a(Math.round(P*.3),Math.round(P*.6));const b=[...e];if(S){const T=b.indexOf(S);b.splice(T,1)}for(let T=C;T>0;T--){const A=a(b.length-1),R=b[A];R.p=!1,t.push(R),b.splice(A,1)}p=M,l==null||l.stop(),d==null||d.stop(),l=n(g,t.length*M),u=u>0?u:a(3,5)},y=S=>{p=Math.min(p+5,M),m++,S.p=!0;const P=t.indexOf(S);t.splice(P,1),t.length<=0&&(u--,u>0?E(S):(o(m),r("gamescore",{winScore:m})))},w=(S,P,C=!1)=>{if(!f){for(const b of t)if(i({x:S,y:P},b)){y(b);return}C||v()}};h(w),s((S,P)=>w(S,P,!0)),n(()=>{E()})},zt=()=>{const{addEventResize:e,rand:n}=x(),a=["#00dcfe","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#EFCD74","#fd8059"],h=a[n(a.length-1)],{render:s,setIntersections:i}=st({color:h}),{render:r,point:o}=Tt(),{render:c,point:t}=ot({getX:(f,u,m)=>f+Math.round(u*.25)+2*m,getY:(f,u,m)=>f+Math.round(u*.25)+0*m}),{render:l,point:d}=wt();return e(()=>{const f=d(),u=o(),m=t();i((p,M,v)=>!k({x:p,y:M,r:v},f)&&!k({x:p,y:M,r:v},u)&&!k({x:p,y:M,r:v},m))}),()=>{s(),r(),c(),l()}},At=()=>{const e=it(),{popits:n,render:a}=ct({palette:e});return kt(n),()=>{a()}},Ft=()=>{const e="#ff6347",{setBackground:n}=x(),{minusDifficulty:a}=z(),{render:h}=ct({palette:e,retry:!0});return n(e),a(),()=>{h()}},_t=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:a}=z(),{data:h}=n();it();const{render:s}=at(h==null?void 0:h.winScore),{render:i}=ot({getX:(o,c,t)=>innerWidth>innerHeight?Math.min(o+(c-2*c*.055*1.6)/2+4*t+Math.round(c*.1),innerWidth-2*t-Math.round(c*.1)):o+(c-2*c*.055*1.6)/8+0*Math.round(c*.1)+2*t,getY:(o,c,t)=>innerWidth>innerHeight?o+(c-2*c*.055*1.6)/2-1*t-Math.round(c*.1):Math.min(o+(c-2*c*.055*1.6)/2+4*t+Math.round(c*.1),innerHeight-2*t-Math.round(c*.1))}),{render:r}=Rt({getX:(o,c,t)=>innerWidth>innerHeight?Math.max(o-(c-2*c*.055*1.6)/2-4*t-Math.round(c*.1),2*t+Math.round(c*.1)):o+(c-2*c*.055*1.6)/8-2*Math.round(c*.1)-2*t,getY:(o,c,t)=>innerWidth>innerHeight?o-(c-2*c*.055*1.6)/2+0*t+Math.round(c*.1):Math.min(o+(c-2*c*.055*1.6)/2+4*t+Math.round(c*.1),innerHeight-2*t-Math.round(c*.1))});return a(),()=>{innerHeight>innerWidth?e(s,0,-Math.round(innerHeight*.07)):s(),i(),r()}},Lt=()=>{const{addEventResize:e,rand:n}=x(),a=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],h=a[n(a.length-1)],{render:s,setIntersections:i}=st({color:h,frequency:10}),{render:r,rect:o,up:c,down:t}=at(),{render:l,point:d}=xt(),{point:f}=Ct(c),{point:u}=bt(t);return e(()=>{const m=d(),p=o(),M=f(),v=u();i((g,E,y)=>!k({x:g,y:E,r:y},m)&&!vt({x:g,y:E,r:y},p)&&!k({x:g,y:E,r:y},M)&&!k({x:g,y:E,r:y},v))}),()=>{s(),r(),l()}},$t=()=>{const{ctx:e,addEventResize:n,loop:a}=x(),h={x:40,y:100};let s=1,i=1,r;const o=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),n(o),a(()=>{h.x+=2*s,h.y+=3*i,s*=-1,i*=-1}),()=>{e.save();var c=Math.random()*2,t=Math.random()*3;e.translate(c,t),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,r,r),e.fill(),e.restore()}},Ot=[{name:"opening",ctor:Pt},{name:"main",ctor:zt},{name:"game",ctor:At},{name:"gameover",ctor:Ft},{name:"gamescore",ctor:_t},{name:"score",ctor:Lt},{name:"devs",ctor:$t}];St(Ot);document.title="Your's last Pop it";
