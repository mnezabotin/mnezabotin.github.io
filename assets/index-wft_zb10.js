(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function c(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(o){if(o.ep)return;o.ep=!0;const a=c(o);fetch(o.href,a)}})();const J=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");if(!s)throw new Error("CanvasRenderingContext2D is null");const c=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,s.scale(devicePixelRatio,devicePixelRatio)},f=n=>{s.clearRect(0,0,innerWidth,innerHeight),n()};return c(),document.body.appendChild(e),{ctx:s,render:f,resize:c,rotate:(n,d,u,p)=>{s.save(),s.translate(d,u),s.rotate(Math.PI*p),s.translate(-d,-u),n(),s.restore()},translate:(n,d,u)=>{s.save(),s.translate(d,u),n(),s.restore()},shade:(n,d)=>{n=n.substring(1);const u=parseInt(n,16),p=Math.round(2.55*d),h=(u>>16)+p,l=(u>>8&255)+p,m=(u&255)+p;return"#"+(16777216+(h<255?h<1?0:h:255)*65536+(l<255?l<1?0:l:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},setBackground:(n,d)=>{var u;document.body.style.background=n,document.body.style.backgroundColor=d||n,(u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",d||n)},createImg:(n,d,u=d)=>{const p=document.createElement("canvas"),h=p.getContext("2d");if(!h)throw new Error("CanvasRenderingContext2D is null");return p.width=d*devicePixelRatio,p.height=u*devicePixelRatio,h.scale(devicePixelRatio,devicePixelRatio),n(h),p}}},Q=e=>{let s="",c="",f;const o=t=>e.find(i=>i.name===t)||e[0],r={render:()=>{},navigate:(t,i)=>{const n=o(t);c=s||"",s=(n==null?void 0:n.name)||"",f=i,r.render=(n==null?void 0:n.ctor())||(()=>{})},useScreenMeta:()=>({to:s,from:c,data:f})};return r},Z=()=>{const e=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),s=[],c={};return{loop:(r,t)=>{if(Object.entries(c).find(([n,d])=>d===r)||t&&c[t])throw new Error(`Loop${t?" "+t:""} already specified`);t&&s.push(t),t=t||new Date().valueOf().toString(),c[t]=r;const i=()=>{r(),c[t]&&e(i)};i()},stop:r=>{if(typeof r=="string")delete c[r];else{const t=Object.entries(c).find(([i,n])=>n===r);t&&delete c[t[0]]}},stopAll:()=>{for(const r in c)s.indexOf(r)===-1&&delete c[r]}}};let H=[];const ee=()=>{for(const e of H)clearTimeout(e);H=[]},te=(e,s=400)=>{let c=new Date,f=s,o=setTimeout(e,f);return H.push(o),{pause:()=>{clearTimeout(o),f-=new Date-c},resume:()=>{c=new Date,clearTimeout(o),o=setTimeout(e,f),H.push(o)},stop:()=>{clearTimeout(o)}}},j=2147483646,O=2147483647,ne=16807,oe=(e=Math.floor(Math.random()*O))=>{e=e%O,e<=0&&(e+=j);const s=()=>(e=e*ne%O,e),c=()=>(s()-1)/j;return(o,a)=>(a===void 0&&(a=o,o=0),Math.floor(c()*(a-o+1))+o)},re=(e,s)=>(s===void 0&&(s=e,e=0),Math.floor(Math.random()*(s-e+1))+e),se=()=>{const e=[],s=[];return{addEventResize:t=>{t(),e.push(t)},onResizeEvents:()=>e.forEach(t=>t()),addEventClick:t=>{s.push(t)},onClickEvents:(t,i)=>s.forEach(n=>n(t,i)),removeAllEvents:()=>{e.splice(0),s.splice(0)}}},I=(e,s)=>{const c=Math.pow(Math.abs(e.x-s.x),2),f=Math.pow(Math.abs(e.y-s.y),2),o=e.r||0,a=s.r||0,r=Math.pow(o+a,2);return c+f<=r},ie=(e,s)=>{const c=e.r||0,f=s.w||0,o=s.h||0;return Math.abs(s.x+f/2-e.x)<=f/2+c&&Math.abs(s.y+o/2-e.y)<=o/2+c},ce=(e,s)=>I(e,s),ae=e=>{const s={},c=o=>{const a=o.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const o of e){const a=new Audio(o);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const r=c(o);s[r]={audio:a,path:o}}})(),o=>{var i,n;const a=(i=s[o])==null?void 0:i.audio,r=(n=s[o])==null?void 0:n.path;if(!(!a||!r))if(a.currentTime===0)a.play();else{var t=new Audio(r);t.volume=.25,t.play()}}};let B;const de=(e,s)=>{if(B)throw new Error("Webcore already specified");const c=J(),f=Q(e),{loop:o,stop:a,stopAll:r}=Z(),{addEventResize:t,onResizeEvents:i,addEventClick:n,onClickEvents:d,removeAllEvents:u}=se();let p=innerWidth/2,h=innerHeight/2,l=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const M=()=>({cx:p,cy:h,s:l,m}),g=ae([]);B={font:"Tijuf",ctx:c.ctx,shade:c.shade,rotate:c.rotate,translate:c.translate,setBackground:c.setBackground,createImg:c.createImg,useMeasure:M,useScreenMeta:f.useScreenMeta,navigate:(E,y)=>{if(!e.some(v=>v.name===E))throw new Error(`Screen ${E} not specified`);r(),ee(),u(),new Promise(()=>f.navigate(E,y))},loop:o,loopStop:a,useTimer:te,rand:re,useRandChain:oe,intersect:ce,addEventResize:t,addEventClick:n,playAudio:g},o(()=>c.render(f.render),"draw"),window.onresize=()=>{p=innerWidth/2,h=innerHeight/2,l=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),c.resize(),i()},document.onpointerdown=E=>{d(E.clientX,E.clientY)},f.navigate()},P=()=>{if(!B)throw new Error("Webcore not specified");return{...B}},F={},b=e=>{const{shade:s,ctx:c,createImg:f}=P(),o=()=>{const{r,c:t="#ffffff",p:i}=e,n=c.createRadialGradient(r,r,r,r,r,r/5);return n.addColorStop(0,s(t,0)),n.addColorStop(.01,s(t,0)),n.addColorStop(.075,s(t,9)),n.addColorStop(.15,s(t,0)),n.addColorStop(.15,s(t,-15)),n.addColorStop(.18,s(t,-5)),n.addColorStop(.22,s(t,-15)),i?(n.addColorStop(.24,s(t,-10)),n.addColorStop(.3,s(t,-8)),n.addColorStop(.34,s(t,-12)),n.addColorStop(.6,s(t,-6)),n.addColorStop(1,s(t,-4))):(n.addColorStop(.24,s(t,-12)),n.addColorStop(.26,s(t,-8)),n.addColorStop(.3,s(t,-2)),n.addColorStop(.34,s(t,0)),n.addColorStop(.5,s(t,5)),n.addColorStop(1,s(t,10))),n},a=()=>{const{r,c:t="#ffffff",p:i}=e,n=`${t}_${i?"push":"pop"}_${r}`;if(F[n])return F[n];const d=f((u=c)=>{const p=o();u.fillStyle=p,u.beginPath(),u.arc(r,r,r,0,2*Math.PI),u.closePath(),u.fill()},2*r);return F[n]=d,d};return(r=c)=>{const{x:t,y:i,r:n}=e,d=a();r.drawImage(d,t-n,i-n,2*n,2*n)}},N={},W=e=>{const{ctx:s}=P();let c;return N[e.src]?c=N[e.src]:(c=new Image,c.src=e.src,N[e.src]=c),(f=s)=>{const{w:o,h:a=o,x:r=0,y:t=0}=e;c.complete&&f.drawImage(c,r,t,o,a)}},q=e=>{const{font:s,ctx:c}=P(),f=e.text,o=e.text.length,a=2*Math.PI/o/4;return(r=c)=>{const{x:t,y:i,r:n,s:d=0,fs:u}=e,p=u||Math.round(n/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${p}px ${s}`,r.save(),r.translate(t,i),r.rotate(d);for(let h=0;h<o;h++)r.save(),r.rotate(h*a),r.fillText(f[h],0,-n),r.restore();r.restore()}},le=()=>{var E,y;const{ctx:e,loop:s,rotate:c,navigate:f,useMeasure:o,addEventClick:a,addEventResize:r,setBackground:t}=P();t("#040404");let i=!1,n,d,u,p,h,l=-.2,m=0;r(()=>{const{cx:v,cy:S,s:x}=o(),w=Math.round(x*.25);n={c:"#ff6347",x:v,y:S,r:w,p:!1},d=b(n),u=W({x:v-w+Math.round(w*.35),y:S-w+Math.round(w*.35),w:w*2-Math.round(w*.7),src:"/media/sloth.svg"}),p=q({text:"nezabotin",x:v,y:S,r:Math.round(w*1.1),s:Math.PI*1.6}),h=q({text:"production",x:v,y:S,r:Math.round(w*1.1),s:Math.PI*2.6})});const M=()=>{l+=.01,m=l>=1?1:l,l>=1.8&&(n.p=!0),l>=2.2&&(n.c="#f86a9a"),l>=2.6&&f("main")};a(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(l<v)return l=v,!0})});const g=()=>{s(M),i=!0};return(E=document==null?void 0:document.fonts)!=null&&E.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(g):g(),()=>{const{cx:v,cy:S}=o();e.globalAlpha=i?1:0,d(),l<1.8&&u(),l<1.4&&c(()=>{p(),h()},v,S,m),e.globalAlpha=1}},ue=()=>{const{addEventResize:e,useMeasure:s,useTimer:c,useScreenMeta:f,navigate:o,addEventClick:a,intersect:r}=P(),{from:t}=f();let i,n,d;return e(()=>{const{cx:h,cy:l,s:m,m:M}=s(),g=Math.round(m*.25);i={c:"#ba68c8",r:Math.round(m*.08),x:h-g-1*M,y:l-g+1*M,p:(t==="score"||t==="opening")&&!i},n=b(i),d=W({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),c(()=>{i.p=!1}),a((h,l)=>{r({x:h,y:l},i)&&(i.p=!0,c(()=>{o("score")},100))}),{render:()=>{n(),i.p||d()},point:()=>({x:i.x,y:i.y,r:i.r})}},he=()=>{const{addEventResize:e,useMeasure:s,useTimer:c,useScreenMeta:f,navigate:o,addEventClick:a,intersect:r}=P(),{from:t}=f();let i,n,d;return e(()=>{const{s:h}=s(),l=Math.round(h*.08);i={c:"#ff6347",r:l,x:Math.round(1.6*l),y:Math.round(1.6*l),p:t==="main"&&!i},n=b(i),d=W({x:Number(i.x)-l+Math.round(l*.4),y:Number(i.y)-l+Math.round(l*.4),w:l*2-Math.round(l*.8),src:"/media/back.svg"})}),c(()=>{i.p=!1}),a((h,l)=>{r({x:h,y:l},i)&&(i.p=!0,c(()=>{o("main")},100))}),{render:()=>{n(),i.p||d()},point:()=>({x:i.x,y:i.y,r:i.r})}},fe=e=>{const{addEventResize:s,useMeasure:c,useTimer:f,addEventClick:o,intersect:a,rotate:r}=P();let t,i,n;return s(()=>{const{s:p}=c(),h=Math.round(p*.055);t={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h),p:!1},i=b(t),n=W({x:Number(t.x)-h+Math.round(h*.4),y:Number(t.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),o((p,h)=>{a({x:p,y:h},t)&&(t.p=!0,e(),f(()=>{t.p=!1},100))}),{render:()=>{i(),t.p||r(()=>{n()},t.x,t.y,-.5)},point:()=>({x:t.x,y:t.y,r:t.r})}},pe=e=>{const{addEventResize:s,useMeasure:c,useTimer:f,addEventClick:o,intersect:a,rotate:r}=P();let t,i,n;return s(()=>{const{s:p}=c(),h=Math.round(p*.055);t={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h-2*h-.3*h),p:!1},i=b(t),n=W({x:Number(t.x)-h+Math.round(h*.4),y:Number(t.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),o((p,h)=>{a({x:p,y:h},t)&&(t.p=!0,e(),f(()=>{t.p=!1},100))}),{render:()=>{i(),t.p||r(()=>{n()},t.x,t.y,.5)},point:()=>({x:t.x,y:t.y,r:t.r})}},me=e=>{const{ctx:s,shade:c}=P(),f=Math.round(e.r/2.2),o=Math.round(.15*e.r),a=c(e.c||"blue",-3);return(r=s)=>{const{r:t,x:i=t,y:n=t}=e;r.lineCap="round",r.fillStyle=a,r.strokeStyle=a,r.lineWidth=f,r.beginPath(),r.moveTo(i+o,n),r.lineTo(i-o/2,n-o),r.lineTo(i-o/2,n+o),r.closePath(),r.fill(),r.beginPath(),r.moveTo(i+o,n),r.lineTo(i-o/2,n-o),r.moveTo(i-o/2,n-o),r.lineTo(i-o/2,n+o),r.moveTo(i-o/2,n+o),r.lineTo(i+o,n),r.stroke()}},ge=()=>{const{addEventResize:e,useMeasure:s,useTimer:c,useScreenMeta:f,navigate:o,addEventClick:a,intersect:r}=P(),{from:t}=f();let i,n,d;return e(()=>{const{cx:h,cy:l,s:m,m:M}=s(),g=Math.round(m*.25);i={c:"#bef181",r:Math.round(m*.1),x:h+g+2*M,y:l+g,p:(t==="game"||t==="opening")&&!i},n=b(i),d=me(i)}),c(()=>{i.p=!1}),a((h,l)=>{r({x:h,y:l},i)&&(i.p=!0,c(()=>{o("game")},100))}),{render:()=>{n(),i.p||d()},point:()=>({x:i.x,y:i.y,r:i.r})}},X=e=>{const{font:s,ctx:c}=P();return(f=c)=>{const{text:o,x:a,c:r,y:t,fs:i,a:n="center",mw:d}=e;f.textAlign=n,f.fillStyle=r,f.font=`${i}px ${s}`,f.fillText(o,a,t,d)}},Me=()=>{const{addEventResize:e,useMeasure:s,useTimer:c,useScreenMeta:f}=P(),{from:o}=f();let a,r,t,i;return e(()=>{const{cx:u,cy:p,s:h}=s(),l=Math.round(h*.25);a={c:"#f86a9a",x:u,y:p,r:l,p:o==="opening"&&!a},r=b(a),t=X({text:"Yola",c:"#f1f1f1",x:u,y:p-l+Math.round(l*.9),fs:Math.round(l/2.6),mw:l*2}),i=X({text:"PopiT",c:"#ffeb3b",x:u,y:p-l+Math.round(l*1.3),fs:Math.round(l/2.3),mw:l*2})}),c(()=>a.p=!1),{render:()=>{r(),a.p||(t(),i())},point:()=>({x:a.x,y:a.y,r:a.r})}},U=(e="#00dcfe")=>{const{addEventResize:s,useRandChain:c,useMeasure:f,rand:o,useTimer:a,setBackground:r,useScreenMeta:t}=P(),{from:i}=t();r(e);const n=o(0,999);let d=[],u=[];s(()=>{const m=c(n),{s:M}=f();d=[];const g=Math.round(M*.05),E=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*E)/(E+1)),v=Math.round(innerHeight/g/2)-1,S=Math.round((innerHeight-2*g*v)/(v+1));for(let x=0;x<v;x++)for(let w=0;w<E;w++)m(m(25))<1&&d.push({x:y+g+w*g*2+y*w,y:S+g+x*g*2+S*x,r:g,c:e,p:i==="opening"?!0:m(1)>0});u=d.map(x=>b(x))});const p=()=>{a(()=>{const m=o(d.length-1);d[m]&&(d[m].p=!d[m].p),p()})};return i==="opening"?a(()=>{d.forEach(m=>m.p=o(1)>0),p()}):p(),{render:()=>{u.forEach(m=>m())},setIntersections:m=>{d=d.filter(({x:M,y:g,r:E})=>m(M,g,E)),u=d.map(M=>b(M))}}},V=(e=!1)=>{const s=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"],{addEventResize:c,useMeasure:f,setBackground:o}=P();return e||c(()=>{const{s:r}=f(),t=Math.round(r*.14),i=Math.round(innerWidth/t/2)-1,n=(innerWidth-2*t*i)/(i+1),d=Math.round(innerHeight/t/2)-1,u=(innerHeight-2*t*d)/(d+1),p=innerWidth>=innerHeight,h=p?i:d,l=p?n:u,m=p?innerWidth:innerHeight;let M=0;const g=[];for(let y=0;y<h;y++)s[M]||(M=0),g.push(`${s[M]} ${(l+t+y*t*2+l*y)/m*100}%`),M++;o(`linear-gradient(${p?"to right":"to bottom"}, ${g.join(", ")})`,s[0])}),s},ve=e=>{const{ctx:s,shade:c}=P(),f=Math.round(e.r/4),o=Math.round(.12*e.r);return(a=s)=>{const{r,x:t=r,y:i=r}=e,n=c(e.c||"blue",-3);a.lineCap="round",a.strokeStyle=n,a.lineWidth=f,a.beginPath(),a.moveTo(t-1.5*o,i-2*o),a.lineTo(t-1.5*o,i+2*o),a.stroke(),a.beginPath(),a.moveTo(t+1.5*o,i-2*o),a.lineTo(t+1.5*o,i+2*o),a.stroke()}},Y=({palette:e,retry:s})=>{const{addEventResize:c,useMeasure:f,rand:o,useTimer:a,useScreenMeta:r,navigate:t,addEventClick:i,intersect:n}=P(),{from:d}=r(),u=[];let p=[],h,l,m,M;const g=y=>Array.isArray(e)?e[y]:e;return c(()=>{const{s:y}=f();u.splice(0);const v=Math.round(y*.14),S=Math.round(innerWidth/v/2)-1,x=(innerWidth-2*v*S)/(S+1),w=Math.round(innerHeight/v/2)-1,$=(innerHeight-2*v*w)/(w+1),G=innerWidth>=innerHeight;let T=0;for(let C=0;C<w;C++){for(let z=0;z<S;z++){g(T)||(T=0);const _={x:x+v+z*v*2+x*z,y:$+v+C*v*2+$*C,r:v,c:g(T),p:!0};C===0&&z===S-1?(M={..._,p:(d==="main"||d==="gameover"||d==="gamescore")&&!M},h=b(M),l=ve(M)):u.push(_),T+=G?1:0}T=G?0:T+1}s&&(m=u[o(u.length-1)],a(()=>{m.p=!1})),p=u.map(C=>b(C))}),a(()=>{M.p=!1}),s&&i((y,v)=>{n({x:y,y:v},m)&&(m.p=!0,a(()=>{t("game")},100))}),i((y,v)=>{n({x:y,y:v},M)&&(M.p=!0,a(()=>{t("main")},100))}),{render:()=>{p.forEach(y=>y()),h(),M!=null&&M.p||l()},popits:u}},R=100,L=2,k="#222",ye=e=>{const s=(e==null?void 0:e[0])||0,c=(e==null?void 0:e[1])||0,f=(e==null?void 0:e[2])||0;return"#"+(16777216+(s<255?s<1?0:s:255)*65536+(c<255?c<1?0:c:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},D={},Ee=e=>{const{ctx:s,shade:c,createImg:f}=P();let o;D[e.imgSrc]?o=D[e.imgSrc]:(o=D[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},o.img.src=e.imgSrc);const a=(n,d=s)=>{const{x:u,y:p,c:h,r:l,p:m}=n;m?(d.fillStyle=c(h,5),d.beginPath(),d.arc(u+l,p+l,l,0,Math.PI*2),d.closePath(),d.fill()):(d.fillStyle=h,d.beginPath(),d.arc(u+l,p+l,l+2,0,Math.PI*2),d.closePath(),d.fill())},r=()=>{const n=[],d=(e.r*2-2*L)/R;for(let u=0;u<R;u++)for(let p=0;p<R;p++){const h={x:L+p*d,y:L+u*d,r:d/2,c:u*100+p>=e.score?k:o.cols[p][u]};n.push(h)}return n},t=()=>{const n=r();o.drawImg=f((d=s)=>{n.filter(u=>u.c===k).forEach(u=>a(u,d)),n.filter(u=>u.c!==k).forEach(u=>a(u,d)),n.filter(u=>u.c!==k).forEach(u=>a({...u,p:!0},d))},2*e.r)},i=async()=>{var u;const n=document.createElement("canvas");n.width=R,n.height=R;const d=n.getContext("2d",{willReadFrequently:!0});d==null||d.drawImage(o.img,0,0);for(let p=0;p<R;p++){const h=[];for(let l=0;l<R;l++){const m=(u=d==null?void 0:d.getImageData(p,l,1,1))==null?void 0:u.data;h.push(ye(m))}o.cols.push(h)}o.isFilled=!0,t()};return o.isFilled?(o.r!==e.r||o.score!==e.score)&&t():o.img.onload=i,(n=s)=>{const{x:d,y:u,r:p}=e;o.drawImg&&n.drawImage(o.drawImg,d-p,u-p,2*p,2*p)}},A=1e4,K=()=>{const{addEventResize:e,useMeasure:s,translate:c,rand:f}=P(),o=["/media/cat.png"],a=f(o.length*A);let r,t=0,i=0,n=Math.floor(a/A);return e(()=>{const{cx:l,cy:m,s:M}=s();r=[],t=(M-2*M*.055*1.6)/2,i=M*.05;for(let g=0;g<o.length;g++){const E=o[g];r.push(Ee({x:l,y:m+g*t*2+g*i,r:t,score:a-g*A<0?0:a-g*A,imgSrc:E}))}}),{up:()=>{n=n+1<o.length?n+1:o.length-1},down:()=>{n=n-1<0?0:n-1},render:()=>{c(()=>{r==null||r.forEach(l=>l())},0,-(n*t*2+n*i))},rect:()=>{const{cx:l}=s();return{x:l-t,y:0,w:2*t,h:innerHeight}}}},Pe=e=>{const{useTimer:s,rand:c,addEventClick:f,intersect:o,navigate:a}=P();let r=[],t,i,n=!1,d=0;const u=()=>{i=s(()=>{if(e.length===r.length){n=!0,i.stop(),s(()=>{a("gameover")});return}const l=e.filter(g=>r.indexOf(g)===-1),m=c(l.length-1),M=l[m];M&&(M.p=!1,r.push(l[m])),u()})},p=l=>{r=[];const m=e.length;let M=c(Math.round(m*.3),Math.round(m*.6));const g=[...e];if(l){const E=g.indexOf(l);g.splice(E,1)}for(let E=M;E>0;E--){const y=c(g.length-1),v=g[y];v.p=!1,r.push(v),g.splice(y,1)}t==null||t.stop(),i==null||i.stop(),t=s(u,r.length*250),d=d>0?d:c(3,5)},h=l=>{l.p=!0;const m=r.indexOf(l);r.splice(m,1),r.length<=0&&(d--,d>0?p(l):a("gamescore"))};f((l,m)=>{if(!n)for(const M of r)o({x:l,y:m},M)&&h(M)}),s(()=>{p()})},we=()=>{const{addEventResize:e}=P(),{render:s,setIntersections:c}=U(),{render:f,point:o}=Me(),{render:a,point:r}=ge(),{render:t,point:i}=ue();return e(()=>{const n=i(),d=o(),u=r();c((p,h,l)=>!I({x:p,y:h,r:l},n)&&!I({x:p,y:h,r:l},d)&&!I({x:p,y:h,r:l},u))}),()=>{s(),f(),a(),t()}},Se=()=>{const e=V(),{popits:s,render:c}=Y({palette:e});return Pe(s),()=>{c()}},xe=()=>{const e="#ff6347",{setBackground:s}=P(),{render:c}=Y({palette:e,retry:!0});return s(e),()=>{c()}},be=()=>{const{addEventClick:e,navigate:s}=P();V();const{render:c}=K();return e(()=>{s("game")}),()=>{c()}},Ce=()=>{const{addEventResize:e}=P(),{render:s,setIntersections:c}=U("#ffeb3b"),{render:f,rect:o,up:a,down:r}=K(),{render:t,point:i}=he(),{point:n}=fe(a),{point:d}=pe(r);return e(()=>{const u=i(),p=o(),h=n(),l=d();c((m,M,g)=>!I({x:m,y:M,r:g},u)&&!ie({x:m,y:M,r:g},p)&&!I({x:m,y:M,r:g},h)&&!I({x:m,y:M,r:g},l))}),()=>{s(),f(),t()}},Re=()=>{const{ctx:e,addEventResize:s,loop:c}=P(),f={x:40,y:100};let o=1,a=1,r;const t=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return t(),s(t),c(()=>{f.x+=2*o,f.y+=3*a,o*=-1,a*=-1}),()=>{e.save();var i=Math.random()*2,n=Math.random()*3;e.translate(i,n),e.beginPath(),e.fillStyle="red",e.rect(f.x,f.y,r,r),e.fill(),e.restore()}},Ie=[{name:"opening",ctor:le},{name:"main",ctor:we},{name:"game",ctor:Se},{name:"gameover",ctor:xe},{name:"gamescore",ctor:be},{name:"score",ctor:Ce},{name:"devs",ctor:Re}];de(Ie);document.title="Your's last PopiT";
