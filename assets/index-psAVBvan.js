(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function u(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function f(e){if(e.ep)return;e.ep=!0;const i=u(e);fetch(e.href,i)}})();const ht=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const u=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},f=s=>{n.clearRect(0,0,innerWidth,innerHeight),s()};return u(),document.body.appendChild(t),{ctx:n,render:f,resize:u,rotate:(s,c,a,d)=>{n.save(),n.translate(c,a),n.rotate(Math.PI*d),n.translate(-c,-a),s(),n.restore()},translate:(s,c,a)=>{n.save(),n.translate(c,a),s(),n.restore()},shade:(s,c)=>{s=s.substring(1);const a=parseInt(s,16),d=Math.round(2.55*c),h=(a>>16)+d,P=(a>>8&255)+d,M=(a&255)+d;return"#"+(16777216+(h<255?h<1?0:h:255)*65536+(P<255?P<1?0:P:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(s,c)=>{var a;document.body.style.background=s,document.body.style.backgroundColor=c||s,(a=document.querySelector('meta[name="theme-color"]'))==null||a.setAttribute("content",c||s)},createImg:(s,c,a=c)=>{const d=document.createElement("canvas"),h=d.getContext("2d");if(!h)throw new Error("CanvasRenderingContext2D is null");return d.width=c*devicePixelRatio,d.height=a*devicePixelRatio,h.scale(devicePixelRatio,devicePixelRatio),s(h),d}}},pt=t=>{let n="",u="",f;const e=o=>t.find(l=>l.name===o)||t[0],r={render:()=>{},navigate:(o,l)=>{const s=e(o);u=n||"",n=(s==null?void 0:s.name)||"",f=l,r.render=(s==null?void 0:s.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:u,data:f})};return r},gt=()=>{const t=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),n=[],u={};return{loop:(r,o)=>{if(Object.entries(u).find(([s,c])=>c===r)||o&&u[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&n.push(o),o=o||new Date().valueOf().toString(),u[o]=r;const l=()=>{r(),u[o]&&t(l)};l()},stop:r=>{if(typeof r=="string")delete u[r];else{const o=Object.entries(u).find(([l,s])=>s===r);o&&delete u[o[0]]}},stopAll:()=>{for(const r in u)n.indexOf(r)===-1&&delete u[r]}}};let G=[];const mt=()=>{for(const t of G)clearTimeout(t);G=[]},Mt=(t,n=400)=>{let u=new Date,f=n,e=setTimeout(t,f);return G.push(e),{pause:()=>{clearTimeout(e),f-=new Date-u},resume:()=>{u=new Date,clearTimeout(e),e=setTimeout(t,f),G.push(e)},stop:()=>{clearTimeout(e)}}},tt=2147483646,X=2147483647,yt=16807,vt=(t=Math.floor(Math.random()*X))=>{t=t%X,t<=0&&(t+=tt);const n=()=>(t=t*yt%X,t),u=()=>(n()-1)/tt;return(e,i)=>(i===void 0&&(i=e,e=0),Math.floor(u()*(i-e+1))+e)},Et=(t,n)=>(n===void 0&&(n=t,t=0),Math.floor(Math.random()*(n-t+1))+t),Pt=()=>{const t=[],n=[],u=[];return{addEventResize:c=>{c(),t.push(c)},onResizeEvents:()=>t.forEach(c=>c()),addEventClick:c=>n.push(c),onClickEvents:(c,a)=>n.forEach(d=>d(c,a)),addEventMove:c=>u.push(c),onMoveEvents:(c,a)=>u.forEach(d=>d(c,a)),removeAllEvents:()=>{t.splice(0),n.splice(0),u.splice(0)}}},z=(t,n)=>{const u=Math.pow(Math.abs(t.x-n.x),2),f=Math.pow(Math.abs(t.y-n.y),2),e=t.r||0,i=n.r||0,r=Math.pow(e+i,2);return u+f<=r},St=(t,n)=>{const u=t.r||0,f=n.w||0,e=n.h||0;return Math.abs(n.x+f/2-t.x)<=f/2+u&&Math.abs(n.y+e/2-t.y)<=e/2+u},wt=(t,n)=>z(t,n),xt=t=>{const n={},u=e=>{const i=e.split("/");return i[i.length-1].split(".")[0]};return(()=>{for(const e of t){const i=new Audio(e);i.volume=.25,i.addEventListener("ended",function(){this.currentTime=0});const r=u(e);n[r]={audio:i,path:e}}})(),e=>{var l,s;const i=(l=n[e])==null?void 0:l.audio,r=(s=n[e])==null?void 0:s.path;if(!(!i||!r))if(i.currentTime===0)i.play();else{var o=new Audio(r);o.volume=.25,o.play()}}};let Y;const Rt=(t,n)=>{if(Y)throw new Error("Webcore already specified");const u=ht(),f=pt(t),{loop:e,stop:i,stopAll:r}=gt(),{addEventResize:o,onResizeEvents:l,addEventClick:s,onClickEvents:c,addEventMove:a,onMoveEvents:d,removeAllEvents:h}=Pt();let P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const m=()=>({cx:P,cy:M,s:p,m:g}),v=xt([]);Y={font:"Tijuf",ctx:u.ctx,shade:u.shade,rotate:u.rotate,translate:u.translate,setBackground:u.setBackground,createImg:u.createImg,useMeasure:m,useScreenMeta:f.useScreenMeta,navigate:(y,E)=>{if(!t.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);r(),mt(),h(),new Promise(()=>f.navigate(y,E))},loop:e,loopStop:i,useTimer:Mt,rand:Et,useRandChain:vt,intersect:wt,addEventResize:o,addEventClick:s,addEventMove:a,playAudio:v},e(()=>u.render(f.render),"draw"),window.onresize=()=>{P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),u.resize(),l()},document.onpointerdown=y=>{c(y.clientX,y.clientY)},document.onmousemove=y=>{d(y.clientX,y.clientY)},f.navigate()},R=()=>{if(!Y)throw new Error("Webcore not specified");return{...Y}},j={},I=t=>{const{shade:n,ctx:u,createImg:f}=R(),e=()=>{const{r,c:o="#ffffff",p:l}=t,s=u.createRadialGradient(r,r,r,r,r,r/5);return s.addColorStop(0,n(o,0)),s.addColorStop(.01,n(o,0)),s.addColorStop(.075,n(o,9)),s.addColorStop(.15,n(o,0)),s.addColorStop(.15,n(o,-15)),s.addColorStop(.18,n(o,-5)),s.addColorStop(.22,n(o,-15)),l?(s.addColorStop(.24,n(o,-10)),s.addColorStop(.3,n(o,-8)),s.addColorStop(.34,n(o,-12)),s.addColorStop(.6,n(o,-6)),s.addColorStop(1,n(o,-4))):(s.addColorStop(.24,n(o,-12)),s.addColorStop(.26,n(o,-8)),s.addColorStop(.3,n(o,-2)),s.addColorStop(.34,n(o,0)),s.addColorStop(.5,n(o,5)),s.addColorStop(1,n(o,10))),s},i=()=>{const{r,c:o="#ffffff",p:l}=t,s=`${o}_${l?"push":"pop"}_${r}`;if(j[s])return j[s];const c=f((a=u)=>{const d=e();a.fillStyle=d,a.beginPath(),a.arc(r,r,r,0,2*Math.PI),a.closePath(),a.fill()},2*r);return j[s]=c,c};return(r=u)=>{const{x:o,y:l,r:s}=t,c=i();r.drawImage(c,o-s,l-s,2*s,2*s)}},q={},$=t=>{const{ctx:n}=R();let u;return q[t.src]?u=q[t.src]:(u=new Image,u.src=t.src,q[t.src]=u),(f=n)=>{const{w:e,h:i=e,x:r=0,y:o=0}=t;u.complete&&f.drawImage(u,r,o,e,i)}},et=t=>{const{font:n,ctx:u}=R(),f=t.text,e=t.text.length,i=2*Math.PI/e/4;return(r=u)=>{const{x:o,y:l,r:s,s:c=0,fs:a}=t,d=a||Math.round(s/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${d}px ${n}`,r.save(),r.translate(o,l),r.rotate(c);for(let h=0;h<e;h++)r.save(),r.rotate(h*i),r.fillText(f[h],0,-s),r.restore();r.restore()}},bt=()=>{var m,v;const{ctx:t,loop:n,rotate:u,navigate:f,useMeasure:e,addEventClick:i,addEventResize:r,setBackground:o}=R();o("#040404");let l=!1,s,c,a,d,h,P=-.2,M=0;r(()=>{const{cx:y,cy:E,s:w}=e(),S=Math.round(w*.25);s={c:"#ff6347",x:y,y:E,r:S,p:!1},c=I(s),a=$({x:y-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),d=et({text:"nezabotin",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),h=et({text:"production",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{P+=.01,M=P>=1?1:P,P>=1.8&&(s.p=!0),P>=2.2&&(s.c="#f86a9a"),P>=2.6&&f("main")};i(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(P<y)return P=y,!0})});const g=()=>{n(p),l=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(g):g(),()=>{const{cx:y,cy:E}=e();t.globalAlpha=l?1:0,c(),P<1.8&&a(),P<1.4&&u(()=>{d(),h()},y,E,M),t.globalAlpha=1}},L=100/2,N=()=>{const{loop:t,ctx:n,shade:u}=R(),f={},e=()=>{for(const o in f){const l=f[o];if(!l)return;const s=l.popit;l.tic+=L/5,l.tic>=L&&(l.dir=-1),l.withoutRad||(s.r=l.origR+l.origR*75e-5*(l.tic+(l.dir>0?0:L-l.tic))),l.tic>=2*L&&(delete f[o],s.r=l.origR)}},i=(o,l=!1)=>{const s=new Date().valueOf().toString(),c=1,a=1;f[s]={withoutRad:l,tic:c,dir:a,popit:o,origR:o.r}},r=()=>{n.globalAlpha=.25;for(const o in f){const l=f[o],s=l.popit;n.fillStyle=u(s.c||"red",-12),n.beginPath(),n.arc(s.x,s.y,s.r+l.origR*.001*(l.tic+(l.dir>0?0:L-l.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return t(e),{popEffect:i,render:r}},J=t=>{const{font:n,ctx:u}=R();return(f=u)=>{const{text:e,x:i,c:r,y:o,fs:l,a:s="center",mw:c}=t;f.textAlign=s,f.fillStyle=r,f.font=`${l}px ${n}`,f.fillText(e,i,o,c)}},O=100,Q=t=>{const{loop:n,ctx:u,useMeasure:f}=R();let e=null;const i=()=>{if(!e)return;const{m:l}=f();e.tic<=O&&(e.props.fs=((t==null?void 0:t.mfs)||6)/O*e.tic*l),e.tic+=e.tic>O?1:10,e.tic>O*2&&(e=null)},r=l=>{const{cx:s,m:c}=f(),a=0,d={x:s,y:Math.round(c*((t==null?void 0:t.dy)||16)),text:l,c:(t==null?void 0:t.color)||"#ffffff",fs:0},h=J(d);e={props:d,shape:h,tic:a}},o=()=>{e&&(u.globalAlpha=.01*e.tic,e.shape(),u.globalAlpha=1)};return n(i),{splashEffect:r,render:o}},Ct=({color:t="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:e,useScreenMeta:i,navigate:r,addEventClick:o,intersect:l}=R(),{from:s}=i();let c,a,d;return u(()=>{const{cx:M,cy:p,s:g,m}=f(),v=Math.round(g*.25);c={c:t,r:Math.round(g*.08),x:M-v-1*m,y:p-v+1*m,p:(s==="score"||s==="opening")&&!c},a=I(c),d=$({x:Number(c.x)-c.r+Math.round(c.r*.5),y:Number(c.y)-c.r+Math.round(c.r*.5),w:c.r*2-Math.round(c.r*1),src:"/media/star.svg"})}),e(()=>{c.p=!1}),o((M,p)=>{l({x:M,y:p},c)&&(n(c),c.p=!0,e(()=>{r("score")},100))}),{render:()=>{a(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},It=({color:t="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:e,useScreenMeta:i,navigate:r,addEventClick:o,intersect:l}=R(),{from:s}=i();let c,a,d;return u(()=>{const{s:M}=f(),p=Math.round(M*.08);c={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:s==="main"&&!c},a=I(c),d=$({x:Number(c.x)-p+Math.round(p*.4),y:Number(c.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),e(()=>{c.p=!1}),o((M,p)=>{l({x:M,y:p},c)&&(n(c),c.p=!0,e(()=>{r("main")},100))}),{render:()=>{a(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},Tt=t=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:e,intersect:i,rotate:r}=R();let o,l,s;return n(()=>{const{s:d}=u(),h=Math.round(d*.055);o={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h),p:!1},l=I(o),s=$({x:Number(o.x)-h+Math.round(h*.4),y:Number(o.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),e((d,h)=>{i({x:d,y:h},o)&&(o.p=!0,t(),f(()=>{o.p=!1},100))}),{render:()=>{l(),o.p||r(()=>{s()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},Wt=t=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:e,intersect:i,rotate:r}=R();let o,l,s;return n(()=>{const{s:d}=u(),h=Math.round(d*.055);o={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h-2*h-.3*h),p:!1},l=I(o),s=$({x:Number(o.x)-h+Math.round(h*.4),y:Number(o.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),e((d,h)=>{i({x:d,y:h},o)&&(o.p=!0,t(),f(()=>{o.p=!1},100))}),{render:()=>{l(),o.p||r(()=>{s()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},At=t=>{const{ctx:n,shade:u}=R(),f=Math.round(t.r/2.2),e=Math.round(.15*t.r),i=u(t.c||"blue",-3);return(r=n)=>{const{r:o,x:l=o,y:s=o}=t;r.lineCap="round",r.fillStyle=i,r.strokeStyle=i,r.lineWidth=f,r.beginPath(),r.moveTo(l+e,s),r.lineTo(l-e/2,s-e),r.lineTo(l-e/2,s+e),r.closePath(),r.fill(),r.beginPath(),r.moveTo(l+e,s),r.lineTo(l-e/2,s-e),r.moveTo(l-e/2,s-e),r.lineTo(l-e/2,s+e),r.moveTo(l-e/2,s+e),r.lineTo(l+e,s),r.stroke()}},it=({getX:t,getY:n,color:u="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:e,useMeasure:i,useTimer:r,useScreenMeta:o,navigate:l,addEventClick:s,intersect:c}=R(),{from:a}=o();let d,h,P;return e(()=>{const{cx:g,cy:m,s:v,m:y}=i();d={c:u,r:Math.round(v*.1),x:t(g,v,y),y:n(m,v,y),p:(a==="gamescore"||a==="game"||a==="opening")&&!d},h=I(d),P=At(d)}),r(()=>{d.p=!1}),s((g,m)=>{c({x:g,y:m},d)&&(f(d),d.p=!0,r(()=>{l("game")},100))}),{render:()=>{h(),d.p||P()},point:()=>({x:d.x,y:d.y,r:d.r})}},at=t=>{const{ctx:n,shade:u}=R(),f=Math.round(t.r/4),e=Math.round(.12*t.r);return(i=n)=>{const{r,x:o=r,y:l=r}=t,s=u(t.c||"blue",-3);i.lineCap="round",i.strokeStyle=s,i.lineWidth=f,i.beginPath(),i.moveTo(o-1.5*e,l-2*e),i.lineTo(o-1.5*e,l+2*e),i.stroke(),i.beginPath(),i.moveTo(o+1.5*e,l-2*e),i.lineTo(o+1.5*e,l+2*e),i.stroke()}},Dt=({getX:t,getY:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:e,useTimer:i,useScreenMeta:r,navigate:o,addEventClick:l,intersect:s}=R(),{from:c}=r();let a,d,h;return f(()=>{const{cx:p,cy:g,s:m,m:v}=e();a={c:"#fd8059",r:Math.round(m*.08),x:t(p,m,v),y:n(g,m,v),p:(c==="game"||c==="opening")&&!a},d=I(a),h=at(a)}),i(()=>{a.p=!1}),l((p,g)=>{s({x:p,y:g},a)&&(u(a),a.p=!0,i(()=>{o("main")},100))}),{render:()=>{d(),a.p||h()},point:()=>({x:a.x,y:a.y,r:a.r})}},Ht=({color:t="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:e,useScreenMeta:i,addEventClick:r,intersect:o,navigate:l}=R(),{from:s}=i();let c,a,d,h;return u(()=>{const{cx:p,cy:g,s:m}=f(),v=Math.round(m*.25);c={c:t,x:p,y:g,r:v,p:s==="opening"&&!c},a=I(c),d=J({text:"Yola",c:"#f1f1f1",x:p,y:g-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),h=J({text:"PopiT",c:"#ffeb3b",x:p,y:g-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),e(()=>c.p=!1),r((p,g)=>{o({x:p,y:g},c)&&(n(c),c.p=!0,e(()=>{l("opening")},100))}),{render:()=>{a(),c.p||(d(),h())},point:()=>({x:c.x,y:c.y,r:c.r})}},dt=({color:t="#00dcfe",frequency:n=25})=>{const{addEventResize:u,useRandChain:f,useMeasure:e,rand:i,useTimer:r,setBackground:o,useScreenMeta:l}=R(),{from:s}=l();o(t);const c=i(0,999);let a=[],d=[];u(()=>{const p=f(c),{s:g}=e();a=[];const m=Math.round(g*.05),v=Math.round(innerWidth/m/2)-1,y=Math.round((innerWidth-2*m*v)/(v+1)),E=Math.round(innerHeight/m/2)-1,w=Math.round((innerHeight-2*m*E)/(E+1));for(let S=0;S<E;S++)for(let x=0;x<v;x++)p(p(n))<1&&a.push({x:y+m+x*m*2+y*x,y:w+m+S*m*2+w*S,r:m,c:t,p:s==="opening"?!0:p(1)>0});d=a.map(S=>I(S))});const h=()=>{r(()=>{const p=i(a.length-1);a[p]&&(a[p].p=!a[p].p),h()},750)};return s==="opening"?r(()=>{a.forEach(p=>p.p=i(1)>0),h()}):h(),{render:()=>{d.forEach(p=>p())},setIntersections:p=>{a=a.filter(({x:g,y:m,r:v})=>p(g,m,v)),d=a.map(g=>I(g))}}},nt="ylp",ot="score",rt="difficulty",U=[.14,.11,.09,.075],st=500,kt=350,ct=5,k=[];for(let t=0;t*ct<=st-kt;t++)k.push(st-t*ct);const F=()=>{const t=a=>localStorage.getItem(`${nt}_${a}`),n=(a,d)=>localStorage.setItem(`${nt}_${a}`,d.toString()),u=()=>+(t(ot)||0),f=a=>n(ot,a),e=a=>{const d=u();f(d+a)},i=()=>+(t(rt)||0),r=a=>{const d=i();n(rt,Math.min(Math.max(d+a,0),U.length*k.length-1))};return{getScore:u,addScore:e,plusDifficulty:()=>r(1),minusDifficulty:()=>r(-5),getDifficultyRad:()=>{const a=i(),d=Math.floor(a/k.length);return U[d]||U[1]},getDifficultyTic:()=>{const a=i(),d=Math.floor(a/k.length),h=a-d*k.length;return k[h]||k[0]}}},lt=(t=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:u,useMeasure:f,setBackground:e,rand:i}=R(),{getDifficultyRad:r}=F();return n=[...n.splice(i(n.length-1),n.length),...n],t||u(()=>{const{s:l}=f(),s=r(),c=Math.round(l*s),a=Math.round(innerWidth/c/2)-1,d=(innerWidth-2*c*a)/(a+1),h=Math.round(innerHeight/c/2)-1,P=(innerHeight-2*c*h)/(h+1),M=innerWidth>=innerHeight,p=M?a:h,g=M?d:P,m=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)n[v]||(v=0),y.push(`${n[v]} ${(g+c+w*c*2+g*w)/m*100}%`),v++;e(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ut=({palette:t,retry:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:e,rand:i,useTimer:r,useScreenMeta:o,navigate:l,addEventClick:s,intersect:c}=R(),{from:a}=o(),{getDifficultyRad:d}=F(),h=[];let P=[],M,p,g,m;const v=E=>Array.isArray(t)?t[E]:t;return f(()=>{const{s:E}=e();h.splice(0);const w=d(),S=Math.round(E*w),x=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*x)/(x+1),T=Math.round(innerHeight/S/2)-1,b=(innerHeight-2*S*T)/(T+1),W=innerWidth>=innerHeight;let D=0;for(let A=0;A<T;A++){for(let _=0;_<x;_++){v(D)||(D=0);const Z={x:C+S+_*S*2+C*_,y:b+S+A*S*2+b*A,r:S,c:v(D),p:!0};A===0&&_===x-1?(m={...Z,p:(a==="main"||a==="gameover"||a==="gamescore")&&!m},M=I(m),p=at(m)):h.push(Z),D+=W?1:0}D=W?0:D+1}n&&(g=h[i(h.length-1)],r(()=>{g.p=!1})),P=h.map(A=>I(A))}),r(()=>{m.p=!1}),n&&s((E,w)=>{c({x:E,y:w},g)&&(u(g),g.p=!0,r(()=>{l("game")},100))}),s((E,w)=>{c({x:E,y:w},m)&&(u(m),m.p=!0,r(()=>{l("main")},100))}),{render:()=>{P.forEach(E=>E()),M(),m!=null&&m.p||p()},popits:h}},H=100,B="#222",zt=t=>{const n=(t==null?void 0:t[0])||0,u=(t==null?void 0:t[1])||0,f=(t==null?void 0:t[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(u<255?u<1?0:u:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:n,createImg:u,useRandChain:f,useTimer:e}=R();let i,r=!1,o=[];const l=t.r*2/H/2;V[t.imgSrc]?i=V[t.imgSrc]:(i=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},i.img.src=t.imgSrc);const s=()=>e(()=>{r=!r,s()},250),c=(M,p=n)=>{const{x:g,y:m,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(g+y,m+y,y,0,Math.PI*2),p.closePath(),p.fill()},a=(M=n,p=0,g=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,g,2*t.r,2*t.r,l),M.closePath(),M.fill()},d=()=>{const M=[];for(let y=0;y<H;y++)for(let E=0;E<H;E++){const w={x:E*l*2,y:y*l*2,r:l,c:B};M.push(w)}let p=t.score-t.winScore;const g=[...M],m=f(0),v=(y=!1)=>{const E=m(g.length-1),w=g[E],S=M.indexOf(w);w.c=y?B:i.cols[S],g.splice(E,1),y&&o.push({...w,c:i.cols[S]})};for(let y=p;y>0;y--)v();if(t.winScore){o=[];for(let y=t.winScore;y>0;y--)v(!0);s()}return M},h=()=>{const M=d();i.drawImg=u((p=n)=>{a(p),M.filter(g=>g.c!==B).forEach(g=>c(g,p))},2*t.r)},P=async()=>{var g;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(i.img,0,0);for(let m=0;m<H;m++){const v=[];for(let y=0;y<H;y++){const E=(g=p==null?void 0:p.getImageData(y,m,1,1))==null?void 0:g.data;v.push(zt(E))}i.cols.push(...v)}i.isFilled=!0,h()};return i.isFilled?(i.r!==t.r||i.score!==t.score)&&h():i.img.onload=P,(M=n)=>{const{x:p,y:g,r:m,winScore:v}=t;if(i.drawImg?M.drawImage(i.drawImg,p-m,g-m,2*m,2*m):a(M,p-m,g-m),r&&v&&i.drawImg)for(const y of o)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-m+y.x+y.r,g-m+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ft=(t=0)=>{const{addEventResize:n,useMeasure:u,translate:f}=R(),{getScore:e}=F(),i=["/media/cat.png"],r=e();let o,l=0,s=0,c=Math.floor(r/K);return n(()=>{const{cx:M,cy:p,s:g}=u();o=[],l=(g-2*g*.055*1.6)/2,s=g*.05;for(let m=0;m<i.length;m++){const v=i[m];o.push(Ft({x:M,y:p+m*l*2+m*s,r:l,score:r-m*K<0?0:r-m*K,imgSrc:v,winScore:t}))}}),{up:()=>{c=c+1<i.length?c+1:i.length-1},down:()=>{c=c-1<0?0:c-1},render:()=>{f(()=>{o==null||o.forEach(M=>M())},0,-(c*l*2+c*s))},rect:()=>{const{cx:M,cy:p}=u(),g=innerWidth>innerHeight;return{x:g?M-l:0,y:g?0:p-l,w:g?2*l:innerWidth,h:g?innerHeight:2*l}}}},_t=({popits:t,popEffect:n=()=>{},splashEffect:u=()=>{}})=>{const{useTimer:f,rand:e,addEventClick:i,addEventMove:r,intersect:o,navigate:l}=R(),{addScore:s,getDifficultyTic:c}=F();let a=[],d,h,P=!1,M=0,p=0,g=0;const m=c(),v=x=>{const C=t.filter(W=>a.indexOf(W)===-1&&W!==x),T=e(C.length-1),b=C[T];b&&(b.p=!1,a.push(C[T]))},y=()=>{h=f(()=>{if(g=Math.max(g-10,50),t.length===a.length){P=!0,h.stop(),f(()=>{l("gameover")});return}v(),y()},g)},E=x=>{a=[];const C=t.length;let T=e(Math.round(C*.3),Math.round(C*.6));const b=[...t];if(x){const W=b.indexOf(x);b.splice(W,1)}for(let W=T;W>0;W--){const D=e(b.length-1),A=b[D];A.p=!1,a.push(A),b.splice(D,1)}g=m,d==null||d.stop(),h==null||h.stop(),d=f(()=>{u("Too slow"),y()},a.length*m),M=M>0?M:e(3,5)},w=x=>{n(x),g=Math.min(g+5,m),p++,x.p=!0;const C=a.indexOf(x);a.splice(C,1),a.length<=0&&(M--,M>0?f(()=>{u("Round up"),E(x)},100):(d==null||d.stop(),h==null||h.stop(),s(p),f(()=>{l("gamescore",{winScore:p})},100)))},S=(x,C,T=!1)=>{if(!P){for(const b of a)if(o({x,y:C},b)){w(b);return}if(!T){for(const b of t)if(o({x,y:C},b)){n(b,!0),u("Popenalty"),v(b);return}u("Popenalty"),v()}}};i(S),r((x,C)=>S(x,C,!0)),f(()=>{E()})},Lt=()=>{const{addEventResize:t,rand:n,useScreenMeta:u}=R(),{from:f}=u(),{popEffect:e,render:i}=N(),r=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],o=f==="opening"?r[0]:r[n(r.length-1)],{render:l,setIntersections:s}=dt({color:o}),{render:c,point:a}=Ht({popEffect:e}),{render:d,point:h}=it({getX:(p,g,m)=>p+Math.round(g*.25)+2*m,getY:(p,g,m)=>p+Math.round(g*.25)+0*m,popEffect:e}),{render:P,point:M}=Ct({popEffect:e});return t(()=>{const p=M(),g=a(),m=h();s((v,y,E)=>!z({x:v,y,r:E},p)&&!z({x:v,y,r:E},g)&&!z({x:v,y,r:E},m))}),()=>{i(),l(),c(),d(),P()}},$t=()=>{const{useMeasure:t,addEventResize:n}=R(),u=lt(),{popEffect:f,render:e}=N(),{popits:i,render:r}=ut({palette:u,popEffect:f}),o={mfs:0,dy:0},{splashEffect:l,render:s}=Q(o);return _t({popits:i,popEffect:f,splashEffect:l}),n(()=>{const c=(i[0].y-i[0].r)/t().m;o.mfs=c,o.dy=c}),()=>{e(),r(),s()}},Nt=()=>{const t="#ff6347",{popEffect:n,render:u}=N(),{setBackground:f}=R(),{minusDifficulty:e}=F(),{render:i}=ut({palette:t,retry:!0,popEffect:n});return f(t),e(),()=>{u(),i()}},Ot=()=>{const{translate:t,useScreenMeta:n}=R(),{plusDifficulty:u}=F(),{data:f}=n(),{popEffect:e,render:i}=N(),{splashEffect:r,render:o}=Q();lt();const{render:l}=ft(f==null?void 0:f.winScore),{render:s}=it({getX:(a,d,h)=>innerWidth>innerHeight?Math.min(a+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerWidth-2*h-Math.round(d*.1)):a+(d-2*d*.055*1.6)/8+0*Math.round(d*.1)+2*h,getY:(a,d,h)=>innerWidth>innerHeight?a+(d-2*d*.055*1.6)/2-1*h-Math.round(d*.1):Math.min(a+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerHeight-2*h-Math.round(d*.1)),popEffect:e}),{render:c}=Dt({getX:(a,d,h)=>innerWidth>innerHeight?Math.max(a-(d-2*d*.055*1.6)/2-4*h-Math.round(d*.1),2*h+Math.round(d*.1)):a+(d-2*d*.055*1.6)/8-2*Math.round(d*.1)-2*h,getY:(a,d,h)=>innerWidth>innerHeight?a-(d-2*d*.055*1.6)/2+0*h+Math.round(d*.1):Math.min(a+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerHeight-2*h-Math.round(d*.1)),popEffect:e});return u(),r("You win"),()=>{i(),innerHeight>innerWidth?t(l,0,-Math.round(innerHeight*.07)):l(),s(),c(),o()}},Bt=()=>{const{addEventResize:t,rand:n}=R(),{popEffect:u,render:f}=N(),{splashEffect:e,render:i}=Q(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],o=r[n(r.length-1)],{render:l,setIntersections:s}=dt({color:o,frequency:10}),{render:c,rect:a,up:d,down:h}=ft(),{render:P,point:M}=It({popEffect:u}),{point:p}=Tt(d),{point:g}=Wt(h);return t(()=>{const m=M(),v=a(),y=p(),E=g();s((w,S,x)=>!z({x:w,y:S,r:x},m)&&!St({x:w,y:S,r:x},v)&&!z({x:w,y:S,r:x},y)&&!z({x:w,y:S,r:x},E))}),e("Score"),()=>{f(),l(),c(),P(),i()}},Gt=()=>{const{ctx:t,addEventResize:n,loop:u}=R(),f={x:40,y:100};let e=1,i=1,r;const o=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),n(o),u(()=>{f.x+=2*e,f.y+=3*i,e*=-1,i*=-1}),()=>{t.save();var l=Math.random()*2,s=Math.random()*3;t.translate(l,s),t.beginPath(),t.fillStyle="red",t.rect(f.x,f.y,r,r),t.fill(),t.restore()}},Yt=[{name:"opening",ctor:bt},{name:"main",ctor:Lt},{name:"game",ctor:$t},{name:"gameover",ctor:Nt},{name:"gamescore",ctor:Ot},{name:"score",ctor:Bt},{name:"devs",ctor:Gt}];Rt(Yt);document.title="Your's last Pop it";
