(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function c(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(i){if(i.ep)return;i.ep=!0;const r=c(i);fetch(i.href,r)}})();const ve=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const c=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},f=s=>{n.clearRect(0,0,innerWidth,innerHeight),s()};return c(),document.body.appendChild(e),{ctx:n,render:f,resize:c,rotate:(s,t,l,p)=>{n.save(),n.translate(t,l),n.rotate(Math.PI*p),n.translate(-t,-l),s(),n.restore()},translate:(s,t,l)=>{n.save(),n.translate(t,l),s(),n.restore()},shade:(s,t)=>{s=s.substring(1);const l=parseInt(s,16),p=Math.round(2.55*t),h=(l>>16)+p,a=(l>>8&255)+p,g=(l&255)+p;return"#"+(16777216+(h<255?h<1?0:h:255)*65536+(a<255?a<1?0:a:255)*256+(g<255?g<1?0:g:255)).toString(16).slice(1)},setBackground:(s,t)=>{var l;document.body.style.background=s,document.body.style.backgroundColor=t||s,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",t||s)},createImg:(s,t,l=t)=>{const p=document.createElement("canvas"),h=p.getContext("2d");if(!h)throw new Error("CanvasRenderingContext2D is null");return p.width=t*devicePixelRatio,p.height=l*devicePixelRatio,h.scale(devicePixelRatio,devicePixelRatio),s(h),p}}},Pe=e=>{let n="",c="",f;const i=u=>e.find(d=>d.name===u)||e[0],o={render:()=>{},navigate:(u,d)=>{const s=i(u);c=n||"",n=(s==null?void 0:s.name)||"",f=d,o.render=(s==null?void 0:s.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:c,data:f})};return o},Ee=()=>{const e=requestAnimationFrame||(o=>setTimeout(o,16.666666666666668)),n=[],c={};return{loop:(o,u)=>{if(Object.entries(c).find(([s,t])=>t===o)||u&&c[u])throw new Error(`Loop${u?" "+u:""} already specified`);u&&n.push(u),u=u||new Date().valueOf().toString(),c[u]=o;const d=()=>{o(),c[u]&&e(d)};d()},stop:o=>{if(typeof o=="string")delete c[o];else{const u=Object.entries(c).find(([d,s])=>s===o);u&&delete c[u[0]]}},stopAll:()=>{for(const o in c)n.indexOf(o)===-1&&delete c[o]}}};let X=[];const Se=()=>{for(const e of X)clearTimeout(e);X=[]},xe=(e,n=400)=>{let c=new Date,f=n,i=setTimeout(e,f);return X.push(i),{pause:()=>{clearTimeout(i),f-=new Date-c},resume:()=>{c=new Date,clearTimeout(i),i=setTimeout(e,f),X.push(i)},stop:()=>{clearTimeout(i)}}},oe=2147483646,V=2147483647,we=16807,Ce=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=oe);const n=()=>(e=e*we%V,e),c=()=>(n()-1)/oe;return(i,r)=>(r===void 0&&(r=i,i=0),Math.floor(c()*(r-i+1))+i)},Re=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),be=()=>{const e=[],n=[],c=[];return{addEventResize:t=>{t(),e.push(t)},onResizeEvents:()=>e.forEach(t=>t()),addEventClick:t=>n.push(t),onClickEvents:(t,l)=>n.forEach(p=>p(t,l)),addEventMove:t=>c.push(t),onMoveEvents:(t,l)=>c.forEach(p=>p(t,l)),removeAllEvents:()=>{e.splice(0),n.splice(0),c.splice(0)}}},L=(e,n)=>{const c=Math.pow(Math.abs(e.x-n.x),2),f=Math.pow(Math.abs(e.y-n.y),2),i=e.r||0,r=n.r||0,o=Math.pow(i+r,2);return c+f<=o},Ie=(e,n)=>{const c=e.r||0,f=n.w||0,i=n.h||0;return Math.abs(n.x+f/2-e.x)<=f/2+c&&Math.abs(n.y+i/2-e.y)<=i/2+c},Te=(e,n)=>L(e,n),We=e=>{const n=new AudioContext,c={},f=r=>{fetch(r).then(o=>o.arrayBuffer()).then(o=>(n==null?void 0:n.decodeAudioData(o))||null).then(o=>{o&&(c[r]=o)})};if(e.length)for(const r of e)f(r);return async r=>{const o=n.createBufferSource();c[r]||(c[r]=await fetch(r).then(u=>u.arrayBuffer()).then(u=>(n==null?void 0:n.decodeAudioData(u))||null)),o.buffer=c[r],o.connect(n.destination),o.start()}};let j;const He=(e,n)=>{if(j)throw new Error("Webcore already specified");const c=ve(),f=Pe(e),{loop:i,stop:r,stopAll:o}=Ee(),{addEventResize:u,onResizeEvents:d,addEventClick:s,onClickEvents:t,addEventMove:l,onMoveEvents:p,removeAllEvents:h}=be();let a=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight;const y=()=>({cx:a,cy:g,s:m,m:v,isL:M}),P=We(n);j={font:"Tijuf",ctx:c.ctx,shade:c.shade,rotate:c.rotate,translate:c.translate,setBackground:c.setBackground,createImg:c.createImg,useMeasure:y,useScreenMeta:f.useScreenMeta,navigate:(E,x)=>{if(!e.some(S=>S.name===E))throw new Error(`Screen ${E} not specified`);o(),Se(),h(),new Promise(()=>f.navigate(E,x))},loop:i,loopStop:r,useTimer:xe,rand:Re,useRandChain:Ce,intersect:Te,addEventResize:u,addEventClick:s,addEventMove:l,playSound:P},i(()=>c.render(f.render),"draw"),window.onresize=()=>{a=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight,c.resize(),d()},document.onpointerdown=E=>{t(E.clientX,E.clientY)},document.onmousemove=E=>{p(E.clientX,E.clientY)},f.navigate()},w=()=>{if(!j)throw new Error("Webcore not specified");return{...j}},U={},W=e=>{const{shade:n,ctx:c,createImg:f}=w(),i=()=>{const{r:o,c:u="#ffffff",p:d}=e,s=c.createRadialGradient(o,o,o,o,o,o/5);return s.addColorStop(0,n(u,0)),s.addColorStop(.01,n(u,0)),s.addColorStop(.075,n(u,9)),s.addColorStop(.15,n(u,0)),s.addColorStop(.15,n(u,-15)),s.addColorStop(.18,n(u,-5)),s.addColorStop(.22,n(u,-15)),d?(s.addColorStop(.24,n(u,-10)),s.addColorStop(.3,n(u,-8)),s.addColorStop(.34,n(u,-12)),s.addColorStop(.6,n(u,-6)),s.addColorStop(1,n(u,-4))):(s.addColorStop(.24,n(u,-12)),s.addColorStop(.26,n(u,-8)),s.addColorStop(.3,n(u,-2)),s.addColorStop(.34,n(u,0)),s.addColorStop(.5,n(u,5)),s.addColorStop(1,n(u,12))),s},r=()=>{const{r:o,c:u="#ffffff",p:d}=e,s=`${u}_${d?"push":"pop"}_${o}`;if(U[s])return U[s];const t=f((l=c)=>{const p=i();l.fillStyle=p,l.beginPath(),l.arc(o,o,o,0,2*Math.PI),l.closePath(),l.fill()},2*o);return U[s]=t,t};return(o=c)=>{const{x:u,y:d,r:s}=e,t=r();o.drawImage(t,u-s,d-s,2*s,2*s)}},K={},N=e=>{const{ctx:n}=w();let c;return K[e.src]?c=K[e.src]:(c=new Image,c.src=e.src,K[e.src]=c),(f=n)=>{const{w:i,h:r=i,x:o=0,y:u=0}=e;c.complete&&f.drawImage(c,o,u,i,r)}},re=e=>{const{font:n,ctx:c}=w(),f=e.text,i=e.text.length,r=2*Math.PI/i/4;return(o=c)=>{const{x:u,y:d,r:s,s:t=0,fs:l}=e,p=l||Math.round(s/4);o.textAlign="center",o.fillStyle="#f9f9f9",o.font=`${p}px ${n}`,o.save(),o.translate(u,d),o.rotate(t);for(let h=0;h<i;h++)o.save(),o.rotate(h*r),o.fillText(f[h],0,-s),o.restore();o.restore()}},ke=()=>{var M,y;const{ctx:e,loop:n,rotate:c,navigate:f,useMeasure:i,addEventClick:r,addEventResize:o,setBackground:u}=w();u("#040404");let d=!1,s,t,l,p,h,a=-.2,g=0;o(()=>{const{cx:P,cy:E,s:x}=i(),S=Math.round(x*.25);s={c:"#ff6347",x:P,y:E,r:S,p:!1},t=W(s),l=N({x:P-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),p=re({text:"nezabotin",x:P,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),h=re({text:"production",x:P,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{a+=.01,g=a>=1?1:a,a>=1.8&&(s.p=!0),a>=2.2&&(s.c="#f86a9a"),a>=2.6&&f("main")};r(()=>{[1.4,1.8,2.2,2.6].some(P=>{if(a<P)return a=P,!0})});const v=()=>{n(m),d=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:P,cy:E}=i();e.globalAlpha=d?1:0,t(),a<1.8&&l(),a<1.4&&c(()=>{p(),h()},P,E,g),e.globalAlpha=1}},ue=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop7.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];let k=[...ue];const te=()=>{const{rand:e,playSound:n}=w();return{playPop:()=>{const f=e(k.length-1),i=k[f];k.splice(f,1),k.length||(k=[...ue]);const r=e(k.length-1);k=[...k.splice(r,k.length),...k],n(i)}}},F=100/2;let se=0;const O=()=>{const{loop:e,ctx:n,shade:c,rand:f}=w(),{playPop:i}=te(),r={},o=()=>{for(const s in r){const t=r[s];if(!t)return;const l=t.popit;if(!t.shake)t.tic+=F/5,t.tic>=F&&(t.dir=-1),t.withoutRad||(l.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:F-t.tic)));else{t.tic+=F/5;const p=f(1,2),h=f(1,2);l.x=t.origX+Math.random()*p*(Math.random()>.5?1:-1),l.y=t.origY+Math.random()*h*(Math.random()>.5?1:-1)}t.tic>=2*F&&(delete r[s],l.r=t.origR,l.x=t.origX,l.y=t.origY)}},u=(s,t=!1,l=!1)=>{!l&&!t&&i(),se++;const p=`${new Date().valueOf().toString()}_${se}`,h=1,a=1;r[p]={withoutRad:t,tic:h,dir:a,popit:s,origR:s.r,origX:s.x,origY:s.y,shake:l}},d=()=>{n.globalAlpha=.25;for(const s in r){const t=r[s];if(t.shake)continue;const l=t.popit;n.fillStyle=c(l.c||"red",-12),n.beginPath(),n.arc(l.x,l.y,l.r+t.origR*.001*(t.tic+(t.dir>0?0:F-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(o),{popEffect:u,render:d}},ee=e=>{const{font:n,ctx:c}=w();return(f=c)=>{const{text:i,x:r,c:o,y:u,fs:d,a:s="center",mw:t}=e;f.textAlign=s,f.fillStyle=o,f.font=`${d}px ${n}`,f.fillText(i,r,u,t)}},Y=100,fe=e=>{const{loop:n,ctx:c,useMeasure:f,rand:i}=w();let r=null;const o=()=>{if(!r)return;const{m:s}=f();if(r.tic<=Y)r.props.fs=((e==null?void 0:e.mfs)||6)/Y*r.tic*s;else{const t=i(1,1),l=i(1,1);r.props.x=r.origX+Math.random()*t*(Math.random()>.5?1:-1),r.props.y=r.origY+Math.random()*l*(Math.random()>.5?1:-1),r.shake=!0}r.tic+=r.tic>Y?1:10,r.tic>Y*2&&!(e!=null&&e.infinity)&&(r=null)},u=s=>{const{cx:t,m:l}=f(),p=0,h={x:t,y:Math.round(l*((e==null?void 0:e.dy)||16)),text:s,c:(e==null?void 0:e.color)||"#ffffff",fs:0},a=ee(h);r={props:h,shape:a,tic:p,origX:h.x,origY:h.y}},d=()=>{r&&(c.globalAlpha=.01*r.tic,r.shape(),c.globalAlpha=1)};return n(o),{splashEffect:u,render:d}},De=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:i,useScreenMeta:r,navigate:o,addEventClick:u,intersect:d}=w(),{from:s}=r();let t,l,p;return c(()=>{const{cx:g,cy:m,s:v,m:M}=f(),y=Math.round(v*.25);t={c:e,r:Math.round(v*.08),x:g-y-1*M,y:m-y+1*M,p:(s==="score"||s==="opening")&&!t},l=W(t),p=N({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),i(()=>{t.p&&n(t,!1,!0),t.p=!1}),u((g,m)=>{d({x:g,y:m},t)&&(n(t),t.p=!0,i(()=>{o("score")},100))}),{render:()=>{l(),t.p||p()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ae=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:i,useScreenMeta:r,navigate:o,addEventClick:u,intersect:d}=w(),{from:s}=r();let t,l,p;return c(()=>{const{s:g}=f(),m=Math.round(g*.08);t={c:e,r:m,x:Math.round(1.6*m),y:Math.round(1.6*m),p:s==="main"&&!t},l=W(t),p=N({x:Number(t.x)-m+Math.round(m*.4),y:Number(t.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),i(()=>{t.p&&n(t,!1,!0),t.p=!1}),u((g,m)=>{d({x:g,y:m},t)&&(n(t),t.p=!0,i(()=>{o("main")},100))}),{render:()=>{l(),t.p||p()},point:()=>({x:t.x,y:t.y,r:t.r})}},ze=({onClick:e})=>{const{addEventResize:n,useMeasure:c,useTimer:f,addEventClick:i,intersect:r,rotate:o}=w(),{playPop:u}=te();let d,s,t;return n(()=>{const{s:h}=c(),a=Math.round(h*.08);d={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a),p:!1},s=W(d),t=N({x:Number(d.x)-a+Math.round(a*.4),y:Number(d.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),i((h,a)=>{r({x:h,y:a},d)&&(u(),d.p=!0,e(),f(()=>{d.p=!1},100))}),{render:()=>{s(),d.p||o(()=>{t()},d.x,d.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:d.x,y:d.y,r:d.r})}},Le=({onClick:e})=>{const{addEventResize:n,useMeasure:c,useTimer:f,addEventClick:i,intersect:r,rotate:o}=w(),{playPop:u}=te();let d,s,t;return n(()=>{const{s:h}=c(),a=Math.round(h*.08),g=innerWidth<innerHeight?Math.round(innerWidth-1.6*a-2*a-.3*a):Math.round(innerWidth-1.6*a),m=innerWidth<innerHeight?Math.round(innerHeight-1.6*a):Math.round(innerHeight-1.6*a-2*a-.3*a);d={c:"#ff6347",r:a,x:g,y:m,p:!1},s=W(d),t=N({x:Number(d.x)-a+Math.round(a*.4),y:Number(d.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),i((h,a)=>{r({x:h,y:a},d)&&(u(),d.p=!0,e(),f(()=>{d.p=!1},100))}),{render:()=>{s(),d.p||o(()=>{t()},d.x,d.y,innerHeight>innerWidth?0:.5)},point:()=>({x:d.x,y:d.y,r:d.r})}},_e=e=>{const{ctx:n,shade:c}=w(),f=Math.round(e.r/2.2),i=Math.round(.15*e.r),r=c(e.c||"blue",-3);return(o=n)=>{const{r:u,x:d=u,y:s=u}=e;o.lineCap="round",o.fillStyle=r,o.strokeStyle=r,o.lineWidth=f,o.beginPath(),o.moveTo(d+i,s),o.lineTo(d-i/2,s-i),o.lineTo(d-i/2,s+i),o.closePath(),o.fill(),o.beginPath(),o.moveTo(d+i,s),o.lineTo(d-i/2,s-i),o.moveTo(d-i/2,s-i),o.lineTo(d-i/2,s+i),o.moveTo(d-i/2,s+i),o.lineTo(d+i,s),o.stroke()}},he=({getX:e,getY:n,color:c="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:i,useMeasure:r,useTimer:o,useScreenMeta:u,navigate:d,addEventClick:s,intersect:t}=w(),{from:l}=u();let p,h,a;return i(()=>{const{cx:v,cy:M,s:y,m:P}=r();p={c,r:Math.round(y*.1),x:e(v,y,P),y:n(M,y,P),p:(l==="gamescore"||l==="game"||l==="opening")&&!p},h=W(p),a=_e(p)}),o(()=>{p.p&&f(p,!1,!0),p.p=!1}),s((v,M)=>{t({x:v,y:M},p)&&(f(p),p.p=!0,o(()=>{d("game")},100))}),{render:()=>{h(),p.p||a()},point:()=>({x:p.x,y:p.y,r:p.r})}},pe=e=>{const{ctx:n,shade:c}=w(),f=Math.round(e.r/4),i=Math.round(.12*e.r);return(r=n)=>{const{r:o,x:u=o,y:d=o}=e,s=c(e.c||"blue",-3);r.lineCap="round",r.strokeStyle=s,r.lineWidth=f,r.beginPath(),r.moveTo(u-1.5*i,d-2*i),r.lineTo(u-1.5*i,d+2*i),r.stroke(),r.beginPath(),r.moveTo(u+1.5*i,d-2*i),r.lineTo(u+1.5*i,d+2*i),r.stroke()}},Fe=({getX:e,getY:n,popEffect:c=()=>{}})=>{const{addEventResize:f,useMeasure:i,useTimer:r,useScreenMeta:o,navigate:u,addEventClick:d,intersect:s}=w(),{from:t}=o();let l,p,h;return f(()=>{const{cx:m,cy:v,s:M,m:y}=i();l={c:"#fd8059",r:Math.round(M*.08),x:e(m,M,y),y:n(v,M,y),p:(t==="game"||t==="opening")&&!l},p=W(l),h=pe(l)}),r(()=>{l.p&&c(l,!1,!0),l.p=!1},500),d((m,v)=>{s({x:m,y:v},l)&&(c(l),l.p=!0,r(()=>{u("main")},100))}),{render:()=>{p(),l.p||h()},point:()=>({x:l.x,y:l.y,r:l.r})}},$e=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:i,useScreenMeta:r,addEventClick:o,intersect:u,navigate:d}=w(),{from:s}=r();let t,l,p,h;return c(()=>{const{cx:m,cy:v,s:M}=f(),y=Math.round(M*.25);t={c:e,x:m,y:v,r:y,p:s==="opening"&&!t},l=W(t),p=ee({text:"Yola",c:"#f1f1f1",x:m,y:v-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),h=ee({text:"PopiT",c:"#ffeb3b",x:m,y:v-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),i(()=>{t.p&&n(t,!1,!0),t.p=!1}),o((m,v)=>{u({x:m,y:v},t)&&(n(t),t.p=!0,i(()=>{d("opening")},100))}),{render:()=>{l(),t.p||(p(),h())},point:()=>({x:t.x,y:t.y,r:t.r})}},ge=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:c,useRandChain:f,useMeasure:i,rand:r,useTimer:o,setBackground:u,useScreenMeta:d}=w(),{from:s}=d();u(e);const t=r(0,999);let l=[],p=[];c(()=>{const m=f(t),{s:v}=i();l=[];const M=Math.round(v*.05),y=Math.round(innerWidth/M/2)-1,P=Math.round((innerWidth-2*M*y)/(y+1)),E=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*E)/(E+1));for(let S=0;S<E;S++)for(let b=0;b<y;b++)m(m(n))<1&&l.push({x:P+M+b*M*2+P*b,y:x+M+S*M*2+x*S,r:M,c:e,p:s==="opening"?!0:m(1)>0});p=l.map(S=>W(S))});const h=()=>{o(()=>{const m=r(l.length-1);l[m]&&(l[m].p=!l[m].p),h()},250)};return s==="opening"?o(()=>{l.forEach(m=>m.p=r(1)>0),h()}):h(),{render:()=>{p.forEach(m=>m())},setIntersections:m=>{l=l.filter(({x:v,y:M,r:y})=>m(v,M,y)),p=l.map(v=>W(v))}}},ie="ylp",ce="score",J="difficulty",Q=[.14,.11,.09,.075],ae=750,Be=350,de=5,z=[];for(let e=0;e*de<=ae-Be;e++)z.push(ae-e*de);const $=()=>{const e=p=>localStorage.getItem(`${ie}_${p}`),n=(p,h)=>localStorage.setItem(`${ie}_${p}`,h.toString()),c=()=>+(e(ce)||0),f=p=>n(ce,p),i=p=>{const h=c();f(h+p)},r=()=>+(e(J)||0),o=p=>{const h=r();n(J,Math.min(Math.max(h+p,0),Q.length*z.length-1))};return{getScore:c,addScore:i,plusDifficulty:()=>o(1),minusDifficulty:()=>o(-5),getDifficultyRad:()=>{const p=r(),h=Math.floor(p/z.length);return Q[h]||Q[1]},getDifficultyTic:()=>{const p=r(),h=Math.floor(p/z.length),a=p-h*z.length;return z[a]||z[0]},resetDifficulty:()=>n(J,0)}},me=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:c,useMeasure:f,setBackground:i,rand:r}=w(),{getDifficultyRad:o}=$();return n=[...n.splice(r(n.length-1),n.length),...n],e||c(()=>{const{s:d}=f(),s=o(),t=Math.round(d*s),l=Math.round(innerWidth/t/2)-1,p=(innerWidth-2*t*l)/(l+1),h=Math.round(innerHeight/t/2)-1,a=(innerHeight-2*t*h)/(h+1),g=innerWidth>=innerHeight,m=g?l:h,v=g?p:a,M=g?innerWidth:innerHeight;let y=0;const P=[];for(let x=0;x<m;x++)n[y]||(y=0),P.push(`${n[y]} ${(v+t+x*t*2+v*x)/M*100}%`),y++;i(`linear-gradient(${g?"to right":"to bottom"}, ${P.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},Me=({palette:e,retry:n,popEffect:c=()=>{}})=>{const{addEventResize:f,useMeasure:i,rand:r,useTimer:o,useScreenMeta:u,navigate:d,addEventClick:s,intersect:t}=w(),{from:l}=u(),{getDifficultyRad:p}=$(),h=[];let a=[],g,m,v,M;const y=E=>Array.isArray(e)?e[E]:e;return f(()=>{const{s:E}=i();h.splice(0);const x=p(),S=Math.round(E*x),b=Math.round(innerWidth/S/2)-1,_=(innerWidth-2*S*b)/(b+1),D=Math.round(innerHeight/S/2)-1,B=(innerHeight-2*S*D)/(D+1),I=innerWidth>=innerHeight;let R=0;for(let T=0;T<D;T++){for(let C=0;C<b;C++){y(R)||(R=0);const H={x:_+S+C*S*2+_*C,y:B+S+T*S*2+B*T,r:S,c:y(R),p:!0};T===0&&C===b-1?(M={...H,p:(l==="main"||l==="gameover"||l==="gamescore")&&!M},g=W(M),m=pe(M)):h.push(H),R+=I?1:0}R=I?0:R+1}n&&(v=h[r(h.length-1)],o(()=>{c(v,!1,!0),v.p=!1})),a=h.map(T=>W(T))}),o(()=>{M.p&&c(M,!1,!0),M.p=!1}),n&&s((E,x)=>{t({x:E,y:x},v)&&(c(v),v.p=!0,o(()=>{d("game")},100))}),s((E,x)=>{t({x:E,y:x},M)&&(c(M),M.p=!0,o(()=>{d("main")},100))}),{render:()=>{a.forEach(E=>E()),g(),M!=null&&M.p||m()},popits:h}},A=100,G="#222",Ne=e=>{const n=(e==null?void 0:e[0])||0,c=(e==null?void 0:e[1])||0,f=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(c<255?c<1?0:c:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},Z={},Oe=e=>{const{ctx:n,createImg:c,useRandChain:f,useTimer:i}=w();let r,o=!1,u=[];const d=e.r*2/A/2;Z[e.imgSrc]?r=Z[e.imgSrc]:(r=Z[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},r.img.src=e.imgSrc);const s=()=>i(()=>{o=!o,s()},250),t=(g,m=n)=>{const{x:v,y:M,c:y,r:P}=g;m.fillStyle=y||"red",m.beginPath(),m.arc(v+P,M+P,P,0,Math.PI*2),m.closePath(),m.fill()},l=(g=n,m=0,v=0)=>{g.fillStyle=G,g.beginPath(),g.roundRect(m,v,2*e.r,2*e.r,d),g.closePath(),g.fill()},p=()=>{const g=[];for(let P=0;P<A;P++)for(let E=0;E<A;E++){const x={x:E*d*2,y:P*d*2,r:d,c:G};g.push(x)}let m=e.score-e.winScore;const v=[...g],M=f(e.seed),y=(P=!1)=>{const E=M(v.length-1),x=v[E],S=g.indexOf(x);x.c=P?G:r.cols[S],v.splice(E,1),P&&u.push({...x,c:r.cols[S]})};for(let P=m;P>0;P--)y();if(e.winScore){u=[];for(let P=e.winScore;P>0;P--)y(!0);s()}return g},h=()=>{const g=p();r.drawImg=c((m=n)=>{l(m),g.filter(v=>v.c!==G).forEach(v=>t(v,m))},2*e.r)},a=async()=>{var v;const g=document.createElement("canvas");g.width=A,g.height=A;const m=g.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(r.img,0,0);for(let M=0;M<A;M++){const y=[];for(let P=0;P<A;P++){const E=(v=m==null?void 0:m.getImageData(P,M,1,1))==null?void 0:v.data;y.push(Ne(E))}r.cols.push(...y)}r.isFilled=!0,h()};return r.isFilled?(r.r!==e.r||r.score!==e.score)&&h():r.img.onload=a,(g=n)=>{const{x:m,y:v,r:M,winScore:y}=e;if(r.drawImg?g.drawImage(r.drawImg,m-M,v-M,2*M,2*M):l(g,m-M,v-M),o&&y&&r.drawImg)for(const P of u)g.fillStyle=P.c||"red",g.beginPath(),g.arc(m-M+P.x+P.r,v-M+P.y+P.r,P.r,0,Math.PI*2),g.closePath(),g.fill()}},le=1e4,ye=(e=0,n=!1)=>{const{addEventResize:c,useMeasure:f,translate:i}=w(),{getScore:r}=$(),o=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],u=r();let d,s=0,t=0,l=!1,p=!1;const h=y=>Math.min(Math.floor(y/le),o.length-1);let a=h(u-e);if(e){const y=h(u);l=y!==a,p=y>o.length-1}return c(()=>{const{cx:y,cy:P,s:E,isL:x}=f();d=[],s=(E-2*E*.055*1.6)/2,t=E*.05;let S=n?a:0;for(S;S<(n?a+1:o.length);S++){const b=o[S],_=x?y:y+S*s*2+S*t,D=x?P+S*s*2+S*t:P;d.push(Oe({x:_,y:D,r:s,score:Math.min(u-S*le,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{a=a+1<o.length?a+1:o.length-1},down:()=>{a=a-1<0?0:a-1},render:()=>{const{isL:y}=f(),P=y?0:-(a*s*2+a*t),E=y?-(a*s*2+a*t):0;i(()=>{d==null||d.forEach(x=>x())},P,E)},rect:()=>{const{cx:y,cy:P}=f(),E=innerWidth>innerHeight;return{x:E?y-s:0,y:E?0:P-s,w:E?2*s:innerWidth,h:E?innerHeight:2*s}},isJump:l,isCompleted:p}},Ye=({popits:e,popEffect:n=()=>{},splashEffect:c=()=>{}})=>{const{useTimer:f,rand:i,addEventClick:r,addEventMove:o,intersect:u,navigate:d,addEventResize:s}=w(),{getScore:t,addScore:l,getDifficultyTic:p}=$();let h=[],a,g,m=!1,v=0,M=0,y=0;const P=t(),E=p(),x=I=>{const R=e.filter(H=>h.indexOf(H)===-1&&H!==I),T=i(R.length-1),C=R[T];C&&(n(C,!1,!0),C.p=!1,h.push(R[T]))},S=()=>{g=f(()=>{if(y=Math.max(y-10,50),e.length===h.length){m=!0,g.stop(),f(()=>{d("gameover")});return}x(),S()},y)},b=I=>{h=[];const R=e.length;let T=i(Math.round(R*.3),Math.round(R*.6));const C=[...e];if(I){const H=C.indexOf(I);C.splice(H,1)}for(let H=T;H>0;H--){const ne=i(C.length-1),q=C[ne];q.p=!1,n(q,!1,!0),h.push(q),C.splice(ne,1)}y=E,a==null||a.stop(),g==null||g.stop(),P&&(a=f(()=>{c("SLOWLY"),S()},h.length*E)),v=v>0?v:i(3,5)},_=()=>P<1e4?10:P<2e4?5:P<3e4?2:1,D=I=>{n(I),y=Math.min(y+5,E),M++,I.p=!0;const R=h.indexOf(I);if(h.splice(R,1),h.length<=0)if(v--,v>0)f(()=>{c("Round"),b(I)},100);else{a==null||a.stop(),g==null||g.stop();const T=_();l(M*T),f(()=>{d("gamescore",{winScore:M*T})},100)}},B=(I,R,T=!1)=>{if(!m){for(const C of h)if(u({x:I,y:R},C)){D(C);return}if(!T){for(const C of e)if(u({x:I,y:R},C)){n(C,!0),c("Popenalty"),x(C);return}c("Popenalty"),x()}}};r(B),o((I,R)=>B(I,R,!0)),s(()=>{f(()=>{c("Pop it"),b()})})},Ge=()=>{const{addEventResize:e,rand:n,useScreenMeta:c}=w(),{from:f}=c(),{popEffect:i,render:r}=O(),o=["#00dcfe","#5bb2f7","#92E6E6"],u=f==="opening"?o[0]:o[n(o.length-1)],{render:d,setIntersections:s}=ge({color:u}),{render:t,point:l}=$e({popEffect:i}),{render:p,point:h}=he({getX:(m,v,M)=>m+Math.round(v*.25)+2*M,getY:(m,v,M)=>m+Math.round(v*.25)+0*M,popEffect:i}),{render:a,point:g}=De({popEffect:i});return e(()=>{const m=g(),v=l(),M=h();s((y,P,E)=>!L({x:y,y:P,r:E},m)&&!L({x:y,y:P,r:E},v)&&!L({x:y,y:P,r:E},M))}),()=>{r(),d(),t(),p(),a()}},Xe=()=>{const{useMeasure:e,addEventResize:n}=w(),c=me(),{popEffect:f,render:i}=O(),{popits:r,render:o}=Me({palette:c,popEffect:f}),u={mfs:0,dy:0},{splashEffect:d,render:s}=fe(u);return Ye({popits:r,popEffect:f,splashEffect:d}),n(()=>{const t=(r[0].y-r[0].r)/e().m;u.mfs=t,u.dy=t}),()=>{i(),o(),s()}},je=()=>{const e="#ff6347",{popEffect:n,render:c}=O(),{setBackground:f}=w(),{minusDifficulty:i}=$(),{render:r}=Me({palette:e,retry:!0,popEffect:n});return f(e),i(),()=>{c(),r()}},qe=()=>{const{translate:e,useScreenMeta:n}=w(),{plusDifficulty:c,resetDifficulty:f}=$(),{data:i}=n(),{popEffect:r,render:o}=O(),{splashEffect:u,render:d}=fe({infinity:!0});me();const{render:s,isJump:t}=ye(i==null?void 0:i.winScore,!0),{render:l}=he({getX:(h,a,g)=>innerWidth>innerHeight?Math.min(h+(a-2*a*.055*1.6)/2+4*g+Math.round(a*.1),innerWidth-2*g-Math.round(a*.1)):h+(a-2*a*.055*1.6)/8+0*Math.round(a*.1)+2*g,getY:(h,a,g)=>innerWidth>innerHeight?h+(a-2*a*.055*1.6)/2-1*g-Math.round(a*.1):Math.min(h+(a-2*a*.055*1.6)/2+4*g+Math.round(a*.1),innerHeight-2*g-Math.round(a*.1)),popEffect:r}),{render:p}=Fe({getX:(h,a,g)=>innerWidth>innerHeight?Math.max(h-(a-2*a*.055*1.6)/2-4*g-Math.round(a*.1),2*g+Math.round(a*.1)):h+(a-2*a*.055*1.6)/8-2*Math.round(a*.1)-2*g,getY:(h,a,g)=>innerWidth>innerHeight?h-(a-2*a*.055*1.6)/2+0*g+Math.round(a*.1):Math.min(h+(a-2*a*.055*1.6)/2+4*g+Math.round(a*.1),innerHeight-2*g-Math.round(a*.1)),popEffect:r});return t?f():c(),innerHeight>innerWidth&&u(t?"Picture filled":"You win"),()=>{o(),innerHeight>innerWidth?e(s,0,-Math.round(innerHeight*.05)):s(),l(),p(),d()}},Ve=()=>{const{addEventResize:e,rand:n}=w(),{popEffect:c,render:f}=O(),i=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],r=i[n(i.length-1)],{render:o,setIntersections:u}=ge({color:r,frequency:10}),{render:d,rect:s,up:t,down:l}=ye(),{render:p,point:h}=Ae({popEffect:c}),{render:a,point:g}=ze({onClick:t,popEffect:c}),{render:m,point:v}=Le({onClick:l,popEffect:c});return e(()=>{const M=h(),y=s(),P=g(),E=v();u((x,S,b)=>!L({x,y:S,r:b},M)&&!Ie({x,y:S,r:b},y)&&!L({x,y:S,r:b},P)&&!L({x,y:S,r:b},E))}),()=>{f(),o(),d(),p(),a(),m()}},Ue=()=>{const{ctx:e,addEventResize:n,loop:c}=w(),f={x:40,y:100};let i=1,r=1,o;const u=()=>{o=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return u(),n(u),c(()=>{f.x+=2*i,f.y+=3*r,i*=-1,r*=-1}),()=>{e.save();var d=Math.random()*2,s=Math.random()*3;e.translate(d,s),e.beginPath(),e.fillStyle="red",e.rect(f.x,f.y,o,o),e.fill(),e.restore()}},Ke=[{name:"opening",ctor:ke},{name:"main",ctor:Ge},{name:"game",ctor:Xe},{name:"gameover",ctor:je},{name:"gamescore",ctor:qe},{name:"score",ctor:Ve},{name:"devs",ctor:Ue}],Je=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop7.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];He(Ke,Je);document.title="Your's last Pop it";
