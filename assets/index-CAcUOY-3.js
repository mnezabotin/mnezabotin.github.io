(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&f(t)}).observe(document,{childList:!0,subtree:!0});function c(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(s){if(s.ep)return;s.ep=!0;const a=c(s);fetch(s.href,a)}})();const Ce=()=>{const n=document.createElement("canvas"),o=n.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const c=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},f=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return c(),document.body.appendChild(n),{ctx:o,render:f,resize:c,rotate:(e,i,r,M)=>{o.save(),o.translate(i,r),o.rotate(Math.PI*M),o.translate(-i,-r),e(),o.restore()},translate:(e,i,r)=>{o.save(),o.translate(i,r),e(),o.restore()},shade:(e,i)=>{e=e.substring(1);const r=parseInt(e,16),M=Math.round(2.55*i),S=(r>>16)+M,p=(r>>8&255)+M,u=(r&255)+M;return"#"+(16777216+(S<255?S<1?0:S:255)*65536+(p<255?p<1?0:p:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},setBackground:(e,i)=>{var r;document.body.style.background=e,document.body.style.backgroundColor=i||e,(r=document.querySelector('meta[name="theme-color"]'))==null||r.setAttribute("content",i||e)},createImg:(e,i,r=i)=>{const M=document.createElement("canvas"),S=M.getContext("2d");if(!S)throw new Error("CanvasRenderingContext2D is null");return M.width=i*devicePixelRatio,M.height=r*devicePixelRatio,S.scale(devicePixelRatio,devicePixelRatio),e(S),M}}},xe=n=>{let o="",c="",f;const s=d=>n.find(l=>l.name===d)||n[0],t={render:()=>{},navigate:(d,l)=>{const e=s(d);c=o||"",o=(e==null?void 0:e.name)||"",f=l,t.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:c,data:f})};return t},be=()=>{const n=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),o=[],c={};return{loop:(t,d)=>{if(Object.entries(c).find(([e,i])=>i===t)||d&&c[d])throw new Error(`Loop${d?" "+d:""} already specified`);d&&o.push(d),d=d||new Date().valueOf().toString(),c[d]=t;const l=()=>{t(),c[d]&&n(l)};l()},stop:t=>{if(typeof t=="string")delete c[t];else{const d=Object.entries(c).find(([l,e])=>e===t);d&&delete c[d[0]]}},stopAll:()=>{for(const t in c)o.indexOf(t)===-1&&delete c[t]}}};let J=[];const Ie=()=>{for(const n of J)clearTimeout(n);J=[]},Re=(n,o=400)=>{let c=new Date,f=o,s=setTimeout(n,f);return J.push(s),{pause:()=>{clearTimeout(s),f-=new Date-c},resume:()=>{c=new Date,clearTimeout(s),s=setTimeout(n,f),J.push(s)},stop:()=>{clearTimeout(s)}}},de=2147483646,ee=2147483647,Te=16807,ke=(n=Math.floor(Math.random()*ee))=>{n=n%ee,n<=0&&(n+=de);const o=()=>(n=n*Te%ee,n),c=()=>(o()-1)/de;return(s,a)=>(a===void 0&&(a=s,s=0),Math.floor(c()*(a-s+1))+s)},We=(n,o)=>(o===void 0&&(o=n,n=0),Math.floor(Math.random()*(o-n+1))+n),De=()=>{const n=[],o=[],c=[];return{addEventResize:i=>{i(),n.push(i)},onResizeEvents:()=>n.forEach(i=>i()),addEventClick:i=>o.push(i),onClickEvents:(i,r)=>o.forEach(M=>M(i,r)),addEventMove:i=>c.push(i),onMoveEvents:(i,r)=>c.forEach(M=>M(i,r)),removeAllEvents:()=>{n.splice(0),o.splice(0),c.splice(0)}}},B=(n,o)=>{const c=Math.pow(Math.abs(n.x-o.x),2),f=Math.pow(Math.abs(n.y-o.y),2),s=n.r||0,a=o.r||0,t=Math.pow(s+a,2);return c+f<=t},He=(n,o)=>{const c=n.r||0,f=o.w||0,s=o.h||0;return Math.abs(o.x+f/2-n.x)<=f/2+c&&Math.abs(o.y+s/2-n.y)<=s/2+c},Ae=(n,o)=>B(n,o),ze=n=>{const o=new AudioContext,c={},f=a=>{fetch(a).then(t=>t.arrayBuffer()).then(t=>(o==null?void 0:o.decodeAudioData(t))||null).then(t=>{t&&(c[a]=t)})};if(n.length)for(const a of n)f(a);return(a,t)=>{setTimeout(async()=>{const d=o.createBufferSource();c[a]||(c[a]=await fetch(a).then(l=>l.arrayBuffer()).then(l=>(o==null?void 0:o.decodeAudioData(l))||null)),d.buffer=c[a],d.connect(o.destination),t&&(d.playbackRate.value=t),d.start()},0)}};let Q;const Le=(n,o)=>{if(Q)throw new Error("Webcore already specified");const c=Ce(),f=xe(n),{loop:s,stop:a,stopAll:t}=be(),{addEventResize:d,onResizeEvents:l,addEventClick:e,onClickEvents:i,addEventMove:r,onMoveEvents:M,removeAllEvents:S}=De();let p=innerWidth/2,u=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),y=innerWidth>innerHeight;const w=()=>({cx:p,cy:u,s:h,m:v,isL:y}),m=ze(o);Q={font:"Tijuf",ctx:c.ctx,shade:c.shade,rotate:c.rotate,translate:c.translate,setBackground:c.setBackground,createImg:c.createImg,useMeasure:w,useScreenMeta:f.useScreenMeta,navigate:(g,E)=>{if(!n.some(P=>P.name===g))throw new Error(`Screen ${g} not specified`);t(),Ie(),S(),new Promise(()=>f.navigate(g,E))},loop:s,loopStop:a,useTimer:Re,rand:We,useRandChain:ke,intersect:Ae,addEventResize:d,addEventClick:e,addEventMove:r,playSound:m},s(()=>c.render(f.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),y=innerWidth>innerHeight,c.resize(),l()},document.onpointerdown=g=>{i(g.clientX,g.clientY)},document.onmousemove=g=>{M(g.clientX,g.clientY)},f.navigate()},x=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},D=n=>{const{shade:o,ctx:c,createImg:f}=x(),s=()=>{const{r:t,c:d="#ffffff",p:l}=n,e=c.createRadialGradient(t,t,t,t,t,t/5);return e.addColorStop(0,o(d,0)),e.addColorStop(.01,o(d,0)),e.addColorStop(.075,o(d,9)),e.addColorStop(.15,o(d,0)),e.addColorStop(.15,o(d,-15)),e.addColorStop(.18,o(d,-5)),e.addColorStop(.22,o(d,-15)),l?(e.addColorStop(.24,o(d,-10)),e.addColorStop(.3,o(d,-8)),e.addColorStop(.34,o(d,-12)),e.addColorStop(.6,o(d,-8)),e.addColorStop(1,o(d,-6))):(e.addColorStop(.24,o(d,-12)),e.addColorStop(.26,o(d,-8)),e.addColorStop(.3,o(d,-2)),e.addColorStop(.34,o(d,0)),e.addColorStop(.5,o(d,5)),e.addColorStop(1,o(d,18))),e},a=()=>{const{r:t,c:d="#ffffff",p:l}=n,e=`${d}_${l?"push":"pop"}_${t}`;if(te[e])return te[e];const i=f((r=c)=>{const M=s();r.fillStyle=M,r.beginPath(),r.arc(t,t,t,0,2*Math.PI),r.closePath(),r.fill()},2*t);return te[e]=i,i};return(t=c)=>{const{x:d,y:l,r:e}=n,i=a();t.drawImage(i,d-e,l-e,2*e,2*e)}},ne={},V=n=>{const{ctx:o}=x();let c;return ne[n.src]?c=ne[n.src]:(c=new Image,c.src=n.src,ne[n.src]=c),(f=o)=>{const{w:s,h:a=s,x:t=0,y:d=0}=n;c.complete&&f.drawImage(c,t,d,s,a)}},le=n=>{const{font:o,ctx:c}=x(),f=n.text,s=n.text.length,a=2*Math.PI/s/4;return(t=c)=>{const{x:d,y:l,r:e,s:i=0,fs:r}=n,M=r||Math.round(e/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${M}px ${o}`,t.save(),t.translate(d,l),t.rotate(i);for(let S=0;S<s;S++)t.save(),t.rotate(S*a),t.fillText(f[S],0,-e),t.restore();t.restore()}},Fe=()=>{var y,w;const{ctx:n,loop:o,rotate:c,navigate:f,useMeasure:s,addEventClick:a,addEventResize:t,setBackground:d}=x();d("#040404");let l=!1,e,i,r,M,S,p=-.2,u=0;t(()=>{const{cx:m,cy:g,s:E}=s(),P=Math.round(E*.25);e={c:"#ff6347",x:m,y:g,r:P,p:!1},i=D(e),r=V({x:m-P+Math.round(P*.35),y:g-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),M=le({text:"nezabotin",x:m,y:g,r:Math.round(P*1.1),s:Math.PI*1.6}),S=le({text:"production",x:m,y:g,r:Math.round(P*1.1),s:Math.PI*2.6})});const h=()=>{p+=.01,u=p>=1?1:p,p>=1.8&&(e.p=!0),p>=2.2&&(e.c="#f86a9a"),p>=2.6&&f("main")};a(()=>{[1.4,1.8,2.2,2.6].some(m=>{if(p<m)return p=m,!0})});const v=()=>{o(h),l=!0};return(y=document==null?void 0:document.fonts)!=null&&y.ready?(w=document==null?void 0:document.fonts)==null||w.ready.then(v):v(),()=>{const{cx:m,cy:g}=s();n.globalAlpha=l?1:0,i(),p<1.8&&r(),p<1.4&&c(()=>{M(),S()},m,g,u),n.globalAlpha=1}},ue="ylp",pe="score",oe="difficulty",fe="sound",se=[.14,.11,.09,.075],he=750,_e=350,me=10,Y=[];for(let n=0;n*me<=he-_e;n++)Y.push(he-n*me);let U=null;const O=()=>{const n=p=>localStorage.getItem(`${ue}_${p}`),o=(p,u)=>localStorage.setItem(`${ue}_${p}`,u.toString()),c=()=>+(n(pe)||0),f=p=>o(pe,p),s=p=>{const u=c();f(u+p)},a=()=>+(n(oe)||0),t=p=>{const u=a();o(oe,Math.min(Math.max(u+p,0),se.length*Y.length-1))};return{getScore:c,addScore:s,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const p=a(),u=Math.floor(p/Y.length);return se[u]||se[1]},getDifficultyTic:()=>{const p=a(),u=Math.floor(p/Y.length),h=p-u*Y.length;return Y[h]||Y[0]},resetDifficulty:()=>o(oe,0),getSound:()=>{if(U!==null)return U;const p=n(fe);return!p||p==="true"?(U=!0,!0):(U=!1,!1)},setSound:p=>{U=p,o(fe,p)}}};let Me=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3"],z=[...Me];const q=()=>{const{rand:n,playSound:o}=x(),{getSound:c}=O();return{playPop:()=>{if(!c())return;const l=n(z.length-1),e=z[l];z.splice(l,1),z.length||(z=[...Me]);const i=n(z.length-1);z=[...z.splice(i,z.length),...z],o(e)},playMissed:()=>{if(!c())return;o("/sounds/new/wrong.mp3")},playFail:()=>{if(!c())return;o("/sounds/fail-fast.mp3")},playWin:()=>{if(!c())return;o("/sounds/win.mp3")},playComplete:()=>{if(!c())return;o("/sounds/complete.mp3")}}},j=100/2;let ge=0;const X=()=>{const{loop:n,ctx:o,shade:c,rand:f}=x(),{playPop:s,playMissed:a}=q(),t={},d=()=>{for(const i in t){const r=t[i];if(!r)return;const M=r.popit;if(!r.shake)r.tic+=j/5,r.tic>=j&&(r.dir=-1),r.withoutRad||(M.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:j-r.tic)));else{r.tic+=j/5;const S=f(1,2),p=f(1,2);M.x=r.origX+Math.random()*S*(Math.random()>.5?1:-1),M.y=r.origY+Math.random()*p*(Math.random()>.5?1:-1)}r.tic>=2*j&&(delete t[i],M.r=r.origR,M.x=r.origX,M.y=r.origY)}},l=(i,r=!1,M=!1)=>{var w;r?a():s(),(w=navigator==null?void 0:navigator.vibrate)==null||w.call(navigator,30),ge++;const S=`${new Date().valueOf().toString()}_${ge}`,p=1,u=1;let h=i.r,v=i.x,y=i.y;for(const m in t){const g=t[m];i===g.popit&&(h=g.origR,v=g.origX,y=g.origY)}t[S]={withoutRad:r,tic:p,dir:u,popit:i,origR:h,origX:v,origY:y,shake:M}},e=()=>{o.globalAlpha=.25;for(const i in t){const r=t[i];if(r.shake)continue;const M=r.popit;o.fillStyle=c(M.c||"red",-12),o.beginPath(),o.arc(M.x,M.y,M.r+r.origR*.001*(r.tic+(r.dir>0?0:j-r.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return n(d),{popEffect:l,render:e}},G=n=>{const{font:o,ctx:c}=x();return(f=c)=>{const{text:s,x:a,c:t,y:d,fs:l,a:e="center",mw:i,f:r}=n;f.textAlign=e,f.fillStyle=t,f.font=`${l}px ${r||o}`,f.fillText(s,a,d,i)}},Be=({color:n="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,useScreenMeta:a,navigate:t,addEventClick:d,intersect:l}=x(),{from:e}=a();let i,r,M;return c(()=>{const{cx:u,cy:h,s:v,m:y}=f(),w=Math.round(v*.25);i={c:n,r:Math.round(v*.08),x:u-w-1*y,y:h-w+1*y,p:(e==="score"||e==="opening"||e==="devs")&&!i},r=D(i),M=V({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),d((u,h)=>{l({x:u,y:h},i)&&(o(i),i.p=!0,s(()=>{t("score")},100))}),{render:()=>{r(),i.p||M()},point:()=>({x:i.x,y:i.y,r:i.r})}},ye=({color:n="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,navigate:a,addEventClick:t,intersect:d}=x();let l,e,i;return c(()=>{const{s:S}=f(),p=Math.round(S*.08);l={c:n,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:!l},e=D(l),i=V({x:Number(l.x)-p+Math.round(p*.4),y:Number(l.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),s(()=>{l.p&&o(l,!1,!0),l.p=!1}),t((S,p)=>{d({x:S,y:p},l)&&(o(l),l.p=!0,s(()=>{a("main")},100))}),{render:()=>{e(),l.p||i()},point:()=>({x:l.x,y:l.y,r:l.r})}},Oe=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,addEventClick:a,intersect:t,rotate:d}=x(),{playPop:l}=q();let e,i,r;return c(()=>{const{s:p}=f(),u=Math.round(p*.08);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},i=D(e),r=V({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),a((p,u)=>{t({x:p,y:u},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||d(()=>{r()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},$e=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,addEventClick:a,intersect:t,rotate:d}=x(),{playPop:l}=q();let e,i,r;return c(()=>{const{s:p}=f(),u=Math.round(p*.08),h=innerWidth<innerHeight?Math.round(innerWidth-1.6*u-2*u-.3*u):Math.round(innerWidth-1.6*u),v=innerWidth<innerHeight?Math.round(innerHeight-1.6*u):Math.round(innerHeight-1.6*u-2*u-.3*u);e={c:"#ff6347",r:u,x:h,y:v,p:!1},i=D(e),r=V({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),a((p,u)=>{t({x:p,y:u},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||d(()=>{r()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Ne=n=>{const{ctx:o,shade:c}=x(),f=Math.round(n.r/2.2),s=Math.round(.15*n.r),a=c(n.c||"blue",-3);return(t=o)=>{const{r:d,x:l=d,y:e=d}=n;t.lineCap="round",t.fillStyle=a,t.strokeStyle=a,t.lineWidth=f,t.beginPath(),t.moveTo(l+s,e),t.lineTo(l-s/2,e-s),t.lineTo(l-s/2,e+s),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l+s,e),t.lineTo(l-s/2,e-s),t.moveTo(l-s/2,e-s),t.lineTo(l-s/2,e+s),t.moveTo(l-s/2,e+s),t.lineTo(l+s,e),t.stroke()}},ve=({color:n="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,useScreenMeta:a,navigate:t,addEventClick:d,intersect:l}=x(),{from:e,to:i}=a();let r,M,S;const p=()=>{const{cx:w,cy:m,s:g,m:E}=f(),P=w+Math.round(g*.25)+2*E,C=m+Math.round(g*.25);return{x:P,y:C}},u=()=>{const{cx:w,cy:m,s:g,isL:E,m:P}=f(),C=Math.round(g*.1);if(E){let R=Math.round(w+g/2)+P*2;const b=Math.round(m+g/2-C*2);return R=Math.min(R,Math.round(innerWidth-C*1.5)),{x:R,y:b}}else{const R=Math.round(w+g*.12);let b=Math.round(m+g/2+C*1.5);return b=Math.min(b,innerHeight-Math.round(C*1.5)),{x:R,y:b}}},h=()=>i==="main"?p():u();return c(()=>{const{s:w}=f();r={c:n,r:Math.round(w*.1),...h(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!r},M=D(r),S=Ne(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),d((w,m)=>{l({x:w,y:m},r)&&(o(r),r.p=!0,s(()=>{t("game")},100))}),{render:()=>{M(),r.p||S()},point:()=>({x:r.x,y:r.y,r:r.r})}},we=n=>{const{ctx:o,shade:c}=x(),f=Math.round(n.r/4),s=Math.round(.12*n.r);return(a=o)=>{const{r:t,x:d=t,y:l=t}=n,e=c(n.c||"blue",-3);a.lineCap="round",a.strokeStyle=e,a.lineWidth=f,a.beginPath(),a.moveTo(d-1.5*s,l-2*s),a.lineTo(d-1.5*s,l+2*s),a.stroke(),a.beginPath(),a.moveTo(d+1.5*s,l-2*s),a.lineTo(d+1.5*s,l+2*s),a.stroke()}},Ye=({popEffect:n=()=>{}})=>{const{addEventResize:o,useMeasure:c,useTimer:f,useScreenMeta:s,navigate:a,addEventClick:t,intersect:d}=x(),{from:l}=s();let e,i,r;const M=()=>{const{cx:u,cy:h,s:v,isL:y,m:w}=c(),m=Math.round(v*.1);if(y){let g=Math.round(u-v/2)-w;const E=Math.round(h-v/2+m*2);return g=Math.max(g,Math.round(m*1.5)),{x:g,y:E}}else{const g=Math.round(u-v*.12);let E=Math.round(h+v/2+m*1.5);return E=Math.min(E,innerHeight-Math.round(m*1.5)),{x:g,y:E}}};return o(()=>{const{s:u}=c();e={c:"#fd8059",r:Math.round(u*.08),...M(),p:(l==="game"||l==="opening")&&!e},i=D(e),r=we(e)}),f(()=>{e.p&&n(e,!1,!0),e.p=!1},500),t((u,h)=>{d({x:u,y:h},e)&&(n(e),e.p=!0,f(()=>{a("main")},100))}),{render:()=>{i(),e.p||r()},point:()=>({x:e.x,y:e.y,r:e.r})}},Ge=n=>{const{ctx:o,shade:c}=x(),f=Math.round(n.r/4),s=Math.round(.2*n.r),a=c(n.c||"blue",-5);return(t=o)=>{const{r:d,x:l=d,y:e=d}=n;t.lineCap="round",t.fillStyle=a,t.strokeStyle=a,t.lineWidth=f,t.beginPath(),t.ellipse(l-s,e+s,f,s,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l-s/2,e+s),t.lineTo(l,e-s),t.lineTo(l+s,e-s),t.stroke(),n.on||(t.lineWidth=Math.round(f/3),t.beginPath(),t.moveTo(l-d/4,e-d/4),t.lineTo(l+d/4,e+d/4),t.stroke())}},je=({color:n="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,useScreenMeta:a,addEventClick:t,intersect:d}=x(),{from:l}=a(),{getSound:e,setSound:i}=O();let r,M,S;return c(()=>{const{cx:h,cy:v,s:y,m:w}=f(),m=Math.round(y*.25),g=Math.round(y*.065),E=e();r={c:n,r:g,x:h-m-g-w,y:v-m+3*g,p:(l==="opening"||l==="devs")&&!r,on:E},M=D(r),S=Ge(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),t((h,v)=>{if(d({x:h,y:v},r)){let y=e();y=!y,i(y),r.p=!0,r.on=y,o(r),s(()=>{r.p=!1},100)}}),{render:()=>{M(),r.p||S()},point:()=>({x:r.x,y:r.y,r:r.r})}},Xe=({color:n="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:c,useMeasure:f,useTimer:s,useScreenMeta:a,addEventClick:t,intersect:d,navigate:l}=x(),{from:e}=a();let i,r,M,S,p=0;return c(()=>{const{cx:v,cy:y,s:w}=f(),m=Math.round(w*.25);i={c:n,x:v,y,r:m,p:(e==="opening"||e==="devs")&&!i},r=D(i),M=G({text:"Yola",c:"#f1f1f1",x:v,y:y-m+Math.round(m*.9),fs:Math.round(m/2.6),mw:m*2}),S=G({text:"PopiT",c:"#ffeb3b",x:v,y:y-m+Math.round(m*1.3),fs:Math.round(m/2.3),mw:m*2})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),t((v,y)=>{d({x:v,y},i)&&!(i!=null&&i.p)&&(p++,o(i),i.p=!0,s(()=>{p>100?l("devs"):(i!=null&&i.p&&o(i,!1,!0),i.p=!1)},200))}),{render:()=>{r(),i.p||(M(),S())},point:()=>({x:i.x,y:i.y,r:i.r})}},Pe=({color:n="#00dcfe",frequency:o=20})=>{const{addEventResize:c,useRandChain:f,useMeasure:s,rand:a,useTimer:t,setBackground:d,useScreenMeta:l}=x(),{from:e}=l();d(n);const i=a(0,999);let r=[],M=[];c(()=>{const h=f(i),{s:v}=s();r=[];const y=Math.round(v*.04),w=Math.round(innerWidth/y/2)-2,m=Math.round((innerWidth-2*y*w)/(w+1)),g=Math.round(innerHeight/y/2)-2,E=Math.round((innerHeight-2*y*g)/(g+1));for(let P=0;P<g;P++)for(let C=0;C<w;C++)h(h(o))<1&&r.push({x:m+y+C*y*2+m*C,y:E+y+P*y*2+E*P,r:y,c:n,p:e==="opening"?!0:h(1)>0});M=r.map(P=>D(P))});const S=()=>{t(()=>{const h=a(r.length-1);r[h]&&(r[h].p=!r[h].p),S()},750)};return e==="opening"?t(()=>{r.forEach(h=>h.p=a(1)>0),S()}):S(),{render:()=>{M.forEach(h=>h())},setIntersections:h=>{r=r.filter(({x:v,y,r:w})=>h(v,y,w)),M=r.map(v=>D(v))}}},ce=(n=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:c,useMeasure:f,setBackground:s,rand:a}=x(),{getDifficultyRad:t}=O();return o=[...o.splice(a(o.length-1),o.length),...o],n||c(()=>{const{s:l}=f(),e=t(),i=Math.round(l*e),r=Math.round(innerWidth/i/2)-1,M=(innerWidth-2*i*r)/(r+1),S=Math.round(innerHeight/i/2)-1,p=(innerHeight-2*i*S)/(S+1),u=innerWidth>=innerHeight,h=u?r:S,v=u?M:p,y=u?innerWidth:innerHeight;let w=0;const m=[];for(let E=0;E<h;E++)o[w]||(w=0),m.push(`${o[w]} ${(v+i+E*i*2+v*E)/y*100}%`),w++;s(`linear-gradient(${u?"to right":"to bottom"}, ${m.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},Se=({palette:n,retry:o,popEffect:c=()=>{}})=>{const{addEventResize:f,useMeasure:s,rand:a,useTimer:t,useScreenMeta:d,navigate:l,addEventClick:e,intersect:i}=x(),{from:r}=d(),{getDifficultyRad:M}=O(),S=[];let p=[],u,h,v,y={x:0,y:0,r:0};const w=g=>Array.isArray(n)?n[g]:n;return f(()=>{const{s:g}=s();S.splice(0);const E=M(),P=Math.round(g*E),C=Math.round(innerWidth/P/2)-1,R=(innerWidth-2*P*C)/(C+1),b=Math.round(innerHeight/P/2)-1,F=(innerHeight-2*P*b)/(b+1),_=innerWidth>=innerHeight;let H=0;for(let W=0;W<b;W++){for(let A=0;A<C;A++){w(H)||(H=0);const I={x:R+P+A*P*2+R*A,y:F+P+W*P*2+F*W,r:P,c:w(H),p:!0};W===0&&A===C-1?(y={x:I.x,y:I.y,r:I.r,c:I.c,p:(r==="main"||r==="gameover"||r==="gamescore")&&!y.r},u=D(y),h=we(y)):S.push(I),H+=_?1:0}H=_?0:H+1}o&&(v=S[a(S.length-1)],t(()=>{c(v,!1,!0),v.p=!1})),p=S.map(W=>D(W))}),t(()=>{y.p&&c(y,!1,!0),y.p=!1}),o&&e((g,E)=>{i({x:g,y:E},v)&&(c(v),v.p=!0,t(()=>{l("game")},100))}),e((g,E)=>{i({x:g,y:E},y)&&(c(y),y.p=!0,t(()=>{l("main")},100))}),{render:()=>{p.forEach(g=>g()),u(),y!=null&&y.p||h()},popits:S,pausePpt:y}},N=100,K="#222",Ue=n=>{const o=(n==null?void 0:n[0])||0,c=(n==null?void 0:n[1])||0,f=(n==null?void 0:n[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(c<255?c<1?0:c:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},re={},Ve=n=>{const{ctx:o,createImg:c,useRandChain:f,useTimer:s}=x();let a,t=!1,d=[];const l=n.r*2/N/2;re[n.imgSrc]?a=re[n.imgSrc]:(a=re[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},a.img.src=n.imgSrc);const e=()=>s(()=>{t=!t,e()},250),i=(u,h=o)=>{const{x:v,y,c:w,r:m}=u;h.fillStyle=w||"red",h.beginPath(),h.arc(v+m,y+m,m,0,Math.PI*2),h.closePath(),h.fill()},r=(u=o,h=0,v=0)=>{u.fillStyle=K,u.beginPath(),u.roundRect(h,v,2*n.r,2*n.r,l),u.closePath(),u.fill()},M=()=>{const u=[];for(let m=0;m<N;m++)for(let g=0;g<N;g++){const E={x:g*l*2,y:m*l*2,r:l,c:K};u.push(E)}let h=n.score-n.winScore;const v=[...u],y=f(n.seed),w=(m=!1)=>{const g=y(v.length-1),E=v[g],P=u.indexOf(E);E.c=m?K:a.cols[P],v.splice(g,1),m&&d.push({...E,c:a.cols[P]})};for(let m=h;m>0;m--)w();if(n.winScore){d=[];for(let m=n.winScore;m>0;m--)w(!0);e()}return u},S=()=>{const u=M();a.drawImg=c((h=o)=>{r(h),u.filter(v=>v.c!==K).forEach(v=>i(v,h))},2*n.r)},p=async()=>{var v;const u=document.createElement("canvas");u.width=N,u.height=N;const h=u.getContext("2d",{willReadFrequently:!0});h==null||h.drawImage(a.img,0,0);for(let y=0;y<N;y++){const w=[];for(let m=0;m<N;m++){const g=(v=h==null?void 0:h.getImageData(m,y,1,1))==null?void 0:v.data;w.push(Ue(g))}a.cols.push(...w)}a.isFilled=!0,S()};return a.isFilled?(a.r!==n.r||a.score!==n.score)&&S():a.img.onload=p,(u=o)=>{const{x:h,y:v,r:y,winScore:w}=n;if(a.drawImg?u.drawImage(a.drawImg,h-y,v-y,2*y,2*y):r(u,h-y,v-y),t&&w&&a.drawImg)for(const m of d)u.fillStyle=m.c||"red",u.beginPath(),u.arc(h-y+m.x+m.r,v-y+m.y+m.r,m.r,0,Math.PI*2),u.closePath(),u.fill()}},ie=1e4,Ee=(n=0,o=!1)=>{const{addEventResize:c,useMeasure:f,translate:s}=x(),{getScore:a}=O(),t=["/media/levels/sloth.png","/media/levels/rabbit.png","/media/levels/bear.png","/media/levels/horse.png","/media/levels/fish.png","/media/levels/lion.png","/media/levels/elephant.png","/media/levels/tiger.png","/media/levels/crocodile.png","/media/levels/giraffe.png","/media/levels/penguin.png","/media/levels/wolf.png","/media/levels/cat.png"],d=a();let l,e=0,i=0,r=!1,M=!1;const S=w=>Math.min(Math.floor(w/ie),t.length-1);let p=S(d-n);return n&&(r=S(d)!==p,M=Math.floor(d/ie)>t.length-1),c(()=>{const{cx:w,cy:m,s:g,isL:E}=f();l=[],e=(g-2*g*.055*1.6)/2,i=g*.05;let P=o?p:0;for(P;P<(o?p+1:t.length);P++){const C=t[P],R=E?w:w+P*e*2+P*i,b=E?m+P*e*2+P*i:m;l.push(Ve({x:R,y:b,r:e,score:Math.min(d-P*ie,1e4),imgSrc:C,winScore:r||M?0:n,seed:P}))}}),{up:()=>{p=p+1<t.length?p+1:t.length-1},down:()=>{p=p-1<0?0:p-1},render:()=>{const{isL:w}=f(),m=w?0:-(p*e*2+p*i),g=w?-(p*e*2+p*i):0;s(()=>{l==null||l.forEach(E=>E())},m,g)},rect:()=>{const{cx:w,cy:m}=f(),g=innerWidth>innerHeight;return{x:g?w-e:0,y:g?0:m-e,w:g?2*e:innerWidth,h:g?innerHeight:2*e}},isJump:r,isCompleted:M}},qe=({popits:n,pausePpt:o,popEffect:c=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:s,rand:a,addEventClick:t,addEventMove:d,intersect:l,navigate:e,addEventResize:i}=x(),{getScore:r,addScore:M,getDifficultyTic:S}=O();let p=[],u,h,v=!1,y=0,w=0,m=0,g,E,P=!1;const C=r(),R=S(),b=()=>{g&&E&&w&&!P&&new Date().getTime()-g.getTime()<=E*350&&(w=w*2),g=new Date,E=p.length,P=!1},F=I=>{const T=n.filter($=>p.indexOf($)===-1&&$!==I),L=a(T.length-1),k=T[L];k&&(c(k,!1,!0),k.p=!1,p.push(T[L]))},_=()=>{h=s(()=>{if(m=Math.max(m-10,50),n.length===p.length){v=!0,h==null||h.stop(),s(()=>{e("gameover")});return}F(),_()},m)},H=I=>{p=[];const T=n.length;let L=a(Math.round(T*.3),Math.round(T*.6));const k=[...n];if(I){const $=k.indexOf(I);k.splice($,1)}for(let $=L;$>0;$--){const ae=a(k.length-1),Z=k[ae];Z.p=!1,c(Z,!1,!0),p.push(Z),k.splice(ae,1)}m=R,u==null||u.stop(),h==null||h.stop(),h=null,C&&(u=s(()=>{f("SLOWLY"),_()},p.length*R)),y=y>0?y:a(3,5),b()},W=I=>{c(I),m=Math.min(m+5,R),w++,I.p=!0;const T=p.indexOf(I);p.splice(T,1),p.length<=0&&(y--,y>0?s(()=>{f(y>1?"Round":"Last"),H(I)},100):(b(),u==null||u.stop(),h==null||h.stop(),M(w),s(()=>{e("gamescore",{winScore:w})},100)))},A=(I,T,L=!1)=>{if(!v){for(const k of p)if(l({x:I,y:T},k)){W(k);return}if(!l({x:I,y:T},o)&&!L){for(const k of n)if(l({x:I,y:T},k)){c(k,!0),f("Popenalty"),P=!0,F(k),h===null&&(u==null||u.stop(),_());return}f("Popenalty"),P=!0,F()}}};t(A),d((I,T)=>A(I,T,!0)),i(()=>{s(()=>{f("Pop it"),H()})})},Ke=n=>{const{addEventResize:o,createImg:c,useMeasure:f,ctx:s,loop:a}=x();let t,d,l,e,i,r,M,S=!1,p=-2;const u=.1;return o(()=>{const{s:h,m:v,cy:y}=f();d=Math.round(h*.16),i=h,r=Math.round(d*1.5),l=0,e=Math.max(Math.round((innerHeight-innerHeight/2-h/2)/2-d/2)+v*2,Math.round(y-h/2-d-v*3)),M=e,S=e-d/2>-(d/2)+v*2;const w={fs:d,text:n,x:Math.round(h/2),y:d,c:"#f9f9f9",mw:Math.round(h*.8)},m=G(w);t=c((g=s)=>{m(g)},i,r)}),a(()=>{const{m:h}=f();e+=p,p+=u,e<=h&&(e=h),e>=M&&(e=M,p=-2)}),()=>{S&&s.drawImage(t,l,e,i,r)}},Je=()=>{const{addEventResize:n,rand:o,useScreenMeta:c}=x(),{from:f}=c(),{popEffect:s,render:a}=X(),t=["#00dcfe","#5bb2f7","#92E6E6"],d=f==="opening"?t[0]:t[o(t.length-1)],{render:l,setIntersections:e}=Pe({color:d}),{render:i,point:r}=Xe({popEffect:s}),{render:M,point:S}=ve({popEffect:s}),{render:p,point:u}=Be({popEffect:s}),{render:h,point:v}=je({popEffect:s});return n(()=>{const y=u(),w=r(),m=S(),g=v();e((E,P,C)=>!B({x:E,y:P,r:C},y)&&!B({x:E,y:P,r:C},w)&&!B({x:E,y:P,r:C},m)&&!B({x:E,y:P,r:C},g))}),()=>{a(),l(),i(),M(),p(),h()}},Qe=()=>{const{useMeasure:n,addEventResize:o}=x(),c=ce(),{popEffect:f,render:s}=X(),{popits:a,render:t,pausePpt:d}=Se({palette:c,popEffect:f});return qe({popits:a,popEffect:f,pausePpt:d}),o(()=>{(a[0].y-a[0].r)/n().m}),()=>{s(),t()}},Ze=()=>{const n="#ff6347",{popEffect:o,render:c}=X(),{setBackground:f}=x(),{minusDifficulty:s}=O(),{render:a}=Se({palette:n,retry:!0,popEffect:o}),{playFail:t}=q();return f(n),s(),t(),()=>{c(),a()}},et=()=>{const{useScreenMeta:n,useTimer:o,navigate:c}=x(),{plusDifficulty:f,resetDifficulty:s}=O(),{data:a}=n(),{popEffect:t,render:d}=X();ce();const{playWin:l,playComplete:e}=q(),{render:i,isJump:r,isCompleted:M}=Ee(a==null?void 0:a.winScore,!0);let S,p;if(!M){const{render:h}=ve({popEffect:t}),{render:v}=Ye({popEffect:t});S=h,p=v}const u=Ke(M?"The end":r?"Complete":"You win");return r||M?(s(),e()):(f(),l()),M&&o(()=>{c("devs")},5e3),()=>{d(),i(),M||(S(),p()),u()}},tt=()=>{const{addEventResize:n,rand:o}=x(),{popEffect:c,render:f}=X(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],a=s[o(s.length-1)],{render:t,setIntersections:d}=Pe({color:a,frequency:10}),{render:l,rect:e,up:i,down:r}=Ee(),{render:M,point:S}=ye({popEffect:c}),{render:p,point:u}=Oe({onClick:i,popEffect:c}),{render:h,point:v}=$e({onClick:r,popEffect:c});return n(()=>{const y=S(),w=e(),m=u(),g=v();d((E,P,C)=>!B({x:E,y:P,r:C},y)&&!He({x:E,y:P,r:C},w)&&!B({x:E,y:P,r:C},m)&&!B({x:E,y:P,r:C},g))}),()=>{f(),t(),l(),M(),p(),h()}},nt=()=>{var w,m;const{addEventResize:n,setBackground:o,createImg:c,useMeasure:f,ctx:s,loop:a,navigate:t,useTimer:d}=x(),{popEffect:l,render:e}=X();let i=null;const r=ce(!0);let M=[];const S=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let p=0,u=!1;const h=()=>{const{m:g,s:E}=f();M=[];const P=Math.round(E*.75),C=Math.round((innerWidth-P)/2);let R=0,b=Math.round(g*7);const F=G({text:"Yo last",c:"#f1f1f1",x:P/2,y:b,fs:b}),_=G({text:"Pop it",c:"#ffeb3b",x:P/2,y:b*2,fs:b}),H=c((W=s)=>{F(W),_(W)},P,3*b);M.push({img:H,x:C,y:p,w:P,h:5*b}),p+=7*b,b=Math.round(g*3.5);for(const W of S){r[R]||(R=0);const A=G({text:W.toLocaleUpperCase(),x:0,y:b,c:r[R],fs:Math.round(b*.6),mw:P,a:"left"}),I=G({text:"Maksim Nezabotin",x:P,y:b*1.5,c:"#f9f9f9",fs:Math.round(b*.6),mw:P,a:"right",f:"Slackey"}),T=c((L=s)=>{A(L),I(L)},P,2*b);M.push({img:T,x:C,y:p,w:P,h:5*b}),p+=5*b,R++}};n(h),o("#040404");const v=()=>{for(const E of M)E.y-=2;const g=M[M.length-1];g.y+g.h<0&&t("main")},y=()=>{p=innerHeight,h(),a(v),u=!0};return(w=document==null?void 0:document.fonts)!=null&&w.ready?(m=document==null?void 0:document.fonts)==null||m.ready.then(y):y(),d(()=>{const{render:g}=ye({popEffect:l});i=g},7500),()=>{s.globalAlpha=u?1:0,M.forEach(({img:g,x:E,y:P,w:C,h:R})=>{P+R>=0&&P<=innerHeight&&s.drawImage(g,E,P,C,R)}),e(),i==null||i(),s.globalAlpha=1}},ot=[{name:"opening",ctor:Fe},{name:"main",ctor:Je},{name:"game",ctor:Qe},{name:"gameover",ctor:Ze},{name:"gamescore",ctor:et},{name:"score",ctor:tt},{name:"devs",ctor:nt}],st=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3","/sounds/new/pop26.mp3","/sounds/new/pop27.mp3","/sounds/new/pop28.mp3","/sounds/new/pop29.mp3","/sounds/new/pop30.mp3","/sounds/new/pop31.mp3","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3","/sounds/complete.mp3"];Le(ot,st);document.title="Yo last Pop it";
