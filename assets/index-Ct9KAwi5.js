(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function l(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(o){if(o.ep)return;o.ep=!0;const a=l(o);fetch(o.href,a)}})();const ht=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");if(!e)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,e.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},f=s=>{e.clearRect(0,0,innerWidth,innerHeight),s()};return l(),document.body.appendChild(t),{ctx:e,render:f,resize:l,rotate:(s,c,i,d)=>{e.save(),e.translate(c,i),e.rotate(Math.PI*d),e.translate(-c,-i),s(),e.restore()},translate:(s,c,i)=>{e.save(),e.translate(c,i),s(),e.restore()},shade:(s,c)=>{s=s.substring(1);const i=parseInt(s,16),d=Math.round(2.55*c),h=(i>>16)+d,P=(i>>8&255)+d,M=(i&255)+d;return"#"+(16777216+(h<255?h<1?0:h:255)*65536+(P<255?P<1?0:P:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(s,c)=>{var i;document.body.style.background=s,document.body.style.backgroundColor=c||s,(i=document.querySelector('meta[name="theme-color"]'))==null||i.setAttribute("content",c||s)},createImg:(s,c,i=c)=>{const d=document.createElement("canvas"),h=d.getContext("2d");if(!h)throw new Error("CanvasRenderingContext2D is null");return d.width=c*devicePixelRatio,d.height=i*devicePixelRatio,h.scale(devicePixelRatio,devicePixelRatio),s(h),d}}},pt=t=>{let e="",l="",f;const o=n=>t.find(u=>u.name===n)||t[0],r={render:()=>{},navigate:(n,u)=>{const s=o(n);l=e||"",e=(s==null?void 0:s.name)||"",f=u,r.render=(s==null?void 0:s.ctor())||(()=>{})},useScreenMeta:()=>({to:e,from:l,data:f})};return r},gt=()=>{const t=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),e=[],l={};return{loop:(r,n)=>{if(Object.entries(l).find(([s,c])=>c===r)||n&&l[n])throw new Error(`Loop${n?" "+n:""} already specified`);n&&e.push(n),n=n||new Date().valueOf().toString(),l[n]=r;const u=()=>{r(),l[n]&&t(u)};u()},stop:r=>{if(typeof r=="string")delete l[r];else{const n=Object.entries(l).find(([u,s])=>s===r);n&&delete l[n[0]]}},stopAll:()=>{for(const r in l)e.indexOf(r)===-1&&delete l[r]}}};let B=[];const mt=()=>{for(const t of B)clearTimeout(t);B=[]},Mt=(t,e=400)=>{let l=new Date,f=e,o=setTimeout(t,f);return B.push(o),{pause:()=>{clearTimeout(o),f-=new Date-l},resume:()=>{l=new Date,clearTimeout(o),o=setTimeout(t,f),B.push(o)},stop:()=>{clearTimeout(o)}}},Z=2147483646,Y=2147483647,vt=16807,yt=(t=Math.floor(Math.random()*Y))=>{t=t%Y,t<=0&&(t+=Z);const e=()=>(t=t*vt%Y,t),l=()=>(e()-1)/Z;return(o,a)=>(a===void 0&&(a=o,o=0),Math.floor(l()*(a-o+1))+o)},Et=(t,e)=>(e===void 0&&(e=t,t=0),Math.floor(Math.random()*(e-t+1))+t),Pt=()=>{const t=[],e=[],l=[];return{addEventResize:c=>{c(),t.push(c)},onResizeEvents:()=>t.forEach(c=>c()),addEventClick:c=>e.push(c),onClickEvents:(c,i)=>e.forEach(d=>d(c,i)),addEventMove:c=>l.push(c),onMoveEvents:(c,i)=>l.forEach(d=>d(c,i)),removeAllEvents:()=>{t.splice(0),e.splice(0),l.splice(0)}}},z=(t,e)=>{const l=Math.pow(Math.abs(t.x-e.x),2),f=Math.pow(Math.abs(t.y-e.y),2),o=t.r||0,a=e.r||0,r=Math.pow(o+a,2);return l+f<=r},St=(t,e)=>{const l=t.r||0,f=e.w||0,o=e.h||0;return Math.abs(e.x+f/2-t.x)<=f/2+l&&Math.abs(e.y+o/2-t.y)<=o/2+l},wt=(t,e)=>z(t,e),xt=t=>{const e={},l=o=>{const a=o.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const o of t){const a=new Audio(o);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const r=l(o);e[r]={audio:a,path:o}}})(),o=>{var u,s;const a=(u=e[o])==null?void 0:u.audio,r=(s=e[o])==null?void 0:s.path;if(!(!a||!r))if(a.currentTime===0)a.play();else{var n=new Audio(r);n.volume=.25,n.play()}}};let G;const Rt=(t,e)=>{if(G)throw new Error("Webcore already specified");const l=ht(),f=pt(t),{loop:o,stop:a,stopAll:r}=gt(),{addEventResize:n,onResizeEvents:u,addEventClick:s,onClickEvents:c,addEventMove:i,onMoveEvents:d,removeAllEvents:h}=Pt();let P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const m=()=>({cx:P,cy:M,s:p,m:g}),y=xt([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:m,useScreenMeta:f.useScreenMeta,navigate:(v,E)=>{if(!t.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);r(),mt(),h(),new Promise(()=>f.navigate(v,E))},loop:o,loopStop:a,useTimer:Mt,rand:Et,useRandChain:yt,intersect:wt,addEventResize:n,addEventClick:s,addEventMove:i,playAudio:y},o(()=>l.render(f.render),"draw"),window.onresize=()=>{P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),u()},document.onpointerdown=v=>{c(v.clientX,v.clientY)},document.onmousemove=v=>{d(v.clientX,v.clientY)},f.navigate()},x=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},X={},I=t=>{const{shade:e,ctx:l,createImg:f}=x(),o=()=>{const{r,c:n="#ffffff",p:u}=t,s=l.createRadialGradient(r,r,r,r,r,r/5);return s.addColorStop(0,e(n,0)),s.addColorStop(.01,e(n,0)),s.addColorStop(.075,e(n,9)),s.addColorStop(.15,e(n,0)),s.addColorStop(.15,e(n,-15)),s.addColorStop(.18,e(n,-5)),s.addColorStop(.22,e(n,-15)),u?(s.addColorStop(.24,e(n,-10)),s.addColorStop(.3,e(n,-8)),s.addColorStop(.34,e(n,-12)),s.addColorStop(.6,e(n,-6)),s.addColorStop(1,e(n,-4))):(s.addColorStop(.24,e(n,-12)),s.addColorStop(.26,e(n,-8)),s.addColorStop(.3,e(n,-2)),s.addColorStop(.34,e(n,0)),s.addColorStop(.5,e(n,5)),s.addColorStop(1,e(n,10))),s},a=()=>{const{r,c:n="#ffffff",p:u}=t,s=`${n}_${u?"push":"pop"}_${r}`;if(X[s])return X[s];const c=f((i=l)=>{const d=o();i.fillStyle=d,i.beginPath(),i.arc(r,r,r,0,2*Math.PI),i.closePath(),i.fill()},2*r);return X[s]=c,c};return(r=l)=>{const{x:n,y:u,r:s}=t,c=a();r.drawImage(c,n-s,u-s,2*s,2*s)}},j={},$=t=>{const{ctx:e}=x();let l;return j[t.src]?l=j[t.src]:(l=new Image,l.src=t.src,j[t.src]=l),(f=e)=>{const{w:o,h:a=o,x:r=0,y:n=0}=t;l.complete&&f.drawImage(l,r,n,o,a)}},tt=t=>{const{font:e,ctx:l}=x(),f=t.text,o=t.text.length,a=2*Math.PI/o/4;return(r=l)=>{const{x:n,y:u,r:s,s:c=0,fs:i}=t,d=i||Math.round(s/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${d}px ${e}`,r.save(),r.translate(n,u),r.rotate(c);for(let h=0;h<o;h++)r.save(),r.rotate(h*a),r.fillText(f[h],0,-s),r.restore();r.restore()}},bt=()=>{var m,y;const{ctx:t,loop:e,rotate:l,navigate:f,useMeasure:o,addEventClick:a,addEventResize:r,setBackground:n}=x();n("#040404");let u=!1,s,c,i,d,h,P=-.2,M=0;r(()=>{const{cx:v,cy:E,s:w}=o(),S=Math.round(w*.25);s={c:"#ff6347",x:v,y:E,r:S,p:!1},c=I(s),i=$({x:v-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),d=tt({text:"nezabotin",x:v,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),h=tt({text:"production",x:v,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{P+=.01,M=P>=1?1:P,P>=1.8&&(s.p=!0),P>=2.2&&(s.c="#f86a9a"),P>=2.6&&f("main")};a(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(P<v)return P=v,!0})});const g=()=>{e(p),u=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(g):g(),()=>{const{cx:v,cy:E}=o();t.globalAlpha=u?1:0,c(),P<1.8&&i(),P<1.4&&l(()=>{d(),h()},v,E,M),t.globalAlpha=1}},L=100/2,N=()=>{const{loop:t,ctx:e,shade:l}=x(),f={},o=()=>{for(const n in f){const u=f[n];if(!u)return;const s=u.popit;u.tic+=L/5,u.tic>=L&&(u.dir=-1),u.withoutRad||(s.r=u.origR+u.origR*75e-5*(u.tic+(u.dir>0?0:L-u.tic))),u.tic>=2*L&&(delete f[n],s.r=u.origR)}},a=(n,u=!1)=>{const s=new Date().valueOf().toString(),c=1,i=1;f[s]={withoutRad:u,tic:c,dir:i,popit:n,origR:n.r}},r=()=>{e.globalAlpha=.25;for(const n in f){const u=f[n],s=u.popit;e.fillStyle=l(s.c||"red",-12),e.beginPath(),e.arc(s.x,s.y,s.r+u.origR*.001*(u.tic+(u.dir>0?0:L-u.tic)),0,Math.PI*2),e.closePath(),e.fill()}e.globalAlpha=1};return t(o),{popEffect:a,render:r}},J=t=>{const{font:e,ctx:l}=x();return(f=l)=>{const{text:o,x:a,c:r,y:n,fs:u,a:s="center",mw:c}=t;f.textAlign=s,f.fillStyle=r,f.font=`${u}px ${e}`,f.fillText(o,a,n,c)}},q=100,ct=()=>{const{loop:t,ctx:e,useMeasure:l}=x();let f=null;const o=()=>{if(!f)return;const{m:n}=l();f.tic<=q&&(f.props.fs=n*2+.06*f.tic*n),f.tic+=f.tic>q?1:10,f.tic>q*2&&(f=null)},a=(n,u="#ffffff")=>{const{cx:s,m:c}=l(),i=0,d={x:s,y:Math.round(c*16),text:n,c:u,fs:20*c},h=J(d);f={props:d,shape:h,tic:i}},r=()=>{f&&(e.globalAlpha=.004*f.tic,f.shape(),e.globalAlpha=1)};return t(o),{splashEffect:a,render:r}},Ct=({color:t="#ba68c8",popEffect:e=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:o,useScreenMeta:a,navigate:r,addEventClick:n,intersect:u}=x(),{from:s}=a();let c,i,d;return l(()=>{const{cx:M,cy:p,s:g,m}=f(),y=Math.round(g*.25);c={c:t,r:Math.round(g*.08),x:M-y-1*m,y:p-y+1*m,p:(s==="score"||s==="opening")&&!c},i=I(c),d=$({x:Number(c.x)-c.r+Math.round(c.r*.5),y:Number(c.y)-c.r+Math.round(c.r*.5),w:c.r*2-Math.round(c.r*1),src:"/media/star.svg"})}),o(()=>{c.p=!1}),n((M,p)=>{u({x:M,y:p},c)&&(e(c),c.p=!0,o(()=>{r("score")},100))}),{render:()=>{i(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},It=({color:t="#ff6347",popEffect:e=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:o,useScreenMeta:a,navigate:r,addEventClick:n,intersect:u}=x(),{from:s}=a();let c,i,d;return l(()=>{const{s:M}=f(),p=Math.round(M*.08);c={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:s==="main"&&!c},i=I(c),d=$({x:Number(c.x)-p+Math.round(p*.4),y:Number(c.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),o(()=>{c.p=!1}),n((M,p)=>{u({x:M,y:p},c)&&(e(c),c.p=!0,o(()=>{r("main")},100))}),{render:()=>{i(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},Tt=t=>{const{addEventResize:e,useMeasure:l,useTimer:f,addEventClick:o,intersect:a,rotate:r}=x();let n,u,s;return e(()=>{const{s:d}=l(),h=Math.round(d*.055);n={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h),p:!1},u=I(n),s=$({x:Number(n.x)-h+Math.round(h*.4),y:Number(n.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),o((d,h)=>{a({x:d,y:h},n)&&(n.p=!0,t(),f(()=>{n.p=!1},100))}),{render:()=>{u(),n.p||r(()=>{s()},n.x,n.y,-.5)},point:()=>({x:n.x,y:n.y,r:n.r})}},Wt=t=>{const{addEventResize:e,useMeasure:l,useTimer:f,addEventClick:o,intersect:a,rotate:r}=x();let n,u,s;return e(()=>{const{s:d}=l(),h=Math.round(d*.055);n={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h-2*h-.3*h),p:!1},u=I(n),s=$({x:Number(n.x)-h+Math.round(h*.4),y:Number(n.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),o((d,h)=>{a({x:d,y:h},n)&&(n.p=!0,t(),f(()=>{n.p=!1},100))}),{render:()=>{u(),n.p||r(()=>{s()},n.x,n.y,.5)},point:()=>({x:n.x,y:n.y,r:n.r})}},At=t=>{const{ctx:e,shade:l}=x(),f=Math.round(t.r/2.2),o=Math.round(.15*t.r),a=l(t.c||"blue",-3);return(r=e)=>{const{r:n,x:u=n,y:s=n}=t;r.lineCap="round",r.fillStyle=a,r.strokeStyle=a,r.lineWidth=f,r.beginPath(),r.moveTo(u+o,s),r.lineTo(u-o/2,s-o),r.lineTo(u-o/2,s+o),r.closePath(),r.fill(),r.beginPath(),r.moveTo(u+o,s),r.lineTo(u-o/2,s-o),r.moveTo(u-o/2,s-o),r.lineTo(u-o/2,s+o),r.moveTo(u-o/2,s+o),r.lineTo(u+o,s),r.stroke()}},it=({getX:t,getY:e,color:l="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:o,useMeasure:a,useTimer:r,useScreenMeta:n,navigate:u,addEventClick:s,intersect:c}=x(),{from:i}=n();let d,h,P;return o(()=>{const{cx:g,cy:m,s:y,m:v}=a();d={c:l,r:Math.round(y*.1),x:t(g,y,v),y:e(m,y,v),p:(i==="gamescore"||i==="game"||i==="opening")&&!d},h=I(d),P=At(d)}),r(()=>{d.p=!1}),s((g,m)=>{c({x:g,y:m},d)&&(f(d),d.p=!0,r(()=>{u("game")},100))}),{render:()=>{h(),d.p||P()},point:()=>({x:d.x,y:d.y,r:d.r})}},at=t=>{const{ctx:e,shade:l}=x(),f=Math.round(t.r/4),o=Math.round(.12*t.r);return(a=e)=>{const{r,x:n=r,y:u=r}=t,s=l(t.c||"blue",-3);a.lineCap="round",a.strokeStyle=s,a.lineWidth=f,a.beginPath(),a.moveTo(n-1.5*o,u-2*o),a.lineTo(n-1.5*o,u+2*o),a.stroke(),a.beginPath(),a.moveTo(n+1.5*o,u-2*o),a.lineTo(n+1.5*o,u+2*o),a.stroke()}},Dt=({getX:t,getY:e,popEffect:l=()=>{}})=>{const{addEventResize:f,useMeasure:o,useTimer:a,useScreenMeta:r,navigate:n,addEventClick:u,intersect:s}=x(),{from:c}=r();let i,d,h;return f(()=>{const{cx:p,cy:g,s:m,m:y}=o();i={c:"#fd8059",r:Math.round(m*.08),x:t(p,m,y),y:e(g,m,y),p:(c==="game"||c==="opening")&&!i},d=I(i),h=at(i)}),a(()=>{i.p=!1}),u((p,g)=>{s({x:p,y:g},i)&&(l(i),i.p=!0,a(()=>{n("main")},100))}),{render:()=>{d(),i.p||h()},point:()=>({x:i.x,y:i.y,r:i.r})}},Ht=({color:t="#f86a9a",popEffect:e=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:o,useScreenMeta:a,addEventClick:r,intersect:n,navigate:u}=x(),{from:s}=a();let c,i,d,h;return l(()=>{const{cx:p,cy:g,s:m}=f(),y=Math.round(m*.25);c={c:t,x:p,y:g,r:y,p:s==="opening"&&!c},i=I(c),d=J({text:"Yola",c:"#f1f1f1",x:p,y:g-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),h=J({text:"PopiT",c:"#ffeb3b",x:p,y:g-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),o(()=>c.p=!1),r((p,g)=>{n({x:p,y:g},c)&&(e(c),c.p=!0,o(()=>{u("opening")},100))}),{render:()=>{i(),c.p||(d(),h())},point:()=>({x:c.x,y:c.y,r:c.r})}},dt=({color:t="#00dcfe",frequency:e=25})=>{const{addEventResize:l,useRandChain:f,useMeasure:o,rand:a,useTimer:r,setBackground:n,useScreenMeta:u}=x(),{from:s}=u();n(t);const c=a(0,999);let i=[],d=[];l(()=>{const p=f(c),{s:g}=o();i=[];const m=Math.round(g*.05),y=Math.round(innerWidth/m/2)-1,v=Math.round((innerWidth-2*m*y)/(y+1)),E=Math.round(innerHeight/m/2)-1,w=Math.round((innerHeight-2*m*E)/(E+1));for(let S=0;S<E;S++)for(let R=0;R<y;R++)p(p(e))<1&&i.push({x:v+m+R*m*2+v*R,y:w+m+S*m*2+w*S,r:m,c:t,p:s==="opening"?!0:p(1)>0});d=i.map(S=>I(S))});const h=()=>{r(()=>{const p=a(i.length-1);i[p]&&(i[p].p=!i[p].p),h()},750)};return s==="opening"?r(()=>{i.forEach(p=>p.p=a(1)>0),h()}):h(),{render:()=>{d.forEach(p=>p())},setIntersections:p=>{i=i.filter(({x:g,y:m,r:y})=>p(g,m,y)),d=i.map(g=>I(g))}}},et="ylp",nt="score",ot="difficulty",U=[.14,.11,.09,.075],rt=500,kt=350,st=5,k=[];for(let t=0;t*st<=rt-kt;t++)k.push(rt-t*st);const F=()=>{const t=i=>localStorage.getItem(`${et}_${i}`),e=(i,d)=>localStorage.setItem(`${et}_${i}`,d.toString()),l=()=>+(t(nt)||0),f=i=>e(nt,i),o=i=>{const d=l();f(d+i)},a=()=>+(t(ot)||0),r=i=>{const d=a();e(ot,Math.min(Math.max(d+i,0),U.length*k.length-1))};return{getScore:l,addScore:o,plusDifficulty:()=>r(1),minusDifficulty:()=>r(-5),getDifficultyRad:()=>{const i=a(),d=Math.floor(i/k.length);return U[d]||U[1]},getDifficultyTic:()=>{const i=a(),d=Math.floor(i/k.length),h=i-d*k.length;return k[h]||k[0]}}},lt=(t=!1)=>{let e=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:f,setBackground:o,rand:a}=x(),{getDifficultyRad:r}=F();return e=[...e.splice(a(e.length-1),e.length),...e],t||l(()=>{const{s:u}=f(),s=r(),c=Math.round(u*s),i=Math.round(innerWidth/c/2)-1,d=(innerWidth-2*c*i)/(i+1),h=Math.round(innerHeight/c/2)-1,P=(innerHeight-2*c*h)/(h+1),M=innerWidth>=innerHeight,p=M?i:h,g=M?d:P,m=M?innerWidth:innerHeight;let y=0;const v=[];for(let w=0;w<p;w++)e[y]||(y=0),v.push(`${e[y]} ${(g+c+w*c*2+g*w)/m*100}%`),y++;o(`linear-gradient(${M?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?e[0]:"#040404")}),e},ut=({palette:t,retry:e,popEffect:l=()=>{}})=>{const{addEventResize:f,useMeasure:o,rand:a,useTimer:r,useScreenMeta:n,navigate:u,addEventClick:s,intersect:c}=x(),{from:i}=n(),{getDifficultyRad:d}=F(),h=[];let P=[],M,p,g,m;const y=E=>Array.isArray(t)?t[E]:t;return f(()=>{const{s:E}=o();h.splice(0);const w=d(),S=Math.round(E*w),R=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*R)/(R+1),T=Math.round(innerHeight/S/2)-1,b=(innerHeight-2*S*T)/(T+1),W=innerWidth>=innerHeight;let D=0;for(let A=0;A<T;A++){for(let _=0;_<R;_++){y(D)||(D=0);const Q={x:C+S+_*S*2+C*_,y:b+S+A*S*2+b*A,r:S,c:y(D),p:!0};A===0&&_===R-1?(m={...Q,p:(i==="main"||i==="gameover"||i==="gamescore")&&!m},M=I(m),p=at(m)):h.push(Q),D+=W?1:0}D=W?0:D+1}e&&(g=h[a(h.length-1)],r(()=>{g.p=!1})),P=h.map(A=>I(A))}),r(()=>{m.p=!1}),e&&s((E,w)=>{c({x:E,y:w},g)&&(l(g),g.p=!0,r(()=>{u("game")},100))}),s((E,w)=>{c({x:E,y:w},m)&&(l(m),m.p=!0,r(()=>{u("main")},100))}),{render:()=>{P.forEach(E=>E()),M(),m!=null&&m.p||p()},popits:h}},H=100,O="#222",zt=t=>{const e=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,f=(t==null?void 0:t[2])||0;return"#"+(16777216+(e<255?e<1?0:e:255)*65536+(l<255?l<1?0:l:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:e,createImg:l,useRandChain:f,useTimer:o}=x();let a,r=!1,n=[];const u=t.r*2/H/2;V[t.imgSrc]?a=V[t.imgSrc]:(a=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},a.img.src=t.imgSrc);const s=()=>o(()=>{r=!r,s()},250),c=(M,p=e)=>{const{x:g,y:m,c:y,r:v}=M;p.fillStyle=y||"red",p.beginPath(),p.arc(g+v,m+v,v,0,Math.PI*2),p.closePath(),p.fill()},i=(M=e,p=0,g=0)=>{M.fillStyle=O,M.beginPath(),M.roundRect(p,g,2*t.r,2*t.r,u),M.closePath(),M.fill()},d=()=>{const M=[];for(let v=0;v<H;v++)for(let E=0;E<H;E++){const w={x:E*u*2,y:v*u*2,r:u,c:O};M.push(w)}let p=t.score-t.winScore;const g=[...M],m=f(0),y=(v=!1)=>{const E=m(g.length-1),w=g[E],S=M.indexOf(w);w.c=v?O:a.cols[S],g.splice(E,1),v&&n.push({...w,c:a.cols[S]})};for(let v=p;v>0;v--)y();if(t.winScore){n=[];for(let v=t.winScore;v>0;v--)y(!0);s()}return M},h=()=>{const M=d();a.drawImg=l((p=e)=>{i(p),M.filter(g=>g.c!==O).forEach(g=>c(g,p))},2*t.r)},P=async()=>{var g;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(a.img,0,0);for(let m=0;m<H;m++){const y=[];for(let v=0;v<H;v++){const E=(g=p==null?void 0:p.getImageData(v,m,1,1))==null?void 0:g.data;y.push(zt(E))}a.cols.push(...y)}a.isFilled=!0,h()};return a.isFilled?(a.r!==t.r||a.score!==t.score)&&h():a.img.onload=P,(M=e)=>{const{x:p,y:g,r:m,winScore:y}=t;if(a.drawImg?M.drawImage(a.drawImg,p-m,g-m,2*m,2*m):i(M,p-m,g-m),r&&y&&a.drawImg)for(const v of n)M.fillStyle=v.c||"red",M.beginPath(),M.arc(p-m+v.x+v.r,g-m+v.y+v.r,v.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ft=(t=0)=>{const{addEventResize:e,useMeasure:l,translate:f}=x(),{getScore:o}=F(),a=["/media/cat.png"],r=o();let n,u=0,s=0,c=Math.floor(r/K);return e(()=>{const{cx:M,cy:p,s:g}=l();n=[],u=(g-2*g*.055*1.6)/2,s=g*.05;for(let m=0;m<a.length;m++){const y=a[m];n.push(Ft({x:M,y:p+m*u*2+m*s,r:u,score:r-m*K<0?0:r-m*K,imgSrc:y,winScore:t}))}}),{up:()=>{c=c+1<a.length?c+1:a.length-1},down:()=>{c=c-1<0?0:c-1},render:()=>{f(()=>{n==null||n.forEach(M=>M())},0,-(c*u*2+c*s))},rect:()=>{const{cx:M,cy:p}=l(),g=innerWidth>innerHeight;return{x:g?M-u:0,y:g?0:p-u,w:g?2*u:innerWidth,h:g?innerHeight:2*u}}}},_t=({popits:t,popEffect:e=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:f,rand:o,addEventClick:a,addEventMove:r,intersect:n,navigate:u}=x(),{addScore:s,getDifficultyTic:c}=F();let i=[],d,h,P=!1,M=0,p=0,g=0;const m=c(),y=R=>{const C=t.filter(W=>i.indexOf(W)===-1&&W!==R),T=o(C.length-1),b=C[T];b&&(b.p=!1,i.push(C[T]))},v=()=>{h=f(()=>{if(g=Math.max(g-10,50),t.length===i.length){P=!0,h.stop(),f(()=>{u("gameover")});return}y(),v()},g)},E=R=>{i=[];const C=t.length;let T=o(Math.round(C*.3),Math.round(C*.6));const b=[...t];if(R){const W=b.indexOf(R);b.splice(W,1)}for(let W=T;W>0;W--){const D=o(b.length-1),A=b[D];A.p=!1,i.push(A),b.splice(D,1)}g=m,d==null||d.stop(),h==null||h.stop(),d=f(()=>{l("Too slow"),v()},i.length*m),M=M>0?M:o(3,5)},w=R=>{e(R),g=Math.min(g+5,m),p++,R.p=!0;const C=i.indexOf(R);i.splice(C,1),i.length<=0&&(M--,M>0?f(()=>{l("Round up"),E(R)},100):(d==null||d.stop(),h==null||h.stop(),s(p),f(()=>{u("gamescore",{winScore:p})},100)))},S=(R,C,T=!1)=>{if(!P){for(const b of i)if(n({x:R,y:C},b)){w(b);return}if(!T){for(const b of t)if(n({x:R,y:C},b)){e(b,!0),l("Popenalty"),y(b);return}l("Popenalty"),y()}}};a(S),r((R,C)=>S(R,C,!0)),f(()=>{E()})},Lt=()=>{const{addEventResize:t,rand:e,useScreenMeta:l}=x(),{from:f}=l(),{popEffect:o,render:a}=N(),r=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],n=f==="opening"?r[0]:r[e(r.length-1)],{render:u,setIntersections:s}=dt({color:n}),{render:c,point:i}=Ht({popEffect:o}),{render:d,point:h}=it({getX:(p,g,m)=>p+Math.round(g*.25)+2*m,getY:(p,g,m)=>p+Math.round(g*.25)+0*m,popEffect:o}),{render:P,point:M}=Ct({popEffect:o});return t(()=>{const p=M(),g=i(),m=h();s((y,v,E)=>!z({x:y,y:v,r:E},p)&&!z({x:y,y:v,r:E},g)&&!z({x:y,y:v,r:E},m))}),()=>{a(),u(),c(),d(),P()}},$t=()=>{const t=lt(),{popEffect:e,render:l}=N(),{splashEffect:f,render:o}=ct(),{popits:a,render:r}=ut({palette:t,popEffect:e});return _t({popits:a,popEffect:e,splashEffect:f}),()=>{l(),r(),o()}},Nt=()=>{const t="#ff6347",{popEffect:e,render:l}=N(),{setBackground:f}=x(),{minusDifficulty:o}=F(),{render:a}=ut({palette:t,retry:!0,popEffect:e});return f(t),o(),()=>{l(),a()}},Ot=()=>{const{translate:t,useScreenMeta:e}=x(),{plusDifficulty:l}=F(),{data:f}=e(),{popEffect:o,render:a}=N(),{splashEffect:r,render:n}=ct();lt();const{render:u}=ft(f==null?void 0:f.winScore),{render:s}=it({getX:(i,d,h)=>innerWidth>innerHeight?Math.min(i+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerWidth-2*h-Math.round(d*.1)):i+(d-2*d*.055*1.6)/8+0*Math.round(d*.1)+2*h,getY:(i,d,h)=>innerWidth>innerHeight?i+(d-2*d*.055*1.6)/2-1*h-Math.round(d*.1):Math.min(i+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerHeight-2*h-Math.round(d*.1)),popEffect:o}),{render:c}=Dt({getX:(i,d,h)=>innerWidth>innerHeight?Math.max(i-(d-2*d*.055*1.6)/2-4*h-Math.round(d*.1),2*h+Math.round(d*.1)):i+(d-2*d*.055*1.6)/8-2*Math.round(d*.1)-2*h,getY:(i,d,h)=>innerWidth>innerHeight?i-(d-2*d*.055*1.6)/2+0*h+Math.round(d*.1):Math.min(i+(d-2*d*.055*1.6)/2+4*h+Math.round(d*.1),innerHeight-2*h-Math.round(d*.1)),popEffect:o});return l(),r("You win"),()=>{a(),innerHeight>innerWidth?t(u,0,-Math.round(innerHeight*.07)):u(),s(),c(),n()}},Bt=()=>{const{addEventResize:t,rand:e}=x(),{popEffect:l,render:f}=N(),o=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],a=o[e(o.length-1)],{render:r,setIntersections:n}=dt({color:a,frequency:10}),{render:u,rect:s,up:c,down:i}=ft(),{render:d,point:h}=It({popEffect:l}),{point:P}=Tt(c),{point:M}=Wt(i);return t(()=>{const p=h(),g=s(),m=P(),y=M();n((v,E,w)=>!z({x:v,y:E,r:w},p)&&!St({x:v,y:E,r:w},g)&&!z({x:v,y:E,r:w},m)&&!z({x:v,y:E,r:w},y))}),()=>{f(),r(),u(),d()}},Gt=()=>{const{ctx:t,addEventResize:e,loop:l}=x(),f={x:40,y:100};let o=1,a=1,r;const n=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return n(),e(n),l(()=>{f.x+=2*o,f.y+=3*a,o*=-1,a*=-1}),()=>{t.save();var u=Math.random()*2,s=Math.random()*3;t.translate(u,s),t.beginPath(),t.fillStyle="red",t.rect(f.x,f.y,r,r),t.fill(),t.restore()}},Yt=[{name:"opening",ctor:bt},{name:"main",ctor:Lt},{name:"game",ctor:$t},{name:"gameover",ctor:Nt},{name:"gamescore",ctor:Ot},{name:"score",ctor:Bt},{name:"devs",ctor:Gt}];Rt(Yt);document.title="Your's last Pop it";
