(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function l(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(n){if(n.ep)return;n.ep=!0;const a=l(n);fetch(n.href,a)}})();const pt=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},h=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return l(),document.body.appendChild(t),{ctx:o,render:h,resize:l,rotate:(e,r,i,d)=>{o.save(),o.translate(r,i),o.rotate(Math.PI*d),o.translate(-r,-i),e(),o.restore()},translate:(e,r,i)=>{o.save(),o.translate(r,i),e(),o.restore()},shade:(e,r)=>{e=e.substring(1);const i=parseInt(e,16),d=Math.round(2.55*r),f=(i>>16)+d,P=(i>>8&255)+d,M=(i&255)+d;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(P<255?P<1?0:P:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(e,r)=>{var i;document.body.style.background=e,document.body.style.backgroundColor=r||e,(i=document.querySelector('meta[name="theme-color"]'))==null||i.setAttribute("content",r||e)},createImg:(e,r,i=r)=>{const d=document.createElement("canvas"),f=d.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return d.width=r*devicePixelRatio,d.height=i*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),e(f),d}}},gt=t=>{let o="",l="",h;const n=c=>t.find(u=>u.name===c)||t[0],s={render:()=>{},navigate:(c,u)=>{const e=n(c);l=o||"",o=(e==null?void 0:e.name)||"",h=u,s.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:l,data:h})};return s},mt=()=>{const t=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),o=[],l={};return{loop:(s,c)=>{if(Object.entries(l).find(([e,r])=>r===s)||c&&l[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&o.push(c),c=c||new Date().valueOf().toString(),l[c]=s;const u=()=>{s(),l[c]&&t(u)};u()},stop:s=>{if(typeof s=="string")delete l[s];else{const c=Object.entries(l).find(([u,e])=>e===s);c&&delete l[c[0]]}},stopAll:()=>{for(const s in l)o.indexOf(s)===-1&&delete l[s]}}};let Y=[];const Mt=()=>{for(const t of Y)clearTimeout(t);Y=[]},yt=(t,o=400)=>{let l=new Date,h=o,n=setTimeout(t,h);return Y.push(n),{pause:()=>{clearTimeout(n),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(n),n=setTimeout(t,h),Y.push(n)},stop:()=>{clearTimeout(n)}}},tt=2147483646,X=2147483647,vt=16807,Et=(t=Math.floor(Math.random()*X))=>{t=t%X,t<=0&&(t+=tt);const o=()=>(t=t*vt%X,t),l=()=>(o()-1)/tt;return(n,a)=>(a===void 0&&(a=n,n=0),Math.floor(l()*(a-n+1))+n)},Pt=(t,o)=>(o===void 0&&(o=t,t=0),Math.floor(Math.random()*(o-t+1))+t),St=()=>{const t=[],o=[],l=[];return{addEventResize:r=>{r(),t.push(r)},onResizeEvents:()=>t.forEach(r=>r()),addEventClick:r=>o.push(r),onClickEvents:(r,i)=>o.forEach(d=>d(r,i)),addEventMove:r=>l.push(r),onMoveEvents:(r,i)=>l.forEach(d=>d(r,i)),removeAllEvents:()=>{t.splice(0),o.splice(0),l.splice(0)}}},z=(t,o)=>{const l=Math.pow(Math.abs(t.x-o.x),2),h=Math.pow(Math.abs(t.y-o.y),2),n=t.r||0,a=o.r||0,s=Math.pow(n+a,2);return l+h<=s},wt=(t,o)=>{const l=t.r||0,h=o.w||0,n=o.h||0;return Math.abs(o.x+h/2-t.x)<=h/2+l&&Math.abs(o.y+n/2-t.y)<=n/2+l},xt=(t,o)=>z(t,o),Rt=t=>{const o={},l=n=>{const a=n.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const n of t){const a=new Audio(n);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const s=l(n);o[s]={audio:a,path:n}}})(),n=>{var u,e;const a=(u=o[n])==null?void 0:u.audio,s=(e=o[n])==null?void 0:e.path;if(!(!a||!s))if(a.currentTime===0)a.play();else{var c=new Audio(s);c.volume=.25,c.play()}}};let G;const bt=(t,o)=>{if(G)throw new Error("Webcore already specified");const l=pt(),h=gt(t),{loop:n,stop:a,stopAll:s}=mt(),{addEventResize:c,onResizeEvents:u,addEventClick:e,onClickEvents:r,addEventMove:i,onMoveEvents:d,removeAllEvents:f}=St();let P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const m=()=>({cx:P,cy:M,s:p,m:g}),v=Rt([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:m,useScreenMeta:h.useScreenMeta,navigate:(y,E)=>{if(!t.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);s(),Mt(),f(),new Promise(()=>h.navigate(y,E))},loop:n,loopStop:a,useTimer:yt,rand:Pt,useRandChain:Et,intersect:xt,addEventResize:c,addEventClick:e,addEventMove:i,playAudio:v},n(()=>l.render(h.render),"draw"),window.onresize=()=>{P=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),u()},document.onpointerdown=y=>{r(y.clientX,y.clientY)},document.onmousemove=y=>{d(y.clientX,y.clientY)},h.navigate()},R=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},j={},I=t=>{const{shade:o,ctx:l,createImg:h}=R(),n=()=>{const{r:s,c="#ffffff",p:u}=t,e=l.createRadialGradient(s,s,s,s,s,s/5);return e.addColorStop(0,o(c,0)),e.addColorStop(.01,o(c,0)),e.addColorStop(.075,o(c,9)),e.addColorStop(.15,o(c,0)),e.addColorStop(.15,o(c,-15)),e.addColorStop(.18,o(c,-5)),e.addColorStop(.22,o(c,-15)),u?(e.addColorStop(.24,o(c,-10)),e.addColorStop(.3,o(c,-8)),e.addColorStop(.34,o(c,-12)),e.addColorStop(.6,o(c,-6)),e.addColorStop(1,o(c,-4))):(e.addColorStop(.24,o(c,-12)),e.addColorStop(.26,o(c,-8)),e.addColorStop(.3,o(c,-2)),e.addColorStop(.34,o(c,0)),e.addColorStop(.5,o(c,5)),e.addColorStop(1,o(c,10))),e},a=()=>{const{r:s,c="#ffffff",p:u}=t,e=`${c}_${u?"push":"pop"}_${s}`;if(j[e])return j[e];const r=h((i=l)=>{const d=n();i.fillStyle=d,i.beginPath(),i.arc(s,s,s,0,2*Math.PI),i.closePath(),i.fill()},2*s);return j[e]=r,r};return(s=l)=>{const{x:c,y:u,r:e}=t,r=a();s.drawImage(r,c-e,u-e,2*e,2*e)}},q={},L=t=>{const{ctx:o}=R();let l;return q[t.src]?l=q[t.src]:(l=new Image,l.src=t.src,q[t.src]=l),(h=o)=>{const{w:n,h:a=n,x:s=0,y:c=0}=t;l.complete&&h.drawImage(l,s,c,n,a)}},et=t=>{const{font:o,ctx:l}=R(),h=t.text,n=t.text.length,a=2*Math.PI/n/4;return(s=l)=>{const{x:c,y:u,r:e,s:r=0,fs:i}=t,d=i||Math.round(e/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${d}px ${o}`,s.save(),s.translate(c,u),s.rotate(r);for(let f=0;f<n;f++)s.save(),s.rotate(f*a),s.fillText(h[f],0,-e),s.restore();s.restore()}},Ct=()=>{var m,v;const{ctx:t,loop:o,rotate:l,navigate:h,useMeasure:n,addEventClick:a,addEventResize:s,setBackground:c}=R();c("#040404");let u=!1,e,r,i,d,f,P=-.2,M=0;s(()=>{const{cx:y,cy:E,s:w}=n(),S=Math.round(w*.25);e={c:"#ff6347",x:y,y:E,r:S,p:!1},r=I(e),i=L({x:y-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),d=et({text:"nezabotin",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),f=et({text:"production",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{P+=.01,M=P>=1?1:P,P>=1.8&&(e.p=!0),P>=2.2&&(e.c="#f86a9a"),P>=2.6&&h("main")};a(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(P<y)return P=y,!0})});const g=()=>{o(p),u=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(g):g(),()=>{const{cx:y,cy:E}=n();t.globalAlpha=u?1:0,r(),P<1.8&&i(),P<1.4&&l(()=>{d(),f()},y,E,M),t.globalAlpha=1}},_=100/2;let nt=0;const N=()=>{const{loop:t,ctx:o,shade:l,rand:h}=R(),n={},a=()=>{for(const u in n){const e=n[u];if(!e)return;const r=e.popit;if(!e.shake)e.tic+=_/5,e.tic>=_&&(e.dir=-1),e.withoutRad||(r.r=e.origR+e.origR*75e-5*(e.tic+(e.dir>0?0:_-e.tic)));else{e.tic+=_/5;const i=h(2,3),d=h(2,3);r.x=e.origX+Math.random()*i*(Math.random()>.5?1:-1),r.y=e.origY+Math.random()*d*(Math.random()>.5?1:-1)}e.tic>=2*_&&(delete n[u],r.r=e.origR,r.x=e.origX,r.y=e.origY)}},s=(u,e=!1,r=!1)=>{nt++;const i=`${new Date().valueOf().toString()}_${nt}`,d=1,f=1;n[i]={withoutRad:e,tic:d,dir:f,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:r}},c=()=>{o.globalAlpha=.25;for(const u in n){const e=n[u];if(e.shake)continue;const r=e.popit;o.fillStyle=l(r.c||"red",-12),o.beginPath(),o.arc(r.x,r.y,r.r+e.origR*.001*(e.tic+(e.dir>0?0:_-e.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return t(a),{popEffect:s,render:c}},J=t=>{const{font:o,ctx:l}=R();return(h=l)=>{const{text:n,x:a,c:s,y:c,fs:u,a:e="center",mw:r}=t;h.textAlign=e,h.fillStyle=s,h.font=`${u}px ${o}`,h.fillText(n,a,c,r)}},O=100,Q=t=>{const{loop:o,ctx:l,useMeasure:h}=R();let n=null;const a=()=>{if(!n)return;const{m:u}=h();n.tic<=O&&(n.props.fs=((t==null?void 0:t.mfs)||6)/O*n.tic*u),n.tic+=n.tic>O?1:10,n.tic>O*2&&(n=null)},s=u=>{const{cx:e,m:r}=h(),i=0,d={x:e,y:Math.round(r*((t==null?void 0:t.dy)||16)),text:u,c:(t==null?void 0:t.color)||"#ffffff",fs:0},f=J(d);n={props:d,shape:f,tic:i}},c=()=>{n&&(l.globalAlpha=.01*n.tic,n.shape(),l.globalAlpha=1)};return o(a),{splashEffect:s,render:c}},It=({color:t="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,navigate:s,addEventClick:c,intersect:u}=R(),{from:e}=a();let r,i,d;return l(()=>{const{cx:M,cy:p,s:g,m}=h(),v=Math.round(g*.25);r={c:t,r:Math.round(g*.08),x:M-v-1*m,y:p-v+1*m,p:(e==="score"||e==="opening")&&!r},i=I(r),d=L({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),n(()=>{r.p=!1}),c((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,n(()=>{s("score")},100))}),{render:()=>{i(),r.p||d()},point:()=>({x:r.x,y:r.y,r:r.r})}},Tt=({color:t="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,navigate:s,addEventClick:c,intersect:u}=R(),{from:e}=a();let r,i,d;return l(()=>{const{s:M}=h(),p=Math.round(M*.08);r={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:e==="main"&&!r},i=I(r),d=L({x:Number(r.x)-p+Math.round(p*.4),y:Number(r.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),n(()=>{r.p=!1}),c((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,n(()=>{s("main")},100))}),{render:()=>{i(),r.p||d()},point:()=>({x:r.x,y:r.y,r:r.r})}},Wt=t=>{const{addEventResize:o,useMeasure:l,useTimer:h,addEventClick:n,intersect:a,rotate:s}=R();let c,u,e;return o(()=>{const{s:d}=l(),f=Math.round(d*.055);c={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f),p:!1},u=I(c),e=L({x:Number(c.x)-f+Math.round(f*.4),y:Number(c.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((d,f)=>{a({x:d,y:f},c)&&(c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{u(),c.p||s(()=>{e()},c.x,c.y,-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},kt=t=>{const{addEventResize:o,useMeasure:l,useTimer:h,addEventClick:n,intersect:a,rotate:s}=R();let c,u,e;return o(()=>{const{s:d}=l(),f=Math.round(d*.055);c={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f-2*f-.3*f),p:!1},u=I(c),e=L({x:Number(c.x)-f+Math.round(f*.4),y:Number(c.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((d,f)=>{a({x:d,y:f},c)&&(c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{u(),c.p||s(()=>{e()},c.x,c.y,.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},At=t=>{const{ctx:o,shade:l}=R(),h=Math.round(t.r/2.2),n=Math.round(.15*t.r),a=l(t.c||"blue",-3);return(s=o)=>{const{r:c,x:u=c,y:e=c}=t;s.lineCap="round",s.fillStyle=a,s.strokeStyle=a,s.lineWidth=h,s.beginPath(),s.moveTo(u+n,e),s.lineTo(u-n/2,e-n),s.lineTo(u-n/2,e+n),s.closePath(),s.fill(),s.beginPath(),s.moveTo(u+n,e),s.lineTo(u-n/2,e-n),s.moveTo(u-n/2,e-n),s.lineTo(u-n/2,e+n),s.moveTo(u-n/2,e+n),s.lineTo(u+n,e),s.stroke()}},at=({getX:t,getY:o,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:n,useMeasure:a,useTimer:s,useScreenMeta:c,navigate:u,addEventClick:e,intersect:r}=R(),{from:i}=c();let d,f,P;return n(()=>{const{cx:g,cy:m,s:v,m:y}=a();d={c:l,r:Math.round(v*.1),x:t(g,v,y),y:o(m,v,y),p:(i==="gamescore"||i==="game"||i==="opening")&&!d},f=I(d),P=At(d)}),s(()=>{d.p=!1}),e((g,m)=>{r({x:g,y:m},d)&&(h(d),d.p=!0,s(()=>{u("game")},100))}),{render:()=>{f(),d.p||P()},point:()=>({x:d.x,y:d.y,r:d.r})}},dt=t=>{const{ctx:o,shade:l}=R(),h=Math.round(t.r/4),n=Math.round(.12*t.r);return(a=o)=>{const{r:s,x:c=s,y:u=s}=t,e=l(t.c||"blue",-3);a.lineCap="round",a.strokeStyle=e,a.lineWidth=h,a.beginPath(),a.moveTo(c-1.5*n,u-2*n),a.lineTo(c-1.5*n,u+2*n),a.stroke(),a.beginPath(),a.moveTo(c+1.5*n,u-2*n),a.lineTo(c+1.5*n,u+2*n),a.stroke()}},Dt=({getX:t,getY:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:n,useTimer:a,useScreenMeta:s,navigate:c,addEventClick:u,intersect:e}=R(),{from:r}=s();let i,d,f;return h(()=>{const{cx:p,cy:g,s:m,m:v}=n();i={c:"#fd8059",r:Math.round(m*.08),x:t(p,m,v),y:o(g,m,v),p:(r==="game"||r==="opening")&&!i},d=I(i),f=dt(i)}),a(()=>{i.p=!1}),u((p,g)=>{e({x:p,y:g},i)&&(l(i),i.p=!0,a(()=>{c("main")},100))}),{render:()=>{d(),i.p||f()},point:()=>({x:i.x,y:i.y,r:i.r})}},Ht=({color:t="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,addEventClick:s,intersect:c,navigate:u}=R(),{from:e}=a();let r,i,d,f;return l(()=>{const{cx:p,cy:g,s:m}=h(),v=Math.round(m*.25);r={c:t,x:p,y:g,r:v,p:e==="opening"&&!r},i=I(r),d=J({text:"Yola",c:"#f1f1f1",x:p,y:g-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),f=J({text:"PopiT",c:"#ffeb3b",x:p,y:g-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),n(()=>r.p=!1),s((p,g)=>{c({x:p,y:g},r)&&(o(r),r.p=!0,n(()=>{u("opening")},100))}),{render:()=>{i(),r.p||(d(),f())},point:()=>({x:r.x,y:r.y,r:r.r})}},lt=({color:t="#00dcfe",frequency:o=25})=>{const{addEventResize:l,useRandChain:h,useMeasure:n,rand:a,useTimer:s,setBackground:c,useScreenMeta:u}=R(),{from:e}=u();c(t);const r=a(0,999);let i=[],d=[];l(()=>{const p=h(r),{s:g}=n();i=[];const m=Math.round(g*.05),v=Math.round(innerWidth/m/2)-1,y=Math.round((innerWidth-2*m*v)/(v+1)),E=Math.round(innerHeight/m/2)-1,w=Math.round((innerHeight-2*m*E)/(E+1));for(let S=0;S<E;S++)for(let x=0;x<v;x++)p(p(o))<1&&i.push({x:y+m+x*m*2+y*x,y:w+m+S*m*2+w*S,r:m,c:t,p:e==="opening"?!0:p(1)>0});d=i.map(S=>I(S))});const f=()=>{s(()=>{const p=a(i.length-1);i[p]&&(i[p].p=!i[p].p),f()},750)};return e==="opening"?s(()=>{i.forEach(p=>p.p=a(1)>0),f()}):f(),{render:()=>{d.forEach(p=>p())},setIntersections:p=>{i=i.filter(({x:g,y:m,r:v})=>p(g,m,v)),d=i.map(g=>I(g))}}},ot="ylp",rt="score",st="difficulty",U=[.14,.11,.09,.075],ct=500,zt=350,it=5,H=[];for(let t=0;t*it<=ct-zt;t++)H.push(ct-t*it);const F=()=>{const t=i=>localStorage.getItem(`${ot}_${i}`),o=(i,d)=>localStorage.setItem(`${ot}_${i}`,d.toString()),l=()=>+(t(rt)||0),h=i=>o(rt,i),n=i=>{const d=l();h(d+i)},a=()=>+(t(st)||0),s=i=>{const d=a();o(st,Math.min(Math.max(d+i,0),U.length*H.length-1))};return{getScore:l,addScore:n,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const i=a(),d=Math.floor(i/H.length);return U[d]||U[1]},getDifficultyTic:()=>{const i=a(),d=Math.floor(i/H.length),f=i-d*H.length;return H[f]||H[0]}}},ut=(t=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:n,rand:a}=R(),{getDifficultyRad:s}=F();return o=[...o.splice(a(o.length-1),o.length),...o],t||l(()=>{const{s:u}=h(),e=s(),r=Math.round(u*e),i=Math.round(innerWidth/r/2)-1,d=(innerWidth-2*r*i)/(i+1),f=Math.round(innerHeight/r/2)-1,P=(innerHeight-2*r*f)/(f+1),M=innerWidth>=innerHeight,p=M?i:f,g=M?d:P,m=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)o[v]||(v=0),y.push(`${o[v]} ${(g+r+w*r*2+g*w)/m*100}%`),v++;n(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ft=({palette:t,retry:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:n,rand:a,useTimer:s,useScreenMeta:c,navigate:u,addEventClick:e,intersect:r}=R(),{from:i}=c(),{getDifficultyRad:d}=F(),f=[];let P=[],M,p,g,m;const v=E=>Array.isArray(t)?t[E]:t;return h(()=>{const{s:E}=n();f.splice(0);const w=d(),S=Math.round(E*w),x=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*x)/(x+1),W=Math.round(innerHeight/S/2)-1,b=(innerHeight-2*S*W)/(W+1),k=innerWidth>=innerHeight;let A=0;for(let T=0;T<W;T++){for(let $=0;$<x;$++){v(A)||(A=0);const Z={x:C+S+$*S*2+C*$,y:b+S+T*S*2+b*T,r:S,c:v(A),p:!0};T===0&&$===x-1?(m={...Z,p:(i==="main"||i==="gameover"||i==="gamescore")&&!m},M=I(m),p=dt(m)):f.push(Z),A+=k?1:0}A=k?0:A+1}o&&(g=f[a(f.length-1)],s(()=>{g.p=!1})),P=f.map(T=>I(T))}),s(()=>{m.p=!1}),o&&e((E,w)=>{r({x:E,y:w},g)&&(l(g),g.p=!0,s(()=>{u("game")},100))}),e((E,w)=>{r({x:E,y:w},m)&&(l(m),m.p=!0,s(()=>{u("main")},100))}),{render:()=>{P.forEach(E=>E()),M(),m!=null&&m.p||p()},popits:f}},D=100,B="#222",_t=t=>{const o=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:o,createImg:l,useRandChain:h,useTimer:n}=R();let a,s=!1,c=[];const u=t.r*2/D/2;V[t.imgSrc]?a=V[t.imgSrc]:(a=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},a.img.src=t.imgSrc);const e=()=>n(()=>{s=!s,e()},250),r=(M,p=o)=>{const{x:g,y:m,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(g+y,m+y,y,0,Math.PI*2),p.closePath(),p.fill()},i=(M=o,p=0,g=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,g,2*t.r,2*t.r,u),M.closePath(),M.fill()},d=()=>{const M=[];for(let y=0;y<D;y++)for(let E=0;E<D;E++){const w={x:E*u*2,y:y*u*2,r:u,c:B};M.push(w)}let p=t.score-t.winScore;const g=[...M],m=h(0),v=(y=!1)=>{const E=m(g.length-1),w=g[E],S=M.indexOf(w);w.c=y?B:a.cols[S],g.splice(E,1),y&&c.push({...w,c:a.cols[S]})};for(let y=p;y>0;y--)v();if(t.winScore){c=[];for(let y=t.winScore;y>0;y--)v(!0);e()}return M},f=()=>{const M=d();a.drawImg=l((p=o)=>{i(p),M.filter(g=>g.c!==B).forEach(g=>r(g,p))},2*t.r)},P=async()=>{var g;const M=document.createElement("canvas");M.width=D,M.height=D;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(a.img,0,0);for(let m=0;m<D;m++){const v=[];for(let y=0;y<D;y++){const E=(g=p==null?void 0:p.getImageData(y,m,1,1))==null?void 0:g.data;v.push(_t(E))}a.cols.push(...v)}a.isFilled=!0,f()};return a.isFilled?(a.r!==t.r||a.score!==t.score)&&f():a.img.onload=P,(M=o)=>{const{x:p,y:g,r:m,winScore:v}=t;if(a.drawImg?M.drawImage(a.drawImg,p-m,g-m,2*m,2*m):i(M,p-m,g-m),s&&v&&a.drawImg)for(const y of c)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-m+y.x+y.r,g-m+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ht=(t=0)=>{const{addEventResize:o,useMeasure:l,translate:h}=R(),{getScore:n}=F(),a=["/media/cat.png"],s=n();let c,u=0,e=0,r=Math.floor(s/K);return o(()=>{const{cx:M,cy:p,s:g}=l();c=[],u=(g-2*g*.055*1.6)/2,e=g*.05;for(let m=0;m<a.length;m++){const v=a[m];c.push(Ft({x:M,y:p+m*u*2+m*e,r:u,score:s-m*K<0?0:s-m*K,imgSrc:v,winScore:t}))}}),{up:()=>{r=r+1<a.length?r+1:a.length-1},down:()=>{r=r-1<0?0:r-1},render:()=>{h(()=>{c==null||c.forEach(M=>M())},0,-(r*u*2+r*e))},rect:()=>{const{cx:M,cy:p}=l(),g=innerWidth>innerHeight;return{x:g?M-u:0,y:g?0:p-u,w:g?2*u:innerWidth,h:g?innerHeight:2*u}}}},$t=({popits:t,popEffect:o=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:h,rand:n,addEventClick:a,addEventMove:s,intersect:c,navigate:u}=R(),{addScore:e,getDifficultyTic:r}=F();let i=[],d,f,P=!1,M=0,p=0,g=0;const m=r(),v=x=>{const C=t.filter(k=>i.indexOf(k)===-1&&k!==x),W=n(C.length-1),b=C[W];b&&(o(b,!1,!0),b.p=!1,i.push(C[W]))},y=()=>{f=h(()=>{if(g=Math.max(g-10,50),t.length===i.length){P=!0,f.stop(),h(()=>{u("gameover")});return}v(),y()},g)},E=x=>{i=[];const C=t.length;let W=n(Math.round(C*.3),Math.round(C*.6));const b=[...t];if(x){const k=b.indexOf(x);b.splice(k,1)}for(let k=W;k>0;k--){const A=n(b.length-1),T=b[A];T.p=!1,o(T,!1,!0),i.push(T),b.splice(A,1)}g=m,d==null||d.stop(),f==null||f.stop(),d=h(()=>{l("Too slow"),y()},i.length*m),M=M>0?M:n(3,5)},w=x=>{o(x),g=Math.min(g+5,m),p++,x.p=!0;const C=i.indexOf(x);i.splice(C,1),i.length<=0&&(M--,M>0?h(()=>{l("Round up"),E(x)},100):(d==null||d.stop(),f==null||f.stop(),e(p),h(()=>{u("gamescore",{winScore:p})},100)))},S=(x,C,W=!1)=>{if(!P){for(const b of i)if(c({x,y:C},b)){w(b);return}if(!W){for(const b of t)if(c({x,y:C},b)){o(b,!0),l("Popenalty"),v(b);return}l("Popenalty"),v()}}};a(S),s((x,C)=>S(x,C,!0)),h(()=>{E()})},Lt=()=>{const{addEventResize:t,rand:o,useScreenMeta:l}=R(),{from:h}=l(),{popEffect:n,render:a}=N(),s=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=h==="opening"?s[0]:s[o(s.length-1)],{render:u,setIntersections:e}=lt({color:c}),{render:r,point:i}=Ht({popEffect:n}),{render:d,point:f}=at({getX:(p,g,m)=>p+Math.round(g*.25)+2*m,getY:(p,g,m)=>p+Math.round(g*.25)+0*m,popEffect:n}),{render:P,point:M}=It({popEffect:n});return t(()=>{const p=M(),g=i(),m=f();e((v,y,E)=>!z({x:v,y,r:E},p)&&!z({x:v,y,r:E},g)&&!z({x:v,y,r:E},m))}),()=>{a(),u(),r(),d(),P()}},Nt=()=>{const{useMeasure:t,addEventResize:o}=R(),l=ut(),{popEffect:h,render:n}=N(),{popits:a,render:s}=ft({palette:l,popEffect:h}),c={mfs:0,dy:0},{splashEffect:u,render:e}=Q(c);return $t({popits:a,popEffect:h,splashEffect:u}),o(()=>{const r=(a[0].y-a[0].r)/t().m;c.mfs=r,c.dy=r}),()=>{n(),s(),e()}},Ot=()=>{const t="#ff6347",{popEffect:o,render:l}=N(),{setBackground:h}=R(),{minusDifficulty:n}=F(),{render:a}=ft({palette:t,retry:!0,popEffect:o});return h(t),n(),()=>{l(),a()}},Bt=()=>{const{translate:t,useScreenMeta:o}=R(),{plusDifficulty:l}=F(),{data:h}=o(),{popEffect:n,render:a}=N(),{splashEffect:s,render:c}=Q();ut();const{render:u}=ht(h==null?void 0:h.winScore),{render:e}=at({getX:(i,d,f)=>innerWidth>innerHeight?Math.min(i+(d-2*d*.055*1.6)/2+4*f+Math.round(d*.1),innerWidth-2*f-Math.round(d*.1)):i+(d-2*d*.055*1.6)/8+0*Math.round(d*.1)+2*f,getY:(i,d,f)=>innerWidth>innerHeight?i+(d-2*d*.055*1.6)/2-1*f-Math.round(d*.1):Math.min(i+(d-2*d*.055*1.6)/2+4*f+Math.round(d*.1),innerHeight-2*f-Math.round(d*.1)),popEffect:n}),{render:r}=Dt({getX:(i,d,f)=>innerWidth>innerHeight?Math.max(i-(d-2*d*.055*1.6)/2-4*f-Math.round(d*.1),2*f+Math.round(d*.1)):i+(d-2*d*.055*1.6)/8-2*Math.round(d*.1)-2*f,getY:(i,d,f)=>innerWidth>innerHeight?i-(d-2*d*.055*1.6)/2+0*f+Math.round(d*.1):Math.min(i+(d-2*d*.055*1.6)/2+4*f+Math.round(d*.1),innerHeight-2*f-Math.round(d*.1)),popEffect:n});return l(),s("You win"),()=>{a(),innerHeight>innerWidth?t(u,0,-Math.round(innerHeight*.07)):u(),e(),r(),c()}},Yt=()=>{const{addEventResize:t,rand:o}=R(),{popEffect:l,render:h}=N(),{splashEffect:n,render:a}=Q(),s=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],c=s[o(s.length-1)],{render:u,setIntersections:e}=lt({color:c,frequency:10}),{render:r,rect:i,up:d,down:f}=ht(),{render:P,point:M}=Tt({popEffect:l}),{point:p}=Wt(d),{point:g}=kt(f);return t(()=>{const m=M(),v=i(),y=p(),E=g();e((w,S,x)=>!z({x:w,y:S,r:x},m)&&!wt({x:w,y:S,r:x},v)&&!z({x:w,y:S,r:x},y)&&!z({x:w,y:S,r:x},E))}),n("Score"),()=>{h(),u(),r(),P(),a()}},Gt=()=>{const{ctx:t,addEventResize:o,loop:l}=R(),h={x:40,y:100};let n=1,a=1,s;const c=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),o(c),l(()=>{h.x+=2*n,h.y+=3*a,n*=-1,a*=-1}),()=>{t.save();var u=Math.random()*2,e=Math.random()*3;t.translate(u,e),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,s,s),t.fill(),t.restore()}},Xt=[{name:"opening",ctor:Ct},{name:"main",ctor:Lt},{name:"game",ctor:Nt},{name:"gameover",ctor:Ot},{name:"gamescore",ctor:Bt},{name:"score",ctor:Yt},{name:"devs",ctor:Gt}];bt(Xt);document.title="Your's last Pop it";
