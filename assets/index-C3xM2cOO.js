(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const e of c.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&u(e)}).observe(document,{childList:!0,subtree:!0});function d(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(s){if(s.ep)return;s.ep=!0;const c=d(s);fetch(s.href,c)}})();const dt=()=>{const n=document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("CanvasRenderingContext2D is null");const d=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,r.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},u=t=>{r.clearRect(0,0,innerWidth,innerHeight),t()};return d(),document.body.appendChild(n),{ctx:r,render:u,resize:d,rotate:(t,i,a,l)=>{r.save(),r.translate(i,a),r.rotate(Math.PI*l),r.translate(-i,-a),t(),r.restore()},translate:(t,i,a)=>{r.save(),r.translate(i,a),t(),r.restore()},shade:(t,i)=>{t=t.substring(1);const a=parseInt(t,16),l=Math.round(2.55*i),h=(a>>16)+l,m=(a>>8&255)+l,p=(a&255)+l;return"#"+(16777216+(h<255?h<1?0:h:255)*65536+(m<255?m<1?0:m:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(t,i)=>{var a;document.body.style.background=t,document.body.style.backgroundColor=i||t,(a=document.querySelector('meta[name="theme-color"]'))==null||a.setAttribute("content",i||t)},createImg:(t,i,a=i)=>{const l=document.createElement("canvas"),h=l.getContext("2d");if(!h)throw new Error("CanvasRenderingContext2D is null");return l.width=i*devicePixelRatio,l.height=a*devicePixelRatio,h.scale(devicePixelRatio,devicePixelRatio),t(h),l}}},lt=n=>{let r="",d="",u;const s=o=>n.find(f=>f.name===o)||n[0],e={render:()=>{},navigate:(o,f)=>{const t=s(o);d=r||"",r=(t==null?void 0:t.name)||"",u=f,e.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:r,from:d,data:u})};return e},ut=()=>{const n=requestAnimationFrame||(e=>setTimeout(e,16.666666666666668)),r=[],d={};return{loop:(e,o)=>{if(Object.entries(d).find(([t,i])=>i===e)||o&&d[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&r.push(o),o=o||new Date().valueOf().toString(),d[o]=e;const f=()=>{e(),d[o]&&n(f)};f()},stop:e=>{if(typeof e=="string")delete d[e];else{const o=Object.entries(d).find(([f,t])=>t===e);o&&delete d[o[0]]}},stopAll:()=>{for(const e in d)r.indexOf(e)===-1&&delete d[e]}}};let $=[];const ht=()=>{for(const n of $)clearTimeout(n);$=[]},ft=(n,r=400)=>{let d=new Date,u=r,s=setTimeout(n,u);return $.push(s),{pause:()=>{clearTimeout(s),u-=new Date-d},resume:()=>{d=new Date,clearTimeout(s),s=setTimeout(n,u),$.push(s)},stop:()=>{clearTimeout(s)}}},V=2147483646,B=2147483647,pt=16807,gt=(n=Math.floor(Math.random()*B))=>{n=n%B,n<=0&&(n+=V);const r=()=>(n=n*pt%B,n),d=()=>(r()-1)/V;return(s,c)=>(c===void 0&&(c=s,s=0),Math.floor(d()*(c-s+1))+s)},mt=(n,r)=>(r===void 0&&(r=n,n=0),Math.floor(Math.random()*(r-n+1))+n),Mt=()=>{const n=[],r=[],d=[];return{addEventResize:i=>{i(),n.push(i)},onResizeEvents:()=>n.forEach(i=>i()),addEventClick:i=>r.push(i),onClickEvents:(i,a)=>r.forEach(l=>l(i,a)),addEventMove:i=>d.push(i),onMoveEvents:(i,a)=>d.forEach(l=>l(i,a)),removeAllEvents:()=>{n.splice(0),r.splice(0),d.splice(0)}}},k=(n,r)=>{const d=Math.pow(Math.abs(n.x-r.x),2),u=Math.pow(Math.abs(n.y-r.y),2),s=n.r||0,c=r.r||0,e=Math.pow(s+c,2);return d+u<=e},vt=(n,r)=>{const d=n.r||0,u=r.w||0,s=r.h||0;return Math.abs(r.x+u/2-n.x)<=u/2+d&&Math.abs(r.y+s/2-n.y)<=s/2+d},yt=(n,r)=>k(n,r),Et=n=>{const r={},d=s=>{const c=s.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const s of n){const c=new Audio(s);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const e=d(s);r[e]={audio:c,path:s}}})(),s=>{var f,t;const c=(f=r[s])==null?void 0:f.audio,e=(t=r[s])==null?void 0:t.path;if(!(!c||!e))if(c.currentTime===0)c.play();else{var o=new Audio(e);o.volume=.25,o.play()}}};let O;const Pt=(n,r)=>{if(O)throw new Error("Webcore already specified");const d=dt(),u=lt(n),{loop:s,stop:c,stopAll:e}=ut(),{addEventResize:o,onResizeEvents:f,addEventClick:t,onClickEvents:i,addEventMove:a,onMoveEvents:l,removeAllEvents:h}=Mt();let m=innerWidth/2,p=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,M=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const v=()=>({cx:m,cy:p,s:g,m:M}),x=Et([]);O={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:v,useScreenMeta:u.useScreenMeta,navigate:(y,w)=>{if(!n.some(E=>E.name===y))throw new Error(`Screen ${y} not specified`);e(),ht(),h(),new Promise(()=>u.navigate(y,w))},loop:s,loopStop:c,useTimer:ft,rand:mt,useRandChain:gt,intersect:yt,addEventResize:o,addEventClick:t,addEventMove:a,playAudio:x},s(()=>d.render(u.render),"draw"),window.onresize=()=>{m=innerWidth/2,p=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,M=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),d.resize(),f()},document.onpointerdown=y=>{i(y.clientX,y.clientY)},document.onmousemove=y=>{l(y.clientX,y.clientY)},u.navigate()},S=()=>{if(!O)throw new Error("Webcore not specified");return{...O}},N={},b=n=>{const{shade:r,ctx:d,createImg:u}=S(),s=()=>{const{r:e,c:o="#ffffff",p:f}=n,t=d.createRadialGradient(e,e,e,e,e,e/5);return t.addColorStop(0,r(o,0)),t.addColorStop(.01,r(o,0)),t.addColorStop(.075,r(o,9)),t.addColorStop(.15,r(o,0)),t.addColorStop(.15,r(o,-15)),t.addColorStop(.18,r(o,-5)),t.addColorStop(.22,r(o,-15)),f?(t.addColorStop(.24,r(o,-10)),t.addColorStop(.3,r(o,-8)),t.addColorStop(.34,r(o,-12)),t.addColorStop(.6,r(o,-6)),t.addColorStop(1,r(o,-4))):(t.addColorStop(.24,r(o,-12)),t.addColorStop(.26,r(o,-8)),t.addColorStop(.3,r(o,-2)),t.addColorStop(.34,r(o,0)),t.addColorStop(.5,r(o,5)),t.addColorStop(1,r(o,10))),t},c=()=>{const{r:e,c:o="#ffffff",p:f}=n,t=`${o}_${f?"push":"pop"}_${e}`;if(N[t])return N[t];const i=u((a=d)=>{const l=s();a.fillStyle=l,a.beginPath(),a.arc(e,e,e,0,2*Math.PI),a.closePath(),a.fill()},2*e);return N[t]=i,i};return(e=d)=>{const{x:o,y:f,r:t}=n,i=c();e.drawImage(i,o-t,f-t,2*t,2*t)}},G={},F=n=>{const{ctx:r}=S();let d;return G[n.src]?d=G[n.src]:(d=new Image,d.src=n.src,G[n.src]=d),(u=r)=>{const{w:s,h:c=s,x:e=0,y:o=0}=n;d.complete&&u.drawImage(d,e,o,s,c)}},K=n=>{const{font:r,ctx:d}=S(),u=n.text,s=n.text.length,c=2*Math.PI/s/4;return(e=d)=>{const{x:o,y:f,r:t,s:i=0,fs:a}=n,l=a||Math.round(t/4);e.textAlign="center",e.fillStyle="#f9f9f9",e.font=`${l}px ${r}`,e.save(),e.translate(o,f),e.rotate(i);for(let h=0;h<s;h++)e.save(),e.rotate(h*c),e.fillText(u[h],0,-t),e.restore();e.restore()}},St=()=>{var v,x;const{ctx:n,loop:r,rotate:d,navigate:u,useMeasure:s,addEventClick:c,addEventResize:e,setBackground:o}=S();o("#040404");let f=!1,t,i,a,l,h,m=-.2,p=0;e(()=>{const{cx:y,cy:w,s:E}=s(),P=Math.round(E*.25);t={c:"#ff6347",x:y,y:w,r:P,p:!1},i=b(t),a=F({x:y-P+Math.round(P*.35),y:w-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),l=K({text:"nezabotin",x:y,y:w,r:Math.round(P*1.1),s:Math.PI*1.6}),h=K({text:"production",x:y,y:w,r:Math.round(P*1.1),s:Math.PI*2.6})});const g=()=>{m+=.01,p=m>=1?1:m,m>=1.8&&(t.p=!0),m>=2.2&&(t.c="#f86a9a"),m>=2.6&&u("main")};c(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(m<y)return m=y,!0})});const M=()=>{r(g),f=!0};return(v=document==null?void 0:document.fonts)!=null&&v.ready?(x=document==null?void 0:document.fonts)==null||x.ready.then(M):M(),()=>{const{cx:y,cy:w}=s();n.globalAlpha=f?1:0,i(),m<1.8&&a(),m<1.4&&d(()=>{l(),h()},y,w,p),n.globalAlpha=1}},xt=(n="#ba68c8")=>{const{addEventResize:r,useMeasure:d,useTimer:u,useScreenMeta:s,navigate:c,addEventClick:e,intersect:o}=S(),{from:f}=s();let t,i,a;return r(()=>{const{cx:m,cy:p,s:g,m:M}=d(),v=Math.round(g*.25);t={c:n,r:Math.round(g*.08),x:m-v-1*M,y:p-v+1*M,p:(f==="score"||f==="opening")&&!t},i=b(t),a=F({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),u(()=>{t.p=!1}),e((m,p)=>{o({x:m,y:p},t)&&(t.p=!0,u(()=>{c("score")},100))}),{render:()=>{i(),t.p||a()},point:()=>({x:t.x,y:t.y,r:t.r})}},wt=(n="#ff6347")=>{const{addEventResize:r,useMeasure:d,useTimer:u,useScreenMeta:s,navigate:c,addEventClick:e,intersect:o}=S(),{from:f}=s();let t,i,a;return r(()=>{const{s:m}=d(),p=Math.round(m*.08);t={c:n,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:f==="main"&&!t},i=b(t),a=F({x:Number(t.x)-p+Math.round(p*.4),y:Number(t.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),u(()=>{t.p=!1}),e((m,p)=>{o({x:m,y:p},t)&&(t.p=!0,u(()=>{c("main")},100))}),{render:()=>{i(),t.p||a()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ct=n=>{const{addEventResize:r,useMeasure:d,useTimer:u,addEventClick:s,intersect:c,rotate:e}=S();let o,f,t;return r(()=>{const{s:l}=d(),h=Math.round(l*.055);o={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h),p:!1},f=b(o),t=F({x:Number(o.x)-h+Math.round(h*.4),y:Number(o.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),s((l,h)=>{c({x:l,y:h},o)&&(o.p=!0,n(),u(()=>{o.p=!1},100))}),{render:()=>{f(),o.p||e(()=>{t()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},It=n=>{const{addEventResize:r,useMeasure:d,useTimer:u,addEventClick:s,intersect:c,rotate:e}=S();let o,f,t;return r(()=>{const{s:l}=d(),h=Math.round(l*.055);o={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h-2*h-.3*h),p:!1},f=b(o),t=F({x:Number(o.x)-h+Math.round(h*.4),y:Number(o.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),s((l,h)=>{c({x:l,y:h},o)&&(o.p=!0,n(),u(()=>{o.p=!1},100))}),{render:()=>{f(),o.p||e(()=>{t()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},bt=n=>{const{ctx:r,shade:d}=S(),u=Math.round(n.r/2.2),s=Math.round(.15*n.r),c=d(n.c||"blue",-3);return(e=r)=>{const{r:o,x:f=o,y:t=o}=n;e.lineCap="round",e.fillStyle=c,e.strokeStyle=c,e.lineWidth=u,e.beginPath(),e.moveTo(f+s,t),e.lineTo(f-s/2,t-s),e.lineTo(f-s/2,t+s),e.closePath(),e.fill(),e.beginPath(),e.moveTo(f+s,t),e.lineTo(f-s/2,t-s),e.moveTo(f-s/2,t-s),e.lineTo(f-s/2,t+s),e.moveTo(f-s/2,t+s),e.lineTo(f+s,t),e.stroke()}},ot=({getX:n,getY:r,color:d="#bef181"})=>{const{addEventResize:u,useMeasure:s,useTimer:c,useScreenMeta:e,navigate:o,addEventClick:f,intersect:t}=S(),{from:i}=e();let a,l,h;return u(()=>{const{cx:g,cy:M,s:v,m:x}=s();a={c:d,r:Math.round(v*.1),x:n(g,v,x),y:r(M,v,x),p:(i==="gamescore"||i==="game"||i==="opening")&&!a},l=b(a),h=bt(a)}),c(()=>{a.p=!1}),f((g,M)=>{t({x:g,y:M},a)&&(a.p=!0,c(()=>{o("game")},100))}),{render:()=>{l(),a.p||h()},point:()=>({x:a.x,y:a.y,r:a.r})}},rt=n=>{const{ctx:r,shade:d}=S(),u=Math.round(n.r/4),s=Math.round(.12*n.r);return(c=r)=>{const{r:e,x:o=e,y:f=e}=n,t=d(n.c||"blue",-3);c.lineCap="round",c.strokeStyle=t,c.lineWidth=u,c.beginPath(),c.moveTo(o-1.5*s,f-2*s),c.lineTo(o-1.5*s,f+2*s),c.stroke(),c.beginPath(),c.moveTo(o+1.5*s,f-2*s),c.lineTo(o+1.5*s,f+2*s),c.stroke()}},Rt=({getX:n,getY:r})=>{const{addEventResize:d,useMeasure:u,useTimer:s,useScreenMeta:c,navigate:e,addEventClick:o,intersect:f}=S(),{from:t}=c();let i,a,l;return d(()=>{const{cx:p,cy:g,s:M,m:v}=u();i={c:"#fd8059",r:Math.round(M*.08),x:n(p,M,v),y:r(g,M,v),p:(t==="game"||t==="opening")&&!i},a=b(i),l=rt(i)}),s(()=>{i.p=!1}),o((p,g)=>{f({x:p,y:g},i)&&(i.p=!0,s(()=>{e("main")},100))}),{render:()=>{a(),i.p||l()},point:()=>({x:i.x,y:i.y,r:i.r})}},J=n=>{const{font:r,ctx:d}=S();return(u=d)=>{const{text:s,x:c,c:e,y:o,fs:f,a:t="center",mw:i}=n;u.textAlign=t,u.fillStyle=e,u.font=`${f}px ${r}`,u.fillText(s,c,o,i)}},Tt=(n="#f86a9a")=>{const{addEventResize:r,useMeasure:d,useTimer:u,useScreenMeta:s,addEventClick:c,intersect:e,navigate:o}=S(),{from:f}=s();let t,i,a,l;return r(()=>{const{cx:p,cy:g,s:M}=d(),v=Math.round(M*.25);t={c:n,x:p,y:g,r:v,p:f==="opening"&&!t},i=b(t),a=J({text:"Yola",c:"#f1f1f1",x:p,y:g-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),l=J({text:"PopiT",c:"#ffeb3b",x:p,y:g-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),u(()=>t.p=!1),c((p,g)=>{e({x:p,y:g},t)&&(t.p=!0,u(()=>{o("opening")},100))}),{render:()=>{i(),t.p||(a(),l())},point:()=>({x:t.x,y:t.y,r:t.r})}},st=({color:n="#00dcfe",frequency:r=25})=>{const{addEventResize:d,useRandChain:u,useMeasure:s,rand:c,useTimer:e,setBackground:o,useScreenMeta:f}=S(),{from:t}=f();o(n);const i=c(0,999);let a=[],l=[];d(()=>{const g=u(i),{s:M}=s();a=[];const v=Math.round(M*.05),x=Math.round(innerWidth/v/2)-1,y=Math.round((innerWidth-2*v*x)/(x+1)),w=Math.round(innerHeight/v/2)-1,E=Math.round((innerHeight-2*v*w)/(w+1));for(let P=0;P<w;P++)for(let C=0;C<x;C++)g(g(r))<1&&a.push({x:y+v+C*v*2+y*C,y:E+v+P*v*2+E*P,r:v,c:n,p:t==="opening"?!0:g(1)>0});l=a.map(P=>b(P))});const h=()=>{e(()=>{const g=c(a.length-1);a[g]&&(a[g].p=!a[g].p),h()},750)};return t==="opening"?e(()=>{a.forEach(g=>g.p=c(1)>0),h()}):h(),{render:()=>{l.forEach(g=>g())},setIntersections:g=>{a=a.filter(({x:M,y:v,r:x})=>g(M,v,x)),l=a.map(M=>b(M))}}},Q="ylp",Z="score",tt="difficulty",Y=[.14,.11,.09,.075],et=750,Wt=350,nt=5,D=[];for(let n=0;n*nt<=et-Wt;n++)D.push(et-n*nt);const z=()=>{const n=a=>localStorage.getItem(`${Q}_${a}`),r=(a,l)=>localStorage.setItem(`${Q}_${a}`,l.toString()),d=()=>+(n(Z)||0),u=a=>r(Z,a),s=a=>{const l=d();u(l+a)},c=()=>+(n(tt)||0),e=a=>{const l=c();r(tt,Math.min(Math.max(l+a,0),Y.length*D.length-1))};return{getScore:d,addScore:s,plusDifficulty:()=>e(1),minusDifficulty:()=>e(-1),getDifficultyRad:()=>{const a=c(),l=Math.floor(a/D.length);return Y[l]||Y[1]},getDifficultyTic:()=>{const a=c(),l=Math.floor(a/D.length),h=a-l*D.length;return D[h]||D[0]}}},it=(n=!1)=>{let r=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:u,setBackground:s,rand:c}=S(),{getDifficultyRad:e}=z();return r=[...r.splice(c(r.length-1),r.length),...r],n||d(()=>{const{s:f}=u(),t=e(),i=Math.round(f*t),a=Math.round(innerWidth/i/2)-1,l=(innerWidth-2*i*a)/(a+1),h=Math.round(innerHeight/i/2)-1,m=(innerHeight-2*i*h)/(h+1),p=innerWidth>=innerHeight,g=p?a:h,M=p?l:m,v=p?innerWidth:innerHeight;let x=0;const y=[];for(let E=0;E<g;E++)r[x]||(x=0),y.push(`${r[x]} ${(M+i+E*i*2+M*E)/v*100}%`),x++;s(`linear-gradient(${p?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?r[0]:"#040404")}),r},ct=({palette:n,retry:r})=>{const{addEventResize:d,useMeasure:u,rand:s,useTimer:c,useScreenMeta:e,navigate:o,addEventClick:f,intersect:t}=S(),{from:i}=e(),{getDifficultyRad:a}=z(),l=[];let h=[],m,p,g,M;const v=y=>Array.isArray(n)?n[y]:n;return d(()=>{const{s:y}=u();l.splice(0);const w=a(),E=Math.round(y*w),P=Math.round(innerWidth/E/2)-1,C=(innerWidth-2*E*P)/(P+1),I=Math.round(innerHeight/E/2)-1,T=(innerHeight-2*E*I)/(I+1),A=innerWidth>=innerHeight;let R=0;for(let W=0;W<I;W++){for(let _=0;_<P;_++){v(R)||(R=0);const U={x:C+E+_*E*2+C*_,y:T+E+W*E*2+T*W,r:E,c:v(R),p:!0};W===0&&_===P-1?(M={...U,p:(i==="main"||i==="gameover"||i==="gamescore")&&!M},m=b(M),p=rt(M)):l.push(U),R+=A?1:0}R=A?0:R+1}r&&(g=l[s(l.length-1)],c(()=>{g.p=!1})),h=l.map(W=>b(W))}),c(()=>{M.p=!1}),r&&f((y,w)=>{t({x:y,y:w},g)&&(g.p=!0,c(()=>{o("game")},100))}),f((y,w)=>{t({x:y,y:w},M)&&(M.p=!0,c(()=>{o("main")},100))}),{render:()=>{h.forEach(y=>y()),m(),M!=null&&M.p||p()},popits:l}},H=100,X=0,L="#222",Ht=n=>{const r=(n==null?void 0:n[0])||0,d=(n==null?void 0:n[1])||0,u=(n==null?void 0:n[2])||0;return"#"+(16777216+(r<255?r<1?0:r:255)*65536+(d<255?d<1?0:d:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},j={},Dt=n=>{const{ctx:r,createImg:d,useRandChain:u}=S();let s;j[n.imgSrc]?s=j[n.imgSrc]:(s=j[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},s.img.src=n.imgSrc);const c=(t,i=r)=>{const{x:a,y:l,c:h,r:m}=t;i.fillStyle=h,i.beginPath(),i.arc(a+m,l+m,m,0,Math.PI*2),i.closePath(),i.fill()},e=()=>{const t=[],i=(n.r*2-2*X)/H;for(let m=0;m<H;m++)for(let p=0;p<H;p++){const g={x:X+p*i,y:X+m*i,r:i/2,c:L};t.push(g)}let a=n.score;const l=[...t],h=u(0);for(let m=a;m>0;m--){const p=h(l.length-1),g=l[p],M=t.indexOf(g);g.c=s.cols[M],l.splice(p,1)}return t},o=()=>{const t=e();s.drawImg=d((i=r)=>{i.fillStyle=L,i.beginPath(),i.rect(0,0,2*n.r,2*n.r),i.closePath(),i.fill(),t.filter(a=>a.c===L).forEach(a=>c(a,i)),t.filter(a=>a.c!==L).forEach(a=>c(a,i))},2*n.r)},f=async()=>{var a;const t=document.createElement("canvas");t.width=H,t.height=H;const i=t.getContext("2d",{willReadFrequently:!0});i==null||i.drawImage(s.img,0,0);for(let l=0;l<H;l++){const h=[];for(let m=0;m<H;m++){const p=(a=i==null?void 0:i.getImageData(m,l,1,1))==null?void 0:a.data;h.push(Ht(p))}s.cols.push(...h)}s.isFilled=!0,o()};return s.isFilled?(s.r!==n.r||s.score!==n.score)&&o():s.img.onload=f,(t=r)=>{const{x:i,y:a,r:l}=n;s.drawImg&&t.drawImage(s.drawImg,i-l,a-l,2*l,2*l)}},q=1e4,at=()=>{const{addEventResize:n,useMeasure:r,translate:d}=S(),{getScore:u}=z(),s=["/media/cat.png"],c=u();let e,o=0,f=0,t=Math.floor(c/q);return n(()=>{const{cx:m,cy:p,s:g}=r();e=[],o=(g-2*g*.055*1.6)/2,f=g*.05;for(let M=0;M<s.length;M++){const v=s[M];e.push(Dt({x:m,y:p+M*o*2+M*f,r:o,score:c-M*q<0?0:c-M*q,imgSrc:v}))}}),{up:()=>{t=t+1<s.length?t+1:s.length-1},down:()=>{t=t-1<0?0:t-1},render:()=>{d(()=>{e==null||e.forEach(m=>m())},0,-(t*o*2+t*f))},rect:()=>{const{cx:m,cy:p}=r(),g=innerWidth>innerHeight;return{x:g?m-o:0,y:g?0:p-o,w:g?2*o:innerWidth,h:g?innerHeight:2*o}}}},kt=n=>{const{useTimer:r,rand:d,addEventClick:u,addEventMove:s,intersect:c,navigate:e}=S(),{addScore:o,getDifficultyTic:f}=z();let t=[],i,a,l=!1,h=0,m=0,p=0;const g=f(),M=()=>{const E=n.filter(I=>t.indexOf(I)===-1),P=d(E.length-1),C=E[P];C&&(C.p=!1,t.push(E[P]))},v=()=>{a=r(()=>{if(p=Math.max(p-10,250),n.length===t.length){l=!0,a.stop(),r(()=>{e("gameover")});return}M(),v()},p)},x=E=>{t=[];const P=n.length;let C=d(Math.round(P*.3),Math.round(P*.6));const I=[...n];if(E){const T=I.indexOf(E);I.splice(T,1)}for(let T=C;T>0;T--){const A=d(I.length-1),R=I[A];R.p=!1,t.push(R),I.splice(A,1)}p=g,i==null||i.stop(),a==null||a.stop(),i=r(v,t.length*Math.min(g,500)),h=h>0?h:d(3,5)},y=E=>{p=Math.min(p+5,g),m++,E.p=!0;const P=t.indexOf(E);t.splice(P,1),t.length<=0&&(h--,h>0?x(E):(o(m),e("gamescore")))},w=(E,P,C=!1)=>{if(!l){for(const I of t)if(c({x:E,y:P},I)){y(I);return}C||M()}};u(w),s((E,P)=>w(E,P,!0)),r(()=>{x()})},zt=()=>{const{addEventResize:n,rand:r}=S(),d=["#00dcfe","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#EFCD74","#fd8059"],u=d[r(d.length-1)],{render:s,setIntersections:c}=st({color:u}),{render:e,point:o}=Tt(),{render:f,point:t}=ot({getX:(l,h,m)=>l+Math.round(h*.25)+2*m,getY:(l,h,m)=>l+Math.round(h*.25)+0*m}),{render:i,point:a}=xt();return n(()=>{const l=a(),h=o(),m=t();c((p,g,M)=>!k({x:p,y:g,r:M},l)&&!k({x:p,y:g,r:M},h)&&!k({x:p,y:g,r:M},m))}),()=>{s(),e(),f(),i()}},At=()=>{const n=it(),{popits:r,render:d}=ct({palette:n});return kt(r),()=>{d()}},_t=()=>{const n="#ff6347",{setBackground:r}=S(),{minusDifficulty:d}=z(),{render:u}=ct({palette:n,retry:!0});return r(n),d(),()=>{u()}},Ft=()=>{const{translate:n}=S(),{plusDifficulty:r}=z();it();const{render:d}=at(),{render:u}=ot({getX:(c,e,o)=>innerWidth>innerHeight?Math.min(c+(e-2*e*.055*1.6)/2+4*o+Math.round(e*.1),innerWidth-2*o-Math.round(e*.1)):c+(e-2*e*.055*1.6)/8+0*Math.round(e*.1)+2*o,getY:(c,e,o)=>innerWidth>innerHeight?c+(e-2*e*.055*1.6)/2+0*o-Math.round(e*.1):Math.min(c+(e-2*e*.055*1.6)/2+4*o+Math.round(e*.1),innerHeight-2*o-Math.round(e*.1))}),{render:s}=Rt({getX:(c,e,o)=>innerWidth>innerHeight?Math.max(c-(e-2*e*.055*1.6)/2-4*o-Math.round(e*.1),2*o+Math.round(e*.1)):c+(e-2*e*.055*1.6)/8-2*Math.round(e*.1)-2*o,getY:(c,e,o)=>innerWidth>innerHeight?c-(e-2*e*.055*1.6)/2+0*o+Math.round(e*.1):Math.min(c+(e-2*e*.055*1.6)/2+4*o+Math.round(e*.1),innerHeight-2*o-Math.round(e*.1))});return r(),()=>{innerHeight>innerWidth?n(d,0,-Math.round(innerHeight*.07)):d(),u(),s()}},Lt=()=>{const{addEventResize:n}=S(),{render:r,setIntersections:d}=st({color:"#ffeb3b",frequency:10}),{render:u,rect:s,up:c,down:e}=at(),{render:o,point:f}=wt(),{point:t}=Ct(c),{point:i}=It(e);return n(()=>{const a=f(),l=s(),h=t(),m=i();d((p,g,M)=>!k({x:p,y:g,r:M},a)&&!vt({x:p,y:g,r:M},l)&&!k({x:p,y:g,r:M},h)&&!k({x:p,y:g,r:M},m))}),()=>{r(),u(),o()}},$t=()=>{const{ctx:n,addEventResize:r,loop:d}=S(),u={x:40,y:100};let s=1,c=1,e;const o=()=>{e=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),r(o),d(()=>{u.x+=2*s,u.y+=3*c,s*=-1,c*=-1}),()=>{n.save();var f=Math.random()*2,t=Math.random()*3;n.translate(f,t),n.beginPath(),n.fillStyle="red",n.rect(u.x,u.y,e,e),n.fill(),n.restore()}},Ot=[{name:"opening",ctor:St},{name:"main",ctor:zt},{name:"game",ctor:At},{name:"gameover",ctor:_t},{name:"gamescore",ctor:Ft},{name:"score",ctor:Lt},{name:"devs",ctor:$t}];Pt(Ot);document.title="Your's last Pop it";
