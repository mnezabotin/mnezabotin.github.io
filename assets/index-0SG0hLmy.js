(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const Pe=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=i=>{n.clearRect(0,0,innerWidth,innerHeight),i()};return a(),document.body.appendChild(e),{ctx:n,render:h,resize:a,rotate:(i,r,c,g)=>{n.save(),n.translate(r,c),n.rotate(Math.PI*g),n.translate(-r,-c),i(),n.restore()},translate:(i,r,c)=>{n.save(),n.translate(r,c),i(),n.restore()},shade:(i,r)=>{i=i.substring(1);const c=parseInt(i,16),g=Math.round(2.55*r),M=(c>>16)+g,d=(c>>8&255)+g,p=(c&255)+g;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(d<255?d<1?0:d:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(i,r)=>{var c;document.body.style.background=i,document.body.style.backgroundColor=r||i,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",r||i)},createImg:(i,r,c=r)=>{const g=document.createElement("canvas"),M=g.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return g.width=r*devicePixelRatio,g.height=c*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),i(M),g}}},Se=e=>{let n="",a="",h;const o=l=>e.find(u=>u.name===l)||e[0],t={render:()=>{},navigate:(l,u)=>{const i=o(l);a=n||"",n=(i==null?void 0:i.name)||"",h=u,t.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:h})};return t},Ee=()=>{const e=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),n=[],a={};return{loop:(t,l)=>{if(Object.entries(a).find(([i,r])=>r===t)||l&&a[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&n.push(l),l=l||new Date().valueOf().toString(),a[l]=t;const u=()=>{t(),a[l]&&e(u)};u()},stop:t=>{if(typeof t=="string")delete a[t];else{const l=Object.entries(a).find(([u,i])=>i===t);l&&delete a[l[0]]}},stopAll:()=>{for(const t in a)n.indexOf(t)===-1&&delete a[t]}}};let U=[];const xe=()=>{for(const e of U)clearTimeout(e);U=[]},Ce=(e,n=400)=>{let a=new Date,h=n,o=setTimeout(e,h);return U.push(o),{pause:()=>{clearTimeout(o),h-=new Date-a},resume:()=>{a=new Date,clearTimeout(o),o=setTimeout(e,h),U.push(o)},stop:()=>{clearTimeout(o)}}},re=2147483646,J=2147483647,be=16807,Ie=(e=Math.floor(Math.random()*J))=>{e=e%J,e<=0&&(e+=re);const n=()=>(e=e*be%J,e),a=()=>(n()-1)/re;return(o,s)=>(s===void 0&&(s=o,o=0),Math.floor(a()*(s-o+1))+o)},Re=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Te=()=>{const e=[],n=[],a=[];return{addEventResize:r=>{r(),e.push(r)},onResizeEvents:()=>e.forEach(r=>r()),addEventClick:r=>n.push(r),onClickEvents:(r,c)=>n.forEach(g=>g(r,c)),addEventMove:r=>a.push(r),onMoveEvents:(r,c)=>a.forEach(g=>g(r,c)),removeAllEvents:()=>{e.splice(0),n.splice(0),a.splice(0)}}},H=(e,n)=>{const a=Math.pow(Math.abs(e.x-n.x),2),h=Math.pow(Math.abs(e.y-n.y),2),o=e.r||0,s=n.r||0,t=Math.pow(o+s,2);return a+h<=t},We=(e,n)=>{const a=e.r||0,h=n.w||0,o=n.h||0;return Math.abs(n.x+h/2-e.x)<=h/2+a&&Math.abs(n.y+o/2-e.y)<=o/2+a},ke=(e,n)=>H(e,n),He=e=>{const n=new AudioContext,a={},h=s=>{fetch(s).then(t=>t.arrayBuffer()).then(t=>(n==null?void 0:n.decodeAudioData(t))||null).then(t=>{t&&(a[s]=t)})};if(e.length)for(const s of e)h(s);return s=>{setTimeout(async()=>{const t=n.createBufferSource();a[s]||(a[s]=await fetch(s).then(l=>l.arrayBuffer()).then(l=>(n==null?void 0:n.decodeAudioData(l))||null)),t.buffer=a[s],t.connect(n.destination),t.start()},0)}};let V;const De=(e,n)=>{if(V)throw new Error("Webcore already specified");const a=Pe(),h=Se(e),{loop:o,stop:s,stopAll:t}=Ee(),{addEventResize:l,onResizeEvents:u,addEventClick:i,onClickEvents:r,addEventMove:c,onMoveEvents:g,removeAllEvents:M}=Te();let d=innerWidth/2,p=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight;const y=()=>({cx:d,cy:p,s:f,m:w,isL:m}),v=He(n);V={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:y,useScreenMeta:h.useScreenMeta,navigate:(P,E)=>{if(!e.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);t(),xe(),M(),new Promise(()=>h.navigate(P,E))},loop:o,loopStop:s,useTimer:Ce,rand:Re,useRandChain:Ie,intersect:ke,addEventResize:l,addEventClick:i,addEventMove:c,playSound:v},o(()=>a.render(h.render),"draw"),window.onresize=()=>{d=innerWidth/2,p=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight,a.resize(),u()},document.onpointerdown=P=>{r(P.clientX,P.clientY)},document.onmousemove=P=>{g(P.clientX,P.clientY)},h.navigate()},x=()=>{if(!V)throw new Error("Webcore not specified");return{...V}},Q={},W=e=>{const{shade:n,ctx:a,createImg:h}=x(),o=()=>{const{r:t,c:l="#ffffff",p:u}=e,i=a.createRadialGradient(t,t,t,t,t,t/5);return i.addColorStop(0,n(l,0)),i.addColorStop(.01,n(l,0)),i.addColorStop(.075,n(l,9)),i.addColorStop(.15,n(l,0)),i.addColorStop(.15,n(l,-15)),i.addColorStop(.18,n(l,-5)),i.addColorStop(.22,n(l,-15)),u?(i.addColorStop(.24,n(l,-10)),i.addColorStop(.3,n(l,-8)),i.addColorStop(.34,n(l,-12)),i.addColorStop(.6,n(l,-6)),i.addColorStop(1,n(l,-4))):(i.addColorStop(.24,n(l,-12)),i.addColorStop(.26,n(l,-8)),i.addColorStop(.3,n(l,-2)),i.addColorStop(.34,n(l,0)),i.addColorStop(.5,n(l,5)),i.addColorStop(1,n(l,12))),i},s=()=>{const{r:t,c:l="#ffffff",p:u}=e,i=`${l}_${u?"push":"pop"}_${t}`;if(Q[i])return Q[i];const r=h((c=a)=>{const g=o();c.fillStyle=g,c.beginPath(),c.arc(t,t,t,0,2*Math.PI),c.closePath(),c.fill()},2*t);return Q[i]=r,r};return(t=a)=>{const{x:l,y:u,r:i}=e,r=s();t.drawImage(r,l-i,u-i,2*i,2*i)}},Z={},N=e=>{const{ctx:n}=x();let a;return Z[e.src]?a=Z[e.src]:(a=new Image,a.src=e.src,Z[e.src]=a),(h=n)=>{const{w:o,h:s=o,x:t=0,y:l=0}=e;a.complete&&h.drawImage(a,t,l,o,s)}},ie=e=>{const{font:n,ctx:a}=x(),h=e.text,o=e.text.length,s=2*Math.PI/o/4;return(t=a)=>{const{x:l,y:u,r:i,s:r=0,fs:c}=e,g=c||Math.round(i/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${g}px ${n}`,t.save(),t.translate(l,u),t.rotate(r);for(let M=0;M<o;M++)t.save(),t.rotate(M*s),t.fillText(h[M],0,-i),t.restore();t.restore()}},Ae=()=>{var m,y;const{ctx:e,loop:n,rotate:a,navigate:h,useMeasure:o,addEventClick:s,addEventResize:t,setBackground:l}=x();l("#040404");let u=!1,i,r,c,g,M,d=-.2,p=0;t(()=>{const{cx:v,cy:P,s:E}=o(),S=Math.round(E*.25);i={c:"#ff6347",x:v,y:P,r:S,p:!1},r=W(i),c=N({x:v-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),g=ie({text:"nezabotin",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),M=ie({text:"production",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const f=()=>{d+=.01,p=d>=1?1:d,d>=1.8&&(i.p=!0),d>=2.2&&(i.c="#f86a9a"),d>=2.6&&h("main")};s(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(d<v)return d=v,!0})});const w=()=>{n(f),u=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(w):w(),()=>{const{cx:v,cy:P}=o();e.globalAlpha=u?1:0,r(),d<1.8&&c(),d<1.4&&a(()=>{g(),M()},v,P,p),e.globalAlpha=1}},ce="ylp",ae="score",ee="difficulty",de="sound",te=[.14,.11,.09,.075],le=750,ze=350,ue=5,_=[];for(let e=0;e*ue<=le-ze;e++)_.push(le-e*ue);let $=null;const D=()=>{const e=d=>localStorage.getItem(`${ce}_${d}`),n=(d,p)=>localStorage.setItem(`${ce}_${d}`,p.toString()),a=()=>+(e(ae)||0),h=d=>n(ae,d),o=d=>{const p=a();h(p+d)},s=()=>+(e(ee)||0),t=d=>{const p=s();n(ee,Math.min(Math.max(p+d,0),te.length*_.length-1))};return{getScore:a,addScore:o,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const d=s(),p=Math.floor(d/_.length);return te[p]||te[1]},getDifficultyTic:()=>{const d=s(),p=Math.floor(d/_.length),f=d-p*_.length;return _[f]||_[0]},resetDifficulty:()=>n(ee,0),getSound:()=>$!==null?$:e(de)==="true"?($=!0,!0):($=!1,!1),setSound:d=>{$=d,n(de,d)}}},he=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3"];let k=[...he];const Y=()=>{const{rand:e,playSound:n}=x(),{getSound:a}=D();return{playPop:()=>{if(!a())return;const l=e(k.length-1),u=k[l];k.splice(l,1),k.length||(k=[...he]);const i=e(k.length-1);k=[...k.splice(i,k.length),...k],n(u),console.log(u)},playMissed:()=>{if(!a())return;n("/sounds/new/pop18.mp3")},playFail:()=>{if(!a())return;n("/sounds/fail.mp3")},playWin:()=>{if(!a())return;n("/sounds/win.mp3")}}},B=100/2;let pe=0;const G=()=>{const{loop:e,ctx:n,shade:a,rand:h}=x(),{playPop:o,playMissed:s}=Y(),t={},l=()=>{for(const r in t){const c=t[r];if(!c)return;const g=c.popit;if(!c.shake)c.tic+=B/5,c.tic>=B&&(c.dir=-1),c.withoutRad||(g.r=c.origR+c.origR*75e-5*(c.tic+(c.dir>0?0:B-c.tic)));else{c.tic+=B/5;const M=h(1,2),d=h(1,2);g.x=c.origX+Math.random()*M*(Math.random()>.5?1:-1),g.y=c.origY+Math.random()*d*(Math.random()>.5?1:-1)}c.tic>=2*B&&(delete t[r],g.r=c.origR,g.x=c.origX,g.y=c.origY)}},u=(r,c=!1,g=!1)=>{c?s():o(),pe++;const M=`${new Date().valueOf().toString()}_${pe}`,d=1,p=1;t[M]={withoutRad:c,tic:d,dir:p,popit:r,origR:r.r,origX:r.x,origY:r.y,shake:g}},i=()=>{n.globalAlpha=.25;for(const r in t){const c=t[r];if(c.shake)continue;const g=c.popit;n.fillStyle=a(g.c||"red",-12),n.beginPath(),n.arc(g.x,g.y,g.r+c.origR*.001*(c.tic+(c.dir>0?0:B-c.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(l),{popEffect:u,render:i}},oe=e=>{const{font:n,ctx:a}=x();return(h=a)=>{const{text:o,x:s,c:t,y:l,fs:u,a:i="center",mw:r}=e;h.textAlign=i,h.fillStyle=t,h.font=`${u}px ${n}`,h.fillText(o,s,l,r)}},j=100,Fe=e=>{const{loop:n,ctx:a,useMeasure:h,rand:o}=x();let s=null;const t=()=>{if(!s)return;const{m:i}=h();if(s.tic<=j)s.props.fs=((e==null?void 0:e.mfs)||8)/j*s.tic*i;else{const r=o(1,1),c=o(1,1);s.props.x=s.origX+Math.random()*r*(Math.random()>.5?1:-1),s.props.y=s.origY+Math.random()*c*(Math.random()>.5?1:-1),s.shake=!0}s.tic+=s.tic>j?1:10,s.tic>j*2},l=i=>{const{cx:r,m:c}=h(),g=0,M={x:r,y:Math.round(c*((e==null?void 0:e.dy)||16)),text:i,c:(e==null?void 0:e.color)||"#ffffff",fs:0},d=oe(M);s={props:M,shape:d,tic:g,origX:M.x,origY:M.y}},u=()=>{s&&(a.globalAlpha=.01*s.tic,s.shape(),a.globalAlpha=1)};return n(t),{splashEffect:l,render:u}},Le=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:s,navigate:t,addEventClick:l,intersect:u}=x(),{from:i}=s();let r,c,g;return a(()=>{const{cx:p,cy:f,s:w,m}=h(),y=Math.round(w*.25);r={c:e,r:Math.round(w*.08),x:p-y-1*m,y:f-y+1*m,p:(i==="score"||i==="opening")&&!r},c=W(r),g=N({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),o(()=>{r.p&&n(r,!1,!0),r.p=!1}),l((p,f)=>{u({x:p,y:f},r)&&(n(r),r.p=!0,o(()=>{t("score")},100))}),{render:()=>{c(),r.p||g()},point:()=>({x:r.x,y:r.y,r:r.r})}},_e=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:s,navigate:t,addEventClick:l,intersect:u}=x(),{from:i}=s();let r,c,g;return a(()=>{const{s:p}=h(),f=Math.round(p*.08);r={c:e,r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:i==="main"&&!r},c=W(r),g=N({x:Number(r.x)-f+Math.round(f*.4),y:Number(r.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),o(()=>{r.p&&n(r,!1,!0),r.p=!1}),l((p,f)=>{u({x:p,y:f},r)&&(n(r),r.p=!0,o(()=>{t("main")},100))}),{render:()=>{c(),r.p||g()},point:()=>({x:r.x,y:r.y,r:r.r})}},Be=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:h,addEventClick:o,intersect:s,rotate:t}=x(),{playPop:l}=Y();let u,i,r;return n(()=>{const{s:M}=a(),d=Math.round(M*.08);u={c:"#ff6347",r:d,x:Math.round(innerWidth-1.6*d),y:Math.round(innerHeight-1.6*d),p:!1},i=W(u),r=N({x:Number(u.x)-d+Math.round(d*.4),y:Number(u.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),o((M,d)=>{s({x:M,y:d},u)&&(l(),u.p=!0,e(),h(()=>{u.p=!1},100))}),{render:()=>{i(),u.p||t(()=>{r()},u.x,u.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:u.x,y:u.y,r:u.r})}},Oe=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:h,addEventClick:o,intersect:s,rotate:t}=x(),{playPop:l}=Y();let u,i,r;return n(()=>{const{s:M}=a(),d=Math.round(M*.08),p=innerWidth<innerHeight?Math.round(innerWidth-1.6*d-2*d-.3*d):Math.round(innerWidth-1.6*d),f=innerWidth<innerHeight?Math.round(innerHeight-1.6*d):Math.round(innerHeight-1.6*d-2*d-.3*d);u={c:"#ff6347",r:d,x:p,y:f,p:!1},i=W(u),r=N({x:Number(u.x)-d+Math.round(d*.4),y:Number(u.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),o((M,d)=>{s({x:M,y:d},u)&&(l(),u.p=!0,e(),h(()=>{u.p=!1},100))}),{render:()=>{i(),u.p||t(()=>{r()},u.x,u.y,innerHeight>innerWidth?0:.5)},point:()=>({x:u.x,y:u.y,r:u.r})}},$e=e=>{const{ctx:n,shade:a}=x(),h=Math.round(e.r/2.2),o=Math.round(.15*e.r),s=a(e.c||"blue",-3);return(t=n)=>{const{r:l,x:u=l,y:i=l}=e;t.lineCap="round",t.fillStyle=s,t.strokeStyle=s,t.lineWidth=h,t.beginPath(),t.moveTo(u+o,i),t.lineTo(u-o/2,i-o),t.lineTo(u-o/2,i+o),t.closePath(),t.fill(),t.beginPath(),t.moveTo(u+o,i),t.lineTo(u-o/2,i-o),t.moveTo(u-o/2,i-o),t.lineTo(u-o/2,i+o),t.moveTo(u-o/2,i+o),t.lineTo(u+o,i),t.stroke()}},ge=({getX:e,getY:n,color:a="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:o,useMeasure:s,useTimer:t,useScreenMeta:l,navigate:u,addEventClick:i,intersect:r}=x(),{from:c}=l();let g,M,d;return o(()=>{const{cx:w,cy:m,s:y,m:v}=s();g={c:a,r:Math.round(y*.1),x:e(w,y,v),y:n(m,y,v),p:(c==="gamescore"||c==="game"||c==="opening")&&!g},M=W(g),d=$e(g)}),t(()=>{g.p&&h(g,!1,!0),g.p=!1}),i((w,m)=>{r({x:w,y:m},g)&&(h(g),g.p=!0,t(()=>{u("game")},100))}),{render:()=>{M(),g.p||d()},point:()=>({x:g.x,y:g.y,r:g.r})}},me=e=>{const{ctx:n,shade:a}=x(),h=Math.round(e.r/4),o=Math.round(.12*e.r);return(s=n)=>{const{r:t,x:l=t,y:u=t}=e,i=a(e.c||"blue",-3);s.lineCap="round",s.strokeStyle=i,s.lineWidth=h,s.beginPath(),s.moveTo(l-1.5*o,u-2*o),s.lineTo(l-1.5*o,u+2*o),s.stroke(),s.beginPath(),s.moveTo(l+1.5*o,u-2*o),s.lineTo(l+1.5*o,u+2*o),s.stroke()}},Ne=({getX:e,getY:n,popEffect:a=()=>{}})=>{const{addEventResize:h,useMeasure:o,useTimer:s,useScreenMeta:t,navigate:l,addEventClick:u,intersect:i}=x(),{from:r}=t();let c,g,M;return h(()=>{const{cx:f,cy:w,s:m,m:y}=o();c={c:"#fd8059",r:Math.round(m*.08),x:e(f,m,y),y:n(w,m,y),p:(r==="game"||r==="opening")&&!c},g=W(c),M=me(c)}),s(()=>{c.p&&a(c,!1,!0),c.p=!1},500),u((f,w)=>{i({x:f,y:w},c)&&(a(c),c.p=!0,s(()=>{l("main")},100))}),{render:()=>{g(),c.p||M()},point:()=>({x:c.x,y:c.y,r:c.r})}},Ye=e=>{const{ctx:n,shade:a}=x(),h=Math.round(e.r/4),o=Math.round(.2*e.r),s=a(e.c||"blue",-5);return(t=n)=>{const{r:l,x:u=l,y:i=l}=e;t.lineCap="round",t.fillStyle=s,t.strokeStyle=s,t.lineWidth=h,t.beginPath(),t.ellipse(u-o,i+o,h,o,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(u-o/2,i+o),t.lineTo(u,i-o),t.lineTo(u+o,i-o),t.stroke(),e.on||(t.lineWidth=Math.round(h/3),t.beginPath(),t.moveTo(u-l/4,i-l/4),t.lineTo(u+l/4,i+l/4),t.stroke())}},Ge=({color:e="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:s,addEventClick:t,intersect:l}=x(),{from:u}=s(),{getSound:i,setSound:r}=D();let c,g,M;return a(()=>{const{cx:f,cy:w,s:m,m:y}=h(),v=Math.round(m*.25),P=Math.round(m*.065),E=i();c={c:e,r:P,x:f-v-P-y,y:w-v+3*P,p:u==="opening"&&!c,on:E},g=W(c),M=Ye(c)}),o(()=>{c.p&&n(c,!1,!0),c.p=!1}),t((f,w)=>{if(l({x:f,y:w},c)){let m=i();m=!m,r(m),c.p=!0,c.on=m,n(c),o(()=>{c.p=!1},100)}}),{render:()=>{g(),c.p||M()},point:()=>({x:c.x,y:c.y,r:c.r})}},Xe=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:s,addEventClick:t,intersect:l,navigate:u}=x(),{from:i}=s();let r,c,g,M;return a(()=>{const{cx:f,cy:w,s:m}=h(),y=Math.round(m*.25);r={c:e,x:f,y:w,r:y,p:i==="opening"&&!r},c=W(r),g=oe({text:"Yola",c:"#f1f1f1",x:f,y:w-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),M=oe({text:"PopiT",c:"#ffeb3b",x:f,y:w-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),o(()=>{r.p&&n(r,!1,!0),r.p=!1}),t((f,w)=>{l({x:f,y:w},r)&&(n(r),r.p=!0,o(()=>{u("opening")},100))}),{render:()=>{c(),r.p||(g(),M())},point:()=>({x:r.x,y:r.y,r:r.r})}},Me=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:a,useRandChain:h,useMeasure:o,rand:s,useTimer:t,setBackground:l,useScreenMeta:u}=x(),{from:i}=u();l(e);const r=s(0,999);let c=[],g=[];a(()=>{const f=h(r),{s:w}=o();c=[];const m=Math.round(w*.04),y=Math.round(innerWidth/m/2)-2,v=Math.round((innerWidth-2*m*y)/(y+1)),P=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*P)/(P+1));for(let S=0;S<P;S++)for(let C=0;C<y;C++)f(f(n))<1&&c.push({x:v+m+C*m*2+v*C,y:E+m+S*m*2+E*S,r:m,c:e,p:i==="opening"?!0:f(1)>0});g=c.map(S=>W(S))});const M=()=>{t(()=>{const f=s(c.length-1);c[f]&&(c[f].p=!c[f].p),M()},750)};return i==="opening"?t(()=>{c.forEach(f=>f.p=s(1)>0),M()}):M(),{render:()=>{g.forEach(f=>f())},setIntersections:f=>{c=c.filter(({x:w,y:m,r:y})=>f(w,m,y)),g=c.map(w=>W(w))}}},ye=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:h,setBackground:o,rand:s}=x(),{getDifficultyRad:t}=D();return n=[...n.splice(s(n.length-1),n.length),...n],e||a(()=>{const{s:u}=h(),i=t(),r=Math.round(u*i),c=Math.round(innerWidth/r/2)-1,g=(innerWidth-2*r*c)/(c+1),M=Math.round(innerHeight/r/2)-1,d=(innerHeight-2*r*M)/(M+1),p=innerWidth>=innerHeight,f=p?c:M,w=p?g:d,m=p?innerWidth:innerHeight;let y=0;const v=[];for(let E=0;E<f;E++)n[y]||(y=0),v.push(`${n[y]} ${(w+r+E*r*2+w*E)/m*100}%`),y++;o(`linear-gradient(${p?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ve=({palette:e,retry:n,popEffect:a=()=>{}})=>{const{addEventResize:h,useMeasure:o,rand:s,useTimer:t,useScreenMeta:l,navigate:u,addEventClick:i,intersect:r}=x(),{from:c}=l(),{getDifficultyRad:g}=D(),M=[];let d=[],p,f,w,m={x:0,y:0,r:0};const y=P=>Array.isArray(e)?e[P]:e;return h(()=>{const{s:P}=o();M.splice(0);const E=g(),S=Math.round(P*E),C=Math.round(innerWidth/S/2)-1,A=(innerWidth-2*S*C)/(C+1),z=Math.round(innerHeight/S/2)-1,X=(innerHeight-2*S*z)/(z+1),O=innerWidth>=innerHeight;let b=0;for(let I=0;I<z;I++){for(let T=0;T<C;T++){y(b)||(b=0);const R={x:A+S+T*S*2+A*T,y:X+S+I*S*2+X*I,r:S,c:y(b),p:!0};I===0&&T===C-1?(m={x:R.x,y:R.y,r:R.r,c:R.c,p:(c==="main"||c==="gameover"||c==="gamescore")&&!m.r},p=W(m),f=me(m)):M.push(R),b+=O?1:0}b=O?0:b+1}n&&(w=M[s(M.length-1)],t(()=>{a(w,!1,!0),w.p=!1})),d=M.map(I=>W(I))}),t(()=>{m.p&&a(m,!1,!0),m.p=!1}),n&&i((P,E)=>{r({x:P,y:E},w)&&(a(w),w.p=!0,t(()=>{u("game")},100))}),i((P,E)=>{r({x:P,y:E},m)&&(a(m),m.p=!0,t(()=>{u("main")},100))}),{render:()=>{d.forEach(P=>P()),p(),m!=null&&m.p||f()},popits:M,pausePpt:m}},L=100,q="#222",je=e=>{const n=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},ne={},qe=e=>{const{ctx:n,createImg:a,useRandChain:h,useTimer:o}=x();let s,t=!1,l=[];const u=e.r*2/L/2;ne[e.imgSrc]?s=ne[e.imgSrc]:(s=ne[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},s.img.src=e.imgSrc);const i=()=>o(()=>{t=!t,i()},250),r=(p,f=n)=>{const{x:w,y:m,c:y,r:v}=p;f.fillStyle=y||"red",f.beginPath(),f.arc(w+v,m+v,v,0,Math.PI*2),f.closePath(),f.fill()},c=(p=n,f=0,w=0)=>{p.fillStyle=q,p.beginPath(),p.roundRect(f,w,2*e.r,2*e.r,u),p.closePath(),p.fill()},g=()=>{const p=[];for(let v=0;v<L;v++)for(let P=0;P<L;P++){const E={x:P*u*2,y:v*u*2,r:u,c:q};p.push(E)}let f=e.score-e.winScore;const w=[...p],m=h(e.seed),y=(v=!1)=>{const P=m(w.length-1),E=w[P],S=p.indexOf(E);E.c=v?q:s.cols[S],w.splice(P,1),v&&l.push({...E,c:s.cols[S]})};for(let v=f;v>0;v--)y();if(e.winScore){l=[];for(let v=e.winScore;v>0;v--)y(!0);i()}return p},M=()=>{const p=g();s.drawImg=a((f=n)=>{c(f),p.filter(w=>w.c!==q).forEach(w=>r(w,f))},2*e.r)},d=async()=>{var w;const p=document.createElement("canvas");p.width=L,p.height=L;const f=p.getContext("2d",{willReadFrequently:!0});f==null||f.drawImage(s.img,0,0);for(let m=0;m<L;m++){const y=[];for(let v=0;v<L;v++){const P=(w=f==null?void 0:f.getImageData(v,m,1,1))==null?void 0:w.data;y.push(je(P))}s.cols.push(...y)}s.isFilled=!0,M()};return s.isFilled?(s.r!==e.r||s.score!==e.score)&&M():s.img.onload=d,(p=n)=>{const{x:f,y:w,r:m,winScore:y}=e;if(s.drawImg?p.drawImage(s.drawImg,f-m,w-m,2*m,2*m):c(p,f-m,w-m),t&&y&&s.drawImg)for(const v of l)p.fillStyle=v.c||"red",p.beginPath(),p.arc(f-m+v.x+v.r,w-m+v.y+v.r,v.r,0,Math.PI*2),p.closePath(),p.fill()}},fe=1e4,we=(e=0,n=!1)=>{const{addEventResize:a,useMeasure:h,translate:o}=x(),{getScore:s}=D(),t=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=s();let u,i=0,r=0,c=!1,g=!1;const M=y=>Math.min(Math.floor(y/fe),t.length-1);let d=M(l-e);if(e){const y=M(l);c=y!==d,g=y>t.length-1}return a(()=>{const{cx:y,cy:v,s:P,isL:E}=h();u=[],i=(P-2*P*.055*1.6)/2,r=P*.05;let S=n?d:0;for(S;S<(n?d+1:t.length);S++){const C=t[S],A=E?y:y+S*i*2+S*r,z=E?v+S*i*2+S*r:v;u.push(qe({x:A,y:z,r:i,score:Math.min(l-S*fe,1e4),imgSrc:C,winScore:e,seed:S}))}}),{up:()=>{d=d+1<t.length?d+1:t.length-1},down:()=>{d=d-1<0?0:d-1},render:()=>{const{isL:y}=h(),v=y?0:-(d*i*2+d*r),P=y?-(d*i*2+d*r):0;o(()=>{u==null||u.forEach(E=>E())},v,P)},rect:()=>{const{cx:y,cy:v}=h(),P=innerWidth>innerHeight;return{x:P?y-i:0,y:P?0:v-i,w:P?2*i:innerWidth,h:P?innerHeight:2*i}},isJump:c,isCompleted:g}},Ue=({popits:e,pausePpt:n,popEffect:a=()=>{},splashEffect:h=()=>{}})=>{const{useTimer:o,rand:s,addEventClick:t,addEventMove:l,intersect:u,navigate:i,addEventResize:r}=x(),{getScore:c,addScore:g,getDifficultyTic:M}=D();let d=[],p,f,w=!1,m=0,y=0,v=0;const P=c(),E=M(),S=b=>{const I=e.filter(F=>d.indexOf(F)===-1&&F!==b),T=s(I.length-1),R=I[T];R&&(a(R,!1,!0),R.p=!1,d.push(I[T]))},C=()=>{f=o(()=>{if(v=Math.max(v-10,50),e.length===d.length){w=!0,f.stop(),o(()=>{i("gameover")});return}S(),C()},v)},A=b=>{d=[];const I=e.length;let T=s(Math.round(I*.3),Math.round(I*.6));const R=[...e];if(b){const F=R.indexOf(b);R.splice(F,1)}for(let F=T;F>0;F--){const se=s(R.length-1),K=R[se];K.p=!1,a(K,!1,!0),d.push(K),R.splice(se,1)}v=E,p==null||p.stop(),f==null||f.stop(),P&&(p=o(()=>{h("SLOWLY"),C()},d.length*E)),m=m>0?m:s(3,5)},z=()=>1,X=b=>{a(b),v=Math.min(v+5,E),y++,b.p=!0;const I=d.indexOf(b);if(d.splice(I,1),d.length<=0)if(m--,m>0)o(()=>{h("Round"),A(b)},100);else{p==null||p.stop(),f==null||f.stop();const T=z();g(y*T),o(()=>{i("gamescore",{winScore:y*T})},100)}},O=(b,I,T=!1)=>{if(!w){for(const R of d)if(u({x:b,y:I},R)){X(R);return}if(!u({x:b,y:I},n)&&!T){for(const R of e)if(u({x:b,y:I},R)){a(R,!0),h("Popenalty"),S(R);return}h("Popenalty"),S()}}};t(O),l((b,I)=>O(b,I,!0)),r(()=>{o(()=>{h("Pop it"),A()})})},Ve=()=>{const{addEventResize:e,rand:n,useScreenMeta:a}=x(),{from:h}=a(),{popEffect:o,render:s}=G(),t=["#00dcfe","#5bb2f7","#92E6E6"],l=h==="opening"?t[0]:t[n(t.length-1)],{render:u,setIntersections:i}=Me({color:l}),{render:r,point:c}=Xe({popEffect:o}),{render:g,point:M}=ge({getX:(m,y,v)=>m+Math.round(y*.25)+2*v,getY:(m,y,v)=>m+Math.round(y*.25)+0*v,popEffect:o}),{render:d,point:p}=Le({popEffect:o}),{render:f,point:w}=Ge({popEffect:o});return e(()=>{const m=p(),y=c(),v=M(),P=w();i((E,S,C)=>!H({x:E,y:S,r:C},m)&&!H({x:E,y:S,r:C},y)&&!H({x:E,y:S,r:C},v)&&!H({x:E,y:S,r:C},P))}),()=>{s(),u(),r(),g(),d(),f()}},Ke=()=>{const{useMeasure:e,addEventResize:n}=x(),a=ye(),{popEffect:h,render:o}=G(),{popits:s,render:t,pausePpt:l}=ve({palette:a,popEffect:h});return Ue({popits:s,popEffect:h,pausePpt:l}),n(()=>{(s[0].y-s[0].r)/e().m}),()=>{o(),t()}},Je=()=>{const e="#ff6347",{popEffect:n,render:a}=G(),{setBackground:h}=x(),{minusDifficulty:o}=D(),{render:s}=ve({palette:e,retry:!0,popEffect:n}),{playFail:t}=Y();return h(e),o(),t(),()=>{a(),s()}},Qe=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:a,resetDifficulty:h}=D(),{data:o}=n(),{popEffect:s,render:t}=G(),{splashEffect:l,render:u}=Fe({infinity:!0});ye();const{playWin:i}=Y(),{render:r,isJump:c}=we(o==null?void 0:o.winScore,!0),{render:g}=ge({getX:(d,p,f)=>innerWidth>innerHeight?Math.min(d+(p-2*p*.055*1.6)/2+4*f+Math.round(p*.1),innerWidth-2*f-Math.round(p*.1)):d+(p-2*p*.055*1.6)/8+0*Math.round(p*.1)+2*f,getY:(d,p,f)=>innerWidth>innerHeight?d+(p-2*p*.055*1.6)/2-1*f-Math.round(p*.1):Math.min(d+(p-2*p*.055*1.6)/2+4*f+Math.round(p*.1),innerHeight-2*f-Math.round(p*.1)),popEffect:s}),{render:M}=Ne({getX:(d,p,f)=>innerWidth>innerHeight?Math.max(d-(p-2*p*.055*1.6)/2-4*f-Math.round(p*.1),2*f+Math.round(p*.1)):d+(p-2*p*.055*1.6)/8-2*Math.round(p*.1)-2*f,getY:(d,p,f)=>innerWidth>innerHeight?d-(p-2*p*.055*1.6)/2+0*f+Math.round(p*.1):Math.min(d+(p-2*p*.055*1.6)/2+4*f+Math.round(p*.1),innerHeight-2*f-Math.round(p*.1)),popEffect:s});return c?h():a(),innerHeight>innerWidth&&l(c?"Completed":"You win"),i(),()=>{t(),innerHeight>innerWidth?e(r,0,-Math.round(innerHeight*.05)):r(),g(),M(),u()}},Ze=()=>{const{addEventResize:e,rand:n}=x(),{popEffect:a,render:h}=G(),o=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],s=o[n(o.length-1)],{render:t,setIntersections:l}=Me({color:s,frequency:10}),{render:u,rect:i,up:r,down:c}=we(),{render:g,point:M}=_e({popEffect:a}),{render:d,point:p}=Be({onClick:r,popEffect:a}),{render:f,point:w}=Oe({onClick:c,popEffect:a});return e(()=>{const m=M(),y=i(),v=p(),P=w();l((E,S,C)=>!H({x:E,y:S,r:C},m)&&!We({x:E,y:S,r:C},y)&&!H({x:E,y:S,r:C},v)&&!H({x:E,y:S,r:C},P))}),()=>{h(),t(),u(),g(),d(),f()}},et=()=>{const{ctx:e,addEventResize:n,loop:a}=x(),h={x:40,y:100};let o=1,s=1,t;const l=()=>{t=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return l(),n(l),a(()=>{h.x+=2*o,h.y+=3*s,o*=-1,s*=-1}),()=>{e.save();var u=Math.random()*2,i=Math.random()*3;e.translate(u,i),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,t,t),e.fill(),e.restore()}},tt=[{name:"opening",ctor:Ae},{name:"main",ctor:Ve},{name:"game",ctor:Ke},{name:"gameover",ctor:Je},{name:"gamescore",ctor:Qe},{name:"score",ctor:Ze},{name:"devs",ctor:et}],nt=["/sounds/pop7.mp3","/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3","/sounds/fail.mp3","/sounds/win.mp3"];De(tt,nt);document.title="Your's last Pop it";
