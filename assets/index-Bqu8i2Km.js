(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&f(e)}).observe(document,{childList:!0,subtree:!0});function u(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(s){if(s.ep)return;s.ep=!0;const a=u(s);fetch(s.href,a)}})();const Pe=()=>{const n=document.createElement("canvas"),t=n.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const u=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},f=i=>{t.clearRect(0,0,innerWidth,innerHeight),i()};return u(),document.body.appendChild(n),{ctx:t,render:f,resize:u,rotate:(i,l,r,m)=>{t.save(),t.translate(l,r),t.rotate(Math.PI*m),t.translate(-l,-r),i(),t.restore()},translate:(i,l,r)=>{t.save(),t.translate(l,r),i(),t.restore()},shade:(i,l)=>{i=i.substring(1);const r=parseInt(i,16),m=Math.round(2.55*l),p=(r>>16)+m,o=(r>>8&255)+m,w=(r&255)+m;return"#"+(16777216+(p<255?p<1?0:p:255)*65536+(o<255?o<1?0:o:255)*256+(w<255?w<1?0:w:255)).toString(16).slice(1)},setBackground:(i,l)=>{var r;document.body.style.background=i,document.body.style.backgroundColor=l||i,(r=document.querySelector('meta[name="theme-color"]'))==null||r.setAttribute("content",l||i)},createImg:(i,l,r=l)=>{const m=document.createElement("canvas"),p=m.getContext("2d");if(!p)throw new Error("CanvasRenderingContext2D is null");return m.width=l*devicePixelRatio,m.height=r*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio),i(p),m}}},Se=n=>{let t="",u="",f;const s=d=>n.find(c=>c.name===d)||n[0],e={render:()=>{},navigate:(d,c)=>{const i=s(d);u=t||"",t=(i==null?void 0:i.name)||"",f=c,e.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:u,data:f})};return e},Ee=()=>{const n=requestAnimationFrame||(e=>setTimeout(e,16.666666666666668)),t=[],u={};return{loop:(e,d)=>{if(Object.entries(u).find(([i,l])=>l===e)||d&&u[d])throw new Error(`Loop${d?" "+d:""} already specified`);d&&t.push(d),d=d||new Date().valueOf().toString(),u[d]=e;const c=()=>{e(),u[d]&&n(c)};c()},stop:e=>{if(typeof e=="string")delete u[e];else{const d=Object.entries(u).find(([c,i])=>i===e);d&&delete u[d[0]]}},stopAll:()=>{for(const e in u)t.indexOf(e)===-1&&delete u[e]}}};let q=[];const Ce=()=>{for(const n of q)clearTimeout(n);q=[]},be=(n,t=400)=>{let u=new Date,f=t,s=setTimeout(n,f);return q.push(s),{pause:()=>{clearTimeout(s),f-=new Date-u},resume:()=>{u=new Date,clearTimeout(s),s=setTimeout(n,f),q.push(s)},stop:()=>{clearTimeout(s)}}},ie=2147483646,J=2147483647,Ie=16807,Re=(n=Math.floor(Math.random()*J))=>{n=n%J,n<=0&&(n+=ie);const t=()=>(n=n*Ie%J,n),u=()=>(t()-1)/ie;return(s,a)=>(a===void 0&&(a=s,s=0),Math.floor(u()*(a-s+1))+s)},xe=(n,t)=>(t===void 0&&(t=n,n=0),Math.floor(Math.random()*(t-n+1))+n),Te=()=>{const n=[],t=[],u=[];return{addEventResize:l=>{l(),n.push(l)},onResizeEvents:()=>n.forEach(l=>l()),addEventClick:l=>t.push(l),onClickEvents:(l,r)=>t.forEach(m=>m(l,r)),addEventMove:l=>u.push(l),onMoveEvents:(l,r)=>u.forEach(m=>m(l,r)),removeAllEvents:()=>{n.splice(0),t.splice(0),u.splice(0)}}},D=(n,t)=>{const u=Math.pow(Math.abs(n.x-t.x),2),f=Math.pow(Math.abs(n.y-t.y),2),s=n.r||0,a=t.r||0,e=Math.pow(s+a,2);return u+f<=e},We=(n,t)=>{const u=n.r||0,f=t.w||0,s=t.h||0;return Math.abs(t.x+f/2-n.x)<=f/2+u&&Math.abs(t.y+s/2-n.y)<=s/2+u},ke=(n,t)=>D(n,t),De=n=>{const t=new AudioContext,u={},f=a=>{fetch(a).then(e=>e.arrayBuffer()).then(e=>(t==null?void 0:t.decodeAudioData(e))||null).then(e=>{e&&(u[a]=e)})};if(n.length)for(const a of n)f(a);return(a,e)=>{setTimeout(async()=>{const d=t.createBufferSource();u[a]||(u[a]=await fetch(a).then(c=>c.arrayBuffer()).then(c=>(t==null?void 0:t.decodeAudioData(c))||null)),d.buffer=u[a],d.connect(t.destination),e&&(d.playbackRate.value=e),d.start()},0)}};let K;const He=(n,t)=>{if(K)throw new Error("Webcore already specified");const u=Pe(),f=Se(n),{loop:s,stop:a,stopAll:e}=Ee(),{addEventResize:d,onResizeEvents:c,addEventClick:i,onClickEvents:l,addEventMove:r,onMoveEvents:m,removeAllEvents:p}=Te();let o=innerWidth/2,w=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight;const y=()=>({cx:o,cy:w,s:h,m:v,isL:g}),M=De(t);K={font:"Tijuf",ctx:u.ctx,shade:u.shade,rotate:u.rotate,translate:u.translate,setBackground:u.setBackground,createImg:u.createImg,useMeasure:y,useScreenMeta:f.useScreenMeta,navigate:(P,E)=>{if(!n.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);e(),Ce(),p(),new Promise(()=>f.navigate(P,E))},loop:s,loopStop:a,useTimer:be,rand:xe,useRandChain:Re,intersect:ke,addEventResize:d,addEventClick:i,addEventMove:r,playSound:M},s(()=>u.render(f.render),"draw"),window.onresize=()=>{o=innerWidth/2,w=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight,u.resize(),c()},document.onpointerdown=P=>{l(P.clientX,P.clientY)},document.onmousemove=P=>{m(P.clientX,P.clientY)},f.navigate()},C=()=>{if(!K)throw new Error("Webcore not specified");return{...K}},Q={},W=n=>{const{shade:t,ctx:u,createImg:f}=C(),s=()=>{const{r:e,c:d="#ffffff",p:c}=n,i=u.createRadialGradient(e,e,e,e,e,e/5);return i.addColorStop(0,t(d,0)),i.addColorStop(.01,t(d,0)),i.addColorStop(.075,t(d,9)),i.addColorStop(.15,t(d,0)),i.addColorStop(.15,t(d,-15)),i.addColorStop(.18,t(d,-5)),i.addColorStop(.22,t(d,-15)),c?(i.addColorStop(.24,t(d,-10)),i.addColorStop(.3,t(d,-8)),i.addColorStop(.34,t(d,-12)),i.addColorStop(.6,t(d,-8)),i.addColorStop(1,t(d,-6))):(i.addColorStop(.24,t(d,-12)),i.addColorStop(.26,t(d,-8)),i.addColorStop(.3,t(d,-2)),i.addColorStop(.34,t(d,0)),i.addColorStop(.5,t(d,5)),i.addColorStop(1,t(d,18))),i},a=()=>{const{r:e,c:d="#ffffff",p:c}=n,i=`${d}_${c?"push":"pop"}_${e}`;if(Q[i])return Q[i];const l=f((r=u)=>{const m=s();r.fillStyle=m,r.beginPath(),r.arc(e,e,e,0,2*Math.PI),r.closePath(),r.fill()},2*e);return Q[i]=l,l};return(e=u)=>{const{x:d,y:c,r:i}=n,l=a();e.drawImage(l,d-i,c-i,2*i,2*i)}},Z={},Y=n=>{const{ctx:t}=C();let u;return Z[n.src]?u=Z[n.src]:(u=new Image,u.src=n.src,Z[n.src]=u),(f=t)=>{const{w:s,h:a=s,x:e=0,y:d=0}=n;u.complete&&f.drawImage(u,e,d,s,a)}},ce=n=>{const{font:t,ctx:u}=C(),f=n.text,s=n.text.length,a=2*Math.PI/s/4;return(e=u)=>{const{x:d,y:c,r:i,s:l=0,fs:r}=n,m=r||Math.round(i/4);e.textAlign="center",e.fillStyle="#f9f9f9",e.font=`${m}px ${t}`,e.save(),e.translate(d,c),e.rotate(l);for(let p=0;p<s;p++)e.save(),e.rotate(p*a),e.fillText(f[p],0,-i),e.restore();e.restore()}},Ae=()=>{var g,y;const{ctx:n,loop:t,rotate:u,navigate:f,useMeasure:s,addEventClick:a,addEventResize:e,setBackground:d}=C();d("#040404");let c=!1,i,l,r,m,p,o=-.2,w=0;e(()=>{const{cx:M,cy:P,s:E}=s(),S=Math.round(E*.25);i={c:"#ff6347",x:M,y:P,r:S,p:!1},l=W(i),r=Y({x:M-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),m=ce({text:"nezabotin",x:M,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),p=ce({text:"production",x:M,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const h=()=>{o+=.01,w=o>=1?1:o,o>=1.8&&(i.p=!0),o>=2.2&&(i.c="#f86a9a"),o>=2.6&&f("main")};a(()=>{[1.4,1.8,2.2,2.6].some(M=>{if(o<M)return o=M,!0})});const v=()=>{t(h),c=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:M,cy:P}=s();n.globalAlpha=c?1:0,l(),o<1.8&&r(),o<1.4&&u(()=>{m(),p()},M,P,w),n.globalAlpha=1}},ae="ylp",de="score",ee="difficulty",ue="sound",ne=[.14,.11,.09,.075],le=750,ze=350,pe=5,_=[];for(let n=0;n*pe<=le-ze;n++)_.push(le-n*pe);let N=null;const H=()=>{const n=o=>localStorage.getItem(`${ae}_${o}`),t=(o,w)=>localStorage.setItem(`${ae}_${o}`,w.toString()),u=()=>+(n(de)||0),f=o=>t(de,o),s=o=>{const w=u();f(w+o)},a=()=>+(n(ee)||0),e=o=>{const w=a();t(ee,Math.min(Math.max(w+o,0),ne.length*_.length-1))};return{getScore:u,addScore:s,plusDifficulty:()=>e(1),minusDifficulty:()=>e(-5),getDifficultyRad:()=>{const o=a(),w=Math.floor(o/_.length);return ne[w]||ne[1]},getDifficultyTic:()=>{const o=a(),w=Math.floor(o/_.length),h=o-w*_.length;return _[h]||_[0]},resetDifficulty:()=>t(ee,0),getSound:()=>{if(N!==null)return N;const o=n(ue);return!o||o==="true"?(N=!0,!0):(N=!1,!1)},setSound:o=>{N=o,t(ue,o)}}};let oe=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3","/sounds/new/pop26.mp3","/sounds/new/pop27.mp3","/sounds/new/pop30.mp3","/sounds/new/pop31.mp3"];oe=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav"];let k=[...oe];const G=()=>{const{rand:n,playSound:t}=C(),{getSound:u}=H();return{playPop:()=>{if(!u())return;const d=n(k.length-1),c=k[d];k.splice(d,1),k.length||(k=[...oe]);const i=n(k.length-1);k=[...k.splice(i,k.length),...k],t(c,1.5)},playMissed:()=>{if(!u())return;t("/sounds/new/wrong.mp3")},playFail:()=>{if(!u())return;t("/sounds/fail-fast.mp3")},playWin:()=>{if(!u())return;t("/sounds/win.mp3")}}},B=100/2;let fe=0;const O=()=>{const{loop:n,ctx:t,shade:u,rand:f}=C(),{playPop:s,playMissed:a}=G(),e={},d=()=>{for(const l in e){const r=e[l];if(!r)return;const m=r.popit;if(!r.shake)r.tic+=B/5,r.tic>=B&&(r.dir=-1),r.withoutRad||(m.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:B-r.tic)));else{r.tic+=B/5;const p=f(1,2),o=f(1,2);m.x=r.origX+Math.random()*p*(Math.random()>.5?1:-1),m.y=r.origY+Math.random()*o*(Math.random()>.5?1:-1)}r.tic>=2*B&&(delete e[l],m.r=r.origR,m.x=r.origX,m.y=r.origY)}},c=(l,r=!1,m=!1)=>{var h;r?a():s(),(h=navigator==null?void 0:navigator.vibrate)==null||h.call(navigator,30),fe++;const p=`${new Date().valueOf().toString()}_${fe}`,o=1,w=1;e[p]={withoutRad:r,tic:o,dir:w,popit:l,origR:l.r,origX:l.x,origY:l.y,shake:m}},i=()=>{t.globalAlpha=.25;for(const l in e){const r=e[l];if(r.shake)continue;const m=r.popit;t.fillStyle=u(m.c||"red",-12),t.beginPath(),t.arc(m.x,m.y,m.r+r.origR*.001*(r.tic+(r.dir>0?0:B-r.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return n(d),{popEffect:c,render:i}},U=n=>{const{font:t,ctx:u}=C();return(f=u)=>{const{text:s,x:a,c:e,y:d,fs:c,a:i="center",mw:l,f:r}=n;f.textAlign=i,f.fillStyle=e,f.font=`${c}px ${r||t}`,f.fillText(s,a,d,l)}},Le=({color:n="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,useScreenMeta:a,navigate:e,addEventClick:d,intersect:c}=C(),{from:i}=a();let l,r,m;return u(()=>{const{cx:w,cy:h,s:v,m:g}=f(),y=Math.round(v*.25);l={c:n,r:Math.round(v*.08),x:w-y-1*g,y:h-y+1*g,p:(i==="score"||i==="opening"||i==="devs")&&!l},r=W(l),m=Y({x:Number(l.x)-l.r+Math.round(l.r*.5),y:Number(l.y)-l.r+Math.round(l.r*.5),w:l.r*2-Math.round(l.r*1),src:"/media/star.svg"})}),s(()=>{l.p&&t(l,!1,!0),l.p=!1}),d((w,h)=>{c({x:w,y:h},l)&&(t(l),l.p=!0,s(()=>{e("score")},100))}),{render:()=>{r(),l.p||m()},point:()=>({x:l.x,y:l.y,r:l.r})}},me=({color:n="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,navigate:a,addEventClick:e,intersect:d}=C();let c,i,l;return u(()=>{const{s:p}=f(),o=Math.round(p*.08);c={c:n,r:o,x:Math.round(1.6*o),y:Math.round(1.6*o),p:!c},i=W(c),l=Y({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),s(()=>{c.p&&t(c,!1,!0),c.p=!1}),e((p,o)=>{d({x:p,y:o},c)&&(t(c),c.p=!0,s(()=>{a("main")},100))}),{render:()=>{i(),c.p||l()},point:()=>({x:c.x,y:c.y,r:c.r})}},Fe=({onClick:n})=>{const{addEventResize:t,useMeasure:u,useTimer:f,addEventClick:s,intersect:a,rotate:e}=C(),{playPop:d}=G();let c,i,l;return t(()=>{const{s:p}=u(),o=Math.round(p*.08);c={c:"#ff6347",r:o,x:Math.round(innerWidth-1.6*o),y:Math.round(innerHeight-1.6*o),p:!1},i=W(c),l=Y({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),s((p,o)=>{a({x:p,y:o},c)&&(d(),c.p=!0,n(),f(()=>{c.p=!1},100))}),{render:()=>{i(),c.p||e(()=>{l()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},_e=({onClick:n})=>{const{addEventResize:t,useMeasure:u,useTimer:f,addEventClick:s,intersect:a,rotate:e}=C(),{playPop:d}=G();let c,i,l;return t(()=>{const{s:p}=u(),o=Math.round(p*.08),w=innerWidth<innerHeight?Math.round(innerWidth-1.6*o-2*o-.3*o):Math.round(innerWidth-1.6*o),h=innerWidth<innerHeight?Math.round(innerHeight-1.6*o):Math.round(innerHeight-1.6*o-2*o-.3*o);c={c:"#ff6347",r:o,x:w,y:h,p:!1},i=W(c),l=Y({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),s((p,o)=>{a({x:p,y:o},c)&&(d(),c.p=!0,n(),f(()=>{c.p=!1},100))}),{render:()=>{i(),c.p||e(()=>{l()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Be=n=>{const{ctx:t,shade:u}=C(),f=Math.round(n.r/2.2),s=Math.round(.15*n.r),a=u(n.c||"blue",-3);return(e=t)=>{const{r:d,x:c=d,y:i=d}=n;e.lineCap="round",e.fillStyle=a,e.strokeStyle=a,e.lineWidth=f,e.beginPath(),e.moveTo(c+s,i),e.lineTo(c-s/2,i-s),e.lineTo(c-s/2,i+s),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c+s,i),e.lineTo(c-s/2,i-s),e.moveTo(c-s/2,i-s),e.lineTo(c-s/2,i+s),e.moveTo(c-s/2,i+s),e.lineTo(c+s,i),e.stroke()}},ge=({getX:n,getY:t,color:u="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:s,useMeasure:a,useTimer:e,useScreenMeta:d,navigate:c,addEventClick:i,intersect:l}=C(),{from:r}=d();let m,p,o;return s(()=>{const{cx:v,cy:g,s:y,m:M}=a();m={c:u,r:Math.round(y*.1),x:n(v,y,M),y:t(g,y,M),p:(r==="gamescore"||r==="game"||r==="gameover"||r==="opening"||r==="devs")&&!m},p=W(m),o=Be(m)}),e(()=>{m.p&&f(m,!1,!0),m.p=!1}),i((v,g)=>{l({x:v,y:g},m)&&(f(m),m.p=!0,e(()=>{c("game")},100))}),{render:()=>{p(),m.p||o()},point:()=>({x:m.x,y:m.y,r:m.r})}},we=n=>{const{ctx:t,shade:u}=C(),f=Math.round(n.r/4),s=Math.round(.12*n.r);return(a=t)=>{const{r:e,x:d=e,y:c=e}=n,i=u(n.c||"blue",-3);a.lineCap="round",a.strokeStyle=i,a.lineWidth=f,a.beginPath(),a.moveTo(d-1.5*s,c-2*s),a.lineTo(d-1.5*s,c+2*s),a.stroke(),a.beginPath(),a.moveTo(d+1.5*s,c-2*s),a.lineTo(d+1.5*s,c+2*s),a.stroke()}},Oe=({getX:n,getY:t,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:s,useTimer:a,useScreenMeta:e,navigate:d,addEventClick:c,intersect:i}=C(),{from:l}=e();let r,m,p;return f(()=>{const{cx:h,cy:v,s:g,m:y}=s();r={c:"#fd8059",r:Math.round(g*.08),x:n(h,g,y),y:t(v,g,y),p:(l==="game"||l==="opening")&&!r},m=W(r),p=we(r)}),a(()=>{r.p&&u(r,!1,!0),r.p=!1},500),c((h,v)=>{i({x:h,y:v},r)&&(u(r),r.p=!0,a(()=>{d("main")},100))}),{render:()=>{m(),r.p||p()},point:()=>({x:r.x,y:r.y,r:r.r})}},$e=n=>{const{ctx:t,shade:u}=C(),f=Math.round(n.r/4),s=Math.round(.2*n.r),a=u(n.c||"blue",-5);return(e=t)=>{const{r:d,x:c=d,y:i=d}=n;e.lineCap="round",e.fillStyle=a,e.strokeStyle=a,e.lineWidth=f,e.beginPath(),e.ellipse(c-s,i+s,f,s,10*Math.PI/180,0,2*Math.PI),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c-s/2,i+s),e.lineTo(c,i-s),e.lineTo(c+s,i-s),e.stroke(),n.on||(e.lineWidth=Math.round(f/3),e.beginPath(),e.moveTo(c-d/4,i-d/4),e.lineTo(c+d/4,i+d/4),e.stroke())}},Ne=({color:n="#f9f774",popEffect:t=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,useScreenMeta:a,addEventClick:e,intersect:d}=C(),{from:c}=a(),{getSound:i,setSound:l}=H();let r,m,p;return u(()=>{const{cx:h,cy:v,s:g,m:y}=f(),M=Math.round(g*.25),P=Math.round(g*.065),E=i();r={c:n,r:P,x:h-M-P-y,y:v-M+3*P,p:(c==="opening"||c==="devs")&&!r,on:E},m=W(r),p=$e(r)}),s(()=>{r.p&&t(r,!1,!0),r.p=!1}),e((h,v)=>{if(d({x:h,y:v},r)){let g=i();g=!g,l(g),r.p=!0,r.on=g,t(r),s(()=>{r.p=!1},100)}}),{render:()=>{m(),r.p||p()},point:()=>({x:r.x,y:r.y,r:r.r})}},Ye=({color:n="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:s,useScreenMeta:a}=C(),{from:e}=a();let d,c,i,l;return u(()=>{const{cx:p,cy:o,s:w}=f(),h=Math.round(w*.25);d={c:n,x:p,y:o,r:h,p:(e==="opening"||e==="devs")&&!d},c=W(d),i=U({text:"Yola",c:"#f1f1f1",x:p,y:o-h+Math.round(h*.9),fs:Math.round(h/2.6),mw:h*2}),l=U({text:"PopiT",c:"#ffeb3b",x:p,y:o-h+Math.round(h*1.3),fs:Math.round(h/2.3),mw:h*2})}),s(()=>{d.p&&t(d,!1,!0),d.p=!1}),{render:()=>{c(),d.p||(i(),l())},point:()=>({x:d.x,y:d.y,r:d.r})}},Me=({color:n="#00dcfe",frequency:t=20})=>{const{addEventResize:u,useRandChain:f,useMeasure:s,rand:a,useTimer:e,setBackground:d,useScreenMeta:c}=C(),{from:i}=c();d(n);const l=a(0,999);let r=[],m=[];u(()=>{const h=f(l),{s:v}=s();r=[];const g=Math.round(v*.04),y=Math.round(innerWidth/g/2)-2,M=Math.round((innerWidth-2*g*y)/(y+1)),P=Math.round(innerHeight/g/2)-2,E=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<y;b++)h(h(t))<1&&r.push({x:M+g+b*g*2+M*b,y:E+g+S*g*2+E*S,r:g,c:n,p:i==="opening"?!0:h(1)>0});m=r.map(S=>W(S))});const p=()=>{e(()=>{const h=a(r.length-1);r[h]&&(r[h].p=!r[h].p),p()},750)};return i==="opening"?e(()=>{r.forEach(h=>h.p=a(1)>0),p()}):p(),{render:()=>{m.forEach(h=>h())},setIntersections:h=>{r=r.filter(({x:v,y:g,r:y})=>h(v,g,y)),m=r.map(v=>W(v))}}},se=(n=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:u,useMeasure:f,setBackground:s,rand:a}=C(),{getDifficultyRad:e}=H();return t=[...t.splice(a(t.length-1),t.length),...t],n||u(()=>{const{s:c}=f(),i=e(),l=Math.round(c*i),r=Math.round(innerWidth/l/2)-1,m=(innerWidth-2*l*r)/(r+1),p=Math.round(innerHeight/l/2)-1,o=(innerHeight-2*l*p)/(p+1),w=innerWidth>=innerHeight,h=w?r:p,v=w?m:o,g=w?innerWidth:innerHeight;let y=0;const M=[];for(let E=0;E<h;E++)t[y]||(y=0),M.push(`${t[y]} ${(v+l+E*l*2+v*E)/g*100}%`),y++;s(`linear-gradient(${w?"to right":"to bottom"}, ${M.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},ve=({palette:n,retry:t,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:s,rand:a,useTimer:e,useScreenMeta:d,navigate:c,addEventClick:i,intersect:l}=C(),{from:r}=d(),{getDifficultyRad:m}=H(),p=[];let o=[],w,h,v,g={x:0,y:0,r:0};const y=P=>Array.isArray(n)?n[P]:n;return f(()=>{const{s:P}=s();p.splice(0);const E=m(),S=Math.round(P*E),b=Math.round(innerWidth/S/2)-1,A=(innerWidth-2*S*b)/(b+1),z=Math.round(innerHeight/S/2)-1,X=(innerHeight-2*S*z)/(z+1),$=innerWidth>=innerHeight;let I=0;for(let R=0;R<z;R++){for(let T=0;T<b;T++){y(I)||(I=0);const x={x:A+S+T*S*2+A*T,y:X+S+R*S*2+X*R,r:S,c:y(I),p:!0};R===0&&T===b-1?(g={x:x.x,y:x.y,r:x.r,c:x.c,p:(r==="main"||r==="gameover"||r==="gamescore")&&!g.r},w=W(g),h=we(g)):p.push(x),I+=$?1:0}I=$?0:I+1}t&&(v=p[a(p.length-1)],e(()=>{u(v,!1,!0),v.p=!1})),o=p.map(R=>W(R))}),e(()=>{g.p&&u(g,!1,!0),g.p=!1}),t&&i((P,E)=>{l({x:P,y:E},v)&&(u(v),v.p=!0,e(()=>{c("game")},100))}),i((P,E)=>{l({x:P,y:E},g)&&(u(g),g.p=!0,e(()=>{c("main")},100))}),{render:()=>{o.forEach(P=>P()),w(),g!=null&&g.p||h()},popits:p,pausePpt:g}},F=100,j="#222",Ge=n=>{const t=(n==null?void 0:n[0])||0,u=(n==null?void 0:n[1])||0,f=(n==null?void 0:n[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(u<255?u<1?0:u:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},te={},Xe=n=>{const{ctx:t,createImg:u,useRandChain:f,useTimer:s}=C();let a,e=!1,d=[];const c=n.r*2/F/2;te[n.imgSrc]?a=te[n.imgSrc]:(a=te[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},a.img.src=n.imgSrc);const i=()=>s(()=>{e=!e,i()},250),l=(w,h=t)=>{const{x:v,y:g,c:y,r:M}=w;h.fillStyle=y||"red",h.beginPath(),h.arc(v+M,g+M,M,0,Math.PI*2),h.closePath(),h.fill()},r=(w=t,h=0,v=0)=>{w.fillStyle=j,w.beginPath(),w.roundRect(h,v,2*n.r,2*n.r,c),w.closePath(),w.fill()},m=()=>{const w=[];for(let M=0;M<F;M++)for(let P=0;P<F;P++){const E={x:P*c*2,y:M*c*2,r:c,c:j};w.push(E)}let h=n.score-n.winScore;const v=[...w],g=f(n.seed),y=(M=!1)=>{const P=g(v.length-1),E=v[P],S=w.indexOf(E);E.c=M?j:a.cols[S],v.splice(P,1),M&&d.push({...E,c:a.cols[S]})};for(let M=h;M>0;M--)y();if(n.winScore){d=[];for(let M=n.winScore;M>0;M--)y(!0);i()}return w},p=()=>{const w=m();a.drawImg=u((h=t)=>{r(h),w.filter(v=>v.c!==j).forEach(v=>l(v,h))},2*n.r)},o=async()=>{var v;const w=document.createElement("canvas");w.width=F,w.height=F;const h=w.getContext("2d",{willReadFrequently:!0});h==null||h.drawImage(a.img,0,0);for(let g=0;g<F;g++){const y=[];for(let M=0;M<F;M++){const P=(v=h==null?void 0:h.getImageData(M,g,1,1))==null?void 0:v.data;y.push(Ge(P))}a.cols.push(...y)}a.isFilled=!0,p()};return a.isFilled?(a.r!==n.r||a.score!==n.score)&&p():a.img.onload=o,(w=t)=>{const{x:h,y:v,r:g,winScore:y}=n;if(a.drawImg?w.drawImage(a.drawImg,h-g,v-g,2*g,2*g):r(w,h-g,v-g),e&&y&&a.drawImg)for(const M of d)w.fillStyle=M.c||"red",w.beginPath(),w.arc(h-g+M.x+M.r,v-g+M.y+M.r,M.r,0,Math.PI*2),w.closePath(),w.fill()}},he=1e4,ye=(n=0,t=!1)=>{const{addEventResize:u,useMeasure:f,translate:s}=C(),{getScore:a}=H(),e=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],d=a();let c,i=0,l=0,r=!1,m=!1;const p=y=>Math.min(Math.floor(y/he),e.length-1);let o=p(d-n);if(n){const y=p(d);r=y!==o,m=y>e.length-1}return u(()=>{const{cx:y,cy:M,s:P,isL:E}=f();c=[],i=(P-2*P*.055*1.6)/2,l=P*.05;let S=t?o:0;for(S;S<(t?o+1:e.length);S++){const b=e[S],A=E?y:y+S*i*2+S*l,z=E?M+S*i*2+S*l:M;c.push(Xe({x:A,y:z,r:i,score:Math.min(d-S*he,1e4),imgSrc:b,winScore:n,seed:S}))}}),{up:()=>{o=o+1<e.length?o+1:e.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{const{isL:y}=f(),M=y?0:-(o*i*2+o*l),P=y?-(o*i*2+o*l):0;s(()=>{c==null||c.forEach(E=>E())},M,P)},rect:()=>{const{cx:y,cy:M}=f(),P=innerWidth>innerHeight;return{x:P?y-i:0,y:P?0:M-i,w:P?2*i:innerWidth,h:P?innerHeight:2*i}},isJump:r,isCompleted:m}},je=({popits:n,pausePpt:t,popEffect:u=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:s,rand:a,addEventClick:e,addEventMove:d,intersect:c,navigate:i,addEventResize:l}=C(),{getScore:r,addScore:m,getDifficultyTic:p}=H();let o=[],w,h,v=!1,g=0,y=0,M=0;const P=r(),E=p(),S=I=>{const R=n.filter(L=>o.indexOf(L)===-1&&L!==I),T=a(R.length-1),x=R[T];x&&(u(x,!1,!0),x.p=!1,o.push(R[T]))},b=()=>{h=s(()=>{if(M=Math.max(M-10,50),n.length===o.length){v=!0,h.stop(),s(()=>{i("gameover")});return}S(),b()},M)},A=I=>{o=[];const R=n.length;let T=a(Math.round(R*.3),Math.round(R*.6));const x=[...n];if(I){const L=x.indexOf(I);x.splice(L,1)}for(let L=T;L>0;L--){const re=a(x.length-1),V=x[re];V.p=!1,u(V,!1,!0),o.push(V),x.splice(re,1)}M=E,w==null||w.stop(),h==null||h.stop(),P&&(w=s(()=>{f("SLOWLY"),b()},o.length*E)),g=g>0?g:a(3,5)},z=()=>1,X=I=>{u(I),M=Math.min(M+5,E),y++,I.p=!0;const R=o.indexOf(I);if(o.splice(R,1),o.length<=0)if(g--,g>0)s(()=>{f("Round"),A(I)},100);else{w==null||w.stop(),h==null||h.stop();const T=z();m(y*T),s(()=>{i("gamescore",{winScore:y*T})},100)}},$=(I,R,T=!1)=>{if(!v){for(const x of o)if(c({x:I,y:R},x)){X(x);return}if(!c({x:I,y:R},t)&&!T){for(const x of n)if(c({x:I,y:R},x)){u(x,!0),f("Popenalty"),S(x);return}f("Popenalty"),S()}}};e($),d((I,R)=>$(I,R,!0)),l(()=>{s(()=>{f("Pop it"),A()})})},qe=()=>{const{addEventResize:n,rand:t,useScreenMeta:u}=C(),{from:f}=u(),{popEffect:s,render:a}=O(),e=["#00dcfe","#5bb2f7","#92E6E6"],d=f==="opening"?e[0]:e[t(e.length-1)],{render:c,setIntersections:i}=Me({color:d}),{render:l,point:r}=Ye({popEffect:s}),{render:m,point:p}=ge({getX:(g,y,M)=>g+Math.round(y*.25)+2*M,getY:(g,y,M)=>g+Math.round(y*.25)+0*M,popEffect:s}),{render:o,point:w}=Le({popEffect:s}),{render:h,point:v}=Ne({popEffect:s});return n(()=>{const g=w(),y=r(),M=p(),P=v();i((E,S,b)=>!D({x:E,y:S,r:b},g)&&!D({x:E,y:S,r:b},y)&&!D({x:E,y:S,r:b},M)&&!D({x:E,y:S,r:b},P))}),()=>{a(),c(),l(),m(),o(),h()}},Ke=()=>{const{useMeasure:n,addEventResize:t}=C(),u=se(),{popEffect:f,render:s}=O(),{popits:a,render:e,pausePpt:d}=ve({palette:u,popEffect:f});return je({popits:a,popEffect:f,pausePpt:d}),t(()=>{(a[0].y-a[0].r)/n().m}),()=>{s(),e()}},Ue=()=>{const n="#ff6347",{popEffect:t,render:u}=O(),{setBackground:f}=C(),{minusDifficulty:s}=H(),{render:a}=ve({palette:n,retry:!0,popEffect:t}),{playFail:e}=G();return f(n),s(),e(),()=>{u(),a()}},Ve=()=>{const{translate:n,useScreenMeta:t}=C(),{plusDifficulty:u,resetDifficulty:f}=H(),{data:s}=t(),{popEffect:a,render:e}=O();se();const{playWin:d}=G(),{render:c,isJump:i}=ye(s==null?void 0:s.winScore,!0),{render:l}=ge({getX:(m,p,o)=>innerWidth>innerHeight?Math.min(m+(p-2*p*.055*1.6)/2+4*o+Math.round(p*.1),innerWidth-2*o-Math.round(p*.1)):m+(p-2*p*.055*1.6)/8+0*Math.round(p*.1)+2*o,getY:(m,p,o)=>innerWidth>innerHeight?m+(p-2*p*.055*1.6)/2-1*o-Math.round(p*.1):Math.min(m+(p-2*p*.055*1.6)/2+4*o+Math.round(p*.1),innerHeight-2*o-Math.round(p*.1)),popEffect:a}),{render:r}=Oe({getX:(m,p,o)=>innerWidth>innerHeight?Math.max(m-(p-2*p*.055*1.6)/2-4*o-Math.round(p*.1),2*o+Math.round(p*.1)):m+(p-2*p*.055*1.6)/8-2*Math.round(p*.1)-2*o,getY:(m,p,o)=>innerWidth>innerHeight?m-(p-2*p*.055*1.6)/2+0*o+Math.round(p*.1):Math.min(m+(p-2*p*.055*1.6)/2+4*o+Math.round(p*.1),innerHeight-2*o-Math.round(p*.1)),popEffect:a});return i?f():u(),d(),()=>{e(),innerHeight>innerWidth?n(c,0,-Math.round(innerHeight*.05)):c(),l(),r()}},Je=()=>{const{addEventResize:n,rand:t}=C(),{popEffect:u,render:f}=O(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],a=s[t(s.length-1)],{render:e,setIntersections:d}=Me({color:a,frequency:10}),{render:c,rect:i,up:l,down:r}=ye(),{render:m,point:p}=me({popEffect:u}),{render:o,point:w}=Fe({onClick:l,popEffect:u}),{render:h,point:v}=_e({onClick:r,popEffect:u});return n(()=>{const g=p(),y=i(),M=w(),P=v();d((E,S,b)=>!D({x:E,y:S,r:b},g)&&!We({x:E,y:S,r:b},y)&&!D({x:E,y:S,r:b},M)&&!D({x:E,y:S,r:b},P))}),()=>{f(),e(),c(),m(),o(),h()}},Qe=()=>{const{addEventResize:n,setBackground:t,createImg:u,useMeasure:f,ctx:s,loop:a,navigate:e}=C(),{popEffect:d,render:c}=O(),{render:i}=me({popEffect:d}),l=se(!0);let r=[];const m=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let p=innerHeight;return n(()=>{const{m:o,s:w}=f();r=[];const h=Math.round(o*3.5),v=Math.round(w*.75),g=Math.round((innerWidth-v)/2);let y=0;for(const M of m){l[y]||(y=0);const P=U({text:M,x:0,y:h,c:l[y],fs:Math.round(h*.6),mw:v,a:"left"}),E=U({text:"Maksim Nezabotin",x:v,y:h*1.5,c:"#f9f9f9",fs:Math.round(h*.7),mw:v,a:"right"}),S=u((b=s)=>{P(b),E(b)},v,2*h);r.push({img:S,x:g,y:p,w:v,h:5*h}),p+=5*h,y++}}),t("#040404"),a(()=>{for(const w of r)w.y-=2;const o=r[r.length-1];o.y+o.h<0&&e("main")}),()=>{r.forEach(({img:o,x:w,y:h,w:v,h:g})=>{s.drawImage(o,w,h,v,g)}),c(),i()}},Ze=[{name:"opening",ctor:Ae},{name:"main",ctor:qe},{name:"game",ctor:Ke},{name:"gameover",ctor:Ue},{name:"gamescore",ctor:Ve},{name:"score",ctor:Je},{name:"devs",ctor:Qe}],en=["/sounds/old/pop1.mp3","/sounds/old/pop2.mp3","/sounds/old/pop3.mp3","/sounds/old/pop4.mp3","/sounds/old/pop5.mp3","/sounds/old/pop6.mp3","/sounds/old/pop7.mp3","/sounds/old/pop8.mp3","/sounds/old/pop9.mp3","/sounds/old/pop10.mp3","/sounds/old/pop11.mp3","/sounds/old/pop12.mp3","/sounds/old/pop13.mp3","/sounds/old/pop14.mp3","/sounds/old/pop15.mp3","/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3","/sounds/new/pop26.mp3","/sounds/new/pop27.mp3","/sounds/new/pop28.mp3","/sounds/new/pop29.mp3","/sounds/new/pop30.mp3","/sounds/new/pop31.mp3","/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3"];He(Ze,en);document.title="Yo last Pop it";
