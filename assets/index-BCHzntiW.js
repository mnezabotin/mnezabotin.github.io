(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function d(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(n){if(n.ep)return;n.ep=!0;const c=d(n);fetch(n.href,c)}})();const J=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");if(!s)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,s.scale(devicePixelRatio,devicePixelRatio)},h=t=>{s.clearRect(0,0,innerWidth,innerHeight),t()};return d(),document.body.appendChild(e),{ctx:s,render:h,resize:d,rotate:(t,i,u,l)=>{s.save(),s.translate(i,u),s.rotate(Math.PI*l),s.translate(-i,-u),t(),s.restore()},translate:(t,i,u)=>{s.save(),s.translate(i,u),t(),s.restore()},shade:(t,i)=>{t=t.substring(1);const u=parseInt(t,16),l=Math.round(2.55*i),f=(u>>16)+l,p=(u>>8&255)+l,g=(u&255)+l;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(p<255?p<1?0:p:255)*256+(g<255?g<1?0:g:255)).toString(16).slice(1)},setBackground:(t,i)=>{var u;document.body.style.background=t,document.body.style.backgroundColor=i||t,(u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",i||t)},createImg:(t,i,u=i)=>{const l=document.createElement("canvas"),f=l.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return l.width=i*devicePixelRatio,l.height=u*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),t(f),l}}},Q=e=>{let s="",d="",h;const n=o=>e.find(a=>a.name===o)||e[0],r={render:()=>{},navigate:(o,a)=>{const t=n(o);d=s||"",s=(t==null?void 0:t.name)||"",h=a,r.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:s,from:d,data:h})};return r},Z=()=>{const e=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),s=[],d={};return{loop:(r,o)=>{if(Object.entries(d).find(([t,i])=>i===r)||o&&d[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&s.push(o),o=o||new Date().valueOf().toString(),d[o]=r;const a=()=>{r(),d[o]&&e(a)};a()},stop:r=>{if(typeof r=="string")delete d[r];else{const o=Object.entries(d).find(([a,t])=>t===r);o&&delete d[o[0]]}},stopAll:()=>{for(const r in d)s.indexOf(r)===-1&&delete d[r]}}};let B=[];const tt=()=>{for(const e of B)clearTimeout(e);B=[]},et=(e,s=400)=>{let d=new Date,h=s,n=setTimeout(e,h);return B.push(n),{pause:()=>{clearTimeout(n),h-=new Date-d},resume:()=>{d=new Date,clearTimeout(n),n=setTimeout(e,h),B.push(n)},stop:()=>{clearTimeout(n)}}},q=2147483646,N=2147483647,nt=16807,ot=(e=Math.floor(Math.random()*N))=>{e=e%N,e<=0&&(e+=q);const s=()=>(e=e*nt%N,e),d=()=>(s()-1)/q;return(n,c)=>(c===void 0&&(c=n,n=0),Math.floor(d()*(c-n+1))+n)},rt=(e,s)=>(s===void 0&&(s=e,e=0),Math.floor(Math.random()*(s-e+1))+e),st=()=>{const e=[],s=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>{s.push(o)},onClickEvents:(o,a)=>s.forEach(t=>t(o,a)),removeAllEvents:()=>{e.splice(0),s.splice(0)}}},ct=(e,s)=>{const d=e.r||0,h=s.r||0,n=e.x||0,c=e.y||0,r=s.x||0,o=s.y||0,a=Math.pow(Math.abs(n-r),2),t=Math.pow(Math.abs(c-o),2),i=Math.pow(d+h,2);return a+t<=i},A=(e,s)=>{const d=Math.pow(Math.abs(e.x-s.x),2),h=Math.pow(Math.abs(e.y-s.y),2),n=e.r||0,c=s.r||0,r=Math.pow(n+c,2);return d+h<=r},it=(e,s)=>{const d=e.r||0,h=s.w||0,n=s.h||0;return Math.abs(s.x+h/2-e.x)<=h/2+d&&Math.abs(s.y+n/2-e.y)<=n/2+d},at=e=>{const s={},d=n=>{const c=n.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const n of e){const c=new Audio(n);c.addEventListener("ended",function(){this.currentTime=0});const r=d(n);s[r]={audio:c,path:n}}})(),n=>{var a,t;const c=(a=s[n])==null?void 0:a.audio,r=(t=s[n])==null?void 0:t.path;if(!(!c||!r))if(c.currentTime===0)c.play();else{var o=new Audio(r);o.play()}}};let L;const dt=(e,s)=>{if(L)throw new Error("Webcore already specified");const d=J(),h=Q(e),{loop:n,stop:c,stopAll:r}=Z(),{addEventResize:o,onResizeEvents:a,addEventClick:t,onClickEvents:i,removeAllEvents:u}=st();let l=innerWidth/2,f=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const M=()=>({cx:l,cy:f,s:p,m:g}),m=at([]);L={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:M,useScreenMeta:h.useScreenMeta,navigate:(v,R)=>{if(!e.some(E=>E.name===v))throw new Error(`Screen ${v} not specified`);r(),tt(),u(),new Promise(()=>h.navigate(v,R))},loop:n,loopStop:c,useTimer:et,rand:rt,useRandChain:ot,intersect:ct,addEventResize:o,addEventClick:t,playAudio:m},n(()=>d.render(h.render),"draw"),window.onresize=()=>{l=innerWidth/2,f=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,g=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),d.resize(),a()},document.onpointerdown=v=>{i(v.clientX,v.clientY)},h.navigate()},P=()=>{if(!L)throw new Error("Webcore not specified");return{...L}},F={},I=e=>{const{shade:s,ctx:d,createImg:h}=P(),n=()=>{const{r,c:o="#ffffff",p:a}=e,t=d.createRadialGradient(r,r,r,r,r,r/5);return t.addColorStop(0,s(o,0)),t.addColorStop(.01,s(o,0)),t.addColorStop(.075,s(o,9)),t.addColorStop(.15,s(o,0)),t.addColorStop(.15,s(o,-15)),t.addColorStop(.18,s(o,-5)),t.addColorStop(.22,s(o,-15)),a?(t.addColorStop(.24,s(o,-10)),t.addColorStop(.3,s(o,-8)),t.addColorStop(.34,s(o,-12)),t.addColorStop(.6,s(o,-6)),t.addColorStop(1,s(o,-4))):(t.addColorStop(.24,s(o,-12)),t.addColorStop(.26,s(o,-8)),t.addColorStop(.3,s(o,-2)),t.addColorStop(.34,s(o,0)),t.addColorStop(.5,s(o,5)),t.addColorStop(1,s(o,10))),t},c=()=>{const{r,c:o="#ffffff",p:a}=e,t=`${o}_${a?"push":"pop"}_${r}`;if(F[t])return F[t];const i=h((u=d)=>{const l=n();u.fillStyle=l,u.beginPath(),u.arc(r,r,r,0,2*Math.PI),u.closePath(),u.fill()},2*r);return F[t]=i,i};return(r=d)=>{const{x:o,y:a,r:t}=e,i=c();r.drawImage(i,o-t,a-t,2*t,2*t)}},D={},W=e=>{const{ctx:s}=P();let d;return D[e.src]?d=D[e.src]:(d=new Image,d.src=e.src,D[e.src]=d),(h=s)=>{const{w:n,h:c=n,x:r=0,y:o=0}=e;d.complete&&h.drawImage(d,r,o,n,c)}},X=e=>{const{font:s,ctx:d}=P(),h=e.text,n=e.text.length,c=2*Math.PI/n/4;return(r=d)=>{const{x:o,y:a,r:t,s:i=0,fs:u}=e,l=u||Math.round(t/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${l}px ${s}`,r.save(),r.translate(o,a),r.rotate(i);for(let f=0;f<n;f++)r.save(),r.rotate(f*c),r.fillText(h[f],0,-t),r.restore();r.restore()}},lt=()=>{var v,R;const{ctx:e,loop:s,rotate:d,navigate:h,useMeasure:n,addEventClick:c,addEventResize:r,setBackground:o}=P();o("#040404");let a=!1,t,i,u,l,f,p=-.2,g=0;r(()=>{const{cx:E,cy:b,s:C}=n(),y=Math.round(C*.25);t={c:"#ff6347",x:E,y:b,r:y,p:!1},i=I(t),u=W({x:E-y+Math.round(y*.35),y:b-y+Math.round(y*.35),w:y*2-Math.round(y*.7),src:"/media/sloth.svg"}),l=X({text:"nezabotin",x:E,y:b,r:Math.round(y*1.1),s:Math.PI*1.6}),f=X({text:"production",x:E,y:b,r:Math.round(y*1.1),s:Math.PI*2.6})});const M=()=>{p+=.01,g=p>=1?1:p,p>=1.8&&(t.p=!0),p>=2.2&&(t.c="#f86a9a"),p>=2.6&&h("main")};c(()=>{[1.4,1.8,2.2,2.6].some(E=>{if(p<E)return p=E,!0})});const m=()=>{s(M),a=!0};return(v=document==null?void 0:document.fonts)!=null&&v.ready?(R=document==null?void 0:document.fonts)==null||R.ready.then(m):m(),()=>{const{cx:E,cy:b}=n();e.globalAlpha=a?1:0,i(),p<1.8&&u(),p<1.4&&d(()=>{l(),f()},E,b,g),e.globalAlpha=1}},ut=()=>{const{addEventResize:e,useMeasure:s,useTimer:d,addEventClick:h,navigate:n,useScreenMeta:c,playAudio:r}=P(),{from:o}=c();let a,t,i;return e(()=>{const{cx:f,cy:p,s:g,m:M}=s(),m=Math.round(g*.25);a={c:"#ba68c8",r:Math.round(g*.08),x:f-m-1*M,y:p-m+1*M,p:(o==="score"||o==="opening")&&!a},t=I(a),i=W({x:Number(a.x)-a.r+Math.round(a.r*.5),y:Number(a.y)-a.r+Math.round(a.r*.5),w:a.r*2-Math.round(a.r*1),src:"/media/star.svg"})}),d(()=>{a.p=!1}),h((f,p)=>{A({x:f,y:p},a)&&(r("tap"),a.p=!0,d(()=>{n("score")},100))}),{render:()=>{t(),a.p||i()},point:()=>({x:a.x,y:a.y,r:a.r})}},ht=()=>{const{addEventResize:e,useMeasure:s,useTimer:d,addEventClick:h,intersect:n,navigate:c,useScreenMeta:r,playAudio:o}=P(),{from:a}=r();let t,i,u;return e(()=>{const{s:p}=s(),g=Math.round(p*.08);t={c:"#ff6347",r:g,x:Math.round(1.6*g),y:Math.round(1.6*g),p:a==="main"&&!t},i=I(t),u=W({x:Number(t.x)-g+Math.round(g*.4),y:Number(t.y)-g+Math.round(g*.4),w:g*2-Math.round(g*.8),src:"/media/back.svg"})}),d(()=>{t.p=!1}),h((p,g)=>{n({x:p,y:g},t)&&(o("tap"),t.p=!0,d(()=>{c("main")},100))}),{render:()=>{i(),t.p||u()},point:()=>({x:t.x,y:t.y,r:t.r})}},ft=e=>{const{addEventResize:s,useMeasure:d,useTimer:h,addEventClick:n,intersect:c,rotate:r}=P();let o,a,t;return s(()=>{const{s:l}=d(),f=Math.round(l*.055);o={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f),p:!1},a=I(o),t=W({x:Number(o.x)-f+Math.round(f*.4),y:Number(o.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((l,f)=>{c({x:l,y:f},o)&&(o.p=!0,e(),h(()=>{o.p=!1},100))}),{render:()=>{a(),o.p||r(()=>{t()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},pt=e=>{const{addEventResize:s,useMeasure:d,useTimer:h,addEventClick:n,intersect:c,rotate:r}=P();let o,a,t;return s(()=>{const{s:l}=d(),f=Math.round(l*.055);o={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f-2*f-.3*f),p:!1},a=I(o),t=W({x:Number(o.x)-f+Math.round(f*.4),y:Number(o.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((l,f)=>{c({x:l,y:f},o)&&(o.p=!0,e(),h(()=>{o.p=!1},100))}),{render:()=>{a(),o.p||r(()=>{t()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},gt=e=>{const{ctx:s,shade:d}=P(),h=Math.round(e.r/2.2),n=Math.round(.15*e.r),c=d(e.c||"blue",-3);return(r=s)=>{const{r:o,x:a=o,y:t=o}=e;r.lineCap="round",r.fillStyle=c,r.strokeStyle=c,r.lineWidth=h,r.beginPath(),r.moveTo(a+n,t),r.lineTo(a-n/2,t-n),r.lineTo(a-n/2,t+n),r.closePath(),r.fill(),r.beginPath(),r.moveTo(a+n,t),r.lineTo(a-n/2,t-n),r.moveTo(a-n/2,t-n),r.lineTo(a-n/2,t+n),r.moveTo(a-n/2,t+n),r.lineTo(a+n,t),r.stroke()}},mt=()=>{const{addEventResize:e,useMeasure:s,useTimer:d,addEventClick:h,intersect:n,navigate:c,useScreenMeta:r,playAudio:o}=P(),{from:a}=r();let t,i,u;return e(()=>{const{cx:p,cy:g,s:M,m}=s(),v=Math.round(M*.25);t={c:"#bef181",r:Math.round(M*.1),x:p+v+2*m,y:g+v,p:(a==="game"||a==="opening")&&!t},i=I(t),u=gt(t)}),d(()=>{t.p=!1}),h((p,g)=>{n({x:p,y:g},t)&&(o("tap"),t.p=!0,d(()=>{c("game")},100))}),{render:()=>{i(),t.p||u()},point:()=>({x:t.x,y:t.y,r:t.r})}},U=e=>{const{font:s,ctx:d}=P();return(h=d)=>{const{text:n,x:c,c:r,y:o,fs:a,a:t="center",mw:i}=e;h.textAlign=t,h.fillStyle=r,h.font=`${a}px ${s}`,h.fillText(n,c,o,i)}},Mt=()=>{const{addEventResize:e,useMeasure:s,useTimer:d,useScreenMeta:h}=P(),{from:n}=h();let c,r,o,a;return e(()=>{const{cx:u,cy:l,s:f}=s(),p=Math.round(f*.25);c={c:"#f86a9a",x:u,y:l,r:p,p:n==="opening"&&!c},r=I(c),o=U({text:"Yola",c:"#f1f1f1",x:u,y:l-p+Math.round(p*.9),fs:Math.round(p/2.6),mw:p*2}),a=U({text:"PopiT",c:"#ffeb3b",x:u,y:l-p+Math.round(p*1.3),fs:Math.round(p/2.3),mw:p*2})}),d(()=>c.p=!1),{render:()=>{r(),c.p||(o(),a())},point:()=>({x:c.x,y:c.y,r:c.r})}},V=(e="#00dcfe")=>{const{addEventResize:s,useRandChain:d,useMeasure:h,rand:n,useTimer:c,setBackground:r,useScreenMeta:o}=P(),{from:a}=o();r(e);const t=n(0,999);let i=[],u=[];s(()=>{const g=d(t),{s:M}=h();i=[];const m=Math.round(M*.05),v=Math.round(innerWidth/m/2)-1,R=Math.round((innerWidth-2*m*v)/(v+1)),E=Math.round(innerHeight/m/2)-1,b=Math.round((innerHeight-2*m*E)/(E+1));for(let C=0;C<E;C++)for(let y=0;y<v;y++)g(g(25))<1&&i.push({x:R+m+y*m*2+R*y,y:b+m+C*m*2+b*C,r:m,c:e,p:a==="opening"?!0:g(1)>0});u=i.map(C=>I(C))});const l=()=>{c(()=>{const g=n(i.length-1);i[g].p=!i[g].p,l()})};return a==="opening"?c(()=>{i.forEach(g=>g.p=n(1)>0),l()}):l(),{render:()=>{u.forEach(g=>g())},setIntersections:g=>{i=i.filter(({x:M,y:m,r:v})=>g(M,m,v)),u=i.map(M=>I(M))}}},Y=e=>{const{addEventResize:s,useMeasure:d,setBackground:h}=P();s(()=>{const{s:n}=d(),c=Math.round(n*.14),r=Math.round(innerWidth/c/2)-1,o=(innerWidth-2*c*r)/(r+1),a=Math.round(innerHeight/c/2)-1,t=(innerHeight-2*c*a)/(a+1),i=innerWidth>=innerHeight,u=i?r:a,l=i?o:t,f=i?innerWidth:innerHeight;let p=0;const g=[];for(let m=0;m<u;m++)e[p]||(p=0),g.push(`${e[p]} ${(l+c+m*c*2+l*m)/f*100}%`),p++;h(`linear-gradient(${i?"to right":"to bottom"}, ${g.join(", ")})`,e[0])})},yt=e=>{const{ctx:s,shade:d}=P(),h=Math.round(e.r/4),n=Math.round(.12*e.r);return(c=s)=>{const{r,x:o=r,y:a=r}=e,t=d(e.c||"blue",-3);c.lineCap="round",c.strokeStyle=t,c.lineWidth=h,c.beginPath(),c.moveTo(o-1.5*n,a-2*n),c.lineTo(o-1.5*n,a+2*n),c.stroke(),c.beginPath(),c.moveTo(o+1.5*n,a-2*n),c.lineTo(o+1.5*n,a+2*n),c.stroke()}},vt=e=>{const{navigate:s,addEventResize:d,addEventClick:h,useMeasure:n,useTimer:c,intersect:r,useScreenMeta:o,playAudio:a}=P(),{from:t}=o(),i=[];let u=[],l={x:0,y:0,r:0},f,p;return d(()=>{const{s:M}=n();i.splice(0);const m=Math.round(M*.14),v=Math.round(innerWidth/m/2)-1,R=(innerWidth-2*m*v)/(v+1),E=Math.round(innerHeight/m/2)-1,b=(innerHeight-2*m*E)/(E+1),C=innerWidth>=innerHeight;let y=0;for(let w=0;w<E;w++){for(let x=0;x<v;x++){e[y]||(y=0);const S={x:R+m+x*m*2+R*x,y:b+m+w*m*2+b*w,r:m,c:e[y],p:!0};w===0&&x===v-1?(l.x=S.x,l.y=S.y,l.r=S.r,l.c=S.c,l.p=t==="main"&&!l,f=I(l),p=yt(l)):i.push(S),y+=C?1:0}y=C?0:y+1}u=i.map(w=>I(w))}),c(()=>{l.p=!1}),h((M,m)=>{r({x:M,y:m},l)&&(a("tap"),l.p=!0,c(()=>{s("main")},100))}),{render:()=>{u.forEach(M=>M()),f(),l!=null&&l.p||p()},popits:i,pausePopit:l}},k=100,$=2,H="#222",wt=e=>{const s=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(s<255?s<1?0:s:255)*65536+(d<255?d<1?0:d:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},_={},Pt=e=>{const{ctx:s,shade:d,createImg:h}=P();let n;_[e.imgSrc]?n=_[e.imgSrc]:(n=_[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},n.img.src=e.imgSrc);const c=(t,i=s)=>{const{x:u,y:l,c:f,r:p,p:g}=t;g?(i.fillStyle=d(f,5),i.beginPath(),i.arc(u+p,l+p,p,0,Math.PI*2),i.closePath(),i.fill()):(i.fillStyle=f,i.beginPath(),i.arc(u+p,l+p,p+2,0,Math.PI*2),i.closePath(),i.fill())},r=()=>{const t=[],i=(e.r*2-2*$)/k;for(let u=0;u<k;u++)for(let l=0;l<k;l++){const f={x:$+l*i,y:$+u*i,r:i/2,c:u*100+l>=e.score?H:n.cols[l][u]};t.push(f)}return t},o=()=>{const t=r();n.drawImg=h((i=s)=>{t.filter(u=>u.c===H).forEach(u=>c(u,i)),t.filter(u=>u.c!==H).forEach(u=>c(u,i)),t.filter(u=>u.c!==H).forEach(u=>c({...u,p:!0},i))},2*e.r)},a=async()=>{var u;const t=document.createElement("canvas");t.width=k,t.height=k;const i=t.getContext("2d",{willReadFrequently:!0});i==null||i.drawImage(n.img,0,0);for(let l=0;l<k;l++){const f=[];for(let p=0;p<k;p++){const g=(u=i==null?void 0:i.getImageData(l,p,1,1))==null?void 0:u.data;f.push(wt(g))}n.cols.push(f)}n.isFilled=!0,o()};return n.isFilled?(n.r!==e.r||n.score!==e.score)&&o():n.img.onload=a,(t=s)=>{const{x:i,y:u,r:l}=e;n.drawImg&&t.drawImage(n.drawImg,i-l,u-l,2*l,2*l)}},O=1e4,K=()=>{const{addEventResize:e,useMeasure:s,translate:d,rand:h}=P(),n=["/media/cat.png"],c=h(n.length*O);let r,o=0,a=0,t=Math.floor(c/O);return e(()=>{const{cx:p,cy:g,s:M}=s();r=[],o=(M-2*M*.055*1.6)/2,a=M*.05;for(let m=0;m<n.length;m++){const v=n[m];r.push(Pt({x:p,y:g+m*o*2+m*a,r:o,score:c-m*O<0?0:c-m*O,imgSrc:v}))}}),{up:()=>{t=t+1<n.length?t+1:n.length-1},down:()=>{t=t-1<0?0:t-1},render:()=>{d(()=>{r==null||r.forEach(p=>p())},0,-(t*o*2+t*a))},rect:()=>{const{cx:p}=s();return{x:p-o,y:0,w:2*o,h:innerHeight}}}},G="#ff6347",Et=(e,s,d)=>{const{useTimer:h,rand:n,addEventClick:c,intersect:r,playAudio:o,setBackground:a}=P(),t={state:"game",score:0};let i=0,u=[],l={x:0,y:0,r:0},f=[],p,g,M;const m=()=>{M=h(()=>{if(e.length===u.length){M.stop(),f=e.map(T=>T.c),p=s.c,e.forEach(T=>{T.c=G}),s.c=G,a(G);const S=n(e.length-1);l=e[S],l.p=!1,t.state="gameover",h(()=>{e.forEach(z=>{z.p=!0});const T=n(e.length-1);l=e[T],l.p=!1});return}const y=e.filter(S=>u.indexOf(S)===-1),w=n(y.length-1),x=y[w];x&&(x.p=!1,u.push(y[w])),m()},700)},v=y=>{u=[];const w=e.length;let x=n(Math.round(w*.3),Math.round(w*.6));const S=[...e];if(y){const T=S.indexOf(y);S.splice(T,1)}for(let T=x;T>0;T--){const z=n(S.length-1),j=S[z];j.p=!1,u.push(j),S.splice(z,1)}i<=0&&(g==null||g.stop(),M==null||M.stop(),g=h(m,u.length*250)),i=i>0?i:n(3,5)},R=y=>{var x,S;o("tap"),(S=(x=window==null?void 0:window.navigator)==null?void 0:x.vibrate)==null||S.call(x,50),t.score++,y.p=!0;const w=u.indexOf(y);u.splice(w,1),u.length<=0&&(i--,i>0?v(y):(g==null||g.stop(),M==null||M.stop(),t.state="results"))},E=(y,w)=>{for(const x of u)r({x:y,y:w},x)&&R(x)},b=(y,w)=>{r({x:y,y:w},l)&&(t.state="game",i=0,t.score=0,l.p=!0,h(()=>{Y(d),s.c=p,e.forEach((x,S)=>{x.c=f[S]}),h(()=>{v(l)},1e3)}))},C=()=>{t.state="game",t.score=0,i=0,h(()=>{v()})};return c((y,w)=>{switch(t.state){case"game":E(y,w);break;case"gameover":b(y,w);break;default:C()}}),h(()=>{v()}),t},xt=()=>{const{addEventResize:e}=P(),{render:s,setIntersections:d}=V(),{render:h,point:n}=Mt(),{render:c,point:r}=mt(),{render:o,point:a}=ut();return e(()=>{const t=a(),i=n(),u=r();d((l,f,p)=>!A({x:l,y:f,r:p},t)&&!A({x:l,y:f,r:p},i)&&!A({x:l,y:f,r:p},u))}),()=>{s(),h(),c(),o()}},St=()=>{const e=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"],{popits:s,render:d,pausePopit:h}=vt(e);Y(e);const n=Et(s,h,e),{render:c}=K();return()=>{n.state!=="results"&&d(),n.state==="results"&&c()}},bt=()=>{const{addEventResize:e}=P(),{render:s,setIntersections:d}=V("#ffeb3b"),{render:h,rect:n,up:c,down:r}=K(),{render:o,point:a}=ht(),{point:t}=ft(c),{point:i}=pt(r);return e(()=>{const u=a(),l=n(),f=t(),p=i();d((g,M,m)=>!A({x:g,y:M,r:m},u)&&!it({x:g,y:M,r:m},l)&&!A({x:g,y:M,r:m},f)&&!A({x:g,y:M,r:m},p))}),()=>{s(),h(),o()}},Ct=()=>{const{ctx:e,addEventResize:s,loop:d}=P(),h={x:40,y:100};let n=1,c=1,r;const o=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),s(o),d(()=>{h.x+=2*n,h.y+=3*c,n*=-1,c*=-1}),()=>{e.save();var a=Math.random()*2,t=Math.random()*3;e.translate(a,t),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,r,r),e.fill(),e.restore()}},Rt=[{name:"opening",ctor:lt},{name:"main",ctor:xt},{name:"game",ctor:St},{name:"score",ctor:bt},{name:"devs",ctor:Ct}];dt(Rt);document.title="Your's last PopiT";
