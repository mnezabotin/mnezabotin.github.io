(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const e of s.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&h(e)}).observe(document,{childList:!0,subtree:!0});function a(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(i){if(i.ep)return;i.ep=!0;const s=a(i);fetch(i.href,s)}})();const dt=()=>{const n=document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("CanvasRenderingContext2D is null");const a=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,r.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},h=t=>{r.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(n),{ctx:r,render:h,resize:a,rotate:(t,d,c,l)=>{r.save(),r.translate(d,c),r.rotate(Math.PI*l),r.translate(-d,-c),t(),r.restore()},translate:(t,d,c)=>{r.save(),r.translate(d,c),t(),r.restore()},shade:(t,d)=>{t=t.substring(1);const c=parseInt(t,16),l=Math.round(2.55*d),u=(c>>16)+l,M=(c>>8&255)+l,p=(c&255)+l;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(M<255?M<1?0:M:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(t,d)=>{var c;document.body.style.background=t,document.body.style.backgroundColor=d||t,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",d||t)},createImg:(t,d,c=d)=>{const l=document.createElement("canvas"),u=l.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return l.width=d*devicePixelRatio,l.height=c*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),t(u),l}}},lt=n=>{let r="",a="",h;const i=o=>n.find(f=>f.name===o)||n[0],e={render:()=>{},navigate:(o,f)=>{const t=i(o);a=r||"",r=(t==null?void 0:t.name)||"",h=f,e.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:r,from:a,data:h})};return e},ut=()=>{const n=requestAnimationFrame||(e=>setTimeout(e,16.666666666666668)),r=[],a={};return{loop:(e,o)=>{if(Object.entries(a).find(([t,d])=>d===e)||o&&a[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&r.push(o),o=o||new Date().valueOf().toString(),a[o]=e;const f=()=>{e(),a[o]&&n(f)};f()},stop:e=>{if(typeof e=="string")delete a[e];else{const o=Object.entries(a).find(([f,t])=>t===e);o&&delete a[o[0]]}},stopAll:()=>{for(const e in a)r.indexOf(e)===-1&&delete a[e]}}};let F=[];const ht=()=>{for(const n of F)clearTimeout(n);F=[]},ft=(n,r=400)=>{let a=new Date,h=r,i=setTimeout(n,h);return F.push(i),{pause:()=>{clearTimeout(i),h-=new Date-a},resume:()=>{a=new Date,clearTimeout(i),i=setTimeout(n,h),F.push(i)},stop:()=>{clearTimeout(i)}}},K=2147483646,B=2147483647,pt=16807,gt=(n=Math.floor(Math.random()*B))=>{n=n%B,n<=0&&(n+=K);const r=()=>(n=n*pt%B,n),a=()=>(r()-1)/K;return(i,s)=>(s===void 0&&(s=i,i=0),Math.floor(a()*(s-i+1))+i)},mt=(n,r)=>(r===void 0&&(r=n,n=0),Math.floor(Math.random()*(r-n+1))+n),Mt=()=>{const n=[],r=[],a=[];return{addEventResize:d=>{d(),n.push(d)},onResizeEvents:()=>n.forEach(d=>d()),addEventClick:d=>r.push(d),onClickEvents:(d,c)=>r.forEach(l=>l(d,c)),addEventMove:d=>a.push(d),onMoveEvents:(d,c)=>a.forEach(l=>l(d,c)),removeAllEvents:()=>{n.splice(0),r.splice(0),a.splice(0)}}},k=(n,r)=>{const a=Math.pow(Math.abs(n.x-r.x),2),h=Math.pow(Math.abs(n.y-r.y),2),i=n.r||0,s=r.r||0,e=Math.pow(i+s,2);return a+h<=e},vt=(n,r)=>{const a=n.r||0,h=r.w||0,i=r.h||0;return Math.abs(r.x+h/2-n.x)<=h/2+a&&Math.abs(r.y+i/2-n.y)<=i/2+a},yt=(n,r)=>k(n,r),Et=n=>{const r={},a=i=>{const s=i.split("/");return s[s.length-1].split(".")[0]};return(()=>{for(const i of n){const s=new Audio(i);s.volume=.25,s.addEventListener("ended",function(){this.currentTime=0});const e=a(i);r[e]={audio:s,path:i}}})(),i=>{var f,t;const s=(f=r[i])==null?void 0:f.audio,e=(t=r[i])==null?void 0:t.path;if(!(!s||!e))if(s.currentTime===0)s.play();else{var o=new Audio(e);o.volume=.25,o.play()}}};let $;const Pt=(n,r)=>{if($)throw new Error("Webcore already specified");const a=dt(),h=lt(n),{loop:i,stop:s,stopAll:e}=ut(),{addEventResize:o,onResizeEvents:f,addEventClick:t,onClickEvents:d,addEventMove:c,onMoveEvents:l,removeAllEvents:u}=Mt();let M=innerWidth/2,p=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const v=()=>({cx:M,cy:p,s:g,m}),S=Et([]);$={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:v,useScreenMeta:h.useScreenMeta,navigate:(y,w)=>{if(!n.some(E=>E.name===y))throw new Error(`Screen ${y} not specified`);e(),ht(),u(),new Promise(()=>h.navigate(y,w))},loop:i,loopStop:s,useTimer:ft,rand:mt,useRandChain:gt,intersect:yt,addEventResize:o,addEventClick:t,addEventMove:c,playAudio:S},i(()=>a.render(h.render),"draw"),window.onresize=()=>{M=innerWidth/2,p=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),f()},document.onpointerdown=y=>{d(y.clientX,y.clientY)},document.onmousemove=y=>{l(y.clientX,y.clientY)},h.navigate()},x=()=>{if(!$)throw new Error("Webcore not specified");return{...$}},N={},R=n=>{const{shade:r,ctx:a,createImg:h}=x(),i=()=>{const{r:e,c:o="#ffffff",p:f}=n,t=a.createRadialGradient(e,e,e,e,e,e/5);return t.addColorStop(0,r(o,0)),t.addColorStop(.01,r(o,0)),t.addColorStop(.075,r(o,9)),t.addColorStop(.15,r(o,0)),t.addColorStop(.15,r(o,-15)),t.addColorStop(.18,r(o,-5)),t.addColorStop(.22,r(o,-15)),f?(t.addColorStop(.24,r(o,-10)),t.addColorStop(.3,r(o,-8)),t.addColorStop(.34,r(o,-12)),t.addColorStop(.6,r(o,-6)),t.addColorStop(1,r(o,-4))):(t.addColorStop(.24,r(o,-12)),t.addColorStop(.26,r(o,-8)),t.addColorStop(.3,r(o,-2)),t.addColorStop(.34,r(o,0)),t.addColorStop(.5,r(o,5)),t.addColorStop(1,r(o,10))),t},s=()=>{const{r:e,c:o="#ffffff",p:f}=n,t=`${o}_${f?"push":"pop"}_${e}`;if(N[t])return N[t];const d=h((c=a)=>{const l=i();c.fillStyle=l,c.beginPath(),c.arc(e,e,e,0,2*Math.PI),c.closePath(),c.fill()},2*e);return N[t]=d,d};return(e=a)=>{const{x:o,y:f,r:t}=n,d=s();e.drawImage(d,o-t,f-t,2*t,2*t)}},G={},L=n=>{const{ctx:r}=x();let a;return G[n.src]?a=G[n.src]:(a=new Image,a.src=n.src,G[n.src]=a),(h=r)=>{const{w:i,h:s=i,x:e=0,y:o=0}=n;a.complete&&h.drawImage(a,e,o,i,s)}},J=n=>{const{font:r,ctx:a}=x(),h=n.text,i=n.text.length,s=2*Math.PI/i/4;return(e=a)=>{const{x:o,y:f,r:t,s:d=0,fs:c}=n,l=c||Math.round(t/4);e.textAlign="center",e.fillStyle="#f9f9f9",e.font=`${l}px ${r}`,e.save(),e.translate(o,f),e.rotate(d);for(let u=0;u<i;u++)e.save(),e.rotate(u*s),e.fillText(h[u],0,-t),e.restore();e.restore()}},St=()=>{var v,S;const{ctx:n,loop:r,rotate:a,navigate:h,useMeasure:i,addEventClick:s,addEventResize:e,setBackground:o}=x();o("#040404");let f=!1,t,d,c,l,u,M=-.2,p=0;e(()=>{const{cx:y,cy:w,s:E}=i(),P=Math.round(E*.25);t={c:"#ff6347",x:y,y:w,r:P,p:!1},d=R(t),c=L({x:y-P+Math.round(P*.35),y:w-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),l=J({text:"nezabotin",x:y,y:w,r:Math.round(P*1.1),s:Math.PI*1.6}),u=J({text:"production",x:y,y:w,r:Math.round(P*1.1),s:Math.PI*2.6})});const g=()=>{M+=.01,p=M>=1?1:M,M>=1.8&&(t.p=!0),M>=2.2&&(t.c="#f86a9a"),M>=2.6&&h("main")};s(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(M<y)return M=y,!0})});const m=()=>{r(g),f=!0};return(v=document==null?void 0:document.fonts)!=null&&v.ready?(S=document==null?void 0:document.fonts)==null||S.ready.then(m):m(),()=>{const{cx:y,cy:w}=i();n.globalAlpha=f?1:0,d(),M<1.8&&c(),M<1.4&&a(()=>{l(),u()},y,w,p),n.globalAlpha=1}},xt=(n="#ba68c8")=>{const{addEventResize:r,useMeasure:a,useTimer:h,useScreenMeta:i,navigate:s,addEventClick:e,intersect:o}=x(),{from:f}=i();let t,d,c;return r(()=>{const{cx:M,cy:p,s:g,m}=a(),v=Math.round(g*.25);t={c:n,r:Math.round(g*.08),x:M-v-1*m,y:p-v+1*m,p:(f==="score"||f==="opening")&&!t},d=R(t),c=L({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),h(()=>{t.p=!1}),e((M,p)=>{o({x:M,y:p},t)&&(t.p=!0,h(()=>{s("score")},100))}),{render:()=>{d(),t.p||c()},point:()=>({x:t.x,y:t.y,r:t.r})}},wt=(n="#ff6347")=>{const{addEventResize:r,useMeasure:a,useTimer:h,useScreenMeta:i,navigate:s,addEventClick:e,intersect:o}=x(),{from:f}=i();let t,d,c;return r(()=>{const{s:M}=a(),p=Math.round(M*.08);t={c:n,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:f==="main"&&!t},d=R(t),c=L({x:Number(t.x)-p+Math.round(p*.4),y:Number(t.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),h(()=>{t.p=!1}),e((M,p)=>{o({x:M,y:p},t)&&(t.p=!0,h(()=>{s("main")},100))}),{render:()=>{d(),t.p||c()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ct=n=>{const{addEventResize:r,useMeasure:a,useTimer:h,addEventClick:i,intersect:s,rotate:e}=x();let o,f,t;return r(()=>{const{s:l}=a(),u=Math.round(l*.055);o={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},f=R(o),t=L({x:Number(o.x)-u+Math.round(u*.4),y:Number(o.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),i((l,u)=>{s({x:l,y:u},o)&&(o.p=!0,n(),h(()=>{o.p=!1},100))}),{render:()=>{f(),o.p||e(()=>{t()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},It=n=>{const{addEventResize:r,useMeasure:a,useTimer:h,addEventClick:i,intersect:s,rotate:e}=x();let o,f,t;return r(()=>{const{s:l}=a(),u=Math.round(l*.055);o={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},f=R(o),t=L({x:Number(o.x)-u+Math.round(u*.4),y:Number(o.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),i((l,u)=>{s({x:l,y:u},o)&&(o.p=!0,n(),h(()=>{o.p=!1},100))}),{render:()=>{f(),o.p||e(()=>{t()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},Rt=n=>{const{ctx:r,shade:a}=x(),h=Math.round(n.r/2.2),i=Math.round(.15*n.r),s=a(n.c||"blue",-3);return(e=r)=>{const{r:o,x:f=o,y:t=o}=n;e.lineCap="round",e.fillStyle=s,e.strokeStyle=s,e.lineWidth=h,e.beginPath(),e.moveTo(f+i,t),e.lineTo(f-i/2,t-i),e.lineTo(f-i/2,t+i),e.closePath(),e.fill(),e.beginPath(),e.moveTo(f+i,t),e.lineTo(f-i/2,t-i),e.moveTo(f-i/2,t-i),e.lineTo(f-i/2,t+i),e.moveTo(f-i/2,t+i),e.lineTo(f+i,t),e.stroke()}},rt=({getX:n,getY:r,color:a="#bef181"})=>{const{addEventResize:h,useMeasure:i,useTimer:s,useScreenMeta:e,navigate:o,addEventClick:f,intersect:t}=x(),{from:d}=e();let c,l,u;return h(()=>{const{cx:g,cy:m,s:v,m:S}=i();c={c:a,r:Math.round(v*.1),x:n(g,v,S),y:r(m,v,S),p:(d==="gamescore"||d==="game"||d==="opening")&&!c},l=R(c),u=Rt(c)}),s(()=>{c.p=!1}),f((g,m)=>{t({x:g,y:m},c)&&(c.p=!0,s(()=>{o("game")},100))}),{render:()=>{l(),c.p||u()},point:()=>({x:c.x,y:c.y,r:c.r})}},st=n=>{const{ctx:r,shade:a}=x(),h=Math.round(n.r/4),i=Math.round(.12*n.r);return(s=r)=>{const{r:e,x:o=e,y:f=e}=n,t=a(n.c||"blue",-3);s.lineCap="round",s.strokeStyle=t,s.lineWidth=h,s.beginPath(),s.moveTo(o-1.5*i,f-2*i),s.lineTo(o-1.5*i,f+2*i),s.stroke(),s.beginPath(),s.moveTo(o+1.5*i,f-2*i),s.lineTo(o+1.5*i,f+2*i),s.stroke()}},Tt=({getX:n,getY:r})=>{const{addEventResize:a,useMeasure:h,useTimer:i,useScreenMeta:s,navigate:e,addEventClick:o,intersect:f}=x(),{from:t}=s();let d,c,l;return a(()=>{const{cx:p,cy:g,s:m,m:v}=h();d={c:"#fd8059",r:Math.round(m*.08),x:n(p,m,v),y:r(g,m,v),p:(t==="game"||t==="opening")&&!d},c=R(d),l=st(d)}),i(()=>{d.p=!1}),o((p,g)=>{f({x:p,y:g},d)&&(d.p=!0,i(()=>{e("main")},100))}),{render:()=>{c(),d.p||l()},point:()=>({x:d.x,y:d.y,r:d.r})}},Q=n=>{const{font:r,ctx:a}=x();return(h=a)=>{const{text:i,x:s,c:e,y:o,fs:f,a:t="center",mw:d}=n;h.textAlign=t,h.fillStyle=e,h.font=`${f}px ${r}`,h.fillText(i,s,o,d)}},bt=(n="#f86a9a")=>{const{addEventResize:r,useMeasure:a,useTimer:h,useScreenMeta:i,addEventClick:s,intersect:e,navigate:o}=x(),{from:f}=i();let t,d,c,l;return r(()=>{const{cx:p,cy:g,s:m}=a(),v=Math.round(m*.25);t={c:n,x:p,y:g,r:v,p:f==="opening"&&!t},d=R(t),c=Q({text:"Yola",c:"#f1f1f1",x:p,y:g-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),l=Q({text:"PopiT",c:"#ffeb3b",x:p,y:g-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),h(()=>t.p=!1),s((p,g)=>{e({x:p,y:g},t)&&(t.p=!0,h(()=>{o("opening")},100))}),{render:()=>{d(),t.p||(c(),l())},point:()=>({x:t.x,y:t.y,r:t.r})}},it=({color:n="#00dcfe",frequency:r=25})=>{const{addEventResize:a,useRandChain:h,useMeasure:i,rand:s,useTimer:e,setBackground:o,useScreenMeta:f}=x(),{from:t}=f();o(n);const d=s(0,999);let c=[],l=[];a(()=>{const g=h(d),{s:m}=i();c=[];const v=Math.round(m*.05),S=Math.round(innerWidth/v/2)-1,y=Math.round((innerWidth-2*v*S)/(S+1)),w=Math.round(innerHeight/v/2)-1,E=Math.round((innerHeight-2*v*w)/(w+1));for(let P=0;P<w;P++)for(let C=0;C<S;C++)g(g(r))<1&&c.push({x:y+v+C*v*2+y*C,y:E+v+P*v*2+E*P,r:v,c:n,p:t==="opening"?!0:g(1)>0});l=c.map(P=>R(P))});const u=()=>{e(()=>{const g=s(c.length-1);c[g]&&(c[g].p=!c[g].p),u()},750)};return t==="opening"?e(()=>{c.forEach(g=>g.p=s(1)>0),u()}):u(),{render:()=>{l.forEach(g=>g())},setIntersections:g=>{c=c.filter(({x:m,y:v,r:S})=>g(m,v,S)),l=c.map(m=>R(m))}}},Z="ylp",tt="score",et="difficulty",Y=[.14,.11,.09,.075],nt=750,Wt=350,ot=5,D=[];for(let n=0;n*ot<=nt-Wt;n++)D.push(nt-n*ot);const z=()=>{const n=c=>localStorage.getItem(`${Z}_${c}`),r=(c,l)=>localStorage.setItem(`${Z}_${c}`,l.toString()),a=()=>+(n(tt)||0),h=c=>r(tt,c),i=c=>{const l=a();h(l+c)},s=()=>+(n(et)||0),e=c=>{const l=s();r(et,Math.min(Math.max(l+c,0),Y.length*D.length-1))};return{getScore:a,addScore:i,plusDifficulty:()=>e(1),minusDifficulty:()=>e(-1),getDifficultyRad:()=>{const c=s(),l=Math.floor(c/D.length);return Y[l]||Y[1]},getDifficultyTic:()=>{const c=s(),l=Math.floor(c/D.length),u=c-l*D.length;return D[u]||D[0]}}},O=(n=!1)=>{let r=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:h,setBackground:i,rand:s}=x(),{getDifficultyRad:e}=z();return r=[...r.splice(s(r.length-1),r.length),...r],n||a(()=>{const{s:f}=h(),t=e(),d=Math.round(f*t),c=Math.round(innerWidth/d/2)-1,l=(innerWidth-2*d*c)/(c+1),u=Math.round(innerHeight/d/2)-1,M=(innerHeight-2*d*u)/(u+1),p=innerWidth>=innerHeight,g=p?c:u,m=p?l:M,v=p?innerWidth:innerHeight;let S=0;const y=[];for(let E=0;E<g;E++)r[S]||(S=0),y.push(`${r[S]} ${(m+d+E*d*2+m*E)/v*100}%`),S++;i(`linear-gradient(${p?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?r[0]:"#040404")}),r},ct=({palette:n,retry:r})=>{const{addEventResize:a,useMeasure:h,rand:i,useTimer:s,useScreenMeta:e,navigate:o,addEventClick:f,intersect:t}=x(),{from:d}=e(),{getDifficultyRad:c}=z(),l=[];let u=[],M,p,g,m;const v=y=>Array.isArray(n)?n[y]:n;return a(()=>{const{s:y}=h();l.splice(0);const w=c(),E=Math.round(y*w),P=Math.round(innerWidth/E/2)-1,C=(innerWidth-2*E*P)/(P+1),I=Math.round(innerHeight/E/2)-1,b=(innerHeight-2*E*I)/(I+1),A=innerWidth>=innerHeight;let T=0;for(let W=0;W<I;W++){for(let _=0;_<P;_++){v(T)||(T=0);const V={x:C+E+_*E*2+C*_,y:b+E+W*E*2+b*W,r:E,c:v(T),p:!0};W===0&&_===P-1?(m={...V,p:(d==="main"||d==="gameover"||d==="gamescore")&&!m},M=R(m),p=st(m)):l.push(V),T+=A?1:0}T=A?0:T+1}r&&(g=l[i(l.length-1)],s(()=>{g.p=!1})),u=l.map(W=>R(W))}),s(()=>{m.p=!1}),r&&f((y,w)=>{t({x:y,y:w},g)&&(g.p=!0,s(()=>{o("game")},100))}),f((y,w)=>{t({x:y,y:w},m)&&(m.p=!0,s(()=>{o("main")},100))}),{render:()=>{u.forEach(y=>y()),M(),m!=null&&m.p||p()},popits:l}},H=100,X=2,j="#222",Ht=n=>{const r=(n==null?void 0:n[0])||0,a=(n==null?void 0:n[1])||0,h=(n==null?void 0:n[2])||0;return"#"+(16777216+(r<255?r<1?0:r:255)*65536+(a<255?a<1?0:a:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},q={},Dt=n=>{const{ctx:r,shade:a,createImg:h,useRandChain:i}=x();let s;q[n.imgSrc]?s=q[n.imgSrc]:(s=q[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},s.img.src=n.imgSrc);const e=(d,c=r)=>{const{x:l,y:u,c:M,r:p,p:g}=d;g?(c.fillStyle=a(M,5),c.beginPath(),c.arc(l+p,u+p,p,0,Math.PI*2),c.closePath(),c.fill()):(c.fillStyle=M,c.beginPath(),c.arc(l+p,u+p,p+1,0,Math.PI*2),c.closePath(),c.fill())},o=()=>{const d=[],c=(n.r*2-2*X)/H;for(let p=0;p<H;p++)for(let g=0;g<H;g++){const m={x:X+g*c,y:X+p*c,r:c/2,c:j};d.push(m)}let l=n.score;const u=[...d],M=i(0);for(let p=l;p>0;p--){const g=M(u.length-1),m=u[g],v=d.indexOf(m);m.c=s.cols[v],u.splice(g,1)}return d},f=()=>{const d=o();s.drawImg=h((c=r)=>{d.filter(l=>l.c===j).forEach(l=>e(l,c)),d.filter(l=>l.c!==j).forEach(l=>e(l,c))},2*n.r)},t=async()=>{var l;const d=document.createElement("canvas");d.width=H,d.height=H;const c=d.getContext("2d",{willReadFrequently:!0});c==null||c.drawImage(s.img,0,0);for(let u=0;u<H;u++){const M=[];for(let p=0;p<H;p++){const g=(l=c==null?void 0:c.getImageData(p,u,1,1))==null?void 0:l.data;M.push(Ht(g))}s.cols.push(...M)}s.isFilled=!0,f()};return s.isFilled?(s.r!==n.r||s.score!==n.score)&&f():s.img.onload=t,(d=r)=>{const{x:c,y:l,r:u}=n;s.drawImg&&d.drawImage(s.drawImg,c-u,l-u,2*u,2*u)}},U=1e4,at=()=>{const{addEventResize:n,useMeasure:r,translate:a}=x(),{getScore:h}=z(),i=["/media/cat.png"],s=h();let e,o=0,f=0,t=Math.floor(s/U);return n(()=>{const{cx:M,cy:p,s:g}=r();e=[],o=(g-2*g*.055*1.6)/2,f=g*.05;for(let m=0;m<i.length;m++){const v=i[m];e.push(Dt({x:M,y:p+m*o*2+m*f,r:o,score:s-m*U<0?0:s-m*U,imgSrc:v}))}}),{up:()=>{t=t+1<i.length?t+1:i.length-1},down:()=>{t=t-1<0?0:t-1},render:()=>{a(()=>{e==null||e.forEach(M=>M())},0,-(t*o*2+t*f))},rect:()=>{const{cx:M,cy:p}=r(),g=innerWidth>innerHeight;return{x:g?M-o:0,y:g?0:p-o,w:g?2*o:innerWidth,h:g?innerHeight:2*o}}}},kt=n=>{const{useTimer:r,rand:a,addEventClick:h,addEventMove:i,intersect:s,navigate:e}=x(),{addScore:o,getDifficultyTic:f}=z();let t=[],d,c,l=!1,u=0,M=0,p=0;const g=f(),m=()=>{const E=n.filter(I=>t.indexOf(I)===-1),P=a(E.length-1),C=E[P];C&&(C.p=!1,t.push(E[P]))},v=()=>{c=r(()=>{if(p=Math.max(p-10,250),n.length===t.length){l=!0,c.stop(),r(()=>{e("gameover")});return}m(),v()},p)},S=E=>{t=[];const P=n.length;let C=a(Math.round(P*.3),Math.round(P*.6));const I=[...n];if(E){const b=I.indexOf(E);I.splice(b,1)}for(let b=C;b>0;b--){const A=a(I.length-1),T=I[A];T.p=!1,t.push(T),I.splice(A,1)}p=g,d==null||d.stop(),c==null||c.stop(),d=r(v,t.length*Math.min(g,500)),u=u>0?u:a(3,5)},y=E=>{p=Math.min(p+5,g),M++,E.p=!0;const P=t.indexOf(E);t.splice(P,1),t.length<=0&&(u--,u>0?S(E):(o(M),e("gamescore")))},w=(E,P,C=!1)=>{if(!l){for(const I of t)if(s({x:E,y:P},I)){y(I);return}C||m()}};h(w),i((E,P)=>w(E,P,!0)),r(()=>{S()})},zt=()=>{const{addEventResize:n,rand:r}=x(),a=O(!0),h=a[r(a.length-1)],{render:i,setIntersections:s}=it({color:h}),{render:e,point:o}=bt(),{render:f,point:t}=rt({getX:(l,u,M)=>l+Math.round(u*.25)+2*M,getY:(l,u,M)=>l+Math.round(u*.25)+0*M}),{render:d,point:c}=xt();return n(()=>{const l=c(),u=o(),M=t();s((p,g,m)=>!k({x:p,y:g,r:m},l)&&!k({x:p,y:g,r:m},u)&&!k({x:p,y:g,r:m},M))}),()=>{i(),e(),f(),d()}},At=()=>{const n=O(),{popits:r,render:a}=ct({palette:n});return kt(r),()=>{a()}},_t=()=>{const n="#ff6347",{setBackground:r}=x(),{minusDifficulty:a}=z(),{render:h}=ct({palette:n,retry:!0});return r(n),a(),()=>{h()}},Lt=()=>{const{translate:n}=x(),{plusDifficulty:r}=z();O();const{render:a}=at(),{render:h}=rt({getX:(s,e,o)=>innerWidth>innerHeight?Math.min(s+(e-2*e*.055*1.6)/2+4*o+Math.round(e*.1),innerWidth-2*o-Math.round(e*.1)):s+(e-2*e*.055*1.6)/8+0*Math.round(e*.1)+2*o,getY:(s,e,o)=>innerWidth>innerHeight?s+(e-2*e*.055*1.6)/2+0*o-Math.round(e*.1):Math.min(s+(e-2*e*.055*1.6)/2+4*o+Math.round(e*.1),innerHeight-2*o-Math.round(e*.1))}),{render:i}=Tt({getX:(s,e,o)=>innerWidth>innerHeight?Math.max(s-(e-2*e*.055*1.6)/2-4*o-Math.round(e*.1),2*o+Math.round(e*.1)):s+(e-2*e*.055*1.6)/8-2*Math.round(e*.1)-2*o,getY:(s,e,o)=>innerWidth>innerHeight?s-(e-2*e*.055*1.6)/2+0*o+Math.round(e*.1):Math.min(s+(e-2*e*.055*1.6)/2+4*o+Math.round(e*.1),innerHeight-2*o-Math.round(e*.1))});return r(),()=>{innerHeight>innerWidth?n(a,0,-Math.round(innerHeight*.07)):a(),h(),i()}},Ft=()=>{const{addEventResize:n,rand:r}=x(),a=O(!0),h=a[r(a.length-1)],{render:i,setIntersections:s}=it({color:h,frequency:10}),{render:e,rect:o,up:f,down:t}=at(),{render:d,point:c}=wt(),{point:l}=Ct(f),{point:u}=It(t);return n(()=>{const M=c(),p=o(),g=l(),m=u();s((v,S,y)=>!k({x:v,y:S,r:y},M)&&!vt({x:v,y:S,r:y},p)&&!k({x:v,y:S,r:y},g)&&!k({x:v,y:S,r:y},m))}),()=>{i(),e(),d()}},$t=()=>{const{ctx:n,addEventResize:r,loop:a}=x(),h={x:40,y:100};let i=1,s=1,e;const o=()=>{e=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),r(o),a(()=>{h.x+=2*i,h.y+=3*s,i*=-1,s*=-1}),()=>{n.save();var f=Math.random()*2,t=Math.random()*3;n.translate(f,t),n.beginPath(),n.fillStyle="red",n.rect(h.x,h.y,e,e),n.fill(),n.restore()}},Ot=[{name:"main",ctor:zt},{name:"opening",ctor:St},{name:"game",ctor:At},{name:"gameover",ctor:_t},{name:"gamescore",ctor:Lt},{name:"score",ctor:Ft},{name:"devs",ctor:$t}];Pt(Ot);document.title="Your's last Pop it";
