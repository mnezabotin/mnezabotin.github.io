(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const dt=()=>{const e=document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},u=t=>{o.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(e),{ctx:o,render:u,resize:a,rotate:(t,d,l,p)=>{o.save(),o.translate(d,l),o.rotate(Math.PI*p),o.translate(-d,-l),t(),o.restore()},translate:(t,d,l)=>{o.save(),o.translate(d,l),t(),o.restore()},shade:(t,d)=>{t=t.substring(1);const l=parseInt(t,16),p=Math.round(2.55*d),M=(l>>16)+p,y=(l>>8&255)+p,f=(l&255)+p;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(y<255?y<1?0:y:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},setBackground:(t,d)=>{var l;document.body.style.background=t,document.body.style.backgroundColor=d||t,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",d||t)},createImg:(t,d,l=d)=>{const p=document.createElement("canvas"),M=p.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return p.width=d*devicePixelRatio,p.height=l*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),t(M),p}}},lt=e=>{let o="",a="",u;const r=n=>e.find(i=>i.name===n)||e[0],s={render:()=>{},navigate:(n,i)=>{const t=r(n);a=o||"",o=(t==null?void 0:t.name)||"",u=i,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:a,data:u})};return s},ut=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),o=[],a={};return{loop:(s,n)=>{if(Object.entries(a).find(([t,d])=>d===s)||n&&a[n])throw new Error(`Loop${n?" "+n:""} already specified`);n&&o.push(n),n=n||new Date().valueOf().toString(),a[n]=s;const i=()=>{s(),a[n]&&e(i)};i()},stop:s=>{if(typeof s=="string")delete a[s];else{const n=Object.entries(a).find(([i,t])=>t===s);n&&delete a[n[0]]}},stopAll:()=>{for(const s in a)o.indexOf(s)===-1&&delete a[s]}}};let O=[];const ft=()=>{for(const e of O)clearTimeout(e);O=[]},ht=(e,o=400)=>{let a=new Date,u=o,r=setTimeout(e,u);return O.push(r),{pause:()=>{clearTimeout(r),u-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(e,u),O.push(r)},stop:()=>{clearTimeout(r)}}},V=2147483646,N=2147483647,pt=16807,gt=(e=Math.floor(Math.random()*N))=>{e=e%N,e<=0&&(e+=V);const o=()=>(e=e*pt%N,e),a=()=>(o()-1)/V;return(r,c)=>(c===void 0&&(c=r,r=0),Math.floor(a()*(c-r+1))+r)},mt=(e,o)=>(o===void 0&&(o=e,e=0),Math.floor(Math.random()*(o-e+1))+e),Mt=()=>{const e=[],o=[],a=[];return{addEventResize:d=>{d(),e.push(d)},onResizeEvents:()=>e.forEach(d=>d()),addEventClick:d=>o.push(d),onClickEvents:(d,l)=>o.forEach(p=>p(d,l)),addEventMove:d=>a.push(d),onMoveEvents:(d,l)=>a.forEach(p=>p(d,l)),removeAllEvents:()=>{e.splice(0),o.splice(0),a.splice(0)}}},k=(e,o)=>{const a=Math.pow(Math.abs(e.x-o.x),2),u=Math.pow(Math.abs(e.y-o.y),2),r=e.r||0,c=o.r||0,s=Math.pow(r+c,2);return a+u<=s},vt=(e,o)=>{const a=e.r||0,u=o.w||0,r=o.h||0;return Math.abs(o.x+u/2-e.x)<=u/2+a&&Math.abs(o.y+r/2-e.y)<=r/2+a},yt=(e,o)=>k(e,o),Et=e=>{const o={},a=r=>{const c=r.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const r of e){const c=new Audio(r);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const s=a(r);o[s]={audio:c,path:r}}})(),r=>{var i,t;const c=(i=o[r])==null?void 0:i.audio,s=(t=o[r])==null?void 0:t.path;if(!(!c||!s))if(c.currentTime===0)c.play();else{var n=new Audio(s);n.volume=.25,n.play()}}};let B;const St=(e,o)=>{if(B)throw new Error("Webcore already specified");const a=dt(),u=lt(e),{loop:r,stop:c,stopAll:s}=ut(),{addEventResize:n,onResizeEvents:i,addEventClick:t,onClickEvents:d,addEventMove:l,onMoveEvents:p,removeAllEvents:M}=Mt();let y=innerWidth/2,f=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:y,cy:f,s:h,m}),E=Et([]);B={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:g,useScreenMeta:u.useScreenMeta,navigate:(v,P)=>{if(!e.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);s(),ft(),M(),new Promise(()=>u.navigate(v,P))},loop:r,loopStop:c,useTimer:ht,rand:mt,useRandChain:gt,intersect:yt,addEventResize:n,addEventClick:t,addEventMove:l,playAudio:E},r(()=>a.render(u.render),"draw"),window.onresize=()=>{y=innerWidth/2,f=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),i()},document.onpointerdown=v=>{d(v.clientX,v.clientY)},document.onmousemove=v=>{p(v.clientX,v.clientY)},u.navigate()},x=()=>{if(!B)throw new Error("Webcore not specified");return{...B}},G={},R=e=>{const{shade:o,ctx:a,createImg:u}=x(),r=()=>{const{r:s,c:n="#ffffff",p:i}=e,t=a.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,o(n,0)),t.addColorStop(.01,o(n,0)),t.addColorStop(.075,o(n,9)),t.addColorStop(.15,o(n,0)),t.addColorStop(.15,o(n,-15)),t.addColorStop(.18,o(n,-5)),t.addColorStop(.22,o(n,-15)),i?(t.addColorStop(.24,o(n,-10)),t.addColorStop(.3,o(n,-8)),t.addColorStop(.34,o(n,-12)),t.addColorStop(.6,o(n,-6)),t.addColorStop(1,o(n,-4))):(t.addColorStop(.24,o(n,-12)),t.addColorStop(.26,o(n,-8)),t.addColorStop(.3,o(n,-2)),t.addColorStop(.34,o(n,0)),t.addColorStop(.5,o(n,5)),t.addColorStop(1,o(n,10))),t},c=()=>{const{r:s,c:n="#ffffff",p:i}=e,t=`${n}_${i?"push":"pop"}_${s}`;if(G[t])return G[t];const d=u((l=a)=>{const p=r();l.fillStyle=p,l.beginPath(),l.arc(s,s,s,0,2*Math.PI),l.closePath(),l.fill()},2*s);return G[t]=d,d};return(s=a)=>{const{x:n,y:i,r:t}=e,d=c();s.drawImage(d,n-t,i-t,2*t,2*t)}},Y={},L=e=>{const{ctx:o}=x();let a;return Y[e.src]?a=Y[e.src]:(a=new Image,a.src=e.src,Y[e.src]=a),(u=o)=>{const{w:r,h:c=r,x:s=0,y:n=0}=e;a.complete&&u.drawImage(a,s,n,r,c)}},K=e=>{const{font:o,ctx:a}=x(),u=e.text,r=e.text.length,c=2*Math.PI/r/4;return(s=a)=>{const{x:n,y:i,r:t,s:d=0,fs:l}=e,p=l||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${p}px ${o}`,s.save(),s.translate(n,i),s.rotate(d);for(let M=0;M<r;M++)s.save(),s.rotate(M*c),s.fillText(u[M],0,-t),s.restore();s.restore()}},Pt=()=>{var g,E;const{ctx:e,loop:o,rotate:a,navigate:u,useMeasure:r,addEventClick:c,addEventResize:s,setBackground:n}=x();n("#040404");let i=!1,t,d,l,p,M,y=-.2,f=0;s(()=>{const{cx:v,cy:P,s:w}=r(),S=Math.round(w*.25);t={c:"#ff6347",x:v,y:P,r:S,p:!1},d=R(t),l=L({x:v-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),p=K({text:"nezabotin",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),M=K({text:"production",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const h=()=>{y+=.01,f=y>=1?1:y,y>=1.8&&(t.p=!0),y>=2.2&&(t.c="#f86a9a"),y>=2.6&&u("main")};c(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(y<v)return y=v,!0})});const m=()=>{o(h),i=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(m):m(),()=>{const{cx:v,cy:P}=r();e.globalAlpha=i?1:0,d(),y<1.8&&l(),y<1.4&&a(()=>{p(),M()},v,P,f),e.globalAlpha=1}},_=100/2,wt=()=>{const{loop:e,loopStop:o,ctx:a,shade:u}=x(),r={},c=i=>{const t=r[i];if(!t)return;const d=t.popit;t.tic+=_/5,t.tic>=_&&(t.dir=-1),d.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:_-t.tic)),t.tic>=2*_&&(o(t.loopEffect),delete r[i],d.r=t.origR)};return{popEffect:i=>{const t=new Date().valueOf().toString(),d=()=>c(t),l=1,p=1;r[t]={loopEffect:d,tic:l,dir:p,popit:i,origR:i.r},e(d)},render:()=>{a.globalAlpha=.25;for(const i in r){const t=r[i],d=t.popit;a.fillStyle=u(d.c||"red",-16),a.beginPath(),a.arc(d.x,d.y,d.r+t.origR*.001*(t.tic+(t.dir>0?0:_-t.tic)),0,Math.PI*2),a.closePath(),a.fill()}a.globalAlpha=1}}},xt=(e="#ba68c8")=>{const{addEventResize:o,useMeasure:a,useTimer:u,useScreenMeta:r,navigate:c,addEventClick:s,intersect:n}=x(),{from:i}=r();let t,d,l;return o(()=>{const{cx:y,cy:f,s:h,m}=a(),g=Math.round(h*.25);t={c:e,r:Math.round(h*.08),x:y-g-1*m,y:f-g+1*m,p:(i==="score"||i==="opening")&&!t},d=R(t),l=L({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),u(()=>{t.p=!1}),s((y,f)=>{n({x:y,y:f},t)&&(t.p=!0,u(()=>{c("score")},100))}),{render:()=>{d(),t.p||l()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ct=(e="#ff6347")=>{const{addEventResize:o,useMeasure:a,useTimer:u,useScreenMeta:r,navigate:c,addEventClick:s,intersect:n}=x(),{from:i}=r();let t,d,l;return o(()=>{const{s:y}=a(),f=Math.round(y*.08);t={c:e,r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:i==="main"&&!t},d=R(t),l=L({x:Number(t.x)-f+Math.round(f*.4),y:Number(t.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),u(()=>{t.p=!1}),s((y,f)=>{n({x:y,y:f},t)&&(t.p=!0,u(()=>{c("main")},100))}),{render:()=>{d(),t.p||l()},point:()=>({x:t.x,y:t.y,r:t.r})}},bt=e=>{const{addEventResize:o,useMeasure:a,useTimer:u,addEventClick:r,intersect:c,rotate:s}=x();let n,i,t;return o(()=>{const{s:p}=a(),M=Math.round(p*.055);n={c:"#ff6347",r:M,x:Math.round(innerWidth-1.6*M),y:Math.round(innerHeight-1.6*M),p:!1},i=R(n),t=L({x:Number(n.x)-M+Math.round(M*.4),y:Number(n.y)-M+Math.round(M*.4),w:M*2-Math.round(M*.8),src:"/media/back.svg"})}),r((p,M)=>{c({x:p,y:M},n)&&(n.p=!0,e(),u(()=>{n.p=!1},100))}),{render:()=>{i(),n.p||s(()=>{t()},n.x,n.y,-.5)},point:()=>({x:n.x,y:n.y,r:n.r})}},Rt=e=>{const{addEventResize:o,useMeasure:a,useTimer:u,addEventClick:r,intersect:c,rotate:s}=x();let n,i,t;return o(()=>{const{s:p}=a(),M=Math.round(p*.055);n={c:"#ff6347",r:M,x:Math.round(innerWidth-1.6*M),y:Math.round(innerHeight-1.6*M-2*M-.3*M),p:!1},i=R(n),t=L({x:Number(n.x)-M+Math.round(M*.4),y:Number(n.y)-M+Math.round(M*.4),w:M*2-Math.round(M*.8),src:"/media/back.svg"})}),r((p,M)=>{c({x:p,y:M},n)&&(n.p=!0,e(),u(()=>{n.p=!1},100))}),{render:()=>{i(),n.p||s(()=>{t()},n.x,n.y,.5)},point:()=>({x:n.x,y:n.y,r:n.r})}},It=e=>{const{ctx:o,shade:a}=x(),u=Math.round(e.r/2.2),r=Math.round(.15*e.r),c=a(e.c||"blue",-3);return(s=o)=>{const{r:n,x:i=n,y:t=n}=e;s.lineCap="round",s.fillStyle=c,s.strokeStyle=c,s.lineWidth=u,s.beginPath(),s.moveTo(i+r,t),s.lineTo(i-r/2,t-r),s.lineTo(i-r/2,t+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(i+r,t),s.lineTo(i-r/2,t-r),s.moveTo(i-r/2,t-r),s.lineTo(i-r/2,t+r),s.moveTo(i-r/2,t+r),s.lineTo(i+r,t),s.stroke()}},ot=({getX:e,getY:o,color:a="#bef181"})=>{const{addEventResize:u,useMeasure:r,useTimer:c,useScreenMeta:s,navigate:n,addEventClick:i,intersect:t}=x(),{from:d}=s();let l,p,M;return u(()=>{const{cx:h,cy:m,s:g,m:E}=r();l={c:a,r:Math.round(g*.1),x:e(h,g,E),y:o(m,g,E),p:(d==="gamescore"||d==="game"||d==="opening")&&!l},p=R(l),M=It(l)}),c(()=>{l.p=!1}),i((h,m)=>{t({x:h,y:m},l)&&(l.p=!0,c(()=>{n("game")},100))}),{render:()=>{p(),l.p||M()},point:()=>({x:l.x,y:l.y,r:l.r})}},rt=e=>{const{ctx:o,shade:a}=x(),u=Math.round(e.r/4),r=Math.round(.12*e.r);return(c=o)=>{const{r:s,x:n=s,y:i=s}=e,t=a(e.c||"blue",-3);c.lineCap="round",c.strokeStyle=t,c.lineWidth=u,c.beginPath(),c.moveTo(n-1.5*r,i-2*r),c.lineTo(n-1.5*r,i+2*r),c.stroke(),c.beginPath(),c.moveTo(n+1.5*r,i-2*r),c.lineTo(n+1.5*r,i+2*r),c.stroke()}},Tt=({getX:e,getY:o})=>{const{addEventResize:a,useMeasure:u,useTimer:r,useScreenMeta:c,navigate:s,addEventClick:n,intersect:i}=x(),{from:t}=c();let d,l,p;return a(()=>{const{cx:f,cy:h,s:m,m:g}=u();d={c:"#fd8059",r:Math.round(m*.08),x:e(f,m,g),y:o(h,m,g),p:(t==="game"||t==="opening")&&!d},l=R(d),p=rt(d)}),r(()=>{d.p=!1}),n((f,h)=>{i({x:f,y:h},d)&&(d.p=!0,r(()=>{s("main")},100))}),{render:()=>{l(),d.p||p()},point:()=>({x:d.x,y:d.y,r:d.r})}},J=e=>{const{font:o,ctx:a}=x();return(u=a)=>{const{text:r,x:c,c:s,y:n,fs:i,a:t="center",mw:d}=e;u.textAlign=t,u.fillStyle=s,u.font=`${i}px ${o}`,u.fillText(r,c,n,d)}},Wt=(e="#f86a9a")=>{const{addEventResize:o,useMeasure:a,useTimer:u,useScreenMeta:r,addEventClick:c,intersect:s,navigate:n}=x(),{from:i}=r();let t,d,l,p;return o(()=>{const{cx:f,cy:h,s:m}=a(),g=Math.round(m*.25);t={c:e,x:f,y:h,r:g,p:i==="opening"&&!t},d=R(t),l=J({text:"Yola",c:"#f1f1f1",x:f,y:h-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2}),p=J({text:"PopiT",c:"#ffeb3b",x:f,y:h-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2})}),u(()=>t.p=!1),c((f,h)=>{s({x:f,y:h},t)&&(t.p=!0,u(()=>{n("opening")},100))}),{render:()=>{d(),t.p||(l(),p())},point:()=>({x:t.x,y:t.y,r:t.r})}},st=({color:e="#00dcfe",frequency:o=25})=>{const{addEventResize:a,useRandChain:u,useMeasure:r,rand:c,useTimer:s,setBackground:n,useScreenMeta:i}=x(),{from:t}=i();n(e);const d=c(0,999);let l=[],p=[];a(()=>{const h=u(d),{s:m}=r();l=[];const g=Math.round(m*.05),E=Math.round(innerWidth/g/2)-1,v=Math.round((innerWidth-2*g*E)/(E+1)),P=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let C=0;C<E;C++)h(h(o))<1&&l.push({x:v+g+C*g*2+v*C,y:w+g+S*g*2+w*S,r:g,c:e,p:t==="opening"?!0:h(1)>0});p=l.map(S=>R(S))});const M=()=>{s(()=>{const h=c(l.length-1);l[h]&&(l[h].p=!l[h].p),M()},750)};return t==="opening"?s(()=>{l.forEach(h=>h.p=c(1)>0),M()}):M(),{render:()=>{p.forEach(h=>h())},setIntersections:h=>{l=l.filter(({x:m,y:g,r:E})=>h(m,g,E)),p=l.map(m=>R(m))}}},Q="ylp",Z="score",tt="difficulty",X=[.14,.11,.09,.075],et=500,Dt=350,nt=5,A=[];for(let e=0;e*nt<=et-Dt;e++)A.push(et-e*nt);const z=()=>{const e=l=>localStorage.getItem(`${Q}_${l}`),o=(l,p)=>localStorage.setItem(`${Q}_${l}`,p.toString()),a=()=>+(e(Z)||0),u=l=>o(Z,l),r=l=>{const p=a();u(p+l)},c=()=>+(e(tt)||0),s=l=>{const p=c();o(tt,Math.min(Math.max(p+l,0),X.length*A.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const l=c(),p=Math.floor(l/A.length);return X[p]||X[1]},getDifficultyTic:()=>{const l=c(),p=Math.floor(l/A.length),M=l-p*A.length;return A[M]||A[0]}}},it=(e=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:u,setBackground:r,rand:c}=x(),{getDifficultyRad:s}=z();return o=[...o.splice(c(o.length-1),o.length),...o],e||a(()=>{const{s:i}=u(),t=s(),d=Math.round(i*t),l=Math.round(innerWidth/d/2)-1,p=(innerWidth-2*d*l)/(l+1),M=Math.round(innerHeight/d/2)-1,y=(innerHeight-2*d*M)/(M+1),f=innerWidth>=innerHeight,h=f?l:M,m=f?p:y,g=f?innerWidth:innerHeight;let E=0;const v=[];for(let w=0;w<h;w++)o[E]||(E=0),v.push(`${o[E]} ${(m+d+w*d*2+m*w)/g*100}%`),E++;r(`linear-gradient(${f?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ct=({palette:e,retry:o})=>{const{addEventResize:a,useMeasure:u,rand:r,useTimer:c,useScreenMeta:s,navigate:n,addEventClick:i,intersect:t}=x(),{from:d}=s(),{getDifficultyRad:l}=z(),p=[];let M=[],y,f,h,m;const g=v=>Array.isArray(e)?e[v]:e;return a(()=>{const{s:v}=u();p.splice(0);const P=l(),w=Math.round(v*P),S=Math.round(innerWidth/w/2)-1,C=(innerWidth-2*w*S)/(S+1),I=Math.round(innerHeight/w/2)-1,b=(innerHeight-2*w*I)/(I+1),D=innerWidth>=innerHeight;let W=0;for(let T=0;T<I;T++){for(let F=0;F<S;F++){g(W)||(W=0);const U={x:C+w+F*w*2+C*F,y:b+w+T*w*2+b*T,r:w,c:g(W),p:!0};T===0&&F===S-1?(m={...U,p:(d==="main"||d==="gameover"||d==="gamescore")&&!m},y=R(m),f=rt(m)):p.push(U),W+=D?1:0}W=D?0:W+1}o&&(h=p[r(p.length-1)],c(()=>{h.p=!1})),M=p.map(T=>R(T))}),c(()=>{m.p=!1}),o&&i((v,P)=>{t({x:v,y:P},h)&&(h.p=!0,c(()=>{n("game")},100))}),i((v,P)=>{t({x:v,y:P},m)&&(m.p=!0,c(()=>{n("main")},100))}),{render:()=>{M.forEach(v=>v()),y(),m!=null&&m.p||f()},popits:p}},H=100,$="#222",Ht=e=>{const o=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,u=(e==null?void 0:e[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(a<255?a<1?0:a:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},j={},At=e=>{const{ctx:o,createImg:a,useRandChain:u,useTimer:r}=x();let c,s=!1,n=[];const i=e.r*2/H/2;j[e.imgSrc]?c=j[e.imgSrc]:(c=j[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},c.img.src=e.imgSrc);const t=()=>r(()=>{s=!s,t()},250),d=(f,h=o)=>{const{x:m,y:g,c:E,r:v}=f;h.fillStyle=E||"red",h.beginPath(),h.arc(m+v,g+v,v,0,Math.PI*2),h.closePath(),h.fill()},l=(f=o,h=0,m=0)=>{f.fillStyle=$,f.beginPath(),f.roundRect(h,m,2*e.r,2*e.r,i),f.closePath(),f.fill()},p=()=>{const f=[];for(let v=0;v<H;v++)for(let P=0;P<H;P++){const w={x:P*i*2,y:v*i*2,r:i,c:$};f.push(w)}let h=e.score-e.winScore;const m=[...f],g=u(0),E=(v=!1)=>{const P=g(m.length-1),w=m[P],S=f.indexOf(w);w.c=v?$:c.cols[S],m.splice(P,1),v&&n.push({...w,c:c.cols[S]})};for(let v=h;v>0;v--)E();if(e.winScore){n=[];for(let v=e.winScore;v>0;v--)E(!0);t()}return f},M=()=>{const f=p();c.drawImg=a((h=o)=>{l(h),f.filter(m=>m.c!==$).forEach(m=>d(m,h))},2*e.r)},y=async()=>{var m;const f=document.createElement("canvas");f.width=H,f.height=H;const h=f.getContext("2d",{willReadFrequently:!0});h==null||h.drawImage(c.img,0,0);for(let g=0;g<H;g++){const E=[];for(let v=0;v<H;v++){const P=(m=h==null?void 0:h.getImageData(v,g,1,1))==null?void 0:m.data;E.push(Ht(P))}c.cols.push(...E)}c.isFilled=!0,M()};return c.isFilled?(c.r!==e.r||c.score!==e.score)&&M():c.img.onload=y,(f=o)=>{const{x:h,y:m,r:g,winScore:E}=e;if(c.drawImg?f.drawImage(c.drawImg,h-g,m-g,2*g,2*g):l(f,h-g,m-g),s&&E&&c.drawImg)for(const v of n)f.fillStyle=v.c||"red",f.beginPath(),f.arc(h-g+v.x+v.r,m-g+v.y+v.r,v.r,0,Math.PI*2),f.closePath(),f.fill()}},q=1e4,at=(e=0)=>{const{addEventResize:o,useMeasure:a,translate:u}=x(),{getScore:r}=z(),c=["/media/cat.png"],s=r();let n,i=0,t=0,d=Math.floor(s/q);return o(()=>{const{cx:f,cy:h,s:m}=a();n=[],i=(m-2*m*.055*1.6)/2,t=m*.05;for(let g=0;g<c.length;g++){const E=c[g];n.push(At({x:f,y:h+g*i*2+g*t,r:i,score:s-g*q<0?0:s-g*q,imgSrc:E,winScore:e}))}}),{up:()=>{d=d+1<c.length?d+1:c.length-1},down:()=>{d=d-1<0?0:d-1},render:()=>{u(()=>{n==null||n.forEach(f=>f())},0,-(d*i*2+d*t))},rect:()=>{const{cx:f,cy:h}=a(),m=innerWidth>innerHeight;return{x:m?f-i:0,y:m?0:h-i,w:m?2*i:innerWidth,h:m?innerHeight:2*i}}}},kt=({popits:e,popEffect:o=()=>{}})=>{const{useTimer:a,rand:u,addEventClick:r,addEventMove:c,intersect:s,navigate:n}=x(),{addScore:i,getDifficultyTic:t}=z();let d=[],l,p,M=!1,y=0,f=0,h=0;const m=t(),g=()=>{const S=e.filter(b=>d.indexOf(b)===-1),C=u(S.length-1),I=S[C];I&&(I.p=!1,d.push(S[C]))},E=()=>{p=a(()=>{if(h-=10,e.length===d.length){M=!0,p.stop(),a(()=>{n("gameover")});return}g(),E()},h)},v=S=>{d=[];const C=e.length;let I=u(Math.round(C*.3),Math.round(C*.6));const b=[...e];if(S){const D=b.indexOf(S);b.splice(D,1)}for(let D=I;D>0;D--){const W=u(b.length-1),T=b[W];T.p=!1,d.push(T),b.splice(W,1)}h=m,l==null||l.stop(),p==null||p.stop(),l=a(E,d.length*m),y=y>0?y:u(3,5)},P=S=>{o(S),h=Math.min(h+5,m),f++,S.p=!0;const C=d.indexOf(S);d.splice(C,1),d.length<=0&&(y--,y>0?v(S):(l==null||l.stop(),p==null||p.stop(),i(f),a(()=>{n("gamescore",{winScore:f})},100)))},w=(S,C,I=!1)=>{if(!M){for(const b of d)if(s({x:S,y:C},b)){P(b);return}I||g()}};r(w),c((S,C)=>w(S,C,!0)),a(()=>{v()})},zt=()=>{const{addEventResize:e,rand:o,useScreenMeta:a}=x(),{from:u}=a(),r=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=u==="opening"?r[0]:r[o(r.length-1)],{render:s,setIntersections:n}=st({color:c}),{render:i,point:t}=Wt(),{render:d,point:l}=ot({getX:(y,f,h)=>y+Math.round(f*.25)+2*h,getY:(y,f,h)=>y+Math.round(f*.25)+0*h}),{render:p,point:M}=xt();return e(()=>{const y=M(),f=t(),h=l();n((m,g,E)=>!k({x:m,y:g,r:E},y)&&!k({x:m,y:g,r:E},f)&&!k({x:m,y:g,r:E},h))}),()=>{s(),i(),d(),p()}},Ft=()=>{const e=it(),{popEffect:o,render:a}=wt(),{popits:u,render:r}=ct({palette:e});return kt({popits:u,popEffect:o}),()=>{a(),r()}},_t=()=>{const e="#ff6347",{setBackground:o}=x(),{minusDifficulty:a}=z(),{render:u}=ct({palette:e,retry:!0});return o(e),a(),()=>{u()}},Lt=()=>{const{translate:e,useScreenMeta:o}=x(),{plusDifficulty:a}=z(),{data:u}=o();it();const{render:r}=at(u==null?void 0:u.winScore),{render:c}=ot({getX:(n,i,t)=>innerWidth>innerHeight?Math.min(n+(i-2*i*.055*1.6)/2+4*t+Math.round(i*.1),innerWidth-2*t-Math.round(i*.1)):n+(i-2*i*.055*1.6)/8+0*Math.round(i*.1)+2*t,getY:(n,i,t)=>innerWidth>innerHeight?n+(i-2*i*.055*1.6)/2-1*t-Math.round(i*.1):Math.min(n+(i-2*i*.055*1.6)/2+4*t+Math.round(i*.1),innerHeight-2*t-Math.round(i*.1))}),{render:s}=Tt({getX:(n,i,t)=>innerWidth>innerHeight?Math.max(n-(i-2*i*.055*1.6)/2-4*t-Math.round(i*.1),2*t+Math.round(i*.1)):n+(i-2*i*.055*1.6)/8-2*Math.round(i*.1)-2*t,getY:(n,i,t)=>innerWidth>innerHeight?n-(i-2*i*.055*1.6)/2+0*t+Math.round(i*.1):Math.min(n+(i-2*i*.055*1.6)/2+4*t+Math.round(i*.1),innerHeight-2*t-Math.round(i*.1))});return a(),()=>{innerHeight>innerWidth?e(r,0,-Math.round(innerHeight*.07)):r(),c(),s()}},$t=()=>{const{addEventResize:e,rand:o}=x(),a=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],u=a[o(a.length-1)],{render:r,setIntersections:c}=st({color:u,frequency:10}),{render:s,rect:n,up:i,down:t}=at(),{render:d,point:l}=Ct(),{point:p}=bt(i),{point:M}=Rt(t);return e(()=>{const y=l(),f=n(),h=p(),m=M();c((g,E,v)=>!k({x:g,y:E,r:v},y)&&!vt({x:g,y:E,r:v},f)&&!k({x:g,y:E,r:v},h)&&!k({x:g,y:E,r:v},m))}),()=>{r(),s(),d()}},Ot=()=>{const{ctx:e,addEventResize:o,loop:a}=x(),u={x:40,y:100};let r=1,c=1,s;const n=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return n(),o(n),a(()=>{u.x+=2*r,u.y+=3*c,r*=-1,c*=-1}),()=>{e.save();var i=Math.random()*2,t=Math.random()*3;e.translate(i,t),e.beginPath(),e.fillStyle="red",e.rect(u.x,u.y,s,s),e.fill(),e.restore()}},Bt=[{name:"opening",ctor:Pt},{name:"main",ctor:zt},{name:"game",ctor:Ft},{name:"gameover",ctor:_t},{name:"gamescore",ctor:Lt},{name:"score",ctor:$t},{name:"devs",ctor:Ot}];St(Bt);document.title="Your's last Pop it";
