(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const Pe=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=i=>{n.clearRect(0,0,innerWidth,innerHeight),i()};return a(),document.body.appendChild(e),{ctx:n,render:h,resize:a,rotate:(i,s,c,g)=>{n.save(),n.translate(s,c),n.rotate(Math.PI*g),n.translate(-s,-c),i(),n.restore()},translate:(i,s,c)=>{n.save(),n.translate(s,c),i(),n.restore()},shade:(i,s)=>{i=i.substring(1);const c=parseInt(i,16),g=Math.round(2.55*s),m=(c>>16)+g,d=(c>>8&255)+g,f=(c&255)+g;return"#"+(16777216+(m<255?m<1?0:m:255)*65536+(d<255?d<1?0:d:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},setBackground:(i,s)=>{var c;document.body.style.background=i,document.body.style.backgroundColor=s||i,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",s||i)},createImg:(i,s,c=s)=>{const g=document.createElement("canvas"),m=g.getContext("2d");if(!m)throw new Error("CanvasRenderingContext2D is null");return g.width=s*devicePixelRatio,g.height=c*devicePixelRatio,m.scale(devicePixelRatio,devicePixelRatio),i(m),g}}},Se=e=>{let n="",a="",h;const o=l=>e.find(u=>u.name===l)||e[0],t={render:()=>{},navigate:(l,u)=>{const i=o(l);a=n||"",n=(i==null?void 0:i.name)||"",h=u,t.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:h})};return t},Ee=()=>{const e=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),n=[],a={};return{loop:(t,l)=>{if(Object.entries(a).find(([i,s])=>s===t)||l&&a[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&n.push(l),l=l||new Date().valueOf().toString(),a[l]=t;const u=()=>{t(),a[l]&&e(u)};u()},stop:t=>{if(typeof t=="string")delete a[t];else{const l=Object.entries(a).find(([u,i])=>i===t);l&&delete a[l[0]]}},stopAll:()=>{for(const t in a)n.indexOf(t)===-1&&delete a[t]}}};let q=[];const we=()=>{for(const e of q)clearTimeout(e);q=[]},Ce=(e,n=400)=>{let a=new Date,h=n,o=setTimeout(e,h);return q.push(o),{pause:()=>{clearTimeout(o),h-=new Date-a},resume:()=>{a=new Date,clearTimeout(o),o=setTimeout(e,h),q.push(o)},stop:()=>{clearTimeout(o)}}},se=2147483646,K=2147483647,xe=16807,be=(e=Math.floor(Math.random()*K))=>{e=e%K,e<=0&&(e+=se);const n=()=>(e=e*xe%K,e),a=()=>(n()-1)/se;return(o,r)=>(r===void 0&&(r=o,o=0),Math.floor(a()*(r-o+1))+o)},Ie=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Re=()=>{const e=[],n=[],a=[];return{addEventResize:s=>{s(),e.push(s)},onResizeEvents:()=>e.forEach(s=>s()),addEventClick:s=>n.push(s),onClickEvents:(s,c)=>n.forEach(g=>g(s,c)),addEventMove:s=>a.push(s),onMoveEvents:(s,c)=>a.forEach(g=>g(s,c)),removeAllEvents:()=>{e.splice(0),n.splice(0),a.splice(0)}}},D=(e,n)=>{const a=Math.pow(Math.abs(e.x-n.x),2),h=Math.pow(Math.abs(e.y-n.y),2),o=e.r||0,r=n.r||0,t=Math.pow(o+r,2);return a+h<=t},Te=(e,n)=>{const a=e.r||0,h=n.w||0,o=n.h||0;return Math.abs(n.x+h/2-e.x)<=h/2+a&&Math.abs(n.y+o/2-e.y)<=o/2+a},We=(e,n)=>D(e,n),ke=e=>{const n=new AudioContext,a={},h=r=>{fetch(r).then(t=>t.arrayBuffer()).then(t=>(n==null?void 0:n.decodeAudioData(t))||null).then(t=>{t&&(a[r]=t)})};if(e.length)for(const r of e)h(r);return r=>{setTimeout(async()=>{const t=n.createBufferSource();a[r]||(a[r]=await fetch(r).then(l=>l.arrayBuffer()).then(l=>(n==null?void 0:n.decodeAudioData(l))||null)),t.buffer=a[r],t.connect(n.destination),t.start()},0)}};let U;const He=(e,n)=>{if(U)throw new Error("Webcore already specified");const a=Pe(),h=Se(e),{loop:o,stop:r,stopAll:t}=Ee(),{addEventResize:l,onResizeEvents:u,addEventClick:i,onClickEvents:s,addEventMove:c,onMoveEvents:g,removeAllEvents:m}=Re();let d=innerWidth/2,f=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight;const y=()=>({cx:d,cy:f,s:p,m:v,isL:M}),P=ke(n);U={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:y,useScreenMeta:h.useScreenMeta,navigate:(S,w)=>{if(!e.some(E=>E.name===S))throw new Error(`Screen ${S} not specified`);t(),we(),m(),new Promise(()=>h.navigate(S,w))},loop:o,loopStop:r,useTimer:Ce,rand:Ie,useRandChain:be,intersect:We,addEventResize:l,addEventClick:i,addEventMove:c,playSound:P},o(()=>a.render(h.render),"draw"),window.onresize=()=>{d=innerWidth/2,f=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight,a.resize(),u()},document.onpointerdown=S=>{s(S.clientX,S.clientY)},document.onmousemove=S=>{g(S.clientX,S.clientY)},h.navigate()},C=()=>{if(!U)throw new Error("Webcore not specified");return{...U}},J={},W=e=>{const{shade:n,ctx:a,createImg:h}=C(),o=()=>{const{r:t,c:l="#ffffff",p:u}=e,i=a.createRadialGradient(t,t,t,t,t,t/5);return i.addColorStop(0,n(l,0)),i.addColorStop(.01,n(l,0)),i.addColorStop(.075,n(l,9)),i.addColorStop(.15,n(l,0)),i.addColorStop(.15,n(l,-15)),i.addColorStop(.18,n(l,-5)),i.addColorStop(.22,n(l,-15)),u?(i.addColorStop(.24,n(l,-10)),i.addColorStop(.3,n(l,-8)),i.addColorStop(.34,n(l,-12)),i.addColorStop(.6,n(l,-6)),i.addColorStop(1,n(l,-4))):(i.addColorStop(.24,n(l,-12)),i.addColorStop(.26,n(l,-8)),i.addColorStop(.3,n(l,-2)),i.addColorStop(.34,n(l,0)),i.addColorStop(.5,n(l,5)),i.addColorStop(1,n(l,12))),i},r=()=>{const{r:t,c:l="#ffffff",p:u}=e,i=`${l}_${u?"push":"pop"}_${t}`;if(J[i])return J[i];const s=h((c=a)=>{const g=o();c.fillStyle=g,c.beginPath(),c.arc(t,t,t,0,2*Math.PI),c.closePath(),c.fill()},2*t);return J[i]=s,s};return(t=a)=>{const{x:l,y:u,r:i}=e,s=r();t.drawImage(s,l-i,u-i,2*i,2*i)}},Q={},N=e=>{const{ctx:n}=C();let a;return Q[e.src]?a=Q[e.src]:(a=new Image,a.src=e.src,Q[e.src]=a),(h=n)=>{const{w:o,h:r=o,x:t=0,y:l=0}=e;a.complete&&h.drawImage(a,t,l,o,r)}},re=e=>{const{font:n,ctx:a}=C(),h=e.text,o=e.text.length,r=2*Math.PI/o/4;return(t=a)=>{const{x:l,y:u,r:i,s=0,fs:c}=e,g=c||Math.round(i/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${g}px ${n}`,t.save(),t.translate(l,u),t.rotate(s);for(let m=0;m<o;m++)t.save(),t.rotate(m*r),t.fillText(h[m],0,-i),t.restore();t.restore()}},De=()=>{var M,y;const{ctx:e,loop:n,rotate:a,navigate:h,useMeasure:o,addEventClick:r,addEventResize:t,setBackground:l}=C();l("#040404");let u=!1,i,s,c,g,m,d=-.2,f=0;t(()=>{const{cx:P,cy:S,s:w}=o(),E=Math.round(w*.25);i={c:"#ff6347",x:P,y:S,r:E,p:!1},s=W(i),c=N({x:P-E+Math.round(E*.35),y:S-E+Math.round(E*.35),w:E*2-Math.round(E*.7),src:"/media/sloth.svg"}),g=re({text:"nezabotin",x:P,y:S,r:Math.round(E*1.1),s:Math.PI*1.6}),m=re({text:"production",x:P,y:S,r:Math.round(E*1.1),s:Math.PI*2.6})});const p=()=>{d+=.01,f=d>=1?1:d,d>=1.8&&(i.p=!0),d>=2.2&&(i.c="#f86a9a"),d>=2.6&&h("main")};r(()=>{[1.4,1.8,2.2,2.6].some(P=>{if(d<P)return d=P,!0})});const v=()=>{n(p),u=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:P,cy:S}=o();e.globalAlpha=u?1:0,s(),d<1.8&&c(),d<1.4&&a(()=>{g(),m()},P,S,f),e.globalAlpha=1}},ie="ylp",ce="score",Z="difficulty",ae="sound",ee=[.14,.11,.09,.075],de=750,Ae=350,le=5,L=[];for(let e=0;e*le<=de-Ae;e++)L.push(de-e*le);let $=null;const A=()=>{const e=d=>localStorage.getItem(`${ie}_${d}`),n=(d,f)=>localStorage.setItem(`${ie}_${d}`,f.toString()),a=()=>+(e(ce)||0),h=d=>n(ce,d),o=d=>{const f=a();h(f+d)},r=()=>+(e(Z)||0),t=d=>{const f=r();n(Z,Math.min(Math.max(f+d,0),ee.length*L.length-1))};return{getScore:a,addScore:o,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const d=r(),f=Math.floor(d/L.length);return ee[f]||ee[1]},getDifficultyTic:()=>{const d=r(),f=Math.floor(d/L.length),p=d-f*L.length;return L[p]||L[0]},resetDifficulty:()=>n(Z,0),getSound:()=>$!==null?$:e(ae)==="true"?($=!0,!0):($=!1,!1),setSound:d=>{$=d,n(ae,d)}}},he=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];let H=[...he];const Y=()=>{const{rand:e,playSound:n}=C(),{getSound:a}=A();return{playPop:()=>{if(!a())return;const l=e(H.length-1),u=H[l];H.splice(l,1),H.length||(H=[...he]);const i=e(H.length-1);H=[...H.splice(i,H.length),...H],n(u)},playMissed:()=>{if(!a())return;n("/sounds/pop7.mp3")},playFail:()=>{if(!a())return;n("/sounds/fail.mp3")},playWin:()=>{if(!a())return;n("/sounds/win.mp3")}}},B=100/2;let ue=0;const G=()=>{const{loop:e,ctx:n,shade:a,rand:h}=C(),{playPop:o,playMissed:r}=Y(),t={},l=()=>{for(const s in t){const c=t[s];if(!c)return;const g=c.popit;if(!c.shake)c.tic+=B/5,c.tic>=B&&(c.dir=-1),c.withoutRad||(g.r=c.origR+c.origR*75e-5*(c.tic+(c.dir>0?0:B-c.tic)));else{c.tic+=B/5;const m=h(1,2),d=h(1,2);g.x=c.origX+Math.random()*m*(Math.random()>.5?1:-1),g.y=c.origY+Math.random()*d*(Math.random()>.5?1:-1)}c.tic>=2*B&&(delete t[s],g.r=c.origR,g.x=c.origX,g.y=c.origY)}},u=(s,c=!1,g=!1)=>{c?r():o(),ue++;const m=`${new Date().valueOf().toString()}_${ue}`,d=1,f=1;t[m]={withoutRad:c,tic:d,dir:f,popit:s,origR:s.r,origX:s.x,origY:s.y,shake:g}},i=()=>{n.globalAlpha=.25;for(const s in t){const c=t[s];if(c.shake)continue;const g=c.popit;n.fillStyle=a(g.c||"red",-12),n.beginPath(),n.arc(g.x,g.y,g.r+c.origR*.001*(c.tic+(c.dir>0?0:B-c.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(l),{popEffect:u,render:i}},ne=e=>{const{font:n,ctx:a}=C();return(h=a)=>{const{text:o,x:r,c:t,y:l,fs:u,a:i="center",mw:s}=e;h.textAlign=i,h.fillStyle=t,h.font=`${u}px ${n}`,h.fillText(o,r,l,s)}},X=100,ze=e=>{const{loop:n,ctx:a,useMeasure:h,rand:o}=C();let r=null;const t=()=>{if(!r)return;const{m:i}=h();if(r.tic<=X)r.props.fs=((e==null?void 0:e.mfs)||8)/X*r.tic*i;else{const s=o(1,1),c=o(1,1);r.props.x=r.origX+Math.random()*s*(Math.random()>.5?1:-1),r.props.y=r.origY+Math.random()*c*(Math.random()>.5?1:-1),r.shake=!0}r.tic+=r.tic>X?1:10,r.tic>X*2},l=i=>{const{cx:s,m:c}=h(),g=0,m={x:s,y:Math.round(c*((e==null?void 0:e.dy)||16)),text:i,c:(e==null?void 0:e.color)||"#ffffff",fs:0},d=ne(m);r={props:m,shape:d,tic:g,origX:m.x,origY:m.y}},u=()=>{r&&(a.globalAlpha=.01*r.tic,r.shape(),a.globalAlpha=1)};return n(t),{splashEffect:l,render:u}},Fe=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:r,navigate:t,addEventClick:l,intersect:u}=C(),{from:i}=r();let s,c,g;return a(()=>{const{cx:f,cy:p,s:v,m:M}=h(),y=Math.round(v*.25);s={c:e,r:Math.round(v*.08),x:f-y-1*M,y:p-y+1*M,p:(i==="score"||i==="opening")&&!s},c=W(s),g=N({x:Number(s.x)-s.r+Math.round(s.r*.5),y:Number(s.y)-s.r+Math.round(s.r*.5),w:s.r*2-Math.round(s.r*1),src:"/media/star.svg"})}),o(()=>{s.p&&n(s,!1,!0),s.p=!1}),l((f,p)=>{u({x:f,y:p},s)&&(n(s),s.p=!0,o(()=>{t("score")},100))}),{render:()=>{c(),s.p||g()},point:()=>({x:s.x,y:s.y,r:s.r})}},Le=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:r,navigate:t,addEventClick:l,intersect:u}=C(),{from:i}=r();let s,c,g;return a(()=>{const{s:f}=h(),p=Math.round(f*.08);s={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:i==="main"&&!s},c=W(s),g=N({x:Number(s.x)-p+Math.round(p*.4),y:Number(s.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),o(()=>{s.p&&n(s,!1,!0),s.p=!1}),l((f,p)=>{u({x:f,y:p},s)&&(n(s),s.p=!0,o(()=>{t("main")},100))}),{render:()=>{c(),s.p||g()},point:()=>({x:s.x,y:s.y,r:s.r})}},_e=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:h,addEventClick:o,intersect:r,rotate:t}=C(),{playPop:l}=Y();let u,i,s;return n(()=>{const{s:m}=a(),d=Math.round(m*.08);u={c:"#ff6347",r:d,x:Math.round(innerWidth-1.6*d),y:Math.round(innerHeight-1.6*d),p:!1},i=W(u),s=N({x:Number(u.x)-d+Math.round(d*.4),y:Number(u.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),o((m,d)=>{r({x:m,y:d},u)&&(l(),u.p=!0,e(),h(()=>{u.p=!1},100))}),{render:()=>{i(),u.p||t(()=>{s()},u.x,u.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:u.x,y:u.y,r:u.r})}},Be=({onClick:e})=>{const{addEventResize:n,useMeasure:a,useTimer:h,addEventClick:o,intersect:r,rotate:t}=C(),{playPop:l}=Y();let u,i,s;return n(()=>{const{s:m}=a(),d=Math.round(m*.08),f=innerWidth<innerHeight?Math.round(innerWidth-1.6*d-2*d-.3*d):Math.round(innerWidth-1.6*d),p=innerWidth<innerHeight?Math.round(innerHeight-1.6*d):Math.round(innerHeight-1.6*d-2*d-.3*d);u={c:"#ff6347",r:d,x:f,y:p,p:!1},i=W(u),s=N({x:Number(u.x)-d+Math.round(d*.4),y:Number(u.y)-d+Math.round(d*.4),w:d*2-Math.round(d*.8),src:"/media/back.svg"})}),o((m,d)=>{r({x:m,y:d},u)&&(l(),u.p=!0,e(),h(()=>{u.p=!1},100))}),{render:()=>{i(),u.p||t(()=>{s()},u.x,u.y,innerHeight>innerWidth?0:.5)},point:()=>({x:u.x,y:u.y,r:u.r})}},Oe=e=>{const{ctx:n,shade:a}=C(),h=Math.round(e.r/2.2),o=Math.round(.15*e.r),r=a(e.c||"blue",-3);return(t=n)=>{const{r:l,x:u=l,y:i=l}=e;t.lineCap="round",t.fillStyle=r,t.strokeStyle=r,t.lineWidth=h,t.beginPath(),t.moveTo(u+o,i),t.lineTo(u-o/2,i-o),t.lineTo(u-o/2,i+o),t.closePath(),t.fill(),t.beginPath(),t.moveTo(u+o,i),t.lineTo(u-o/2,i-o),t.moveTo(u-o/2,i-o),t.lineTo(u-o/2,i+o),t.moveTo(u-o/2,i+o),t.lineTo(u+o,i),t.stroke()}},pe=({getX:e,getY:n,color:a="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:o,useMeasure:r,useTimer:t,useScreenMeta:l,navigate:u,addEventClick:i,intersect:s}=C(),{from:c}=l();let g,m,d;return o(()=>{const{cx:v,cy:M,s:y,m:P}=r();g={c:a,r:Math.round(y*.1),x:e(v,y,P),y:n(M,y,P),p:(c==="gamescore"||c==="game"||c==="opening")&&!g},m=W(g),d=Oe(g)}),t(()=>{g.p&&h(g,!1,!0),g.p=!1}),i((v,M)=>{s({x:v,y:M},g)&&(h(g),g.p=!0,t(()=>{u("game")},100))}),{render:()=>{m(),g.p||d()},point:()=>({x:g.x,y:g.y,r:g.r})}},ge=e=>{const{ctx:n,shade:a}=C(),h=Math.round(e.r/4),o=Math.round(.12*e.r);return(r=n)=>{const{r:t,x:l=t,y:u=t}=e,i=a(e.c||"blue",-3);r.lineCap="round",r.strokeStyle=i,r.lineWidth=h,r.beginPath(),r.moveTo(l-1.5*o,u-2*o),r.lineTo(l-1.5*o,u+2*o),r.stroke(),r.beginPath(),r.moveTo(l+1.5*o,u-2*o),r.lineTo(l+1.5*o,u+2*o),r.stroke()}},$e=({getX:e,getY:n,popEffect:a=()=>{}})=>{const{addEventResize:h,useMeasure:o,useTimer:r,useScreenMeta:t,navigate:l,addEventClick:u,intersect:i}=C(),{from:s}=t();let c,g,m;return h(()=>{const{cx:p,cy:v,s:M,m:y}=o();c={c:"#fd8059",r:Math.round(M*.08),x:e(p,M,y),y:n(v,M,y),p:(s==="game"||s==="opening")&&!c},g=W(c),m=ge(c)}),r(()=>{c.p&&a(c,!1,!0),c.p=!1},500),u((p,v)=>{i({x:p,y:v},c)&&(a(c),c.p=!0,r(()=>{l("main")},100))}),{render:()=>{g(),c.p||m()},point:()=>({x:c.x,y:c.y,r:c.r})}},Ne=e=>{const{ctx:n,shade:a}=C(),h=Math.round(e.r/4),o=Math.round(.2*e.r),r=a(e.c||"blue",-5);return(t=n)=>{const{r:l,x:u=l,y:i=l}=e;t.lineCap="round",t.fillStyle=r,t.strokeStyle=r,t.lineWidth=h,t.beginPath(),t.ellipse(u-o,i+o,h,o,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(u-o/2,i+o),t.lineTo(u,i-o),t.lineTo(u+o,i-o),t.stroke(),e.on||(t.lineWidth=Math.round(h/3),t.beginPath(),t.moveTo(u-l/4,i-l/4),t.lineTo(u+l/4,i+l/4),t.stroke())}},Ye=({color:e="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:r,addEventClick:t,intersect:l}=C(),{from:u}=r(),{getSound:i,setSound:s}=A();let c,g,m;return a(()=>{const{cx:p,cy:v,s:M,m:y}=h(),P=Math.round(M*.25),S=Math.round(M*.065),w=i();c={c:e,r:S,x:p-P-S-y,y:v-P+3*S,p:u==="opening"&&!c,on:w},g=W(c),m=Ne(c)}),o(()=>{c.p&&n(c,!1,!0),c.p=!1}),t((p,v)=>{if(l({x:p,y:v},c)){let M=i();M=!M,s(M),c.p=!0,c.on=M,n(c),o(()=>{c.p=!1},100)}}),{render:()=>{g(),c.p||m()},point:()=>({x:c.x,y:c.y,r:c.r})}},Ge=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:a,useMeasure:h,useTimer:o,useScreenMeta:r,addEventClick:t,intersect:l,navigate:u}=C(),{from:i}=r();let s,c,g,m;return a(()=>{const{cx:p,cy:v,s:M}=h(),y=Math.round(M*.25);s={c:e,x:p,y:v,r:y,p:i==="opening"&&!s},c=W(s),g=ne({text:"Yola",c:"#f1f1f1",x:p,y:v-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),m=ne({text:"PopiT",c:"#ffeb3b",x:p,y:v-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),o(()=>{s.p&&n(s,!1,!0),s.p=!1}),t((p,v)=>{l({x:p,y:v},s)&&(n(s),s.p=!0,o(()=>{u("opening")},100))}),{render:()=>{c(),s.p||(g(),m())},point:()=>({x:s.x,y:s.y,r:s.r})}},me=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:a,useRandChain:h,useMeasure:o,rand:r,useTimer:t,setBackground:l,useScreenMeta:u}=C(),{from:i}=u();l(e);const s=r(0,999);let c=[],g=[];a(()=>{const p=h(s),{s:v}=o();c=[];const M=Math.round(v*.05),y=Math.round(innerWidth/M/2)-1,P=Math.round((innerWidth-2*M*y)/(y+1)),S=Math.round(innerHeight/M/2)-1,w=Math.round((innerHeight-2*M*S)/(S+1));for(let E=0;E<S;E++)for(let x=0;x<y;x++)p(p(n))<1&&c.push({x:P+M+x*M*2+P*x,y:w+M+E*M*2+w*E,r:M,c:e,p:i==="opening"?!0:p(1)>0});g=c.map(E=>W(E))});const m=()=>{t(()=>{const p=r(c.length-1);c[p]&&(c[p].p=!c[p].p),m()},750)};return i==="opening"?t(()=>{c.forEach(p=>p.p=r(1)>0),m()}):m(),{render:()=>{g.forEach(p=>p())},setIntersections:p=>{c=c.filter(({x:v,y:M,r:y})=>p(v,M,y)),g=c.map(v=>W(v))}}},Me=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:h,setBackground:o,rand:r}=C(),{getDifficultyRad:t}=A();return n=[...n.splice(r(n.length-1),n.length),...n],e||a(()=>{const{s:u}=h(),i=t(),s=Math.round(u*i),c=Math.round(innerWidth/s/2)-1,g=(innerWidth-2*s*c)/(c+1),m=Math.round(innerHeight/s/2)-1,d=(innerHeight-2*s*m)/(m+1),f=innerWidth>=innerHeight,p=f?c:m,v=f?g:d,M=f?innerWidth:innerHeight;let y=0;const P=[];for(let w=0;w<p;w++)n[y]||(y=0),P.push(`${n[y]} ${(v+s+w*s*2+v*w)/M*100}%`),y++;o(`linear-gradient(${f?"to right":"to bottom"}, ${P.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ye=({palette:e,retry:n,popEffect:a=()=>{}})=>{const{addEventResize:h,useMeasure:o,rand:r,useTimer:t,useScreenMeta:l,navigate:u,addEventClick:i,intersect:s}=C(),{from:c}=l(),{getDifficultyRad:g}=A(),m=[];let d=[],f,p,v,M;const y=S=>Array.isArray(e)?e[S]:e;return h(()=>{const{s:S}=o();m.splice(0);const w=g(),E=Math.round(S*w),x=Math.round(innerWidth/E/2)-1,_=(innerWidth-2*E*x)/(x+1),z=Math.round(innerHeight/E/2)-1,O=(innerHeight-2*E*z)/(z+1),R=innerWidth>=innerHeight;let I=0;for(let T=0;T<z;T++){for(let b=0;b<x;b++){y(I)||(I=0);const k={x:_+E+b*E*2+_*b,y:O+E+T*E*2+O*T,r:E,c:y(I),p:!0};T===0&&b===x-1?(M={...k,p:(c==="main"||c==="gameover"||c==="gamescore")&&!M},f=W(M),p=ge(M)):m.push(k),I+=R?1:0}I=R?0:I+1}n&&(v=m[r(m.length-1)],t(()=>{a(v,!1,!0),v.p=!1})),d=m.map(T=>W(T))}),t(()=>{M.p&&a(M,!1,!0),M.p=!1}),n&&i((S,w)=>{s({x:S,y:w},v)&&(a(v),v.p=!0,t(()=>{u("game")},100))}),i((S,w)=>{s({x:S,y:w},M)&&(a(M),M.p=!0,t(()=>{u("main")},100))}),{render:()=>{d.forEach(S=>S()),f(),M!=null&&M.p||p()},popits:m}},F=100,j="#222",Xe=e=>{const n=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},te={},je=e=>{const{ctx:n,createImg:a,useRandChain:h,useTimer:o}=C();let r,t=!1,l=[];const u=e.r*2/F/2;te[e.imgSrc]?r=te[e.imgSrc]:(r=te[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},r.img.src=e.imgSrc);const i=()=>o(()=>{t=!t,i()},250),s=(f,p=n)=>{const{x:v,y:M,c:y,r:P}=f;p.fillStyle=y||"red",p.beginPath(),p.arc(v+P,M+P,P,0,Math.PI*2),p.closePath(),p.fill()},c=(f=n,p=0,v=0)=>{f.fillStyle=j,f.beginPath(),f.roundRect(p,v,2*e.r,2*e.r,u),f.closePath(),f.fill()},g=()=>{const f=[];for(let P=0;P<F;P++)for(let S=0;S<F;S++){const w={x:S*u*2,y:P*u*2,r:u,c:j};f.push(w)}let p=e.score-e.winScore;const v=[...f],M=h(e.seed),y=(P=!1)=>{const S=M(v.length-1),w=v[S],E=f.indexOf(w);w.c=P?j:r.cols[E],v.splice(S,1),P&&l.push({...w,c:r.cols[E]})};for(let P=p;P>0;P--)y();if(e.winScore){l=[];for(let P=e.winScore;P>0;P--)y(!0);i()}return f},m=()=>{const f=g();r.drawImg=a((p=n)=>{c(p),f.filter(v=>v.c!==j).forEach(v=>s(v,p))},2*e.r)},d=async()=>{var v;const f=document.createElement("canvas");f.width=F,f.height=F;const p=f.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(r.img,0,0);for(let M=0;M<F;M++){const y=[];for(let P=0;P<F;P++){const S=(v=p==null?void 0:p.getImageData(P,M,1,1))==null?void 0:v.data;y.push(Xe(S))}r.cols.push(...y)}r.isFilled=!0,m()};return r.isFilled?(r.r!==e.r||r.score!==e.score)&&m():r.img.onload=d,(f=n)=>{const{x:p,y:v,r:M,winScore:y}=e;if(r.drawImg?f.drawImage(r.drawImg,p-M,v-M,2*M,2*M):c(f,p-M,v-M),t&&y&&r.drawImg)for(const P of l)f.fillStyle=P.c||"red",f.beginPath(),f.arc(p-M+P.x+P.r,v-M+P.y+P.r,P.r,0,Math.PI*2),f.closePath(),f.fill()}},fe=1e4,ve=(e=0,n=!1)=>{const{addEventResize:a,useMeasure:h,translate:o}=C(),{getScore:r}=A(),t=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=r();let u,i=0,s=0,c=!1,g=!1;const m=y=>Math.min(Math.floor(y/fe),t.length-1);let d=m(l-e);if(e){const y=m(l);c=y!==d,g=y>t.length-1}return a(()=>{const{cx:y,cy:P,s:S,isL:w}=h();u=[],i=(S-2*S*.055*1.6)/2,s=S*.05;let E=n?d:0;for(E;E<(n?d+1:t.length);E++){const x=t[E],_=w?y:y+E*i*2+E*s,z=w?P+E*i*2+E*s:P;u.push(je({x:_,y:z,r:i,score:Math.min(l-E*fe,1e4),imgSrc:x,winScore:e,seed:E}))}}),{up:()=>{d=d+1<t.length?d+1:t.length-1},down:()=>{d=d-1<0?0:d-1},render:()=>{const{isL:y}=h(),P=y?0:-(d*i*2+d*s),S=y?-(d*i*2+d*s):0;o(()=>{u==null||u.forEach(w=>w())},P,S)},rect:()=>{const{cx:y,cy:P}=h(),S=innerWidth>innerHeight;return{x:S?y-i:0,y:S?0:P-i,w:S?2*i:innerWidth,h:S?innerHeight:2*i}},isJump:c,isCompleted:g}},qe=({popits:e,popEffect:n=()=>{},splashEffect:a=()=>{}})=>{const{useTimer:h,rand:o,addEventClick:r,addEventMove:t,intersect:l,navigate:u,addEventResize:i}=C(),{getScore:s,addScore:c,getDifficultyTic:g}=A();let m=[],d,f,p=!1,v=0,M=0,y=0;const P=s(),S=g(),w=R=>{const I=e.filter(k=>m.indexOf(k)===-1&&k!==R),T=o(I.length-1),b=I[T];b&&(n(b,!1,!0),b.p=!1,m.push(I[T]))},E=()=>{f=h(()=>{if(y=Math.max(y-10,50),e.length===m.length){p=!0,f.stop(),h(()=>{u("gameover")});return}w(),E()},y)},x=R=>{m=[];const I=e.length;let T=o(Math.round(I*.3),Math.round(I*.6));const b=[...e];if(R){const k=b.indexOf(R);b.splice(k,1)}for(let k=T;k>0;k--){const oe=o(b.length-1),V=b[oe];V.p=!1,n(V,!1,!0),m.push(V),b.splice(oe,1)}y=S,d==null||d.stop(),f==null||f.stop(),P&&(d=h(()=>{a("SLOWLY"),E()},m.length*S)),v=v>0?v:o(3,5)},_=()=>1,z=R=>{n(R),y=Math.min(y+5,S),M++,R.p=!0;const I=m.indexOf(R);if(m.splice(I,1),m.length<=0)if(v--,v>0)h(()=>{a("Round"),x(R)},100);else{d==null||d.stop(),f==null||f.stop();const T=_();c(M*T),h(()=>{u("gamescore",{winScore:M*T})},100)}},O=(R,I,T=!1)=>{if(!p){for(const b of m)if(l({x:R,y:I},b)){z(b);return}if(!T){for(const b of e)if(l({x:R,y:I},b)){n(b,!0),a("Popenalty"),w(b);return}a("Popenalty"),w()}}};r(O),t((R,I)=>O(R,I,!0)),i(()=>{h(()=>{a("Pop it"),x()})})},Ue=()=>{const{addEventResize:e,rand:n,useScreenMeta:a}=C(),{from:h}=a(),{popEffect:o,render:r}=G(),t=["#00dcfe","#5bb2f7","#92E6E6"],l=h==="opening"?t[0]:t[n(t.length-1)],{render:u,setIntersections:i}=me({color:l}),{render:s,point:c}=Ge({popEffect:o}),{render:g,point:m}=pe({getX:(M,y,P)=>M+Math.round(y*.25)+2*P,getY:(M,y,P)=>M+Math.round(y*.25)+0*P,popEffect:o}),{render:d,point:f}=Fe({popEffect:o}),{render:p,point:v}=Ye({popEffect:o});return e(()=>{const M=f(),y=c(),P=m(),S=v();i((w,E,x)=>!D({x:w,y:E,r:x},M)&&!D({x:w,y:E,r:x},y)&&!D({x:w,y:E,r:x},P)&&!D({x:w,y:E,r:x},S))}),()=>{r(),u(),s(),g(),d(),p()}},Ve=()=>{const{useMeasure:e,addEventResize:n}=C(),a=Me(),{popEffect:h,render:o}=G(),{popits:r,render:t}=ye({palette:a,popEffect:h});return qe({popits:r,popEffect:h}),n(()=>{(r[0].y-r[0].r)/e().m}),()=>{o(),t()}},Ke=()=>{const e="#ff6347",{popEffect:n,render:a}=G(),{setBackground:h}=C(),{minusDifficulty:o}=A(),{render:r}=ye({palette:e,retry:!0,popEffect:n}),{playFail:t}=Y();return h(e),o(),t(),()=>{a(),r()}},Je=()=>{const{translate:e,useScreenMeta:n}=C(),{plusDifficulty:a,resetDifficulty:h}=A(),{data:o}=n(),{popEffect:r,render:t}=G(),{splashEffect:l,render:u}=ze({infinity:!0});Me();const{playWin:i}=Y(),{render:s,isJump:c}=ve(o==null?void 0:o.winScore,!0),{render:g}=pe({getX:(d,f,p)=>innerWidth>innerHeight?Math.min(d+(f-2*f*.055*1.6)/2+4*p+Math.round(f*.1),innerWidth-2*p-Math.round(f*.1)):d+(f-2*f*.055*1.6)/8+0*Math.round(f*.1)+2*p,getY:(d,f,p)=>innerWidth>innerHeight?d+(f-2*f*.055*1.6)/2-1*p-Math.round(f*.1):Math.min(d+(f-2*f*.055*1.6)/2+4*p+Math.round(f*.1),innerHeight-2*p-Math.round(f*.1)),popEffect:r}),{render:m}=$e({getX:(d,f,p)=>innerWidth>innerHeight?Math.max(d-(f-2*f*.055*1.6)/2-4*p-Math.round(f*.1),2*p+Math.round(f*.1)):d+(f-2*f*.055*1.6)/8-2*Math.round(f*.1)-2*p,getY:(d,f,p)=>innerWidth>innerHeight?d-(f-2*f*.055*1.6)/2+0*p+Math.round(f*.1):Math.min(d+(f-2*f*.055*1.6)/2+4*p+Math.round(f*.1),innerHeight-2*p-Math.round(f*.1)),popEffect:r});return c?h():a(),innerHeight>innerWidth&&l(c?"Completed":"You win"),i(),()=>{t(),innerHeight>innerWidth?e(s,0,-Math.round(innerHeight*.05)):s(),g(),m(),u()}},Qe=()=>{const{addEventResize:e,rand:n}=C(),{popEffect:a,render:h}=G(),o=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],r=o[n(o.length-1)],{render:t,setIntersections:l}=me({color:r,frequency:10}),{render:u,rect:i,up:s,down:c}=ve(),{render:g,point:m}=Le({popEffect:a}),{render:d,point:f}=_e({onClick:s,popEffect:a}),{render:p,point:v}=Be({onClick:c,popEffect:a});return e(()=>{const M=m(),y=i(),P=f(),S=v();l((w,E,x)=>!D({x:w,y:E,r:x},M)&&!Te({x:w,y:E,r:x},y)&&!D({x:w,y:E,r:x},P)&&!D({x:w,y:E,r:x},S))}),()=>{h(),t(),u(),g(),d(),p()}},Ze=()=>{const{ctx:e,addEventResize:n,loop:a}=C(),h={x:40,y:100};let o=1,r=1,t;const l=()=>{t=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return l(),n(l),a(()=>{h.x+=2*o,h.y+=3*r,o*=-1,r*=-1}),()=>{e.save();var u=Math.random()*2,i=Math.random()*3;e.translate(u,i),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,t,t),e.fill(),e.restore()}},et=[{name:"opening",ctor:De},{name:"main",ctor:Ue},{name:"game",ctor:Ve},{name:"gameover",ctor:Ke},{name:"gamescore",ctor:Je},{name:"score",ctor:Qe},{name:"devs",ctor:Ze}],tt=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop7.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3","/sounds/fail.mp3","/sounds/win.mp3"];He(et,tt);document.title="Your's last Pop it";
