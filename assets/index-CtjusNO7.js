(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function d(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(r){if(r.ep)return;r.ep=!0;const c=d(r);fetch(r.href,c)}})();const dt=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},u=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return d(),document.body.appendChild(e),{ctx:n,render:u,resize:d,rotate:(t,a,l,p)=>{n.save(),n.translate(a,l),n.rotate(Math.PI*p),n.translate(-a,-l),t(),n.restore()},translate:(t,a,l)=>{n.save(),n.translate(a,l),t(),n.restore()},shade:(t,a)=>{t=t.substring(1);const l=parseInt(t,16),p=Math.round(2.55*a),M=(l>>16)+p,y=(l>>8&255)+p,f=(l&255)+p;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(y<255?y<1?0:y:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},setBackground:(t,a)=>{var l;document.body.style.background=t,document.body.style.backgroundColor=a||t,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",a||t)},createImg:(t,a,l=a)=>{const p=document.createElement("canvas"),M=p.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return p.width=a*devicePixelRatio,p.height=l*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),t(M),p}}},lt=e=>{let n="",d="",u;const r=o=>e.find(i=>i.name===o)||e[0],s={render:()=>{},navigate:(o,i)=>{const t=r(o);d=n||"",n=(t==null?void 0:t.name)||"",u=i,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:d,data:u})};return s},ut=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),n=[],d={};return{loop:(s,o)=>{if(Object.entries(d).find(([t,a])=>a===s)||o&&d[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&n.push(o),o=o||new Date().valueOf().toString(),d[o]=s;const i=()=>{s(),d[o]&&e(i)};i()},stop:s=>{if(typeof s=="string")delete d[s];else{const o=Object.entries(d).find(([i,t])=>t===s);o&&delete d[o[0]]}},stopAll:()=>{for(const s in d)n.indexOf(s)===-1&&delete d[s]}}};let O=[];const ft=()=>{for(const e of O)clearTimeout(e);O=[]},ht=(e,n=400)=>{let d=new Date,u=n,r=setTimeout(e,u);return O.push(r),{pause:()=>{clearTimeout(r),u-=new Date-d},resume:()=>{d=new Date,clearTimeout(r),r=setTimeout(e,u),O.push(r)},stop:()=>{clearTimeout(r)}}},V=2147483646,N=2147483647,pt=16807,gt=(e=Math.floor(Math.random()*N))=>{e=e%N,e<=0&&(e+=V);const n=()=>(e=e*pt%N,e),d=()=>(n()-1)/V;return(r,c)=>(c===void 0&&(c=r,r=0),Math.floor(d()*(c-r+1))+r)},mt=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Mt=()=>{const e=[],n=[],d=[];return{addEventResize:a=>{a(),e.push(a)},onResizeEvents:()=>e.forEach(a=>a()),addEventClick:a=>n.push(a),onClickEvents:(a,l)=>n.forEach(p=>p(a,l)),addEventMove:a=>d.push(a),onMoveEvents:(a,l)=>d.forEach(p=>p(a,l)),removeAllEvents:()=>{e.splice(0),n.splice(0),d.splice(0)}}},k=(e,n)=>{const d=Math.pow(Math.abs(e.x-n.x),2),u=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,c=n.r||0,s=Math.pow(r+c,2);return d+u<=s},vt=(e,n)=>{const d=e.r||0,u=n.w||0,r=n.h||0;return Math.abs(n.x+u/2-e.x)<=u/2+d&&Math.abs(n.y+r/2-e.y)<=r/2+d},yt=(e,n)=>k(e,n),Et=e=>{const n={},d=r=>{const c=r.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const r of e){const c=new Audio(r);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const s=d(r);n[s]={audio:c,path:r}}})(),r=>{var i,t;const c=(i=n[r])==null?void 0:i.audio,s=(t=n[r])==null?void 0:t.path;if(!(!c||!s))if(c.currentTime===0)c.play();else{var o=new Audio(s);o.volume=.25,o.play()}}};let B;const St=(e,n)=>{if(B)throw new Error("Webcore already specified");const d=dt(),u=lt(e),{loop:r,stop:c,stopAll:s}=ut(),{addEventResize:o,onResizeEvents:i,addEventClick:t,onClickEvents:a,addEventMove:l,onMoveEvents:p,removeAllEvents:M}=Mt();let y=innerWidth/2,f=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:y,cy:f,s:h,m}),E=Et([]);B={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:g,useScreenMeta:u.useScreenMeta,navigate:(v,P)=>{if(!e.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);s(),ft(),M(),new Promise(()=>u.navigate(v,P))},loop:r,loopStop:c,useTimer:ht,rand:mt,useRandChain:gt,intersect:yt,addEventResize:o,addEventClick:t,addEventMove:l,playAudio:E},r(()=>d.render(u.render),"draw"),window.onresize=()=>{y=innerWidth/2,f=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),d.resize(),i()},document.onpointerdown=v=>{a(v.clientX,v.clientY)},document.onmousemove=v=>{p(v.clientX,v.clientY)},u.navigate()},x=()=>{if(!B)throw new Error("Webcore not specified");return{...B}},G={},I=e=>{const{shade:n,ctx:d,createImg:u}=x(),r=()=>{const{r:s,c:o="#ffffff",p:i}=e,t=d.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,n(o,0)),t.addColorStop(.01,n(o,0)),t.addColorStop(.075,n(o,9)),t.addColorStop(.15,n(o,0)),t.addColorStop(.15,n(o,-15)),t.addColorStop(.18,n(o,-5)),t.addColorStop(.22,n(o,-15)),i?(t.addColorStop(.24,n(o,-10)),t.addColorStop(.3,n(o,-8)),t.addColorStop(.34,n(o,-12)),t.addColorStop(.6,n(o,-6)),t.addColorStop(1,n(o,-4))):(t.addColorStop(.24,n(o,-12)),t.addColorStop(.26,n(o,-8)),t.addColorStop(.3,n(o,-2)),t.addColorStop(.34,n(o,0)),t.addColorStop(.5,n(o,5)),t.addColorStop(1,n(o,10))),t},c=()=>{const{r:s,c:o="#ffffff",p:i}=e,t=`${o}_${i?"push":"pop"}_${s}`;if(G[t])return G[t];const a=u((l=d)=>{const p=r();l.fillStyle=p,l.beginPath(),l.arc(s,s,s,0,2*Math.PI),l.closePath(),l.fill()},2*s);return G[t]=a,a};return(s=d)=>{const{x:o,y:i,r:t}=e,a=c();s.drawImage(a,o-t,i-t,2*t,2*t)}},Y={},_=e=>{const{ctx:n}=x();let d;return Y[e.src]?d=Y[e.src]:(d=new Image,d.src=e.src,Y[e.src]=d),(u=n)=>{const{w:r,h:c=r,x:s=0,y:o=0}=e;d.complete&&u.drawImage(d,s,o,r,c)}},K=e=>{const{font:n,ctx:d}=x(),u=e.text,r=e.text.length,c=2*Math.PI/r/4;return(s=d)=>{const{x:o,y:i,r:t,s:a=0,fs:l}=e,p=l||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${p}px ${n}`,s.save(),s.translate(o,i),s.rotate(a);for(let M=0;M<r;M++)s.save(),s.rotate(M*c),s.fillText(u[M],0,-t),s.restore();s.restore()}},Pt=()=>{var g,E;const{ctx:e,loop:n,rotate:d,navigate:u,useMeasure:r,addEventClick:c,addEventResize:s,setBackground:o}=x();o("#040404");let i=!1,t,a,l,p,M,y=-.2,f=0;s(()=>{const{cx:v,cy:P,s:w}=r(),S=Math.round(w*.25);t={c:"#ff6347",x:v,y:P,r:S,p:!1},a=I(t),l=_({x:v-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),p=K({text:"nezabotin",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),M=K({text:"production",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const h=()=>{y+=.01,f=y>=1?1:y,y>=1.8&&(t.p=!0),y>=2.2&&(t.c="#f86a9a"),y>=2.6&&u("main")};c(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(y<v)return y=v,!0})});const m=()=>{n(h),i=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(m):m(),()=>{const{cx:v,cy:P}=r();e.globalAlpha=i?1:0,a(),y<1.8&&l(),y<1.4&&d(()=>{p(),M()},v,P,f),e.globalAlpha=1}},L=250/2,wt=()=>{const{loop:e,ctx:n,loopStop:d,shade:u}=x(),r={},c=i=>{const t=r[i];t&&(t.tic+=L/5,t.tic>=L&&(t.dir=-1),t.tic>=2*L&&(d(t.loopEffect),delete r[i]))};return{popEffect:i=>{const t=new Date().valueOf().toString(),a=()=>c(t),l=1,p=1;r[t]={loopEffect:a,tic:l,dir:p,popit:i},e(a)},render:()=>{n.globalAlpha=.25;for(const i in r){const t=r[i],a=t.popit;n.fillStyle=u(a.c||"red",-16),n.beginPath(),n.arc(a.x,a.y,a.r+a.r*.001*(t.tic+(t.dir>0?0:L-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1}}},xt=(e="#ba68c8")=>{const{addEventResize:n,useMeasure:d,useTimer:u,useScreenMeta:r,navigate:c,addEventClick:s,intersect:o}=x(),{from:i}=r();let t,a,l;return n(()=>{const{cx:y,cy:f,s:h,m}=d(),g=Math.round(h*.25);t={c:e,r:Math.round(h*.08),x:y-g-1*m,y:f-g+1*m,p:(i==="score"||i==="opening")&&!t},a=I(t),l=_({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),u(()=>{t.p=!1}),s((y,f)=>{o({x:y,y:f},t)&&(t.p=!0,u(()=>{c("score")},100))}),{render:()=>{a(),t.p||l()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ct=(e="#ff6347")=>{const{addEventResize:n,useMeasure:d,useTimer:u,useScreenMeta:r,navigate:c,addEventClick:s,intersect:o}=x(),{from:i}=r();let t,a,l;return n(()=>{const{s:y}=d(),f=Math.round(y*.08);t={c:e,r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:i==="main"&&!t},a=I(t),l=_({x:Number(t.x)-f+Math.round(f*.4),y:Number(t.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),u(()=>{t.p=!1}),s((y,f)=>{o({x:y,y:f},t)&&(t.p=!0,u(()=>{c("main")},100))}),{render:()=>{a(),t.p||l()},point:()=>({x:t.x,y:t.y,r:t.r})}},bt=e=>{const{addEventResize:n,useMeasure:d,useTimer:u,addEventClick:r,intersect:c,rotate:s}=x();let o,i,t;return n(()=>{const{s:p}=d(),M=Math.round(p*.055);o={c:"#ff6347",r:M,x:Math.round(innerWidth-1.6*M),y:Math.round(innerHeight-1.6*M),p:!1},i=I(o),t=_({x:Number(o.x)-M+Math.round(M*.4),y:Number(o.y)-M+Math.round(M*.4),w:M*2-Math.round(M*.8),src:"/media/back.svg"})}),r((p,M)=>{c({x:p,y:M},o)&&(o.p=!0,e(),u(()=>{o.p=!1},100))}),{render:()=>{i(),o.p||s(()=>{t()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},It=e=>{const{addEventResize:n,useMeasure:d,useTimer:u,addEventClick:r,intersect:c,rotate:s}=x();let o,i,t;return n(()=>{const{s:p}=d(),M=Math.round(p*.055);o={c:"#ff6347",r:M,x:Math.round(innerWidth-1.6*M),y:Math.round(innerHeight-1.6*M-2*M-.3*M),p:!1},i=I(o),t=_({x:Number(o.x)-M+Math.round(M*.4),y:Number(o.y)-M+Math.round(M*.4),w:M*2-Math.round(M*.8),src:"/media/back.svg"})}),r((p,M)=>{c({x:p,y:M},o)&&(o.p=!0,e(),u(()=>{o.p=!1},100))}),{render:()=>{i(),o.p||s(()=>{t()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},Rt=e=>{const{ctx:n,shade:d}=x(),u=Math.round(e.r/2.2),r=Math.round(.15*e.r),c=d(e.c||"blue",-3);return(s=n)=>{const{r:o,x:i=o,y:t=o}=e;s.lineCap="round",s.fillStyle=c,s.strokeStyle=c,s.lineWidth=u,s.beginPath(),s.moveTo(i+r,t),s.lineTo(i-r/2,t-r),s.lineTo(i-r/2,t+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(i+r,t),s.lineTo(i-r/2,t-r),s.moveTo(i-r/2,t-r),s.lineTo(i-r/2,t+r),s.moveTo(i-r/2,t+r),s.lineTo(i+r,t),s.stroke()}},ot=({getX:e,getY:n,color:d="#bef181"})=>{const{addEventResize:u,useMeasure:r,useTimer:c,useScreenMeta:s,navigate:o,addEventClick:i,intersect:t}=x(),{from:a}=s();let l,p,M;return u(()=>{const{cx:h,cy:m,s:g,m:E}=r();l={c:d,r:Math.round(g*.1),x:e(h,g,E),y:n(m,g,E),p:(a==="gamescore"||a==="game"||a==="opening")&&!l},p=I(l),M=Rt(l)}),c(()=>{l.p=!1}),i((h,m)=>{t({x:h,y:m},l)&&(l.p=!0,c(()=>{o("game")},100))}),{render:()=>{p(),l.p||M()},point:()=>({x:l.x,y:l.y,r:l.r})}},rt=e=>{const{ctx:n,shade:d}=x(),u=Math.round(e.r/4),r=Math.round(.12*e.r);return(c=n)=>{const{r:s,x:o=s,y:i=s}=e,t=d(e.c||"blue",-3);c.lineCap="round",c.strokeStyle=t,c.lineWidth=u,c.beginPath(),c.moveTo(o-1.5*r,i-2*r),c.lineTo(o-1.5*r,i+2*r),c.stroke(),c.beginPath(),c.moveTo(o+1.5*r,i-2*r),c.lineTo(o+1.5*r,i+2*r),c.stroke()}},Tt=({getX:e,getY:n})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:c,navigate:s,addEventClick:o,intersect:i}=x(),{from:t}=c();let a,l,p;return d(()=>{const{cx:f,cy:h,s:m,m:g}=u();a={c:"#fd8059",r:Math.round(m*.08),x:e(f,m,g),y:n(h,m,g),p:(t==="game"||t==="opening")&&!a},l=I(a),p=rt(a)}),r(()=>{a.p=!1}),o((f,h)=>{i({x:f,y:h},a)&&(a.p=!0,r(()=>{s("main")},100))}),{render:()=>{l(),a.p||p()},point:()=>({x:a.x,y:a.y,r:a.r})}},J=e=>{const{font:n,ctx:d}=x();return(u=d)=>{const{text:r,x:c,c:s,y:o,fs:i,a:t="center",mw:a}=e;u.textAlign=t,u.fillStyle=s,u.font=`${i}px ${n}`,u.fillText(r,c,o,a)}},Wt=(e="#f86a9a")=>{const{addEventResize:n,useMeasure:d,useTimer:u,useScreenMeta:r,addEventClick:c,intersect:s,navigate:o}=x(),{from:i}=r();let t,a,l,p;return n(()=>{const{cx:f,cy:h,s:m}=d(),g=Math.round(m*.25);t={c:e,x:f,y:h,r:g,p:i==="opening"&&!t},a=I(t),l=J({text:"Yola",c:"#f1f1f1",x:f,y:h-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2}),p=J({text:"PopiT",c:"#ffeb3b",x:f,y:h-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2})}),u(()=>t.p=!1),c((f,h)=>{s({x:f,y:h},t)&&(t.p=!0,u(()=>{o("opening")},100))}),{render:()=>{a(),t.p||(l(),p())},point:()=>({x:t.x,y:t.y,r:t.r})}},st=({color:e="#00dcfe",frequency:n=25})=>{const{addEventResize:d,useRandChain:u,useMeasure:r,rand:c,useTimer:s,setBackground:o,useScreenMeta:i}=x(),{from:t}=i();o(e);const a=c(0,999);let l=[],p=[];d(()=>{const h=u(a),{s:m}=r();l=[];const g=Math.round(m*.05),E=Math.round(innerWidth/g/2)-1,v=Math.round((innerWidth-2*g*E)/(E+1)),P=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let C=0;C<E;C++)h(h(n))<1&&l.push({x:v+g+C*g*2+v*C,y:w+g+S*g*2+w*S,r:g,c:e,p:t==="opening"?!0:h(1)>0});p=l.map(S=>I(S))});const M=()=>{s(()=>{const h=c(l.length-1);l[h]&&(l[h].p=!l[h].p),M()},750)};return t==="opening"?s(()=>{l.forEach(h=>h.p=c(1)>0),M()}):M(),{render:()=>{p.forEach(h=>h())},setIntersections:h=>{l=l.filter(({x:m,y:g,r:E})=>h(m,g,E)),p=l.map(m=>I(m))}}},Q="ylp",Z="score",tt="difficulty",X=[.14,.11,.09,.075],et=500,Dt=350,nt=5,A=[];for(let e=0;e*nt<=et-Dt;e++)A.push(et-e*nt);const z=()=>{const e=l=>localStorage.getItem(`${Q}_${l}`),n=(l,p)=>localStorage.setItem(`${Q}_${l}`,p.toString()),d=()=>+(e(Z)||0),u=l=>n(Z,l),r=l=>{const p=d();u(p+l)},c=()=>+(e(tt)||0),s=l=>{const p=c();n(tt,Math.min(Math.max(p+l,0),X.length*A.length-1))};return{getScore:d,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const l=c(),p=Math.floor(l/A.length);return X[p]||X[1]},getDifficultyTic:()=>{const l=c(),p=Math.floor(l/A.length),M=l-p*A.length;return A[M]||A[0]}}},it=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:u,setBackground:r,rand:c}=x(),{getDifficultyRad:s}=z();return n=[...n.splice(c(n.length-1),n.length),...n],e||d(()=>{const{s:i}=u(),t=s(),a=Math.round(i*t),l=Math.round(innerWidth/a/2)-1,p=(innerWidth-2*a*l)/(l+1),M=Math.round(innerHeight/a/2)-1,y=(innerHeight-2*a*M)/(M+1),f=innerWidth>=innerHeight,h=f?l:M,m=f?p:y,g=f?innerWidth:innerHeight;let E=0;const v=[];for(let w=0;w<h;w++)n[E]||(E=0),v.push(`${n[E]} ${(m+a+w*a*2+m*w)/g*100}%`),E++;r(`linear-gradient(${f?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ct=({palette:e,retry:n})=>{const{addEventResize:d,useMeasure:u,rand:r,useTimer:c,useScreenMeta:s,navigate:o,addEventClick:i,intersect:t}=x(),{from:a}=s(),{getDifficultyRad:l}=z(),p=[];let M=[],y,f,h,m;const g=v=>Array.isArray(e)?e[v]:e;return d(()=>{const{s:v}=u();p.splice(0);const P=l(),w=Math.round(v*P),S=Math.round(innerWidth/w/2)-1,C=(innerWidth-2*w*S)/(S+1),R=Math.round(innerHeight/w/2)-1,b=(innerHeight-2*w*R)/(R+1),D=innerWidth>=innerHeight;let W=0;for(let T=0;T<R;T++){for(let F=0;F<S;F++){g(W)||(W=0);const U={x:C+w+F*w*2+C*F,y:b+w+T*w*2+b*T,r:w,c:g(W),p:!0};T===0&&F===S-1?(m={...U,p:(a==="main"||a==="gameover"||a==="gamescore")&&!m},y=I(m),f=rt(m)):p.push(U),W+=D?1:0}W=D?0:W+1}n&&(h=p[r(p.length-1)],c(()=>{h.p=!1})),M=p.map(T=>I(T))}),c(()=>{m.p=!1}),n&&i((v,P)=>{t({x:v,y:P},h)&&(h.p=!0,c(()=>{o("game")},100))}),i((v,P)=>{t({x:v,y:P},m)&&(m.p=!0,c(()=>{o("main")},100))}),{render:()=>{M.forEach(v=>v()),y(),m!=null&&m.p||f()},popits:p}},H=100,$="#222",Ht=e=>{const n=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,u=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(d<255?d<1?0:d:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},j={},At=e=>{const{ctx:n,createImg:d,useRandChain:u,useTimer:r}=x();let c,s=!1,o=[];const i=e.r*2/H/2;j[e.imgSrc]?c=j[e.imgSrc]:(c=j[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},c.img.src=e.imgSrc);const t=()=>r(()=>{s=!s,t()},250),a=(f,h=n)=>{const{x:m,y:g,c:E,r:v}=f;h.fillStyle=E||"red",h.beginPath(),h.arc(m+v,g+v,v,0,Math.PI*2),h.closePath(),h.fill()},l=(f=n,h=0,m=0)=>{f.fillStyle=$,f.beginPath(),f.roundRect(h,m,2*e.r,2*e.r,i),f.closePath(),f.fill()},p=()=>{const f=[];for(let v=0;v<H;v++)for(let P=0;P<H;P++){const w={x:P*i*2,y:v*i*2,r:i,c:$};f.push(w)}let h=e.score-e.winScore;const m=[...f],g=u(0),E=(v=!1)=>{const P=g(m.length-1),w=m[P],S=f.indexOf(w);w.c=v?$:c.cols[S],m.splice(P,1),v&&o.push({...w,c:c.cols[S]})};for(let v=h;v>0;v--)E();if(e.winScore){o=[];for(let v=e.winScore;v>0;v--)E(!0);t()}return f},M=()=>{const f=p();c.drawImg=d((h=n)=>{l(h),f.filter(m=>m.c!==$).forEach(m=>a(m,h))},2*e.r)},y=async()=>{var m;const f=document.createElement("canvas");f.width=H,f.height=H;const h=f.getContext("2d",{willReadFrequently:!0});h==null||h.drawImage(c.img,0,0);for(let g=0;g<H;g++){const E=[];for(let v=0;v<H;v++){const P=(m=h==null?void 0:h.getImageData(v,g,1,1))==null?void 0:m.data;E.push(Ht(P))}c.cols.push(...E)}c.isFilled=!0,M()};return c.isFilled?(c.r!==e.r||c.score!==e.score)&&M():c.img.onload=y,(f=n)=>{const{x:h,y:m,r:g,winScore:E}=e;if(c.drawImg?f.drawImage(c.drawImg,h-g,m-g,2*g,2*g):l(f,h-g,m-g),s&&E&&c.drawImg)for(const v of o)f.fillStyle=v.c||"red",f.beginPath(),f.arc(h-g+v.x+v.r,m-g+v.y+v.r,v.r,0,Math.PI*2),f.closePath(),f.fill()}},q=1e4,at=(e=0)=>{const{addEventResize:n,useMeasure:d,translate:u}=x(),{getScore:r}=z(),c=["/media/cat.png"],s=r();let o,i=0,t=0,a=Math.floor(s/q);return n(()=>{const{cx:f,cy:h,s:m}=d();o=[],i=(m-2*m*.055*1.6)/2,t=m*.05;for(let g=0;g<c.length;g++){const E=c[g];o.push(At({x:f,y:h+g*i*2+g*t,r:i,score:s-g*q<0?0:s-g*q,imgSrc:E,winScore:e}))}}),{up:()=>{a=a+1<c.length?a+1:c.length-1},down:()=>{a=a-1<0?0:a-1},render:()=>{u(()=>{o==null||o.forEach(f=>f())},0,-(a*i*2+a*t))},rect:()=>{const{cx:f,cy:h}=d(),m=innerWidth>innerHeight;return{x:m?f-i:0,y:m?0:h-i,w:m?2*i:innerWidth,h:m?innerHeight:2*i}}}},kt=({popits:e,popEffect:n=()=>{}})=>{const{useTimer:d,rand:u,addEventClick:r,addEventMove:c,intersect:s,navigate:o}=x(),{addScore:i,getDifficultyTic:t}=z();let a=[],l,p,M=!1,y=0,f=0,h=0;const m=t(),g=()=>{const S=e.filter(b=>a.indexOf(b)===-1),C=u(S.length-1),R=S[C];R&&(R.p=!1,a.push(S[C]))},E=()=>{p=d(()=>{if(h-=10,e.length===a.length){M=!0,p.stop(),d(()=>{o("gameover")});return}g(),E()},h)},v=S=>{a=[];const C=e.length;let R=u(Math.round(C*.3),Math.round(C*.6));const b=[...e];if(S){const D=b.indexOf(S);b.splice(D,1)}for(let D=R;D>0;D--){const W=u(b.length-1),T=b[W];T.p=!1,a.push(T),b.splice(W,1)}h=m,l==null||l.stop(),p==null||p.stop(),l=d(E,a.length*m),y=y>0?y:u(3,5)},P=S=>{n(S),h=Math.min(h+5,m),f++,S.p=!0;const C=a.indexOf(S);a.splice(C,1),a.length<=0&&(y--,y>0?v(S):(i(f),o("gamescore",{winScore:f})))},w=(S,C,R=!1)=>{if(!M){for(const b of a)if(s({x:S,y:C},b)){P(b);return}R||g()}};r(w),c((S,C)=>w(S,C,!0)),d(()=>{v()})},zt=()=>{const{addEventResize:e,rand:n,useScreenMeta:d}=x(),{from:u}=d(),r=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=u==="opening"?r[0]:r[n(r.length-1)],{render:s,setIntersections:o}=st({color:c}),{render:i,point:t}=Wt(),{render:a,point:l}=ot({getX:(y,f,h)=>y+Math.round(f*.25)+2*h,getY:(y,f,h)=>y+Math.round(f*.25)+0*h}),{render:p,point:M}=xt();return e(()=>{const y=M(),f=t(),h=l();o((m,g,E)=>!k({x:m,y:g,r:E},y)&&!k({x:m,y:g,r:E},f)&&!k({x:m,y:g,r:E},h))}),()=>{s(),i(),a(),p()}},Ft=()=>{const e=it(),{popEffect:n,render:d}=wt(),{popits:u,render:r}=ct({palette:e});return kt({popits:u,popEffect:n}),()=>{d(),r()}},_t=()=>{const e="#ff6347",{setBackground:n}=x(),{minusDifficulty:d}=z(),{render:u}=ct({palette:e,retry:!0});return n(e),d(),()=>{u()}},Lt=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:d}=z(),{data:u}=n();it();const{render:r}=at(u==null?void 0:u.winScore),{render:c}=ot({getX:(o,i,t)=>innerWidth>innerHeight?Math.min(o+(i-2*i*.055*1.6)/2+4*t+Math.round(i*.1),innerWidth-2*t-Math.round(i*.1)):o+(i-2*i*.055*1.6)/8+0*Math.round(i*.1)+2*t,getY:(o,i,t)=>innerWidth>innerHeight?o+(i-2*i*.055*1.6)/2-1*t-Math.round(i*.1):Math.min(o+(i-2*i*.055*1.6)/2+4*t+Math.round(i*.1),innerHeight-2*t-Math.round(i*.1))}),{render:s}=Tt({getX:(o,i,t)=>innerWidth>innerHeight?Math.max(o-(i-2*i*.055*1.6)/2-4*t-Math.round(i*.1),2*t+Math.round(i*.1)):o+(i-2*i*.055*1.6)/8-2*Math.round(i*.1)-2*t,getY:(o,i,t)=>innerWidth>innerHeight?o-(i-2*i*.055*1.6)/2+0*t+Math.round(i*.1):Math.min(o+(i-2*i*.055*1.6)/2+4*t+Math.round(i*.1),innerHeight-2*t-Math.round(i*.1))});return d(),()=>{innerHeight>innerWidth?e(r,0,-Math.round(innerHeight*.07)):r(),c(),s()}},$t=()=>{const{addEventResize:e,rand:n}=x(),d=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],u=d[n(d.length-1)],{render:r,setIntersections:c}=st({color:u,frequency:10}),{render:s,rect:o,up:i,down:t}=at(),{render:a,point:l}=Ct(),{point:p}=bt(i),{point:M}=It(t);return e(()=>{const y=l(),f=o(),h=p(),m=M();c((g,E,v)=>!k({x:g,y:E,r:v},y)&&!vt({x:g,y:E,r:v},f)&&!k({x:g,y:E,r:v},h)&&!k({x:g,y:E,r:v},m))}),()=>{r(),s(),a()}},Ot=()=>{const{ctx:e,addEventResize:n,loop:d}=x(),u={x:40,y:100};let r=1,c=1,s;const o=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),n(o),d(()=>{u.x+=2*r,u.y+=3*c,r*=-1,c*=-1}),()=>{e.save();var i=Math.random()*2,t=Math.random()*3;e.translate(i,t),e.beginPath(),e.fillStyle="red",e.rect(u.x,u.y,s,s),e.fill(),e.restore()}},Bt=[{name:"opening",ctor:Pt},{name:"main",ctor:zt},{name:"game",ctor:Ft},{name:"gameover",ctor:_t},{name:"gamescore",ctor:Lt},{name:"score",ctor:$t},{name:"devs",ctor:Ot}];St(Bt);document.title="Your's last Pop it";
