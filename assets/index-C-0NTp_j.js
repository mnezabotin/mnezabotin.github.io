(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&h(i)}).observe(document,{childList:!0,subtree:!0});function l(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(r){if(r.ep)return;r.ep=!0;const s=l(r);fetch(r.href,s)}})();const ge=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const l=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return l(),document.body.appendChild(e),{ctx:n,render:h,resize:l,rotate:(t,o,a,d)=>{n.save(),n.translate(o,a),n.rotate(Math.PI*d),n.translate(-o,-a),t(),n.restore()},translate:(t,o,a)=>{n.save(),n.translate(o,a),t(),n.restore()},shade:(t,o)=>{t=t.substring(1);const a=parseInt(t,16),d=Math.round(2.55*o),u=(a>>16)+d,E=(a>>8&255)+d,M=(a&255)+d;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(E<255?E<1?0:E:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(t,o)=>{var a;document.body.style.background=t,document.body.style.backgroundColor=o||t,(a=document.querySelector('meta[name="theme-color"]'))==null||a.setAttribute("content",o||t)},createImg:(t,o,a=o)=>{const d=document.createElement("canvas"),u=d.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return d.width=o*devicePixelRatio,d.height=a*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),t(u),d}}},me=e=>{let n="",l="",h;const r=c=>e.find(f=>f.name===c)||e[0],i={render:()=>{},navigate:(c,f)=>{const t=r(c);l=n||"",n=(t==null?void 0:t.name)||"",h=f,i.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:l,data:h})};return i},Me=()=>{const e=requestAnimationFrame||(i=>setTimeout(i,16.666666666666668)),n=[],l={};return{loop:(i,c)=>{if(Object.entries(l).find(([t,o])=>o===i)||c&&l[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&n.push(c),c=c||new Date().valueOf().toString(),l[c]=i;const f=()=>{i(),l[c]&&e(f)};f()},stop:i=>{if(typeof i=="string")delete l[i];else{const c=Object.entries(l).find(([f,t])=>t===i);c&&delete l[c[0]]}},stopAll:()=>{for(const i in l)n.indexOf(i)===-1&&delete l[i]}}};let G=[];const ye=()=>{for(const e of G)clearTimeout(e);G=[]},ve=(e,n=400)=>{let l=new Date,h=n,r=setTimeout(e,h);return G.push(r),{pause:()=>{clearTimeout(r),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(r),r=setTimeout(e,h),G.push(r)},stop:()=>{clearTimeout(r)}}},ee=2147483646,q=2147483647,Ee=16807,Pe=(e=Math.floor(Math.random()*q))=>{e=e%q,e<=0&&(e+=ee);const n=()=>(e=e*Ee%q,e),l=()=>(n()-1)/ee;return(r,s)=>(s===void 0&&(s=r,r=0),Math.floor(l()*(s-r+1))+r)},Se=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),we=()=>{const e=[],n=[],l=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>n.push(o),onClickEvents:(o,a)=>n.forEach(d=>d(o,a)),addEventMove:o=>l.push(o),onMoveEvents:(o,a)=>l.forEach(d=>d(o,a)),removeAllEvents:()=>{e.splice(0),n.splice(0),l.splice(0)}}},z=(e,n)=>{const l=Math.pow(Math.abs(e.x-n.x),2),h=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,s=n.r||0,i=Math.pow(r+s,2);return l+h<=i},xe=(e,n)=>{const l=e.r||0,h=n.w||0,r=n.h||0;return Math.abs(n.x+h/2-e.x)<=h/2+l&&Math.abs(n.y+r/2-e.y)<=r/2+l},Re=(e,n)=>z(e,n),be=e=>{const n={},l=r=>{const s=r.split("/");return s[s.length-1].split(".")[0]};return(()=>{for(const r of e){const s=new Audio(r);s.volume=.25,s.addEventListener("ended",function(){this.currentTime=0});const i=l(r);n[i]={audio:s,path:r}}})(),r=>{var f,t;const s=(f=n[r])==null?void 0:f.audio,i=(t=n[r])==null?void 0:t.path;if(!(!s||!i))if(s.currentTime===0)s.play();else{var c=new Audio(i);c.volume=.25,c.play()}}};let X;const Ce=(e,n)=>{if(X)throw new Error("Webcore already specified");const l=ge(),h=me(e),{loop:r,stop:s,stopAll:i}=Me(),{addEventResize:c,onResizeEvents:f,addEventClick:t,onClickEvents:o,addEventMove:a,onMoveEvents:d,removeAllEvents:u}=we();let E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:E,cy:M,s:p,m}),v=be([]);X={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(y,P)=>{if(!e.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);i(),ye(),u(),new Promise(()=>h.navigate(y,P))},loop:r,loopStop:s,useTimer:ve,rand:Se,useRandChain:Pe,intersect:Re,addEventResize:c,addEventClick:t,addEventMove:a,playAudio:v},r(()=>l.render(h.render),"draw"),window.onresize=()=>{E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),f()},document.onpointerdown=y=>{o(y.clientX,y.clientY)},document.onmousemove=y=>{d(y.clientX,y.clientY)},h.navigate()},x=()=>{if(!X)throw new Error("Webcore not specified");return{...X}},U={},I=e=>{const{shade:n,ctx:l,createImg:h}=x(),r=()=>{const{r:i,c="#ffffff",p:f}=e,t=l.createRadialGradient(i,i,i,i,i,i/5);return t.addColorStop(0,n(c,0)),t.addColorStop(.01,n(c,0)),t.addColorStop(.075,n(c,9)),t.addColorStop(.15,n(c,0)),t.addColorStop(.15,n(c,-15)),t.addColorStop(.18,n(c,-5)),t.addColorStop(.22,n(c,-15)),f?(t.addColorStop(.24,n(c,-10)),t.addColorStop(.3,n(c,-8)),t.addColorStop(.34,n(c,-12)),t.addColorStop(.6,n(c,-6)),t.addColorStop(1,n(c,-4))):(t.addColorStop(.24,n(c,-12)),t.addColorStop(.26,n(c,-8)),t.addColorStop(.3,n(c,-2)),t.addColorStop(.34,n(c,0)),t.addColorStop(.5,n(c,5)),t.addColorStop(1,n(c,12))),t},s=()=>{const{r:i,c="#ffffff",p:f}=e,t=`${c}_${f?"push":"pop"}_${i}`;if(U[t])return U[t];const o=h((a=l)=>{const d=r();a.fillStyle=d,a.beginPath(),a.arc(i,i,i,0,2*Math.PI),a.closePath(),a.fill()},2*i);return U[t]=o,o};return(i=l)=>{const{x:c,y:f,r:t}=e,o=s();i.drawImage(o,c-t,f-t,2*t,2*t)}},V={},N=e=>{const{ctx:n}=x();let l;return V[e.src]?l=V[e.src]:(l=new Image,l.src=e.src,V[e.src]=l),(h=n)=>{const{w:r,h:s=r,x:i=0,y:c=0}=e;l.complete&&h.drawImage(l,i,c,r,s)}},te=e=>{const{font:n,ctx:l}=x(),h=e.text,r=e.text.length,s=2*Math.PI/r/4;return(i=l)=>{const{x:c,y:f,r:t,s:o=0,fs:a}=e,d=a||Math.round(t/4);i.textAlign="center",i.fillStyle="#f9f9f9",i.font=`${d}px ${n}`,i.save(),i.translate(c,f),i.rotate(o);for(let u=0;u<r;u++)i.save(),i.rotate(u*s),i.fillText(h[u],0,-t),i.restore();i.restore()}},Ie=()=>{var g,v;const{ctx:e,loop:n,rotate:l,navigate:h,useMeasure:r,addEventClick:s,addEventResize:i,setBackground:c}=x();c("#040404");let f=!1,t,o,a,d,u,E=-.2,M=0;i(()=>{const{cx:y,cy:P,s:w}=r(),S=Math.round(w*.25);t={c:"#ff6347",x:y,y:P,r:S,p:!1},o=I(t),a=N({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),d=te({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),u=te({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,M=E>=1?1:E,E>=1.8&&(t.p=!0),E>=2.2&&(t.c="#f86a9a"),E>=2.6&&h("main")};s(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(E<y)return E=y,!0})});const m=()=>{n(p),f=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:y,cy:P}=r();e.globalAlpha=f?1:0,o(),E<1.8&&a(),E<1.4&&l(()=>{d(),u()},y,P,M),e.globalAlpha=1}},_=100/2;let ne=0;const O=()=>{const{loop:e,ctx:n,shade:l,rand:h}=x(),r={},s=()=>{for(const f in r){const t=r[f];if(!t)return;const o=t.popit;if(!t.shake)t.tic+=_/5,t.tic>=_&&(t.dir=-1),t.withoutRad||(o.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:_-t.tic)));else{t.tic+=_/5;const a=h(1,2),d=h(1,2);o.x=t.origX+Math.random()*a*(Math.random()>.5?1:-1),o.y=t.origY+Math.random()*d*(Math.random()>.5?1:-1)}t.tic>=2*_&&(delete r[f],o.r=t.origR,o.x=t.origX,o.y=t.origY)}},i=(f,t=!1,o=!1)=>{ne++;const a=`${new Date().valueOf().toString()}_${ne}`,d=1,u=1;r[a]={withoutRad:t,tic:d,dir:u,popit:f,origR:f.r,origX:f.x,origY:f.y,shake:o}},c=()=>{n.globalAlpha=.25;for(const f in r){const t=r[f];if(t.shake)continue;const o=t.popit;n.fillStyle=l(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+t.origR*.001*(t.tic+(t.dir>0?0:_-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(s),{popEffect:i,render:c}},Z=e=>{const{font:n,ctx:l}=x();return(h=l)=>{const{text:r,x:s,c:i,y:c,fs:f,a:t="center",mw:o}=e;h.textAlign=t,h.fillStyle=i,h.font=`${f}px ${n}`,h.fillText(r,s,c,o)}},B=100,ae=e=>{const{loop:n,ctx:l,useMeasure:h,rand:r}=x();let s=null;const i=()=>{if(!s)return;const{m:t}=h();if(s.tic<=B)s.props.fs=((e==null?void 0:e.mfs)||6)/B*s.tic*t;else{const o=r(1,1),a=r(1,1);s.props.x=s.origX+Math.random()*o*(Math.random()>.5?1:-1),s.props.y=s.origY+Math.random()*a*(Math.random()>.5?1:-1),s.shake=!0}s.tic+=s.tic>B?1:10,s.tic>B*2&&(s=null)},c=t=>{const{cx:o,m:a}=h(),d=0,u={x:o,y:Math.round(a*((e==null?void 0:e.dy)||16)),text:t,c:(e==null?void 0:e.color)||"#ffffff",fs:0},E=Z(u);s={props:u,shape:E,tic:d,origX:u.x,origY:u.y}},f=()=>{s&&(l.globalAlpha=.01*s.tic,s.shape(),l.globalAlpha=1)};return n(i),{splashEffect:c,render:f}},Te=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:f}=x(),{from:t}=s();let o,a,d;return l(()=>{const{cx:M,cy:p,s:m,m:g}=h(),v=Math.round(m*.25);o={c:e,r:Math.round(m*.08),x:M-v-1*g,y:p-v+1*g,p:(t==="score"||t==="opening")&&!o},a=I(o),d=N({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((M,p)=>{f({x:M,y:p},o)&&(n(o),o.p=!0,r(()=>{i("score")},100))}),{render:()=>{a(),o.p||d()},point:()=>({x:o.x,y:o.y,r:o.r})}},We=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:f}=x(),{from:t}=s();let o,a,d;return l(()=>{const{s:M}=h(),p=Math.round(M*.08);o={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:t==="main"&&!o},a=I(o),d=N({x:Number(o.x)-p+Math.round(p*.4),y:Number(o.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((M,p)=>{f({x:M,y:p},o)&&(n(o),o.p=!0,r(()=>{i("main")},100))}),{render:()=>{a(),o.p||d()},point:()=>({x:o.x,y:o.y,r:o.r})}},ke=e=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:r,intersect:s,rotate:i}=x();let c,f,t;return n(()=>{const{s:d}=l(),u=Math.round(d*.055);c={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},f=I(c),t=N({x:Number(c.x)-u+Math.round(u*.4),y:Number(c.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((d,u)=>{s({x:d,y:u},c)&&(c.p=!0,e(),h(()=>{c.p=!1},100))}),{render:()=>{f(),c.p||i(()=>{t()},c.x,c.y,-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Ae=e=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:r,intersect:s,rotate:i}=x();let c,f,t;return n(()=>{const{s:d}=l(),u=Math.round(d*.055);c={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},f=I(c),t=N({x:Number(c.x)-u+Math.round(u*.4),y:Number(c.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((d,u)=>{s({x:d,y:u},c)&&(c.p=!0,e(),h(()=>{c.p=!1},100))}),{render:()=>{f(),c.p||i(()=>{t()},c.x,c.y,.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},He=e=>{const{ctx:n,shade:l}=x(),h=Math.round(e.r/2.2),r=Math.round(.15*e.r),s=l(e.c||"blue",-3);return(i=n)=>{const{r:c,x:f=c,y:t=c}=e;i.lineCap="round",i.fillStyle=s,i.strokeStyle=s,i.lineWidth=h,i.beginPath(),i.moveTo(f+r,t),i.lineTo(f-r/2,t-r),i.lineTo(f-r/2,t+r),i.closePath(),i.fill(),i.beginPath(),i.moveTo(f+r,t),i.lineTo(f-r/2,t-r),i.moveTo(f-r/2,t-r),i.lineTo(f-r/2,t+r),i.moveTo(f-r/2,t+r),i.lineTo(f+r,t),i.stroke()}},de=({getX:e,getY:n,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:r,useMeasure:s,useTimer:i,useScreenMeta:c,navigate:f,addEventClick:t,intersect:o}=x(),{from:a}=c();let d,u,E;return r(()=>{const{cx:m,cy:g,s:v,m:y}=s();d={c:l,r:Math.round(v*.1),x:e(m,v,y),y:n(g,v,y),p:(a==="gamescore"||a==="game"||a==="opening")&&!d},u=I(d),E=He(d)}),i(()=>{d.p&&h(d,!1,!0),d.p=!1}),t((m,g)=>{o({x:m,y:g},d)&&(h(d),d.p=!0,i(()=>{f("game")},100))}),{render:()=>{u(),d.p||E()},point:()=>({x:d.x,y:d.y,r:d.r})}},le=e=>{const{ctx:n,shade:l}=x(),h=Math.round(e.r/4),r=Math.round(.12*e.r);return(s=n)=>{const{r:i,x:c=i,y:f=i}=e,t=l(e.c||"blue",-3);s.lineCap="round",s.strokeStyle=t,s.lineWidth=h,s.beginPath(),s.moveTo(c-1.5*r,f-2*r),s.lineTo(c-1.5*r,f+2*r),s.stroke(),s.beginPath(),s.moveTo(c+1.5*r,f-2*r),s.lineTo(c+1.5*r,f+2*r),s.stroke()}},De=({getX:e,getY:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:r,useTimer:s,useScreenMeta:i,navigate:c,addEventClick:f,intersect:t}=x(),{from:o}=i();let a,d,u;return h(()=>{const{cx:p,cy:m,s:g,m:v}=r();a={c:"#fd8059",r:Math.round(g*.08),x:e(p,g,v),y:n(m,g,v),p:(o==="game"||o==="opening")&&!a},d=I(a),u=le(a)}),s(()=>{a.p&&l(a,!1,!0),a.p=!1}),f((p,m)=>{t({x:p,y:m},a)&&(l(a),a.p=!0,s(()=>{c("main")},100))}),{render:()=>{d(),a.p||u()},point:()=>({x:a.x,y:a.y,r:a.r})}},ze=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,addEventClick:i,intersect:c,navigate:f}=x(),{from:t}=s();let o,a,d,u;return l(()=>{const{cx:p,cy:m,s:g}=h(),v=Math.round(g*.25);o={c:e,x:p,y:m,r:v,p:t==="opening"&&!o},a=I(o),d=Z({text:"Yola",c:"#f1f1f1",x:p,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),u=Z({text:"PopiT",c:"#ffeb3b",x:p,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),i((p,m)=>{c({x:p,y:m},o)&&(n(o),o.p=!0,r(()=>{f("opening")},100))}),{render:()=>{a(),o.p||(d(),u())},point:()=>({x:o.x,y:o.y,r:o.r})}},ue=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:l,useRandChain:h,useMeasure:r,rand:s,useTimer:i,setBackground:c,useScreenMeta:f}=x(),{from:t}=f();c(e);const o=s(0,999);let a=[],d=[];l(()=>{const p=h(o),{s:m}=r();a=[];const g=Math.round(m*.05),v=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*v)/(v+1)),P=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let T=0;T<v;T++)p(p(n))<1&&a.push({x:y+g+T*g*2+y*T,y:w+g+S*g*2+w*S,r:g,c:e,p:t==="opening"?!0:p(1)>0});d=a.map(S=>I(S))});const u=()=>{i(()=>{const p=s(a.length-1);a[p]&&(a[p].p=!a[p].p),u()},250)};return t==="opening"?i(()=>{a.forEach(p=>p.p=s(1)>0),u()}):u(),{render:()=>{d.forEach(p=>p())},setIntersections:p=>{a=a.filter(({x:m,y:g,r:v})=>p(m,g,v)),d=a.map(m=>I(m))}}},oe="ylp",re="score",se="difficulty",K=[.14,.11,.09,.075],ie=500,_e=350,ce=5,D=[];for(let e=0;e*ce<=ie-_e;e++)D.push(ie-e*ce);const F=()=>{const e=a=>localStorage.getItem(`${oe}_${a}`),n=(a,d)=>localStorage.setItem(`${oe}_${a}`,d.toString()),l=()=>+(e(re)||0),h=a=>n(re,a),r=a=>{const d=l();h(d+a)},s=()=>+(e(se)||0),i=a=>{const d=s();n(se,Math.min(Math.max(d+a,0),K.length*D.length-1))};return{getScore:l,addScore:r,plusDifficulty:()=>i(1),minusDifficulty:()=>i(-5),getDifficultyRad:()=>{const a=s(),d=Math.floor(a/D.length);return K[d]||K[1]},getDifficultyTic:()=>{const a=s(),d=Math.floor(a/D.length),u=a-d*D.length;return D[u]||D[0]}}},fe=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:r,rand:s}=x(),{getDifficultyRad:i}=F();return n=[...n.splice(s(n.length-1),n.length),...n],e||l(()=>{const{s:f}=h(),t=i(),o=Math.round(f*t),a=Math.round(innerWidth/o/2)-1,d=(innerWidth-2*o*a)/(a+1),u=Math.round(innerHeight/o/2)-1,E=(innerHeight-2*o*u)/(u+1),M=innerWidth>=innerHeight,p=M?a:u,m=M?d:E,g=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)n[v]||(v=0),y.push(`${n[v]} ${(m+o+w*o*2+m*w)/g*100}%`),v++;r(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},he=({palette:e,retry:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:r,rand:s,useTimer:i,useScreenMeta:c,navigate:f,addEventClick:t,intersect:o}=x(),{from:a}=c(),{getDifficultyRad:d}=F(),u=[];let E=[],M,p,m,g;const v=P=>Array.isArray(e)?e[P]:e;return h(()=>{const{s:P}=r();u.splice(0);const w=d(),S=Math.round(P*w),T=Math.round(innerWidth/S/2)-1,$=(innerWidth-2*S*T)/(T+1),b=Math.round(innerHeight/S/2)-1,C=(innerHeight-2*S*b)/(b+1),A=innerWidth>=innerHeight;let R=0;for(let W=0;W<b;W++){for(let k=0;k<T;k++){v(R)||(R=0);const L={x:$+S+k*S*2+$*k,y:C+S+W*S*2+C*W,r:S,c:v(R),p:!0};W===0&&k===T-1?(g={...L,p:(a==="main"||a==="gameover"||a==="gamescore")&&!g},M=I(g),p=le(g)):u.push(L),R+=A?1:0}R=A?0:R+1}n&&(m=u[s(u.length-1)],i(()=>{l(m,!1,!0),m.p=!1})),E=u.map(W=>I(W))}),i(()=>{g.p&&l(g,!1,!0),g.p=!1}),n&&t((P,w)=>{o({x:P,y:w},m)&&(l(m),m.p=!0,i(()=>{f("game")},100))}),t((P,w)=>{o({x:P,y:w},g)&&(l(g),g.p=!0,i(()=>{f("main")},100))}),{render:()=>{E.forEach(P=>P()),M(),g!=null&&g.p||p()},popits:u}},H=100,Y="#222",Fe=e=>{const n=(e==null?void 0:e[0])||0,l=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},J={},$e=e=>{const{ctx:n,createImg:l,useRandChain:h,useTimer:r}=x();let s,i=!1,c=[];const f=e.r*2/H/2;J[e.imgSrc]?s=J[e.imgSrc]:(s=J[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},s.img.src=e.imgSrc);const t=()=>r(()=>{i=!i,t()},250),o=(M,p=n)=>{const{x:m,y:g,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(m+y,g+y,y,0,Math.PI*2),p.closePath(),p.fill()},a=(M=n,p=0,m=0)=>{M.fillStyle=Y,M.beginPath(),M.roundRect(p,m,2*e.r,2*e.r,f),M.closePath(),M.fill()},d=()=>{const M=[];for(let y=0;y<H;y++)for(let P=0;P<H;P++){const w={x:P*f*2,y:y*f*2,r:f,c:Y};M.push(w)}let p=e.score-e.winScore;const m=[...M],g=h(0),v=(y=!1)=>{const P=g(m.length-1),w=m[P],S=M.indexOf(w);w.c=y?Y:s.cols[S],m.splice(P,1),y&&c.push({...w,c:s.cols[S]})};for(let y=p;y>0;y--)v();if(e.winScore){c=[];for(let y=e.winScore;y>0;y--)v(!0);t()}return M},u=()=>{const M=d();s.drawImg=l((p=n)=>{a(p),M.filter(m=>m.c!==Y).forEach(m=>o(m,p))},2*e.r)},E=async()=>{var m;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(s.img,0,0);for(let g=0;g<H;g++){const v=[];for(let y=0;y<H;y++){const P=(m=p==null?void 0:p.getImageData(y,g,1,1))==null?void 0:m.data;v.push(Fe(P))}s.cols.push(...v)}s.isFilled=!0,u()};return s.isFilled?(s.r!==e.r||s.score!==e.score)&&u():s.img.onload=E,(M=n)=>{const{x:p,y:m,r:g,winScore:v}=e;if(s.drawImg?M.drawImage(s.drawImg,p-g,m-g,2*g,2*g):a(M,p-g,m-g),i&&v&&s.drawImg)for(const y of c)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-g+y.x+y.r,m-g+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},Q=1e4,pe=(e=0)=>{const{addEventResize:n,useMeasure:l,translate:h}=x(),{getScore:r}=F(),s=["/media/max.png"],i=r();let c,f=0,t=0,o=Math.floor(i/Q);return n(()=>{const{cx:M,cy:p,s:m}=l();c=[],f=(m-2*m*.055*1.6)/2,t=m*.05;for(let g=0;g<s.length;g++){const v=s[g];c.push($e({x:M,y:p+g*f*2+g*t,r:f,score:i-g*Q<0?0:i-g*Q,imgSrc:v,winScore:e}))}}),{up:()=>{o=o+1<s.length?o+1:s.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{h(()=>{c==null||c.forEach(M=>M())},0,-(o*f*2+o*t))},rect:()=>{const{cx:M,cy:p}=l(),m=innerWidth>innerHeight;return{x:m?M-f:0,y:m?0:p-f,w:m?2*f:innerWidth,h:m?innerHeight:2*f}}}},Le=({popits:e,popEffect:n=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:h,rand:r,addEventClick:s,addEventMove:i,intersect:c,navigate:f,addEventResize:t}=x(),{getScore:o,addScore:a,getDifficultyTic:d}=F();let u=[],E,M,p=!1,m=0,g=0,v=0;const y=d(),P=b=>{const C=e.filter(W=>u.indexOf(W)===-1&&W!==b),A=r(C.length-1),R=C[A];R&&(n(R,!1,!0),R.p=!1,u.push(C[A]))},w=()=>{M=h(()=>{if(v=Math.max(v-10,50),e.length===u.length){p=!0,M.stop(),h(()=>{f("gameover")});return}P(),w()},v)},S=b=>{u=[];const C=e.length;let A=r(Math.round(C*.3),Math.round(C*.6));const R=[...e];if(b){const k=R.indexOf(b);R.splice(k,1)}for(let k=A;k>0;k--){const L=r(R.length-1),j=R[L];j.p=!1,n(j,!1,!0),u.push(j),R.splice(L,1)}v=y,E==null||E.stop(),M==null||M.stop(),o()&&(E=h(()=>{l("Too slow"),w()},u.length*y)),m=m>0?m:r(3,5)},T=b=>{n(b),v=Math.min(v+5,y),g++,b.p=!0;const C=u.indexOf(b);u.splice(C,1),u.length<=0&&(m--,m>0?h(()=>{l("Round"),S(b)},100):(E==null||E.stop(),M==null||M.stop(),a(g),h(()=>{f("gamescore",{winScore:g})},100)))},$=(b,C,A=!1)=>{if(!p){for(const R of u)if(c({x:b,y:C},R)){T(R);return}if(!A){for(const R of e)if(c({x:b,y:C},R)){n(R,!0),l("Popenalty"),P(R);return}l("Popenalty"),P()}}};s($),i((b,C)=>$(b,C,!0)),t(()=>{h(()=>{l("Go"),S()})})},Ne=()=>{const{addEventResize:e,rand:n,useScreenMeta:l}=x(),{from:h}=l(),{popEffect:r,render:s}=O(),i=["#00dcfe","#5bb2f7","#92E6E6"],c=h==="opening"?i[0]:i[n(i.length-1)],{render:f,setIntersections:t}=ue({color:c}),{render:o,point:a}=ze({popEffect:r}),{render:d,point:u}=de({getX:(p,m,g)=>p+Math.round(m*.25)+2*g,getY:(p,m,g)=>p+Math.round(m*.25)+0*g,popEffect:r}),{render:E,point:M}=Te({popEffect:r});return e(()=>{const p=M(),m=a(),g=u();t((v,y,P)=>!z({x:v,y,r:P},p)&&!z({x:v,y,r:P},m)&&!z({x:v,y,r:P},g))}),()=>{s(),f(),o(),d(),E()}},Oe=()=>{const{useMeasure:e,addEventResize:n}=x(),l=fe(),{popEffect:h,render:r}=O(),{popits:s,render:i}=he({palette:l,popEffect:h}),c={mfs:0,dy:0},{splashEffect:f,render:t}=ae(c);return Le({popits:s,popEffect:h,splashEffect:f}),n(()=>{const o=(s[0].y-s[0].r)/e().m;c.mfs=o,c.dy=o}),()=>{r(),i(),t()}},Be=()=>{const e="#ff6347",{popEffect:n,render:l}=O(),{setBackground:h}=x(),{minusDifficulty:r}=F(),{render:s}=he({palette:e,retry:!0,popEffect:n});return h(e),r(),()=>{l(),s()}},Ye=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:l}=F(),{data:h}=n(),{popEffect:r,render:s}=O(),{splashEffect:i,render:c}=ae();fe();const{render:f}=pe(h==null?void 0:h.winScore),{render:t}=de({getX:(a,d,u)=>innerWidth>innerHeight?Math.min(a+(d-2*d*.055*1.6)/2+4*u+Math.round(d*.1),innerWidth-2*u-Math.round(d*.1)):a+(d-2*d*.055*1.6)/8+0*Math.round(d*.1)+2*u,getY:(a,d,u)=>innerWidth>innerHeight?a+(d-2*d*.055*1.6)/2-1*u-Math.round(d*.1):Math.min(a+(d-2*d*.055*1.6)/2+4*u+Math.round(d*.1),innerHeight-2*u-Math.round(d*.1)),popEffect:r}),{render:o}=De({getX:(a,d,u)=>innerWidth>innerHeight?Math.max(a-(d-2*d*.055*1.6)/2-4*u-Math.round(d*.1),2*u+Math.round(d*.1)):a+(d-2*d*.055*1.6)/8-2*Math.round(d*.1)-2*u,getY:(a,d,u)=>innerWidth>innerHeight?a-(d-2*d*.055*1.6)/2+0*u+Math.round(d*.1):Math.min(a+(d-2*d*.055*1.6)/2+4*u+Math.round(d*.1),innerHeight-2*u-Math.round(d*.1)),popEffect:r});return l(),i("You win"),()=>{s(),innerHeight>innerWidth?e(f,0,-Math.round(innerHeight*.07)):f(),t(),o(),c()}},Ge=()=>{const{addEventResize:e,rand:n}=x(),{popEffect:l,render:h}=O(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],s=r[n(r.length-1)],{render:i,setIntersections:c}=ue({color:s,frequency:10}),{render:f,rect:t,up:o,down:a}=pe(),{render:d,point:u}=We({popEffect:l}),{point:E}=ke(o),{point:M}=Ae(a);return e(()=>{const p=u(),m=t(),g=E(),v=M();c((y,P,w)=>!z({x:y,y:P,r:w},p)&&!xe({x:y,y:P,r:w},m)&&!z({x:y,y:P,r:w},g)&&!z({x:y,y:P,r:w},v))}),()=>{h(),i(),f(),d()}},Xe=()=>{const{ctx:e,addEventResize:n,loop:l}=x(),h={x:40,y:100};let r=1,s=1,i;const c=()=>{i=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),n(c),l(()=>{h.x+=2*r,h.y+=3*s,r*=-1,s*=-1}),()=>{e.save();var f=Math.random()*2,t=Math.random()*3;e.translate(f,t),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,i,i),e.fill(),e.restore()}},je=[{name:"opening",ctor:Ie},{name:"main",ctor:Ne},{name:"game",ctor:Oe},{name:"gameover",ctor:Be},{name:"gamescore",ctor:Ye},{name:"score",ctor:Ge},{name:"devs",ctor:Xe}];Ce(je);document.title="Your's last Pop it";
