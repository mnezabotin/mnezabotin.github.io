(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();const ee=()=>{const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("CanvasRenderingContext2D is null");const a=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,r.scale(devicePixelRatio,devicePixelRatio)},h=n=>{r.clearRect(0,0,innerWidth,innerHeight),n()};return a(),document.body.appendChild(t),{ctx:r,render:h,resize:a,rotate:(n,l,d,p)=>{r.save(),r.translate(l,d),r.rotate(Math.PI*p),r.translate(-l,-d),n(),r.restore()},translate:(n,l,d)=>{r.save(),r.translate(l,d),n(),r.restore()},shade:(n,l)=>{n=n.substring(1);const d=parseInt(n,16),p=Math.round(2.55*l),u=(d>>16)+p,f=(d>>8&255)+p,M=(d&255)+p;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(f<255?f<1?0:f:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(n,l)=>{var d;document.body.style.background=n,document.body.style.backgroundColor=l||n,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",l||n)},createImg:(n,l,d=l)=>{const p=document.createElement("canvas"),u=p.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return p.width=l*devicePixelRatio,p.height=d*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),n(u),p}}},te=t=>{let r="",a="",h;const o=e=>t.find(i=>i.name===e)||t[0],s={render:()=>{},navigate:(e,i)=>{const n=o(e);a=r||"",r=(n==null?void 0:n.name)||"",h=i,s.render=(n==null?void 0:n.ctor())||(()=>{})},useScreenMeta:()=>({to:r,from:a,data:h})};return s},ne=()=>{const t=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),r=[],a={};return{loop:(s,e)=>{if(Object.entries(a).find(([n,l])=>l===s)||e&&a[e])throw new Error(`Loop${e?" "+e:""} already specified`);e&&r.push(e),e=e||new Date().valueOf().toString(),a[e]=s;const i=()=>{s(),a[e]&&t(i)};i()},stop:s=>{if(typeof s=="string")delete a[s];else{const e=Object.entries(a).find(([i,n])=>n===s);e&&delete a[e[0]]}},stopAll:()=>{for(const s in a)r.indexOf(s)===-1&&delete a[s]}}};let H=[];const oe=()=>{for(const t of H)clearTimeout(t);H=[]},re=(t,r=400)=>{let a=new Date,h=r,o=setTimeout(t,h);return H.push(o),{pause:()=>{clearTimeout(o),h-=new Date-a},resume:()=>{a=new Date,clearTimeout(o),o=setTimeout(t,h),H.push(o)},stop:()=>{clearTimeout(o)}}},j=2147483646,$=2147483647,se=16807,ie=(t=Math.floor(Math.random()*$))=>{t=t%$,t<=0&&(t+=j);const r=()=>(t=t*se%$,t),a=()=>(r()-1)/j;return(o,c)=>(c===void 0&&(c=o,o=0),Math.floor(a()*(c-o+1))+o)},ce=(t,r)=>(r===void 0&&(r=t,t=0),Math.floor(Math.random()*(r-t+1))+t),ae=()=>{const t=[],r=[];return{addEventResize:e=>{e(),t.push(e)},onResizeEvents:()=>t.forEach(e=>e()),addEventClick:e=>{r.push(e)},onClickEvents:(e,i)=>r.forEach(n=>n(e,i)),removeAllEvents:()=>{t.splice(0),r.splice(0)}}},T=(t,r)=>{const a=Math.pow(Math.abs(t.x-r.x),2),h=Math.pow(Math.abs(t.y-r.y),2),o=t.r||0,c=r.r||0,s=Math.pow(o+c,2);return a+h<=s},de=(t,r)=>{const a=t.r||0,h=r.w||0,o=r.h||0;return Math.abs(r.x+h/2-t.x)<=h/2+a&&Math.abs(r.y+o/2-t.y)<=o/2+a},le=(t,r)=>T(t,r),ue=t=>{const r={},a=o=>{const c=o.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const o of t){const c=new Audio(o);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const s=a(o);r[s]={audio:c,path:o}}})(),o=>{var i,n;const c=(i=r[o])==null?void 0:i.audio,s=(n=r[o])==null?void 0:n.path;if(!(!c||!s))if(c.currentTime===0)c.play();else{var e=new Audio(s);e.volume=.25,e.play()}}};let O;const he=(t,r)=>{if(O)throw new Error("Webcore already specified");const a=ee(),h=te(t),{loop:o,stop:c,stopAll:s}=ne(),{addEventResize:e,onResizeEvents:i,addEventClick:n,onClickEvents:l,removeAllEvents:d}=ae();let p=innerWidth/2,u=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,M=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:p,cy:u,s:f,m:M}),m=ue([]);O={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(v,y)=>{if(!t.some(E=>E.name===v))throw new Error(`Screen ${v} not specified`);s(),oe(),d(),new Promise(()=>h.navigate(v,y))},loop:o,loopStop:c,useTimer:re,rand:ce,useRandChain:ie,intersect:le,addEventResize:e,addEventClick:n,playAudio:m},o(()=>a.render(h.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,M=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),i()},document.onpointerdown=v=>{l(v.clientX,v.clientY)},h.navigate()},S=()=>{if(!O)throw new Error("Webcore not specified");return{...O}},B={},x=t=>{const{shade:r,ctx:a,createImg:h}=S(),o=()=>{const{r:s,c:e="#ffffff",p:i}=t,n=a.createRadialGradient(s,s,s,s,s,s/5);return n.addColorStop(0,r(e,0)),n.addColorStop(.01,r(e,0)),n.addColorStop(.075,r(e,9)),n.addColorStop(.15,r(e,0)),n.addColorStop(.15,r(e,-15)),n.addColorStop(.18,r(e,-5)),n.addColorStop(.22,r(e,-15)),i?(n.addColorStop(.24,r(e,-10)),n.addColorStop(.3,r(e,-8)),n.addColorStop(.34,r(e,-12)),n.addColorStop(.6,r(e,-6)),n.addColorStop(1,r(e,-4))):(n.addColorStop(.24,r(e,-12)),n.addColorStop(.26,r(e,-8)),n.addColorStop(.3,r(e,-2)),n.addColorStop(.34,r(e,0)),n.addColorStop(.5,r(e,5)),n.addColorStop(1,r(e,10))),n},c=()=>{const{r:s,c:e="#ffffff",p:i}=t,n=`${e}_${i?"push":"pop"}_${s}`;if(B[n])return B[n];const l=h((d=a)=>{const p=o();d.fillStyle=p,d.beginPath(),d.arc(s,s,s,0,2*Math.PI),d.closePath(),d.fill()},2*s);return B[n]=l,l};return(s=a)=>{const{x:e,y:i,r:n}=t,l=c();s.drawImage(l,e-n,i-n,2*n,2*n)}},F={},k=t=>{const{ctx:r}=S();let a;return F[t.src]?a=F[t.src]:(a=new Image,a.src=t.src,F[t.src]=a),(h=r)=>{const{w:o,h:c=o,x:s=0,y:e=0}=t;a.complete&&h.drawImage(a,s,e,o,c)}},q=t=>{const{font:r,ctx:a}=S(),h=t.text,o=t.text.length,c=2*Math.PI/o/4;return(s=a)=>{const{x:e,y:i,r:n,s:l=0,fs:d}=t,p=d||Math.round(n/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${p}px ${r}`,s.save(),s.translate(e,i),s.rotate(l);for(let u=0;u<o;u++)s.save(),s.rotate(u*c),s.fillText(h[u],0,-n),s.restore();s.restore()}},fe=()=>{var v,y;const{ctx:t,loop:r,rotate:a,navigate:h,useMeasure:o,addEventClick:c,addEventResize:s,setBackground:e}=S();e("#040404");let i=!1,n,l,d,p,u,f=-.2,M=0;s(()=>{const{cx:E,cy:w,s:b}=o(),P=Math.round(b*.25);n={c:"#ff6347",x:E,y:w,r:P,p:!1},l=x(n),d=k({x:E-P+Math.round(P*.35),y:w-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),p=q({text:"nezabotin",x:E,y:w,r:Math.round(P*1.1),s:Math.PI*1.6}),u=q({text:"production",x:E,y:w,r:Math.round(P*1.1),s:Math.PI*2.6})});const g=()=>{f+=.01,M=f>=1?1:f,f>=1.8&&(n.p=!0),f>=2.2&&(n.c="#f86a9a"),f>=2.6&&h("main")};c(()=>{[1.4,1.8,2.2,2.6].some(E=>{if(f<E)return f=E,!0})});const m=()=>{r(g),i=!0};return(v=document==null?void 0:document.fonts)!=null&&v.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(m):m(),()=>{const{cx:E,cy:w}=o();t.globalAlpha=i?1:0,l(),f<1.8&&d(),f<1.4&&a(()=>{p(),u()},E,w,M),t.globalAlpha=1}},pe=()=>{const{addEventResize:t,useMeasure:r,useTimer:a,useScreenMeta:h,navigate:o,addEventClick:c,intersect:s}=S(),{from:e}=h();let i,n,l;return t(()=>{const{cx:u,cy:f,s:M,m:g}=r(),m=Math.round(M*.25);i={c:"#ba68c8",r:Math.round(M*.08),x:u-m-1*g,y:f-m+1*g,p:(e==="score"||e==="opening")&&!i},n=x(i),l=k({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),a(()=>{i.p=!1}),c((u,f)=>{s({x:u,y:f},i)&&(i.p=!0,a(()=>{o("score")},100))}),{render:()=>{n(),i.p||l()},point:()=>({x:i.x,y:i.y,r:i.r})}},ge=()=>{const{addEventResize:t,useMeasure:r,useTimer:a,useScreenMeta:h,navigate:o,addEventClick:c,intersect:s}=S(),{from:e}=h();let i,n,l;return t(()=>{const{s:u}=r(),f=Math.round(u*.08);i={c:"#ff6347",r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:e==="main"&&!i},n=x(i),l=k({x:Number(i.x)-f+Math.round(f*.4),y:Number(i.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),a(()=>{i.p=!1}),c((u,f)=>{s({x:u,y:f},i)&&(i.p=!0,a(()=>{o("main")},100))}),{render:()=>{n(),i.p||l()},point:()=>({x:i.x,y:i.y,r:i.r})}},me=t=>{const{addEventResize:r,useMeasure:a,useTimer:h,addEventClick:o,intersect:c,rotate:s}=S();let e,i,n;return r(()=>{const{s:p}=a(),u=Math.round(p*.055);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},i=x(e),n=k({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),o((p,u)=>{c({x:p,y:u},e)&&(e.p=!0,t(),h(()=>{e.p=!1},100))}),{render:()=>{i(),e.p||s(()=>{n()},e.x,e.y,-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Me=t=>{const{addEventResize:r,useMeasure:a,useTimer:h,addEventClick:o,intersect:c,rotate:s}=S();let e,i,n;return r(()=>{const{s:p}=a(),u=Math.round(p*.055);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},i=x(e),n=k({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),o((p,u)=>{c({x:p,y:u},e)&&(e.p=!0,t(),h(()=>{e.p=!1},100))}),{render:()=>{i(),e.p||s(()=>{n()},e.x,e.y,.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},ve=t=>{const{ctx:r,shade:a}=S(),h=Math.round(t.r/2.2),o=Math.round(.15*t.r),c=a(t.c||"blue",-3);return(s=r)=>{const{r:e,x:i=e,y:n=e}=t;s.lineCap="round",s.fillStyle=c,s.strokeStyle=c,s.lineWidth=h,s.beginPath(),s.moveTo(i+o,n),s.lineTo(i-o/2,n-o),s.lineTo(i-o/2,n+o),s.closePath(),s.fill(),s.beginPath(),s.moveTo(i+o,n),s.lineTo(i-o/2,n-o),s.moveTo(i-o/2,n-o),s.lineTo(i-o/2,n+o),s.moveTo(i-o/2,n+o),s.lineTo(i+o,n),s.stroke()}},ye=()=>{const{addEventResize:t,useMeasure:r,useTimer:a,useScreenMeta:h,navigate:o,addEventClick:c,intersect:s}=S(),{from:e}=h();let i,n,l;return t(()=>{const{cx:u,cy:f,s:M,m:g}=r(),m=Math.round(M*.25);i={c:"#bef181",r:Math.round(M*.1),x:u+m+2*g,y:f+m,p:(e==="game"||e==="opening")&&!i},n=x(i),l=ve(i)}),a(()=>{i.p=!1}),c((u,f)=>{s({x:u,y:f},i)&&(i.p=!0,a(()=>{o("game")},100))}),{render:()=>{n(),i.p||l()},point:()=>({x:i.x,y:i.y,r:i.r})}},X=t=>{const{font:r,ctx:a}=S();return(h=a)=>{const{text:o,x:c,c:s,y:e,fs:i,a:n="center",mw:l}=t;h.textAlign=n,h.fillStyle=s,h.font=`${i}px ${r}`,h.fillText(o,c,e,l)}},Ee=()=>{const{addEventResize:t,useMeasure:r,useTimer:a,useScreenMeta:h}=S(),{from:o}=h();let c,s,e,i;return t(()=>{const{cx:d,cy:p,s:u}=r(),f=Math.round(u*.25);c={c:"#f86a9a",x:d,y:p,r:f,p:o==="opening"&&!c},s=x(c),e=X({text:"Yola",c:"#f1f1f1",x:d,y:p-f+Math.round(f*.9),fs:Math.round(f/2.6),mw:f*2}),i=X({text:"PopiT",c:"#ffeb3b",x:d,y:p-f+Math.round(f*1.3),fs:Math.round(f/2.3),mw:f*2})}),a(()=>c.p=!1),{render:()=>{s(),c.p||(e(),i())},point:()=>({x:c.x,y:c.y,r:c.r})}},K=({color:t="#00dcfe",frequency:r=25})=>{const{addEventResize:a,useRandChain:h,useMeasure:o,rand:c,useTimer:s,setBackground:e,useScreenMeta:i}=S(),{from:n}=i();e(t);const l=c(0,999);let d=[],p=[];a(()=>{const g=h(l),{s:m}=o();d=[];const v=Math.round(m*.05),y=Math.round(innerWidth/v/2)-1,E=Math.round((innerWidth-2*v*y)/(y+1)),w=Math.round(innerHeight/v/2)-1,b=Math.round((innerHeight-2*v*w)/(w+1));for(let P=0;P<w;P++)for(let R=0;R<y;R++)g(g(r))<1&&d.push({x:E+v+R*v*2+E*R,y:b+v+P*v*2+b*P,r:v,c:t,p:n==="opening"?!0:g(1)>0});p=d.map(P=>x(P))});const u=()=>{s(()=>{const g=c(d.length-1);d[g]&&(d[g].p=!d[g].p),u()},750)};return n==="opening"?s(()=>{d.forEach(g=>g.p=c(1)>0),u()}):u(),{render:()=>{p.forEach(g=>g())},setIntersections:g=>{d=d.filter(({x:m,y:v,r:y})=>g(m,v,y)),p=d.map(m=>x(m))}}},U=(t=!1)=>{const r=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"],{addEventResize:a,useMeasure:h,setBackground:o}=S();return t||a(()=>{const{s}=h(),e=Math.round(s*.14),i=Math.round(innerWidth/e/2)-1,n=(innerWidth-2*e*i)/(i+1),l=Math.round(innerHeight/e/2)-1,d=(innerHeight-2*e*l)/(l+1),p=innerWidth>=innerHeight,u=p?i:l,f=p?n:d,M=p?innerWidth:innerHeight;let g=0;const m=[];for(let y=0;y<u;y++)r[g]||(g=0),m.push(`${r[g]} ${(f+e+y*e*2+f*y)/M*100}%`),g++;o(`linear-gradient(${p?"to right":"to bottom"}, ${m.join(", ")})`,r[0])}),r},Se=t=>{const{ctx:r,shade:a}=S(),h=Math.round(t.r/4),o=Math.round(.12*t.r);return(c=r)=>{const{r:s,x:e=s,y:i=s}=t,n=a(t.c||"blue",-3);c.lineCap="round",c.strokeStyle=n,c.lineWidth=h,c.beginPath(),c.moveTo(e-1.5*o,i-2*o),c.lineTo(e-1.5*o,i+2*o),c.stroke(),c.beginPath(),c.moveTo(e+1.5*o,i-2*o),c.lineTo(e+1.5*o,i+2*o),c.stroke()}},J=({palette:t,retry:r})=>{const{addEventResize:a,useMeasure:h,rand:o,useTimer:c,useScreenMeta:s,navigate:e,addEventClick:i,intersect:n}=S(),{from:l}=s(),d=[];let p=[],u,f,M,g;const m=y=>Array.isArray(t)?t[y]:t;return a(()=>{const{s:y}=h();d.splice(0);const E=Math.round(y*.14),w=Math.round(innerWidth/E/2)-1,b=(innerWidth-2*E*w)/(w+1),P=Math.round(innerHeight/E/2)-1,R=(innerHeight-2*E*P)/(P+1),D=innerWidth>=innerHeight;let W=0;for(let I=0;I<P;I++){for(let z=0;z<w;z++){m(W)||(W=0);const G={x:b+E+z*E*2+b*z,y:R+E+I*E*2+R*I,r:E,c:m(W),p:!0};I===0&&z===w-1?(g={...G,p:(l==="main"||l==="gameover"||l==="gamescore")&&!g},u=x(g),f=Se(g)):d.push(G),W+=D?1:0}W=D?0:W+1}r&&(M=d[o(d.length-1)],c(()=>{M.p=!1})),p=d.map(I=>x(I))}),c(()=>{g.p=!1}),r&&i((y,E)=>{n({x:y,y:E},M)&&(M.p=!0,c(()=>{e("game")},100))}),i((y,E)=>{n({x:y,y:E},g)&&(g.p=!0,c(()=>{e("main")},100))}),{render:()=>{p.forEach(y=>y()),u(),g!=null&&g.p||f()},popits:d}},C=100,L=2,A="#222",Pe=t=>{const r=(t==null?void 0:t[0])||0,a=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(r<255?r<1?0:r:255)*65536+(a<255?a<1?0:a:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},N={},we=t=>{const{ctx:r,shade:a,createImg:h}=S();let o;N[t.imgSrc]?o=N[t.imgSrc]:(o=N[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},o.img.src=t.imgSrc);const c=(n,l=r)=>{const{x:d,y:p,c:u,r:f,p:M}=n;M?(l.fillStyle=a(u,5),l.beginPath(),l.arc(d+f,p+f,f,0,Math.PI*2),l.closePath(),l.fill()):(l.fillStyle=u,l.beginPath(),l.arc(d+f,p+f,f+2,0,Math.PI*2),l.closePath(),l.fill())},s=()=>{const n=[],l=(t.r*2-2*L)/C;for(let d=0;d<C;d++)for(let p=0;p<C;p++){const u={x:L+p*l,y:L+d*l,r:l/2,c:d*100+p>=t.score?A:o.cols[d*C+p]};n.push(u)}return n},e=()=>{const n=s();o.drawImg=h((l=r)=>{n.filter(d=>d.c===A).forEach(d=>c(d,l)),n.filter(d=>d.c!==A).forEach(d=>c(d,l)),n.filter(d=>d.c!==A).forEach(d=>c({...d,p:!0},l))},2*t.r)},i=async()=>{var d;const n=document.createElement("canvas");n.width=C,n.height=C;const l=n.getContext("2d",{willReadFrequently:!0});l==null||l.drawImage(o.img,0,0);for(let p=0;p<C;p++){const u=[];for(let f=0;f<C;f++){const M=(d=l==null?void 0:l.getImageData(p,f,1,1))==null?void 0:d.data;u.push(Pe(M))}o.cols.push(...u)}o.isFilled=!0,e()};return o.isFilled?(o.r!==t.r||o.score!==t.score)&&e():o.img.onload=i,(n=r)=>{const{x:l,y:d,r:p}=t;o.drawImg&&n.drawImage(o.drawImg,l-p,d-p,2*p,2*p)}},V="ylp",Y="score",Q=()=>{const t=c=>localStorage.getItem(`${V}_${c}`),r=(c,s)=>localStorage.setItem(`${V}_${c}`,s.toString()),a=()=>+(t(Y)||0),h=c=>r(Y,c);return{getScore:a,setScore:h,addScore:c=>{const s=a();h(s+c)}}},_=1e4,Z=()=>{const{addEventResize:t,useMeasure:r,translate:a}=S(),{getScore:h}=Q(),o=["/media/cat.png"],c=h();let s,e=0,i=0,n=Math.floor(c/_);return t(()=>{const{cx:f,cy:M,s:g}=r();s=[],e=(g-2*g*.055*1.6)/2,i=g*.05;for(let m=0;m<o.length;m++){const v=o[m];s.push(we({x:f,y:M+m*e*2+m*i,r:e,score:c-m*_<0?0:c-m*_,imgSrc:v}))}}),{up:()=>{n=n+1<o.length?n+1:o.length-1},down:()=>{n=n-1<0?0:n-1},render:()=>{a(()=>{s==null||s.forEach(f=>f())},0,-(n*e*2+n*i))},rect:()=>{const{cx:f,cy:M}=r(),g=innerWidth>innerHeight;return{x:g?f-e:0,y:g?0:M-e,w:g?2*e:innerWidth,h:g?innerHeight:2*e}}}},xe=t=>{const{useTimer:r,rand:a,addEventClick:h,intersect:o,navigate:c}=S(),{addScore:s}=Q();let e=[],i,n,l=!1,d=0,p=0;const u=()=>{n=r(()=>{if(t.length===e.length){l=!0,n.stop(),r(()=>{c("gameover")});return}const g=t.filter(y=>e.indexOf(y)===-1),m=a(g.length-1),v=g[m];v&&(v.p=!1,e.push(g[m])),u()})},f=g=>{e=[];const m=t.length;let v=a(Math.round(m*.3),Math.round(m*.6));const y=[...t];if(g){const E=y.indexOf(g);y.splice(E,1)}for(let E=v;E>0;E--){const w=a(y.length-1),b=y[w];b.p=!1,e.push(b),y.splice(w,1)}i==null||i.stop(),n==null||n.stop(),i=r(u,e.length*350),d=d>0?d:a(3,5)},M=g=>{p++,g.p=!0;const m=e.indexOf(g);e.splice(m,1),e.length<=0&&(d--,d>0?f(g):(s(p),c("gamescore")))};h((g,m)=>{if(!l)for(const v of e)o({x:g,y:m},v)&&M(v)}),r(()=>{f()})},be=()=>{const{addEventResize:t}=S(),{render:r,setIntersections:a}=K({}),{render:h,point:o}=Ee(),{render:c,point:s}=ye(),{render:e,point:i}=pe();return t(()=>{const n=i(),l=o(),d=s();a((p,u,f)=>!T({x:p,y:u,r:f},n)&&!T({x:p,y:u,r:f},l)&&!T({x:p,y:u,r:f},d))}),()=>{r(),h(),c(),e()}},Ce=()=>{const t=U(),{popits:r,render:a}=J({palette:t});return xe(r),()=>{a()}},Re=()=>{const t="#ff6347",{setBackground:r}=S(),{render:a}=J({palette:t,retry:!0});return r(t),()=>{a()}},Ie=()=>{const{addEventClick:t,navigate:r}=S();U();const{render:a}=Z();return t(()=>{r("game")}),()=>{a()}},Te=()=>{const{addEventResize:t}=S(),{render:r,setIntersections:a}=K({color:"#ffeb3b",frequency:10}),{render:h,rect:o,up:c,down:s}=Z(),{render:e,point:i}=ge(),{point:n}=me(c),{point:l}=Me(s);return t(()=>{const d=i(),p=o(),u=n(),f=l();a((M,g,m)=>!T({x:M,y:g,r:m},d)&&!de({x:M,y:g,r:m},p)&&!T({x:M,y:g,r:m},u)&&!T({x:M,y:g,r:m},f))}),()=>{r(),h(),e()}},We=()=>{const{ctx:t,addEventResize:r,loop:a}=S(),h={x:40,y:100};let o=1,c=1,s;const e=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return e(),r(e),a(()=>{h.x+=2*o,h.y+=3*c,o*=-1,c*=-1}),()=>{t.save();var i=Math.random()*2,n=Math.random()*3;t.translate(i,n),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,s,s),t.fill(),t.restore()}},ze=[{name:"opening",ctor:fe},{name:"main",ctor:be},{name:"game",ctor:Ce},{name:"gameover",ctor:Re},{name:"gamescore",ctor:Ie},{name:"score",ctor:Te},{name:"devs",ctor:We}];he(ze);document.title="Your's last Popit";
