(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();const dt=()=>{const e=document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},u=t=>{o.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(e),{ctx:o,render:u,resize:a,rotate:(t,d,l,p)=>{o.save(),o.translate(d,l),o.rotate(Math.PI*p),o.translate(-d,-l),t(),o.restore()},translate:(t,d,l)=>{o.save(),o.translate(d,l),t(),o.restore()},shade:(t,d)=>{t=t.substring(1);const l=parseInt(t,16),p=Math.round(2.55*d),M=(l>>16)+p,y=(l>>8&255)+p,h=(l&255)+p;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(y<255?y<1?0:y:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},setBackground:(t,d)=>{var l;document.body.style.background=t,document.body.style.backgroundColor=d||t,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",d||t)},createImg:(t,d,l=d)=>{const p=document.createElement("canvas"),M=p.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return p.width=d*devicePixelRatio,p.height=l*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),t(M),p}}},lt=e=>{let o="",a="",u;const s=n=>e.find(r=>r.name===n)||e[0],i={render:()=>{},navigate:(n,r)=>{const t=s(n);a=o||"",o=(t==null?void 0:t.name)||"",u=r,i.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:a,data:u})};return i},ut=()=>{const e=requestAnimationFrame||(i=>setTimeout(i,16.666666666666668)),o=[],a={};return{loop:(i,n)=>{if(Object.entries(a).find(([t,d])=>d===i)||n&&a[n])throw new Error(`Loop${n?" "+n:""} already specified`);n&&o.push(n),n=n||new Date().valueOf().toString(),a[n]=i;const r=()=>{i(),a[n]&&e(r)};r()},stop:i=>{if(typeof i=="string")delete a[i];else{const n=Object.entries(a).find(([r,t])=>t===i);n&&delete a[n[0]]}},stopAll:()=>{for(const i in a)o.indexOf(i)===-1&&delete a[i]}}};let O=[];const ht=()=>{for(const e of O)clearTimeout(e);O=[]},ft=(e,o=400)=>{let a=new Date,u=o,s=setTimeout(e,u);return O.push(s),{pause:()=>{clearTimeout(s),u-=new Date-a},resume:()=>{a=new Date,clearTimeout(s),s=setTimeout(e,u),O.push(s)},stop:()=>{clearTimeout(s)}}},V=2147483646,N=2147483647,pt=16807,gt=(e=Math.floor(Math.random()*N))=>{e=e%N,e<=0&&(e+=V);const o=()=>(e=e*pt%N,e),a=()=>(o()-1)/V;return(s,c)=>(c===void 0&&(c=s,s=0),Math.floor(a()*(c-s+1))+s)},mt=(e,o)=>(o===void 0&&(o=e,e=0),Math.floor(Math.random()*(o-e+1))+e),Mt=()=>{const e=[],o=[],a=[];return{addEventResize:d=>{d(),e.push(d)},onResizeEvents:()=>e.forEach(d=>d()),addEventClick:d=>o.push(d),onClickEvents:(d,l)=>o.forEach(p=>p(d,l)),addEventMove:d=>a.push(d),onMoveEvents:(d,l)=>a.forEach(p=>p(d,l)),removeAllEvents:()=>{e.splice(0),o.splice(0),a.splice(0)}}},A=(e,o)=>{const a=Math.pow(Math.abs(e.x-o.x),2),u=Math.pow(Math.abs(e.y-o.y),2),s=e.r||0,c=o.r||0,i=Math.pow(s+c,2);return a+u<=i},vt=(e,o)=>{const a=e.r||0,u=o.w||0,s=o.h||0;return Math.abs(o.x+u/2-e.x)<=u/2+a&&Math.abs(o.y+s/2-e.y)<=s/2+a},yt=(e,o)=>A(e,o),Et=e=>{const o={},a=s=>{const c=s.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const s of e){const c=new Audio(s);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const i=a(s);o[i]={audio:c,path:s}}})(),s=>{var r,t;const c=(r=o[s])==null?void 0:r.audio,i=(t=o[s])==null?void 0:t.path;if(!(!c||!i))if(c.currentTime===0)c.play();else{var n=new Audio(i);n.volume=.25,n.play()}}};let B;const Pt=(e,o)=>{if(B)throw new Error("Webcore already specified");const a=dt(),u=lt(e),{loop:s,stop:c,stopAll:i}=ut(),{addEventResize:n,onResizeEvents:r,addEventClick:t,onClickEvents:d,addEventMove:l,onMoveEvents:p,removeAllEvents:M}=Mt();let y=innerWidth/2,h=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:y,cy:h,s:f,m}),E=Et([]);B={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:g,useScreenMeta:u.useScreenMeta,navigate:(v,S)=>{if(!e.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);i(),ht(),M(),new Promise(()=>u.navigate(v,S))},loop:s,loopStop:c,useTimer:ft,rand:mt,useRandChain:gt,intersect:yt,addEventResize:n,addEventClick:t,addEventMove:l,playAudio:E},s(()=>a.render(u.render),"draw"),window.onresize=()=>{y=innerWidth/2,h=innerHeight/2,f=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),r()},document.onpointerdown=v=>{d(v.clientX,v.clientY)},document.onmousemove=v=>{p(v.clientX,v.clientY)},u.navigate()},x=()=>{if(!B)throw new Error("Webcore not specified");return{...B}},G={},R=e=>{const{shade:o,ctx:a,createImg:u}=x(),s=()=>{const{r:i,c:n="#ffffff",p:r}=e,t=a.createRadialGradient(i,i,i,i,i,i/5);return t.addColorStop(0,o(n,0)),t.addColorStop(.01,o(n,0)),t.addColorStop(.075,o(n,9)),t.addColorStop(.15,o(n,0)),t.addColorStop(.15,o(n,-15)),t.addColorStop(.18,o(n,-5)),t.addColorStop(.22,o(n,-15)),r?(t.addColorStop(.24,o(n,-10)),t.addColorStop(.3,o(n,-8)),t.addColorStop(.34,o(n,-12)),t.addColorStop(.6,o(n,-6)),t.addColorStop(1,o(n,-4))):(t.addColorStop(.24,o(n,-12)),t.addColorStop(.26,o(n,-8)),t.addColorStop(.3,o(n,-2)),t.addColorStop(.34,o(n,0)),t.addColorStop(.5,o(n,5)),t.addColorStop(1,o(n,10))),t},c=()=>{const{r:i,c:n="#ffffff",p:r}=e,t=`${n}_${r?"push":"pop"}_${i}`;if(G[t])return G[t];const d=u((l=a)=>{const p=s();l.fillStyle=p,l.beginPath(),l.arc(i,i,i,0,2*Math.PI),l.closePath(),l.fill()},2*i);return G[t]=d,d};return(i=a)=>{const{x:n,y:r,r:t}=e,d=c();i.drawImage(d,n-t,r-t,2*t,2*t)}},Y={},L=e=>{const{ctx:o}=x();let a;return Y[e.src]?a=Y[e.src]:(a=new Image,a.src=e.src,Y[e.src]=a),(u=o)=>{const{w:s,h:c=s,x:i=0,y:n=0}=e;a.complete&&u.drawImage(a,i,n,s,c)}},K=e=>{const{font:o,ctx:a}=x(),u=e.text,s=e.text.length,c=2*Math.PI/s/4;return(i=a)=>{const{x:n,y:r,r:t,s:d=0,fs:l}=e,p=l||Math.round(t/4);i.textAlign="center",i.fillStyle="#f9f9f9",i.font=`${p}px ${o}`,i.save(),i.translate(n,r),i.rotate(d);for(let M=0;M<s;M++)i.save(),i.rotate(M*c),i.fillText(u[M],0,-t),i.restore();i.restore()}},St=()=>{var g,E;const{ctx:e,loop:o,rotate:a,navigate:u,useMeasure:s,addEventClick:c,addEventResize:i,setBackground:n}=x();n("#040404");let r=!1,t,d,l,p,M,y=-.2,h=0;i(()=>{const{cx:v,cy:S,s:w}=s(),P=Math.round(w*.25);t={c:"#ff6347",x:v,y:S,r:P,p:!1},d=R(t),l=L({x:v-P+Math.round(P*.35),y:S-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),p=K({text:"nezabotin",x:v,y:S,r:Math.round(P*1.1),s:Math.PI*1.6}),M=K({text:"production",x:v,y:S,r:Math.round(P*1.1),s:Math.PI*2.6})});const f=()=>{y+=.01,h=y>=1?1:y,y>=1.8&&(t.p=!0),y>=2.2&&(t.c="#f86a9a"),y>=2.6&&u("main")};c(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(y<v)return y=v,!0})});const m=()=>{o(f),r=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(m):m(),()=>{const{cx:v,cy:S}=s();e.globalAlpha=r?1:0,d(),y<1.8&&l(),y<1.4&&a(()=>{p(),M()},v,S,h),e.globalAlpha=1}},_=100/2,wt=()=>{const{loop:e,ctx:o,shade:a}=x(),u={},s=()=>{for(const n in u){const r=u[n];if(!r)return;const t=r.popit;r.tic+=_/5,r.tic>=_&&(r.dir=-1),t.r=r.origR+r.origR*.001*(r.tic+(r.dir>0?0:_-r.tic)),r.tic>=2*_&&(delete u[n],t.r=r.origR)}},c=n=>{const r=new Date().valueOf().toString(),t=1,d=1;u[r]={tic:t,dir:d,popit:n,origR:n.r}},i=()=>{o.globalAlpha=.25;for(const n in u){const r=u[n],t=r.popit;o.fillStyle=a(t.c||"red",-20),o.beginPath(),o.arc(t.x,t.y,t.r+r.origR*.00125*(r.tic+(r.dir>0?0:_-r.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return e(s),{popEffect:c,render:i}},xt=(e="#ba68c8")=>{const{addEventResize:o,useMeasure:a,useTimer:u,useScreenMeta:s,navigate:c,addEventClick:i,intersect:n}=x(),{from:r}=s();let t,d,l;return o(()=>{const{cx:y,cy:h,s:f,m}=a(),g=Math.round(f*.25);t={c:e,r:Math.round(f*.08),x:y-g-1*m,y:h-g+1*m,p:(r==="score"||r==="opening")&&!t},d=R(t),l=L({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),u(()=>{t.p=!1}),i((y,h)=>{n({x:y,y:h},t)&&(t.p=!0,u(()=>{c("score")},100))}),{render:()=>{d(),t.p||l()},point:()=>({x:t.x,y:t.y,r:t.r})}},Ct=(e="#ff6347")=>{const{addEventResize:o,useMeasure:a,useTimer:u,useScreenMeta:s,navigate:c,addEventClick:i,intersect:n}=x(),{from:r}=s();let t,d,l;return o(()=>{const{s:y}=a(),h=Math.round(y*.08);t={c:e,r:h,x:Math.round(1.6*h),y:Math.round(1.6*h),p:r==="main"&&!t},d=R(t),l=L({x:Number(t.x)-h+Math.round(h*.4),y:Number(t.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),u(()=>{t.p=!1}),i((y,h)=>{n({x:y,y:h},t)&&(t.p=!0,u(()=>{c("main")},100))}),{render:()=>{d(),t.p||l()},point:()=>({x:t.x,y:t.y,r:t.r})}},bt=e=>{const{addEventResize:o,useMeasure:a,useTimer:u,addEventClick:s,intersect:c,rotate:i}=x();let n,r,t;return o(()=>{const{s:p}=a(),M=Math.round(p*.055);n={c:"#ff6347",r:M,x:Math.round(innerWidth-1.6*M),y:Math.round(innerHeight-1.6*M),p:!1},r=R(n),t=L({x:Number(n.x)-M+Math.round(M*.4),y:Number(n.y)-M+Math.round(M*.4),w:M*2-Math.round(M*.8),src:"/media/back.svg"})}),s((p,M)=>{c({x:p,y:M},n)&&(n.p=!0,e(),u(()=>{n.p=!1},100))}),{render:()=>{r(),n.p||i(()=>{t()},n.x,n.y,-.5)},point:()=>({x:n.x,y:n.y,r:n.r})}},Rt=e=>{const{addEventResize:o,useMeasure:a,useTimer:u,addEventClick:s,intersect:c,rotate:i}=x();let n,r,t;return o(()=>{const{s:p}=a(),M=Math.round(p*.055);n={c:"#ff6347",r:M,x:Math.round(innerWidth-1.6*M),y:Math.round(innerHeight-1.6*M-2*M-.3*M),p:!1},r=R(n),t=L({x:Number(n.x)-M+Math.round(M*.4),y:Number(n.y)-M+Math.round(M*.4),w:M*2-Math.round(M*.8),src:"/media/back.svg"})}),s((p,M)=>{c({x:p,y:M},n)&&(n.p=!0,e(),u(()=>{n.p=!1},100))}),{render:()=>{r(),n.p||i(()=>{t()},n.x,n.y,.5)},point:()=>({x:n.x,y:n.y,r:n.r})}},It=e=>{const{ctx:o,shade:a}=x(),u=Math.round(e.r/2.2),s=Math.round(.15*e.r),c=a(e.c||"blue",-3);return(i=o)=>{const{r:n,x:r=n,y:t=n}=e;i.lineCap="round",i.fillStyle=c,i.strokeStyle=c,i.lineWidth=u,i.beginPath(),i.moveTo(r+s,t),i.lineTo(r-s/2,t-s),i.lineTo(r-s/2,t+s),i.closePath(),i.fill(),i.beginPath(),i.moveTo(r+s,t),i.lineTo(r-s/2,t-s),i.moveTo(r-s/2,t-s),i.lineTo(r-s/2,t+s),i.moveTo(r-s/2,t+s),i.lineTo(r+s,t),i.stroke()}},ot=({getX:e,getY:o,color:a="#bef181"})=>{const{addEventResize:u,useMeasure:s,useTimer:c,useScreenMeta:i,navigate:n,addEventClick:r,intersect:t}=x(),{from:d}=i();let l,p,M;return u(()=>{const{cx:f,cy:m,s:g,m:E}=s();l={c:a,r:Math.round(g*.1),x:e(f,g,E),y:o(m,g,E),p:(d==="gamescore"||d==="game"||d==="opening")&&!l},p=R(l),M=It(l)}),c(()=>{l.p=!1}),r((f,m)=>{t({x:f,y:m},l)&&(l.p=!0,c(()=>{n("game")},100))}),{render:()=>{p(),l.p||M()},point:()=>({x:l.x,y:l.y,r:l.r})}},rt=e=>{const{ctx:o,shade:a}=x(),u=Math.round(e.r/4),s=Math.round(.12*e.r);return(c=o)=>{const{r:i,x:n=i,y:r=i}=e,t=a(e.c||"blue",-3);c.lineCap="round",c.strokeStyle=t,c.lineWidth=u,c.beginPath(),c.moveTo(n-1.5*s,r-2*s),c.lineTo(n-1.5*s,r+2*s),c.stroke(),c.beginPath(),c.moveTo(n+1.5*s,r-2*s),c.lineTo(n+1.5*s,r+2*s),c.stroke()}},Tt=({getX:e,getY:o})=>{const{addEventResize:a,useMeasure:u,useTimer:s,useScreenMeta:c,navigate:i,addEventClick:n,intersect:r}=x(),{from:t}=c();let d,l,p;return a(()=>{const{cx:h,cy:f,s:m,m:g}=u();d={c:"#fd8059",r:Math.round(m*.08),x:e(h,m,g),y:o(f,m,g),p:(t==="game"||t==="opening")&&!d},l=R(d),p=rt(d)}),s(()=>{d.p=!1}),n((h,f)=>{r({x:h,y:f},d)&&(d.p=!0,s(()=>{i("main")},100))}),{render:()=>{l(),d.p||p()},point:()=>({x:d.x,y:d.y,r:d.r})}},J=e=>{const{font:o,ctx:a}=x();return(u=a)=>{const{text:s,x:c,c:i,y:n,fs:r,a:t="center",mw:d}=e;u.textAlign=t,u.fillStyle=i,u.font=`${r}px ${o}`,u.fillText(s,c,n,d)}},Wt=(e="#f86a9a")=>{const{addEventResize:o,useMeasure:a,useTimer:u,useScreenMeta:s,addEventClick:c,intersect:i,navigate:n}=x(),{from:r}=s();let t,d,l,p;return o(()=>{const{cx:h,cy:f,s:m}=a(),g=Math.round(m*.25);t={c:e,x:h,y:f,r:g,p:r==="opening"&&!t},d=R(t),l=J({text:"Yola",c:"#f1f1f1",x:h,y:f-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2}),p=J({text:"PopiT",c:"#ffeb3b",x:h,y:f-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2})}),u(()=>t.p=!1),c((h,f)=>{i({x:h,y:f},t)&&(t.p=!0,u(()=>{n("opening")},100))}),{render:()=>{d(),t.p||(l(),p())},point:()=>({x:t.x,y:t.y,r:t.r})}},st=({color:e="#00dcfe",frequency:o=25})=>{const{addEventResize:a,useRandChain:u,useMeasure:s,rand:c,useTimer:i,setBackground:n,useScreenMeta:r}=x(),{from:t}=r();n(e);const d=c(0,999);let l=[],p=[];a(()=>{const f=u(d),{s:m}=s();l=[];const g=Math.round(m*.05),E=Math.round(innerWidth/g/2)-1,v=Math.round((innerWidth-2*g*E)/(E+1)),S=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*S)/(S+1));for(let P=0;P<S;P++)for(let C=0;C<E;C++)f(f(o))<1&&l.push({x:v+g+C*g*2+v*C,y:w+g+P*g*2+w*P,r:g,c:e,p:t==="opening"?!0:f(1)>0});p=l.map(P=>R(P))});const M=()=>{i(()=>{const f=c(l.length-1);l[f]&&(l[f].p=!l[f].p),M()},750)};return t==="opening"?i(()=>{l.forEach(f=>f.p=c(1)>0),M()}):M(),{render:()=>{p.forEach(f=>f())},setIntersections:f=>{l=l.filter(({x:m,y:g,r:E})=>f(m,g,E)),p=l.map(m=>R(m))}}},Q="ylp",Z="score",tt="difficulty",X=[.14,.11,.09,.075],et=500,Dt=350,nt=5,k=[];for(let e=0;e*nt<=et-Dt;e++)k.push(et-e*nt);const z=()=>{const e=l=>localStorage.getItem(`${Q}_${l}`),o=(l,p)=>localStorage.setItem(`${Q}_${l}`,p.toString()),a=()=>+(e(Z)||0),u=l=>o(Z,l),s=l=>{const p=a();u(p+l)},c=()=>+(e(tt)||0),i=l=>{const p=c();o(tt,Math.min(Math.max(p+l,0),X.length*k.length-1))};return{getScore:a,addScore:s,plusDifficulty:()=>i(1),minusDifficulty:()=>i(-5),getDifficultyRad:()=>{const l=c(),p=Math.floor(l/k.length);return X[p]||X[1]},getDifficultyTic:()=>{const l=c(),p=Math.floor(l/k.length),M=l-p*k.length;return k[M]||k[0]}}},it=(e=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:u,setBackground:s,rand:c}=x(),{getDifficultyRad:i}=z();return o=[...o.splice(c(o.length-1),o.length),...o],e||a(()=>{const{s:r}=u(),t=i(),d=Math.round(r*t),l=Math.round(innerWidth/d/2)-1,p=(innerWidth-2*d*l)/(l+1),M=Math.round(innerHeight/d/2)-1,y=(innerHeight-2*d*M)/(M+1),h=innerWidth>=innerHeight,f=h?l:M,m=h?p:y,g=h?innerWidth:innerHeight;let E=0;const v=[];for(let w=0;w<f;w++)o[E]||(E=0),v.push(`${o[E]} ${(m+d+w*d*2+m*w)/g*100}%`),E++;s(`linear-gradient(${h?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ct=({palette:e,retry:o})=>{const{addEventResize:a,useMeasure:u,rand:s,useTimer:c,useScreenMeta:i,navigate:n,addEventClick:r,intersect:t}=x(),{from:d}=i(),{getDifficultyRad:l}=z(),p=[];let M=[],y,h,f,m;const g=v=>Array.isArray(e)?e[v]:e;return a(()=>{const{s:v}=u();p.splice(0);const S=l(),w=Math.round(v*S),P=Math.round(innerWidth/w/2)-1,C=(innerWidth-2*w*P)/(P+1),I=Math.round(innerHeight/w/2)-1,b=(innerHeight-2*w*I)/(I+1),D=innerWidth>=innerHeight;let W=0;for(let T=0;T<I;T++){for(let F=0;F<P;F++){g(W)||(W=0);const U={x:C+w+F*w*2+C*F,y:b+w+T*w*2+b*T,r:w,c:g(W),p:!0};T===0&&F===P-1?(m={...U,p:(d==="main"||d==="gameover"||d==="gamescore")&&!m},y=R(m),h=rt(m)):p.push(U),W+=D?1:0}W=D?0:W+1}o&&(f=p[s(p.length-1)],c(()=>{f.p=!1})),M=p.map(T=>R(T))}),c(()=>{m.p=!1}),o&&r((v,S)=>{t({x:v,y:S},f)&&(f.p=!0,c(()=>{n("game")},100))}),r((v,S)=>{t({x:v,y:S},m)&&(m.p=!0,c(()=>{n("main")},100))}),{render:()=>{M.forEach(v=>v()),y(),m!=null&&m.p||h()},popits:p}},H=100,$="#222",Ht=e=>{const o=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,u=(e==null?void 0:e[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(a<255?a<1?0:a:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},j={},kt=e=>{const{ctx:o,createImg:a,useRandChain:u,useTimer:s}=x();let c,i=!1,n=[];const r=e.r*2/H/2;j[e.imgSrc]?c=j[e.imgSrc]:(c=j[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},c.img.src=e.imgSrc);const t=()=>s(()=>{i=!i,t()},250),d=(h,f=o)=>{const{x:m,y:g,c:E,r:v}=h;f.fillStyle=E||"red",f.beginPath(),f.arc(m+v,g+v,v,0,Math.PI*2),f.closePath(),f.fill()},l=(h=o,f=0,m=0)=>{h.fillStyle=$,h.beginPath(),h.roundRect(f,m,2*e.r,2*e.r,r),h.closePath(),h.fill()},p=()=>{const h=[];for(let v=0;v<H;v++)for(let S=0;S<H;S++){const w={x:S*r*2,y:v*r*2,r,c:$};h.push(w)}let f=e.score-e.winScore;const m=[...h],g=u(0),E=(v=!1)=>{const S=g(m.length-1),w=m[S],P=h.indexOf(w);w.c=v?$:c.cols[P],m.splice(S,1),v&&n.push({...w,c:c.cols[P]})};for(let v=f;v>0;v--)E();if(e.winScore){n=[];for(let v=e.winScore;v>0;v--)E(!0);t()}return h},M=()=>{const h=p();c.drawImg=a((f=o)=>{l(f),h.filter(m=>m.c!==$).forEach(m=>d(m,f))},2*e.r)},y=async()=>{var m;const h=document.createElement("canvas");h.width=H,h.height=H;const f=h.getContext("2d",{willReadFrequently:!0});f==null||f.drawImage(c.img,0,0);for(let g=0;g<H;g++){const E=[];for(let v=0;v<H;v++){const S=(m=f==null?void 0:f.getImageData(v,g,1,1))==null?void 0:m.data;E.push(Ht(S))}c.cols.push(...E)}c.isFilled=!0,M()};return c.isFilled?(c.r!==e.r||c.score!==e.score)&&M():c.img.onload=y,(h=o)=>{const{x:f,y:m,r:g,winScore:E}=e;if(c.drawImg?h.drawImage(c.drawImg,f-g,m-g,2*g,2*g):l(h,f-g,m-g),i&&E&&c.drawImg)for(const v of n)h.fillStyle=v.c||"red",h.beginPath(),h.arc(f-g+v.x+v.r,m-g+v.y+v.r,v.r,0,Math.PI*2),h.closePath(),h.fill()}},q=1e4,at=(e=0)=>{const{addEventResize:o,useMeasure:a,translate:u}=x(),{getScore:s}=z(),c=["/media/cat.png"],i=s();let n,r=0,t=0,d=Math.floor(i/q);return o(()=>{const{cx:h,cy:f,s:m}=a();n=[],r=(m-2*m*.055*1.6)/2,t=m*.05;for(let g=0;g<c.length;g++){const E=c[g];n.push(kt({x:h,y:f+g*r*2+g*t,r,score:i-g*q<0?0:i-g*q,imgSrc:E,winScore:e}))}}),{up:()=>{d=d+1<c.length?d+1:c.length-1},down:()=>{d=d-1<0?0:d-1},render:()=>{u(()=>{n==null||n.forEach(h=>h())},0,-(d*r*2+d*t))},rect:()=>{const{cx:h,cy:f}=a(),m=innerWidth>innerHeight;return{x:m?h-r:0,y:m?0:f-r,w:m?2*r:innerWidth,h:m?innerHeight:2*r}}}},At=({popits:e,popEffect:o=()=>{}})=>{const{useTimer:a,rand:u,addEventClick:s,addEventMove:c,intersect:i,navigate:n}=x(),{addScore:r,getDifficultyTic:t}=z();let d=[],l,p,M=!1,y=0,h=0,f=0;const m=t(),g=()=>{const P=e.filter(b=>d.indexOf(b)===-1),C=u(P.length-1),I=P[C];I&&(I.p=!1,d.push(P[C]))},E=()=>{p=a(()=>{if(f-=10,e.length===d.length){M=!0,p.stop(),a(()=>{n("gameover")});return}g(),E()},f)},v=P=>{d=[];const C=e.length;let I=u(Math.round(C*.3),Math.round(C*.6));const b=[...e];if(P){const D=b.indexOf(P);b.splice(D,1)}for(let D=I;D>0;D--){const W=u(b.length-1),T=b[W];T.p=!1,d.push(T),b.splice(W,1)}f=m,l==null||l.stop(),p==null||p.stop(),l=a(E,d.length*m),y=y>0?y:u(3,5)},S=P=>{o(P),f=Math.min(f+5,m),h++,P.p=!0;const C=d.indexOf(P);d.splice(C,1),d.length<=0&&(y--,y>0?v(P):(l==null||l.stop(),p==null||p.stop(),r(h),a(()=>{n("gamescore",{winScore:h})},100)))},w=(P,C,I=!1)=>{if(!M){for(const b of d)if(i({x:P,y:C},b)){S(b);return}I||g()}};s(w),c((P,C)=>w(P,C,!0)),a(()=>{v()})},zt=()=>{const{addEventResize:e,rand:o,useScreenMeta:a}=x(),{from:u}=a(),s=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=u==="opening"?s[0]:s[o(s.length-1)],{render:i,setIntersections:n}=st({color:c}),{render:r,point:t}=Wt(),{render:d,point:l}=ot({getX:(y,h,f)=>y+Math.round(h*.25)+2*f,getY:(y,h,f)=>y+Math.round(h*.25)+0*f}),{render:p,point:M}=xt();return e(()=>{const y=M(),h=t(),f=l();n((m,g,E)=>!A({x:m,y:g,r:E},y)&&!A({x:m,y:g,r:E},h)&&!A({x:m,y:g,r:E},f))}),()=>{i(),r(),d(),p()}},Ft=()=>{const e=it(),{popEffect:o,render:a}=wt(),{popits:u,render:s}=ct({palette:e});return At({popits:u,popEffect:o}),()=>{a(),s()}},_t=()=>{const e="#ff6347",{setBackground:o}=x(),{minusDifficulty:a}=z(),{render:u}=ct({palette:e,retry:!0});return o(e),a(),()=>{u()}},Lt=()=>{const{translate:e,useScreenMeta:o}=x(),{plusDifficulty:a}=z(),{data:u}=o();it();const{render:s}=at(u==null?void 0:u.winScore),{render:c}=ot({getX:(n,r,t)=>innerWidth>innerHeight?Math.min(n+(r-2*r*.055*1.6)/2+4*t+Math.round(r*.1),innerWidth-2*t-Math.round(r*.1)):n+(r-2*r*.055*1.6)/8+0*Math.round(r*.1)+2*t,getY:(n,r,t)=>innerWidth>innerHeight?n+(r-2*r*.055*1.6)/2-1*t-Math.round(r*.1):Math.min(n+(r-2*r*.055*1.6)/2+4*t+Math.round(r*.1),innerHeight-2*t-Math.round(r*.1))}),{render:i}=Tt({getX:(n,r,t)=>innerWidth>innerHeight?Math.max(n-(r-2*r*.055*1.6)/2-4*t-Math.round(r*.1),2*t+Math.round(r*.1)):n+(r-2*r*.055*1.6)/8-2*Math.round(r*.1)-2*t,getY:(n,r,t)=>innerWidth>innerHeight?n-(r-2*r*.055*1.6)/2+0*t+Math.round(r*.1):Math.min(n+(r-2*r*.055*1.6)/2+4*t+Math.round(r*.1),innerHeight-2*t-Math.round(r*.1))});return a(),()=>{innerHeight>innerWidth?e(s,0,-Math.round(innerHeight*.07)):s(),c(),i()}},$t=()=>{const{addEventResize:e,rand:o}=x(),a=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],u=a[o(a.length-1)],{render:s,setIntersections:c}=st({color:u,frequency:10}),{render:i,rect:n,up:r,down:t}=at(),{render:d,point:l}=Ct(),{point:p}=bt(r),{point:M}=Rt(t);return e(()=>{const y=l(),h=n(),f=p(),m=M();c((g,E,v)=>!A({x:g,y:E,r:v},y)&&!vt({x:g,y:E,r:v},h)&&!A({x:g,y:E,r:v},f)&&!A({x:g,y:E,r:v},m))}),()=>{s(),i(),d()}},Ot=()=>{const{ctx:e,addEventResize:o,loop:a}=x(),u={x:40,y:100};let s=1,c=1,i;const n=()=>{i=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return n(),o(n),a(()=>{u.x+=2*s,u.y+=3*c,s*=-1,c*=-1}),()=>{e.save();var r=Math.random()*2,t=Math.random()*3;e.translate(r,t),e.beginPath(),e.fillStyle="red",e.rect(u.x,u.y,i,i),e.fill(),e.restore()}},Bt=[{name:"opening",ctor:St},{name:"main",ctor:zt},{name:"game",ctor:Ft},{name:"gameover",ctor:_t},{name:"gamescore",ctor:Lt},{name:"score",ctor:$t},{name:"devs",ctor:Ot}];Pt(Bt);document.title="Your's last Pop it";
