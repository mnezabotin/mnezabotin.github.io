(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();const xe=()=>{const n=document.createElement("canvas"),o=n.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const d=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},h=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return d(),document.body.appendChild(n),{ctx:o,render:h,resize:d,rotate:(e,i,r,M)=>{o.save(),o.translate(i,r),o.rotate(Math.PI*M),o.translate(-i,-r),e(),o.restore()},translate:(e,i,r)=>{o.save(),o.translate(i,r),e(),o.restore()},shade:(e,i)=>{e=e.substring(1);const r=parseInt(e,16),M=Math.round(2.55*i),P=(r>>16)+M,f=(r>>8&255)+M,p=(r&255)+M;return"#"+(16777216+(P<255?P<1?0:P:255)*65536+(f<255?f<1?0:f:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(e,i)=>{var r;document.body.style.background=e,document.body.style.backgroundColor=i||e,(r=document.querySelector('meta[name="theme-color"]'))==null||r.setAttribute("content",i||e)},createImg:(e,i,r=i)=>{const M=document.createElement("canvas"),P=M.getContext("2d");if(!P)throw new Error("CanvasRenderingContext2D is null");return M.width=i*devicePixelRatio,M.height=r*devicePixelRatio,P.scale(devicePixelRatio,devicePixelRatio),e(P),M}}},be=n=>{let o="",d="",h;const s=c=>n.find(l=>l.name===c)||n[0],t={render:()=>{},navigate:(c,l)=>{const e=s(c);d=o||"",o=(e==null?void 0:e.name)||"",h=l,t.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:d,data:h})};return t},Re=()=>{const n=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),o=[],d={};return{loop:(t,c)=>{if(Object.entries(d).find(([e,i])=>i===t)||c&&d[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&o.push(c),c=c||new Date().valueOf().toString(),d[c]=t;const l=()=>{t(),d[c]&&n(l)};l()},stop:t=>{if(typeof t=="string")delete d[t];else{const c=Object.entries(d).find(([l,e])=>e===t);c&&delete d[c[0]]}},stopAll:()=>{for(const t in d)o.indexOf(t)===-1&&delete d[t]}}};let J=[];const Ie=()=>{for(const n of J)clearTimeout(n);J=[]},Te=(n,o=400)=>{let d=new Date,h=o,s=setTimeout(n,h);return J.push(s),{pause:()=>{clearTimeout(s),h-=new Date-d},resume:()=>{d=new Date,clearTimeout(s),s=setTimeout(n,h),J.push(s)},stop:()=>{clearTimeout(s)}}},de=2147483646,ee=2147483647,ke=16807,We=(n=Math.floor(Math.random()*ee))=>{n=n%ee,n<=0&&(n+=de);const o=()=>(n=n*ke%ee,n),d=()=>(o()-1)/de;return(s,a)=>(a===void 0&&(a=s,s=0),Math.floor(d()*(a-s+1))+s)},De=(n,o)=>(o===void 0&&(o=n,n=0),Math.floor(Math.random()*(o-n+1))+n),Ae=()=>{const n=[],o=[],d=[];return{addEventResize:i=>{i(),n.push(i)},onResizeEvents:()=>n.forEach(i=>i()),addEventClick:i=>o.push(i),onClickEvents:(i,r)=>o.forEach(M=>M(i,r)),addEventMove:i=>d.push(i),onMoveEvents:(i,r)=>d.forEach(M=>M(i,r)),removeAllEvents:()=>{n.splice(0),o.splice(0),d.splice(0)}}},B=(n,o)=>{const d=Math.pow(Math.abs(n.x-o.x),2),h=Math.pow(Math.abs(n.y-o.y),2),s=n.r||0,a=o.r||0,t=Math.pow(s+a,2);return d+h<=t},ze=(n,o)=>{const d=n.r||0,h=o.w||0,s=o.h||0;return Math.abs(o.x+h/2-n.x)<=h/2+d&&Math.abs(o.y+s/2-n.y)<=s/2+d},He=(n,o)=>B(n,o),Le=n=>{const o=new AudioContext,d={},h=t=>{fetch(t).then(c=>c.arrayBuffer()).then(c=>(o==null?void 0:o.decodeAudioData(c))||null).then(c=>{c&&(d[t]=c)})};if(n&&n.length)for(const t of n)h(t);let s=!0;const a=(t,c)=>{s&&setTimeout(async()=>{const l=o.createBufferSource();d[t]||(d[t]=await fetch(t).then(e=>e.arrayBuffer()).then(e=>(o==null?void 0:o.decodeAudioData(e))||null)),l.buffer=d[t],l.connect(o.destination),c&&(l.playbackRate.value=c),l.start()},0)};return window.onfocus=()=>{s=!0},window.onblur=()=>{s=!1},a},Fe=()=>({ready:()=>{},showFullscreenAdv:()=>{}});let Q;const _e=(n,o=[],d)=>{if(Q)throw new Error("Webcore already specified");const h=xe(),s=be(n),{loop:a,stop:t,stopAll:c}=Re(),{addEventResize:l,onResizeEvents:e,addEventClick:i,onClickEvents:r,addEventMove:M,onMoveEvents:P,removeAllEvents:f}=Ae();let p=innerWidth/2,u=innerHeight/2,y=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight;const g=()=>({cx:p,cy:u,s:y,m,isL:w}),v=Le(o);Q={font:"Tijuf",sdk:Fe(),ctx:h.ctx,shade:h.shade,rotate:h.rotate,translate:h.translate,setBackground:h.setBackground,createImg:h.createImg,useMeasure:g,useScreenMeta:s.useScreenMeta,navigate:(S,C)=>{if(!n.some(b=>b.name===S))throw new Error(`Screen ${S} not specified`);c(),Ie(),f(),new Promise(()=>s.navigate(S,C))},loop:a,loopStop:t,useTimer:Te,rand:De,useRandChain:We,intersect:He,addEventResize:l,addEventClick:i,addEventMove:M,playSound:v},a(()=>h.render(s.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,y=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight,h.resize(),e()},document.onpointerdown=S=>{r(S.clientX,S.clientY)},document.onmousemove=S=>{P(S.clientX,S.clientY)},s.navigate()},R=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},z=n=>{const{shade:o,ctx:d,createImg:h}=R(),s=()=>{const{r:t,c="#ffffff",p:l}=n,e=d.createRadialGradient(t,t,t,t,t,t/5);return e.addColorStop(0,o(c,0)),e.addColorStop(.01,o(c,0)),e.addColorStop(.075,o(c,9)),e.addColorStop(.15,o(c,0)),e.addColorStop(.15,o(c,-15)),e.addColorStop(.18,o(c,-5)),e.addColorStop(.22,o(c,-15)),l?(e.addColorStop(.24,o(c,-10)),e.addColorStop(.3,o(c,-8)),e.addColorStop(.34,o(c,-12)),e.addColorStop(.6,o(c,-8)),e.addColorStop(1,o(c,-6))):(e.addColorStop(.24,o(c,-12)),e.addColorStop(.26,o(c,-8)),e.addColorStop(.3,o(c,-2)),e.addColorStop(.34,o(c,0)),e.addColorStop(.5,o(c,5)),e.addColorStop(1,o(c,18))),e},a=()=>{const{r:t,c="#ffffff",p:l}=n,e=`${c}_${l?"push":"pop"}_${t}`;if(te[e])return te[e];const i=h((r=d)=>{const M=s();r.fillStyle=M,r.beginPath(),r.arc(t,t,t,0,2*Math.PI),r.closePath(),r.fill()},2*t);return te[e]=i,i};return(t=d)=>{const{x:c,y:l,r:e}=n,i=a();t.drawImage(i,c-e,l-e,2*e,2*e)}},ne={},U=n=>{const{ctx:o}=R();let d;return ne[n.src]?d=ne[n.src]:(d=new Image,d.src=n.src,ne[n.src]=d),(h=o)=>{const{w:s,h:a=s,x:t=0,y:c=0}=n;d.complete&&h.drawImage(d,t,c,s,a)}},le=n=>{const{font:o,ctx:d}=R(),h=n.text,s=n.text.length,a=2*Math.PI/s/4;return(t=d)=>{const{x:c,y:l,r:e,s:i=0,fs:r}=n,M=r||Math.round(e/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${M}px ${o}`,t.save(),t.translate(c,l),t.rotate(i);for(let P=0;P<s;P++)t.save(),t.rotate(P*a),t.fillText(h[P],0,-e),t.restore();t.restore()}},O=n=>{const{font:o,ctx:d}=R();return(h=d)=>{const{text:s,x:a,c:t,y:c,fs:l,a:e="center",mw:i,f:r}=n;h.textAlign=e,h.fillStyle=t,h.font=`${l}px ${r||o}`,h.fillText(s,a,c,i)}},Be={tapToSkip:"нажмите что бы пропустить",theEnd:"Конец игры",youWin:"Вы выйграли",complete:"Открыто"};let Oe=Be;const Me=()=>Oe,$e=()=>{var S,C;const{ctx:n,loop:o,rotate:d,navigate:h,useMeasure:s,addEventClick:a,addEventResize:t,setBackground:c,useTimer:l}=R(),e=Me();c("#040404");let i=!1,r,M,P,f,p,u,y=-.2,m=0,w=!1;t(()=>{const{cx:b,cy:x,s:A}=s(),T=Math.round(A*.25);r={c:"#ff6347",x:b,y:x,r:T,p:!1},M=z(r),P=U({x:b-T+Math.round(T*.35),y:x-T+Math.round(T*.35),w:T*2-Math.round(T*.7),src:"/media/sloth.svg"}),f=le({text:"nezabotin",x:b,y:x,r:Math.round(T*1.1),s:Math.PI*1.6}),p=le({text:"production",x:b,y:x,r:Math.round(T*1.1),s:Math.PI*2.6}),u=O({text:e.tapToSkip,c:"#f1f1f1",y:innerHeight-Math.round(T/5),x:b,fs:Math.round(T/10),mw:A,f:"PressStart2P"})});const g=()=>{y+=.01,m=y>=1?1:y,y>=1.8&&(r.p=!0),y>=2.2&&(r.c="#f86a9a"),y>=2.6&&h("main")};a(()=>{[1.4,1.8,2.2,2.6].some(b=>{if(y<b)return y=b,!0})});const v=()=>{o(g),i=!0};(S=document==null?void 0:document.fonts)!=null&&S.ready?(C=document==null?void 0:document.fonts)==null||C.ready.then(v):v();const E=()=>l(()=>{w=!w,E()},250);return E(),()=>{const{cx:b,cy:x}=s();n.globalAlpha=i?1:0,M(),y<1.8&&P(),y<1.4&&d(()=>{f(),p()},b,x,m),w&&u(),n.globalAlpha=1}},ue="ylp",pe="score",oe="difficulty",fe="sound",se=[.14,.11,.09,.075],he=750,Ne=350,me=10,G=[];for(let n=0;n*me<=he-Ne;n++)G.push(he-n*me);let q=null;const $=()=>{const n=f=>localStorage.getItem(`${ue}_${f}`),o=(f,p)=>localStorage.setItem(`${ue}_${f}`,p.toString()),d=()=>+(n(pe)||0),h=f=>o(pe,f),s=f=>{const p=d();h(p+f)},a=()=>+(n(oe)||0),t=f=>{const p=a();o(oe,Math.min(Math.max(p+f,0),se.length*G.length-1))};return{getScore:d,addScore:s,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const f=a(),p=Math.floor(f/G.length);return se[p]||se[1]},getDifficultyTic:()=>{const f=a(),p=Math.floor(f/G.length),u=f-p*G.length;return G[u]||G[0]},resetDifficulty:()=>o(oe,0),getSound:()=>{if(q!==null)return q;const f=n(fe);return!f||f==="true"?(q=!0,!0):(q=!1,!1)},setSound:f=>{q=f,o(fe,f)}}};let ye=["/sounds/pop/pop1.mp3","/sounds/pop/pop2.mp3","/sounds/pop/pop3.mp3","/sounds/pop/pop4.mp3","/sounds/pop/pop5.mp3","/sounds/pop/pop6.mp3","/sounds/pop/pop7.mp3","/sounds/pop/pop8.mp3","/sounds/pop/pop9.mp3","/sounds/pop/pop10.mp3","/sounds/pop/pop11.mp3","/sounds/pop/pop12.mp3","/sounds/pop/pop13.mp3","/sounds/pop/pop14.mp3","/sounds/pop/pop15.mp3","/sounds/pop/pop16.mp3","/sounds/pop/pop17.mp3","/sounds/pop/pop18.mp3","/sounds/pop/pop19.mp3","/sounds/pop/pop20.mp3","/sounds/pop/pop21.mp3","/sounds/pop/pop22.mp3","/sounds/pop/pop23.mp3","/sounds/pop/pop24.mp3"],F=[...ye];const V=()=>{const{rand:n,playSound:o}=R(),{getSound:d}=$();return{playPop:()=>{if(!d())return;const l=n(F.length-1),e=F[l];F.splice(l,1),F.length||(F=[...ye]);const i=n(F.length-1);F=[...F.splice(i,F.length),...F],o(e)},playMissed:()=>{if(!d())return;o("/sounds/wrong.mp3")},playFail:()=>{if(!d())return;o("/sounds/fail.mp3")},playWin:()=>{if(!d())return;o("/sounds/win.mp3")},playComplete:()=>{if(!d())return;o("/sounds/complete.mp3")}}},j=100/2;let ge=0;const X=()=>{const{loop:n,ctx:o,shade:d,rand:h}=R(),{playPop:s,playMissed:a}=V(),t={},c=()=>{for(const i in t){const r=t[i];if(!r)return;const M=r.popit;if(!r.shake)r.tic+=j/5,r.tic>=j&&(r.dir=-1),r.withoutRad||(M.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:j-r.tic)));else{r.tic+=j/5;const P=h(1,2),f=h(1,2);M.x=r.origX+Math.random()*P*(Math.random()>.5?1:-1),M.y=r.origY+Math.random()*f*(Math.random()>.5?1:-1)}r.tic>=2*j&&(delete t[i],M.r=r.origR,M.x=r.origX,M.y=r.origY)}},l=(i,r=!1,M=!1)=>{var w;r?a():s(),(w=navigator==null?void 0:navigator.vibrate)==null||w.call(navigator,30),ge++;const P=`${new Date().valueOf().toString()}_${ge}`,f=1,p=1;let u=i.r,y=i.x,m=i.y;for(const g in t){const v=t[g];i===v.popit&&(u=v.origR,y=v.origX,m=v.origY)}t[P]={withoutRad:r,tic:f,dir:p,popit:i,origR:u,origX:y,origY:m,shake:M}},e=()=>{o.globalAlpha=.25;for(const i in t){const r=t[i];if(r.shake)continue;const M=r.popit;o.fillStyle=d(M.c||"red",-12),o.beginPath(),o.arc(M.x,M.y,M.r+r.origR*.001*(r.tic+(r.dir>0?0:j-r.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return n(c),{popEffect:l,render:e}},Ye=({color:n="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,navigate:t,addEventClick:c,intersect:l}=R(),{from:e}=a();let i,r,M;return d(()=>{const{cx:p,cy:u,s:y,m}=h(),w=Math.round(y*.25);i={c:n,r:Math.round(y*.08),x:p-w-1*m,y:u-w+1*m,p:(e==="score"||e==="opening"||e==="devs")&&!i},r=z(i),M=U({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),c((p,u)=>{l({x:p,y:u},i)&&(o(i),i.p=!0,s(()=>{t("score")},100))}),{render:()=>{r(),i.p||M()},point:()=>({x:i.x,y:i.y,r:i.r})}},ve=({color:n="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,navigate:a,addEventClick:t,intersect:c}=R();let l,e,i;return d(()=>{const{s:P}=h(),f=Math.round(P*.08);l={c:n,r:f,x:Math.round(1.6*f),y:Math.round(1.6*f),p:!l},e=z(l),i=U({x:Number(l.x)-f+Math.round(f*.4),y:Number(l.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),s(()=>{l.p&&o(l,!1,!0),l.p=!1}),t((P,f)=>{c({x:P,y:f},l)&&(o(l),l.p=!0,s(()=>{a("main")},100))}),{render:()=>{e(),l.p||i()},point:()=>({x:l.x,y:l.y,r:l.r})}},Ge=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,addEventClick:a,intersect:t,rotate:c}=R(),{playPop:l}=V();let e,i,r;return d(()=>{const{s:f}=h(),p=Math.round(f*.08);e={c:"#ff6347",r:p,x:Math.round(innerWidth-1.6*p),y:Math.round(innerHeight-1.6*p),p:!1},i=z(e),r=U({x:Number(e.x)-p+Math.round(p*.4),y:Number(e.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),a((f,p)=>{t({x:f,y:p},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||c(()=>{r()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},je=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,addEventClick:a,intersect:t,rotate:c}=R(),{playPop:l}=V();let e,i,r;return d(()=>{const{s:f,isL:p}=h(),u=Math.round(f*.08),y=Math.round(p?innerWidth-1.6*u:innerWidth-1.6*u-2*u-.3*u),m=Math.round(p?innerHeight-1.6*u-2*u-.3*u:innerHeight-1.6*u);e={c:"#ff6347",r:u,x:y,y:m,p:!1},i=z(e),r=U({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),a((f,p)=>{t({x:f,y:p},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||c(()=>{r()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Xe=n=>{const{ctx:o,shade:d}=R(),h=Math.round(n.r/2.2),s=Math.round(.15*n.r),a=d(n.c||"blue",-3);return(t=o)=>{const{r:c,x:l=c,y:e=c}=n;t.lineCap="round",t.fillStyle=a,t.strokeStyle=a,t.lineWidth=h,t.beginPath(),t.moveTo(l+s,e),t.lineTo(l-s/2,e-s),t.lineTo(l-s/2,e+s),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l+s,e),t.lineTo(l-s/2,e-s),t.moveTo(l-s/2,e-s),t.lineTo(l-s/2,e+s),t.moveTo(l-s/2,e+s),t.lineTo(l+s,e),t.stroke()}},Pe=({color:n="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,navigate:t,addEventClick:c,intersect:l}=R(),{from:e,to:i}=a();let r,M,P;const f=()=>{const{cx:w,cy:g,s:v,m:E}=h(),S=w+Math.round(v*.25)+2*E,C=g+Math.round(v*.25);return{x:S,y:C}},p=()=>{const{cx:w,cy:g,s:v,isL:E,m:S}=h(),C=Math.round(v*.1);if(E){let b=Math.round(w+v/2)+S*2;const x=Math.round(g+v/2-C*2);return b=Math.min(b,Math.round(innerWidth-C*1.5)),{x:b,y:x}}else{const b=Math.round(w+v*.12);let x=Math.round(g+v/2+C*1.5);return x=Math.min(x,innerHeight-Math.round(C*1.5)),{x:b,y:x}}},u=()=>i==="main"?f():p();return d(()=>{const{s:w}=h();r={c:n,r:Math.round(w*.1),...u(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!r},M=z(r),P=Xe(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),c((w,g)=>{l({x:w,y:g},r)&&(o(r),r.p=!0,s(()=>{t("game")},100))}),{render:()=>{M(),r.p||P()},point:()=>({x:r.x,y:r.y,r:r.r})}},Se=n=>{const{ctx:o,shade:d}=R(),h=Math.round(n.r/4),s=Math.round(.12*n.r);return(a=o)=>{const{r:t,x:c=t,y:l=t}=n,e=d(n.c||"blue",-3);a.lineCap="round",a.strokeStyle=e,a.lineWidth=h,a.beginPath(),a.moveTo(c-1.5*s,l-2*s),a.lineTo(c-1.5*s,l+2*s),a.stroke(),a.beginPath(),a.moveTo(c+1.5*s,l-2*s),a.lineTo(c+1.5*s,l+2*s),a.stroke()}},qe=({popEffect:n=()=>{}})=>{const{addEventResize:o,useMeasure:d,useTimer:h,useScreenMeta:s,navigate:a,addEventClick:t,intersect:c}=R(),{from:l}=s();let e,i,r;const M=()=>{const{cx:p,cy:u,s:y,isL:m,m:w}=d(),g=Math.round(y*.1);if(m){let v=Math.round(p-y/2)-w;const E=Math.round(u-y/2+g*2);return v=Math.max(v,Math.round(g*1.5)),{x:v,y:E}}else{const v=Math.round(p-y*.12);let E=Math.round(u+y/2+g*1.5);return E=Math.min(E,innerHeight-Math.round(g*1.5)),{x:v,y:E}}};return o(()=>{const{s:p}=d();e={c:"#fd8059",r:Math.round(p*.08),...M(),p:(l==="game"||l==="opening")&&!e},i=z(e),r=Se(e)}),h(()=>{e.p&&n(e,!1,!0),e.p=!1},500),t((p,u)=>{c({x:p,y:u},e)&&(n(e),e.p=!0,h(()=>{a("main")},100))}),{render:()=>{i(),e.p||r()},point:()=>({x:e.x,y:e.y,r:e.r})}},Ue=n=>{const{ctx:o,shade:d}=R(),h=Math.round(n.r/4),s=Math.round(.2*n.r),a=d(n.c||"blue",-5);return(t=o)=>{const{r:c,x:l=c,y:e=c}=n;t.lineCap="round",t.fillStyle=a,t.strokeStyle=a,t.lineWidth=h,t.beginPath(),t.ellipse(l-s,e+s,h,s,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l-s/2,e+s),t.lineTo(l,e-s),t.lineTo(l+s,e-s),t.stroke(),n.on||(t.lineWidth=Math.round(h/3),t.beginPath(),t.moveTo(l-c/4,e-c/4),t.lineTo(l+c/4,e+c/4),t.stroke())}},Ve=({color:n="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,addEventClick:t,intersect:c}=R(),{from:l}=a(),{getSound:e,setSound:i}=$();let r,M,P;return d(()=>{const{cx:u,cy:y,s:m,m:w}=h(),g=Math.round(m*.25),v=Math.round(m*.065),E=e();r={c:n,r:v,x:u-g-v-w,y:y-g+3*v,p:(l==="opening"||l==="devs")&&!r,on:E},M=z(r),P=Ue(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),t((u,y)=>{if(c({x:u,y},r)){let m=e();m=!m,i(m),r.p=!0,r.on=m,o(r),s(()=>{r.p=!1},100)}}),{render:()=>{M(),r.p||P()},point:()=>({x:r.x,y:r.y,r:r.r})}},Ke=({color:n="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:s,useScreenMeta:a,addEventClick:t,intersect:c,navigate:l}=R(),{from:e}=a();let i,r,M,P,f=0;return d(()=>{const{cx:y,cy:m,s:w}=h(),g=Math.round(w*.25);i={c:n,x:y,y:m,r:g,p:(e==="opening"||e==="devs")&&!i},r=z(i),M=O({text:"Yola",c:"#f1f1f1",x:y,y:m-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2,f:"Tijuf"}),P=O({text:"PopiT",c:"#ffeb3b",x:y,y:m-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2,f:"Tijuf"})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),t((y,m)=>{c({x:y,y:m},i)&&!(i!=null&&i.p)&&(f++,o(i),i.p=!0,s(()=>{f>12?l("devs"):(i!=null&&i.p&&o(i,!1,!0),i.p=!1)},200))}),{render:()=>{r(),i.p||(M(),P())},point:()=>({x:i.x,y:i.y,r:i.r})}},we=({color:n="#00dcfe",frequency:o=20})=>{const{addEventResize:d,useRandChain:h,useMeasure:s,rand:a,useTimer:t,setBackground:c,useScreenMeta:l}=R(),{from:e}=l();c(n);const i=a(0,999);let r=[],M=[];d(()=>{const u=h(i),{s:y}=s();r=[];const m=Math.round(y*.04),w=Math.round(innerWidth/m/2)-2,g=Math.round((innerWidth-2*m*w)/(w+1)),v=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*v)/(v+1));for(let S=0;S<v;S++)for(let C=0;C<w;C++)u(u(o))<1&&r.push({x:g+m+C*m*2+g*C,y:E+m+S*m*2+E*S,r:m,c:n,p:e==="opening"?!0:u(1)>0});M=r.map(S=>z(S))});const P=()=>{t(()=>{const u=a(r.length-1);r[u]&&(r[u].p=!r[u].p),P()},750)};return e==="opening"?t(()=>{r.forEach(u=>u.p=a(1)>0),P()}):P(),{render:()=>{M.forEach(u=>u())},setIntersections:u=>{r=r.filter(({x:y,y:m,r:w})=>u(y,m,w)),M=r.map(y=>z(y))}}},ce=(n=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:h,setBackground:s,rand:a}=R(),{getDifficultyRad:t}=$();return o=[...o.splice(a(o.length-1),o.length),...o],n||d(()=>{const{s:l}=h(),e=t(),i=Math.round(l*e),r=Math.round(innerWidth/i/2)-1,M=(innerWidth-2*i*r)/(r+1),P=Math.round(innerHeight/i/2)-1,f=(innerHeight-2*i*P)/(P+1),p=innerWidth>=innerHeight,u=p?r:P,y=p?M:f,m=p?innerWidth:innerHeight;let w=0;const g=[];for(let E=0;E<u;E++)o[w]||(w=0),g.push(`${o[w]} ${(y+i+E*i*2+y*E)/m*100}%`),w++;s(`linear-gradient(${p?"to right":"to bottom"}, ${g.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},Ee=({palette:n,retry:o,popEffect:d=()=>{}})=>{const{addEventResize:h,useMeasure:s,rand:a,useTimer:t,useScreenMeta:c,navigate:l,addEventClick:e,intersect:i}=R(),{from:r}=c(),{getDifficultyRad:M}=$(),P=[];let f=[],p,u,y,m={x:0,y:0,r:0};const w=v=>Array.isArray(n)?n[v]:n;return h(()=>{const{s:v}=s();P.splice(0);const E=M(),S=Math.round(v*E),C=Math.round(innerWidth/S/2)-1,b=(innerWidth-2*S*C)/(C+1),x=Math.round(innerHeight/S/2)-1,A=(innerHeight-2*S*x)/(x+1),T=innerWidth>=innerHeight;let H=0;for(let D=0;D<x;D++){for(let L=0;L<C;L++){w(H)||(H=0);const I={x:b+S+L*S*2+b*L,y:A+S+D*S*2+A*D,r:S,c:w(H),p:!0};D===0&&L===C-1?(m={x:I.x,y:I.y,r:I.r,c:I.c,p:(r==="main"||r==="gameover"||r==="gamescore")&&!m.r},p=z(m),u=Se(m)):P.push(I),H+=T?1:0}H=T?0:H+1}o&&(y=P[a(P.length-1)],t(()=>{d(y,!1,!0),y.p=!1})),f=P.map(D=>z(D))}),t(()=>{m.p&&d(m,!1,!0),m.p=!1}),o&&e((v,E)=>{i({x:v,y:E},y)&&(d(y),y.p=!0,t(()=>{l("game")},100))}),e((v,E)=>{i({x:v,y:E},m)&&(d(m),m.p=!0,t(()=>{l("main")},100))}),{render:()=>{f.forEach(v=>v()),p(),m!=null&&m.p||u()},popits:P,pausePpt:m}},Y=100,K="#222",Je=n=>{const o=(n==null?void 0:n[0])||0,d=(n==null?void 0:n[1])||0,h=(n==null?void 0:n[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(d<255?d<1?0:d:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},re={},Qe=n=>{const{ctx:o,createImg:d,useRandChain:h,useTimer:s}=R();let a,t=!1,c=[];const l=n.r*2/Y/2;re[n.imgSrc]?a=re[n.imgSrc]:(a=re[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},a.img.src=n.imgSrc);const e=()=>s(()=>{t=!t,e()},250),i=(p,u=o)=>{const{x:y,y:m,c:w,r:g}=p;u.fillStyle=w||"red",u.beginPath(),u.arc(y+g,m+g,g,0,Math.PI*2),u.closePath(),u.fill()},r=(p=o,u=0,y=0)=>{p.fillStyle=K,p.beginPath(),p.roundRect(u,y,2*n.r,2*n.r,l),p.closePath(),p.fill()},M=()=>{const p=[];for(let g=0;g<Y;g++)for(let v=0;v<Y;v++){const E={x:v*l*2,y:g*l*2,r:l,c:K};p.push(E)}let u=n.score-n.winScore;const y=[...p],m=h(n.seed),w=(g=!1)=>{const v=m(y.length-1),E=y[v],S=p.indexOf(E);E.c=g?K:a.cols[S],y.splice(v,1),g&&c.push({...E,c:a.cols[S]})};for(let g=u;g>0;g--)w();if(n.winScore){c=[];for(let g=n.winScore;g>0;g--)w(!0);e()}return p},P=()=>{const p=M();a.drawImg=d((u=o)=>{r(u),p.filter(y=>y.c!==K).forEach(y=>i(y,u))},2*n.r)},f=async()=>{var y;const p=document.createElement("canvas");p.width=Y,p.height=Y;const u=p.getContext("2d",{willReadFrequently:!0});u==null||u.drawImage(a.img,0,0);for(let m=0;m<Y;m++){const w=[];for(let g=0;g<Y;g++){const v=(y=u==null?void 0:u.getImageData(g,m,1,1))==null?void 0:y.data;w.push(Je(v))}a.cols.push(...w)}a.isFilled=!0,P()};return a.isFilled?(a.r!==n.r||a.score!==n.score)&&P():a.img.onload=f,(p=o)=>{const{x:u,y,r:m,winScore:w}=n;if(a.drawImg?p.drawImage(a.drawImg,u-m,y-m,2*m,2*m):r(p,u-m,y-m),t&&w&&a.drawImg)for(const g of c)p.fillStyle=g.c||"red",p.beginPath(),p.arc(u-m+g.x+g.r,y-m+g.y+g.r,g.r,0,Math.PI*2),p.closePath(),p.fill()}},ie=1e4,Ce=(n=0,o=!1)=>{const{addEventResize:d,useMeasure:h,translate:s}=R(),{getScore:a}=$(),t=["/media/levels/sloth.png","/media/levels/rabbit.png","/media/levels/bear.png","/media/levels/horse.png","/media/levels/fish.png","/media/levels/lion.png","/media/levels/elephant.png","/media/levels/tiger.png","/media/levels/crocodile.png","/media/levels/beaver.png","/media/levels/giraffe.png","/media/levels/penguin.png","/media/levels/wolf.png","/media/levels/chiken.png","/media/levels/pig.png","/media/levels/shimp.png","/media/levels/corgi.png","/media/levels/cow.png","/media/levels/deer.png","/media/levels/donkey.png","/media/levels/panda.png","/media/levels/dinosaur.png","/media/levels/rat.png","/media/levels/turtle.png","/media/levels/cockroach.png","/media/levels/parrot.png","/media/levels/kangaroo.png","/media/levels/spider.png","/media/levels/squirrel.png","/media/levels/stork.png","/media/levels/whale.png"],c=a();let l,e=0,i=0,r=!1,M=!1;const P=g=>Math.min(Math.floor(g/ie),t.length-1);let f=P(c-n);n&&(r=P(c)!==f,M=Math.floor(c/ie)>t.length-1);const p=()=>{const{cx:g,cy:v,s:E,isL:S}=h();l=[],e=(E-2*E*.055*1.6)/2,i=E*.05;let C=o?f:Math.max(f-1,0);for(C;C<(o?f+1:Math.min(f+2,t.length));C++){const b=t[C],x=S?g:g+C*e*2+C*i,A=S?v+C*e*2+C*i:v;l.push(Qe({x,y:A,r:e,score:Math.min(c-C*ie,1e4),imgSrc:b,winScore:r||M?0:n,seed:C}))}};return d(p),{up:()=>{f=f+1<t.length?f+1:t.length-1,p()},down:()=>{f=f-1<0?0:f-1,p()},render:()=>{const{isL:g}=h(),v=g?0:-(f*e*2+f*i),E=g?-(f*e*2+f*i):0;s(()=>{l==null||l.forEach(S=>S())},v,E)},rect:()=>{const{cx:g,cy:v}=h(),E=innerWidth>innerHeight;return{x:E?g-e:0,y:E?0:v-e,w:E?2*e:innerWidth,h:E?innerHeight:2*e}},isJump:r,isCompleted:M}},Ze=({popits:n,pausePpt:o,popEffect:d=()=>{},splashEffect:h=()=>{}})=>{const{useTimer:s,rand:a,addEventClick:t,addEventMove:c,intersect:l,navigate:e,addEventResize:i}=R(),{getScore:r,addScore:M,getDifficultyTic:P}=$();let f=[],p,u,y=!1,m=0,w=0,g=0,v,E,S=!1;const C=r(),b=P(),x=()=>{v&&E&&w&&!S&&new Date().getTime()-v.getTime()<=E*350&&(w=w*2),v=new Date,E=f.length,S=!1},A=I=>{const k=n.filter(N=>f.indexOf(N)===-1&&N!==I),_=a(k.length-1),W=k[_];W&&(d(W,!1,!0),W.p=!1,f.push(k[_]))},T=()=>{u=s(()=>{if(g=Math.max(g-10,50),n.length===f.length){y=!0,u==null||u.stop(),s(()=>{e("gameover")});return}A(),T()},g)},H=I=>{f=[];const k=n.length;let _=a(Math.round(k*.3),Math.round(k*.6));const W=[...n];if(I){const N=W.indexOf(I);W.splice(N,1)}for(let N=_;N>0;N--){const ae=a(W.length-1),Z=W[ae];Z.p=!1,d(Z,!1,!0),f.push(Z),W.splice(ae,1)}g=b,p==null||p.stop(),u==null||u.stop(),u=null,C&&(p=s(()=>{h("SLOWLY"),T()},f.length*b)),m=m>0?m:a(3,5),x()},D=I=>{d(I),g=Math.min(g+5,b),w++,I.p=!0;const k=f.indexOf(I);f.splice(k,1),f.length<=0&&(m--,m>0?s(()=>{h(m>1?"Round":"Last"),H(I)},100):(x(),p==null||p.stop(),u==null||u.stop(),M(w),s(()=>{e("gamescore",{winScore:w})},100)))},L=(I,k,_=!1)=>{if(!y){for(const W of f)if(l({x:I,y:k},W)){D(W);return}if(!l({x:I,y:k},o)&&!_){for(const W of n)if(l({x:I,y:k},W)){d(W,!0),h("Popenalty"),S=!0,A(W),u===null&&(p==null||p.stop(),T());return}h("Popenalty"),S=!0,A()}}};t(L),c((I,k)=>L(I,k,!0)),i(()=>{s(()=>{h("Pop it"),H()})})},et=n=>{const{addEventResize:o,createImg:d,useMeasure:h,ctx:s,loop:a}=R();let t,c,l,e,i,r,M,P=!1,f=-2;const p=.1;return o(()=>{const{s:u,m:y,cy:m}=h();c=Math.round(u*.16),i=u,r=Math.round(c*1.5),l=0,e=Math.max(Math.round((innerHeight-m-u/2)/2-c/2)+y*4,Math.round(m-u/2-c*2)),M=e,P=e-c/2>-(c/2)+y*2;const w={fs:c,text:n,x:Math.round(u/2),y:c,c:"#f9f9f9",mw:Math.round(u*.8),f:"PressStart2P"},g=O(w);t=d((v=s)=>{g(v)},i,r)}),a(()=>{const{m:u}=h();e+=f,f+=p,e<=u&&(e=u),e>=M&&(e=M,f=-2)}),()=>{P&&s.drawImage(t,l,e,i,r)}},tt=()=>{const{addEventResize:n,rand:o,useScreenMeta:d}=R(),{from:h}=d(),{popEffect:s,render:a}=X(),t=["#00dcfe","#5bb2f7","#92E6E6"],c=h==="opening"?t[0]:t[o(t.length-1)],{render:l,setIntersections:e}=we({color:c}),{render:i,point:r}=Ke({popEffect:s}),{render:M,point:P}=Pe({popEffect:s}),{render:f,point:p}=Ye({popEffect:s}),{render:u,point:y}=Ve({popEffect:s});return n(()=>{const m=p(),w=r(),g=P(),v=y();e((E,S,C)=>!B({x:E,y:S,r:C},m)&&!B({x:E,y:S,r:C},w)&&!B({x:E,y:S,r:C},g)&&!B({x:E,y:S,r:C},v))}),()=>{a(),l(),i(),M(),f(),u()}},nt=()=>{const{useMeasure:n,addEventResize:o}=R(),d=ce(),{popEffect:h,render:s}=X(),{popits:a,render:t,pausePpt:c}=Ee({palette:d,popEffect:h});return Ze({popits:a,popEffect:h,pausePpt:c}),o(()=>{(a[0].y-a[0].r)/n().m}),()=>{s(),t()}},ot=()=>{const n="#ff6347",{popEffect:o,render:d}=X(),{setBackground:h}=R(),{minusDifficulty:s}=$(),{render:a}=Ee({palette:n,retry:!0,popEffect:o}),{playFail:t}=V();return h(n),s(),t(),()=>{d(),a()}},st=()=>{const{useScreenMeta:n,useTimer:o,navigate:d}=R(),{plusDifficulty:h,resetDifficulty:s}=$(),a=Me(),{data:t}=n(),{popEffect:c,render:l}=X();ce();const{playWin:e,playComplete:i}=V(),{render:r,isJump:M,isCompleted:P}=Ce(t==null?void 0:t.winScore,!0);let f,p;if(!P){const{render:y}=Pe({popEffect:c}),{render:m}=qe({popEffect:c});f=y,p=m}const u=et(P?a.theEnd:M?a.complete:a.youWin);return M||P?(s(),i()):(h(),e()),P&&o(()=>{d("devs")},5e3),()=>{l(),r(),P||(f(),p()),u()}},rt=()=>{const{addEventResize:n,rand:o}=R(),{popEffect:d,render:h}=X(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],a=s[o(s.length-1)],{render:t,setIntersections:c}=we({color:a,frequency:10}),{render:l,rect:e,up:i,down:r}=Ce(),{render:M,point:P}=ve({popEffect:d}),{render:f,point:p}=Ge({onClick:i,popEffect:d}),{render:u,point:y}=je({onClick:r,popEffect:d});return n(()=>{const m=P(),w=e(),g=p(),v=y();c((E,S,C)=>!B({x:E,y:S,r:C},m)&&!ze({x:E,y:S,r:C},w)&&!B({x:E,y:S,r:C},g)&&!B({x:E,y:S,r:C},v))}),()=>{h(),t(),l(),M(),f(),u()}},it=()=>{var w,g;const{addEventResize:n,setBackground:o,createImg:d,useMeasure:h,ctx:s,loop:a,navigate:t,useTimer:c}=R(),{popEffect:l,render:e}=X();let i=null;const r=ce(!0);let M=[];const P=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Motivator","Mentor"];let f=0,p=!1;const u=()=>{const{m:v,s:E}=h();M=[];const S=Math.round(E*.75),C=Math.round((innerWidth-S)/2);let b=0,x=Math.round(v*7);const A=O({text:"Yo last",c:"#f1f1f1",x:S/2,y:x,fs:x}),T=O({text:"Pop it",c:"#ffeb3b",x:S/2,y:x*2,fs:x}),H=d((D=s)=>{A(D),T(D)},S,3*x);M.push({img:H,x:C,y:f,w:S,h:5*x}),f+=7*x,x=Math.round(v*3.5);for(const D of P){r[b]||(b=0);const L=O({text:D.toLocaleUpperCase(),x:0,y:x,c:r[b],fs:Math.round(x*.6),mw:S,a:"left"}),I=O({text:"Maxim Nezabotin",x:S,y:x*1.9,c:"#f9f9f9",fs:Math.round(x*.5),mw:S,a:"right",f:"PressStart2P"}),k=d((_=s)=>{L(_),I(_)},S,2*x);M.push({img:k,x:C,y:f,w:S,h:5*x}),f+=5*x,b++}};n(u),o("#040404");const y=()=>{for(const E of M)E.y-=2;const v=M[M.length-1];v.y+v.h<0&&t("main")},m=()=>{f=innerHeight,u(),a(y),p=!0};return(w=document==null?void 0:document.fonts)!=null&&w.ready?(g=document==null?void 0:document.fonts)==null||g.ready.then(m):m(),c(()=>{const{render:v}=ve({popEffect:l});i=v},7500),()=>{s.globalAlpha=p?1:0,M.forEach(({img:v,x:E,y:S,w:C,h:b})=>{S+b>=0&&S<=innerHeight&&s.drawImage(v,E,S,C,b)}),e(),i==null||i(),s.globalAlpha=1}},ct=[{name:"opening",ctor:$e},{name:"main",ctor:tt},{name:"game",ctor:nt},{name:"gameover",ctor:ot},{name:"gamescore",ctor:st},{name:"score",ctor:rt},{name:"devs",ctor:it}],at=["/sounds/pop/pop1.mp3","/sounds/pop/pop2.mp3","/sounds/pop/pop3.mp3","/sounds/pop/pop4.mp3","/sounds/pop/pop5.mp3","/sounds/pop/pop6.mp3","/sounds/pop/pop7.mp3","/sounds/pop/pop8.mp3","/sounds/pop/pop9.mp3","/sounds/pop/pop10.mp3","/sounds/pop/pop11.mp3","/sounds/pop/pop12.mp3","/sounds/pop/pop13.mp3","/sounds/pop/pop14.mp3","/sounds/pop/pop15.mp3","/sounds/pop/pop16.mp3","/sounds/pop/pop17.mp3","/sounds/pop/pop18.mp3","/sounds/pop/pop19.mp3","/sounds/pop/pop20.mp3","/sounds/pop/pop21.mp3","/sounds/pop/pop22.mp3","/sounds/pop/pop23.mp3","/sounds/pop/pop24.mp3","/sounds/fail.mp3","/sounds/wrong.mp3","/sounds/win.mp3","/sounds/complete.mp3"];document.title="Yo last Pop it";const dt=async()=>{_e(ct,at)};dt();
