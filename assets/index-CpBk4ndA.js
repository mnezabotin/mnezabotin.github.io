(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function f(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();const ye=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},f=i=>{t.clearRect(0,0,innerWidth,innerHeight),i()};return a(),document.body.appendChild(e),{ctx:t,render:f,resize:a,rotate:(i,o,c,h)=>{t.save(),t.translate(o,c),t.rotate(Math.PI*h),t.translate(-o,-c),i(),t.restore()},translate:(i,o,c)=>{t.save(),t.translate(o,c),i(),t.restore()},shade:(i,o)=>{i=i.substring(1);const c=parseInt(i,16),h=Math.round(2.55*o),m=(c>>16)+h,u=(c>>8&255)+h,p=(c&255)+h;return"#"+(16777216+(m<255?m<1?0:m:255)*65536+(u<255?u<1?0:u:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(i,o)=>{var c;document.body.style.background=i,document.body.style.backgroundColor=o||i,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",o||i)},createImg:(i,o,c=o)=>{const h=document.createElement("canvas"),m=h.getContext("2d");if(!m)throw new Error("CanvasRenderingContext2D is null");return h.width=o*devicePixelRatio,h.height=c*devicePixelRatio,m.scale(devicePixelRatio,devicePixelRatio),i(m),h}}},ve=e=>{let t="",a="",f;const r=l=>e.find(d=>d.name===l)||e[0],n={render:()=>{},navigate:(l,d)=>{const i=r(l);a=t||"",t=(i==null?void 0:i.name)||"",f=d,n.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:a,data:f})};return n},Ee=()=>{const e=requestAnimationFrame||(n=>setTimeout(n,16.666666666666668)),t=[],a={};return{loop:(n,l)=>{if(Object.entries(a).find(([i,o])=>o===n)||l&&a[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&t.push(l),l=l||new Date().valueOf().toString(),a[l]=n;const d=()=>{n(),a[l]&&e(d)};d()},stop:n=>{if(typeof n=="string")delete a[n];else{const l=Object.entries(a).find(([d,i])=>i===n);l&&delete a[l[0]]}},stopAll:()=>{for(const n in a)t.indexOf(n)===-1&&delete a[n]}}};let j=[];const Pe=()=>{for(const e of j)clearTimeout(e);j=[]},Se=(e,t=400)=>{let a=new Date,f=t,r=setTimeout(e,f);return j.push(r),{pause:()=>{clearTimeout(r),f-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(e,f),j.push(r)},stop:()=>{clearTimeout(r)}}},oe=2147483646,V=2147483647,xe=16807,we=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=oe);const t=()=>(e=e*xe%V,e),a=()=>(t()-1)/oe;return(r,s)=>(s===void 0&&(s=r,r=0),Math.floor(a()*(s-r+1))+r)},Ce=(e,t)=>(t===void 0&&(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e),Ie=()=>{const e=[],t=[],a=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>t.push(o),onClickEvents:(o,c)=>t.forEach(h=>h(o,c)),addEventMove:o=>a.push(o),onMoveEvents:(o,c)=>a.forEach(h=>h(o,c)),removeAllEvents:()=>{e.splice(0),t.splice(0),a.splice(0)}}},L=(e,t)=>{const a=Math.pow(Math.abs(e.x-t.x),2),f=Math.pow(Math.abs(e.y-t.y),2),r=e.r||0,s=t.r||0,n=Math.pow(r+s,2);return a+f<=n},Re=(e,t)=>{const a=e.r||0,f=t.w||0,r=t.h||0;return Math.abs(t.x+f/2-e.x)<=f/2+a&&Math.abs(t.y+r/2-e.y)<=r/2+a},be=(e,t)=>L(e,t),Te=e=>{const t=new AudioContext,a={},f=s=>{fetch(s).then(n=>n.arrayBuffer()).then(n=>(t==null?void 0:t.decodeAudioData(n))||null).then(n=>{n&&(a[s]=n)})};if(e.length)for(const s of e)f(s);return s=>{setTimeout(async()=>{const n=t.createBufferSource();a[s]||(a[s]=await fetch(s).then(l=>l.arrayBuffer()).then(l=>(t==null?void 0:t.decodeAudioData(l))||null)),n.buffer=a[s],n.connect(t.destination),n.start()},0)}};let q;const We=(e,t)=>{if(q)throw new Error("Webcore already specified");const a=ye(),f=ve(e),{loop:r,stop:s,stopAll:n}=Ee(),{addEventResize:l,onResizeEvents:d,addEventClick:i,onClickEvents:o,addEventMove:c,onMoveEvents:h,removeAllEvents:m}=Ie();let u=innerWidth/2,p=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight;const y=()=>({cx:u,cy:p,s:g,m:v,isL:M}),E=Te(t);q={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:y,useScreenMeta:f.useScreenMeta,navigate:(P,x)=>{if(!e.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);n(),Pe(),m(),new Promise(()=>f.navigate(P,x))},loop:r,loopStop:s,useTimer:Se,rand:Ce,useRandChain:we,intersect:be,addEventResize:l,addEventClick:i,addEventMove:c,playSound:E},r(()=>a.render(f.render),"draw"),window.onresize=()=>{u=innerWidth/2,p=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight,a.resize(),d()},document.onpointerdown=P=>{o(P.clientX,P.clientY)},document.onmousemove=P=>{h(P.clientX,P.clientY)},f.navigate()},w=()=>{if(!q)throw new Error("Webcore not specified");return{...q}},K={},W=e=>{const{shade:t,ctx:a,createImg:f}=w(),r=()=>{const{r:n,c:l="#ffffff",p:d}=e,i=a.createRadialGradient(n,n,n,n,n,n/5);return i.addColorStop(0,t(l,0)),i.addColorStop(.01,t(l,0)),i.addColorStop(.075,t(l,9)),i.addColorStop(.15,t(l,0)),i.addColorStop(.15,t(l,-15)),i.addColorStop(.18,t(l,-5)),i.addColorStop(.22,t(l,-15)),d?(i.addColorStop(.24,t(l,-10)),i.addColorStop(.3,t(l,-8)),i.addColorStop(.34,t(l,-12)),i.addColorStop(.6,t(l,-6)),i.addColorStop(1,t(l,-4))):(i.addColorStop(.24,t(l,-12)),i.addColorStop(.26,t(l,-8)),i.addColorStop(.3,t(l,-2)),i.addColorStop(.34,t(l,0)),i.addColorStop(.5,t(l,5)),i.addColorStop(1,t(l,12))),i},s=()=>{const{r:n,c:l="#ffffff",p:d}=e,i=`${l}_${d?"push":"pop"}_${n}`;if(K[i])return K[i];const o=f((c=a)=>{const h=r();c.fillStyle=h,c.beginPath(),c.arc(n,n,n,0,2*Math.PI),c.closePath(),c.fill()},2*n);return K[i]=o,o};return(n=a)=>{const{x:l,y:d,r:i}=e,o=s();n.drawImage(o,l-i,d-i,2*i,2*i)}},J={},N=e=>{const{ctx:t}=w();let a;return J[e.src]?a=J[e.src]:(a=new Image,a.src=e.src,J[e.src]=a),(f=t)=>{const{w:r,h:s=r,x:n=0,y:l=0}=e;a.complete&&f.drawImage(a,n,l,r,s)}},se=e=>{const{font:t,ctx:a}=w(),f=e.text,r=e.text.length,s=2*Math.PI/r/4;return(n=a)=>{const{x:l,y:d,r:i,s:o=0,fs:c}=e,h=c||Math.round(i/4);n.textAlign="center",n.fillStyle="#f9f9f9",n.font=`${h}px ${t}`,n.save(),n.translate(l,d),n.rotate(o);for(let m=0;m<r;m++)n.save(),n.rotate(m*s),n.fillText(f[m],0,-i),n.restore();n.restore()}},He=()=>{var M,y;const{ctx:e,loop:t,rotate:a,navigate:f,useMeasure:r,addEventClick:s,addEventResize:n,setBackground:l}=w();l("#040404");let d=!1,i,o,c,h,m,u=-.2,p=0;n(()=>{const{cx:E,cy:P,s:x}=r(),S=Math.round(x*.25);i={c:"#ff6347",x:E,y:P,r:S,p:!1},o=W(i),c=N({x:E-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=se({text:"nezabotin",x:E,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),m=se({text:"production",x:E,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const g=()=>{u+=.01,p=u>=1?1:u,u>=1.8&&(i.p=!0),u>=2.2&&(i.c="#f86a9a"),u>=2.6&&f("main")};s(()=>{[1.4,1.8,2.2,2.6].some(E=>{if(u<E)return u=E,!0})});const v=()=>{t(g),d=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:E,cy:P}=r();e.globalAlpha=d?1:0,o(),u<1.8&&c(),u<1.4&&a(()=>{h(),m()},E,P,p),e.globalAlpha=1}},ue=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];let k=[...ue];const O=()=>{const{rand:e,playSound:t}=w();return{playPop:()=>{const n=e(k.length-1),l=k[n];k.splice(n,1),k.length||(k=[...ue]);const d=e(k.length-1);k=[...k.splice(d,k.length),...k],t(l)},playMissed:()=>{t("/sounds/pop7.mp3")},playFail:()=>{t("/sounds/fail.mp3")},playWin:()=>{t("/sounds/win.mp3")}}},_=100/2;let re=0;const Y=()=>{const{loop:e,ctx:t,shade:a,rand:f}=w(),{playPop:r,playMissed:s}=O(),n={},l=()=>{for(const o in n){const c=n[o];if(!c)return;const h=c.popit;if(!c.shake)c.tic+=_/5,c.tic>=_&&(c.dir=-1),c.withoutRad||(h.r=c.origR+c.origR*75e-5*(c.tic+(c.dir>0?0:_-c.tic)));else{c.tic+=_/5;const m=f(1,2),u=f(1,2);h.x=c.origX+Math.random()*m*(Math.random()>.5?1:-1),h.y=c.origY+Math.random()*u*(Math.random()>.5?1:-1)}c.tic>=2*_&&(delete n[o],h.r=c.origR,h.x=c.origX,h.y=c.origY)}},d=(o,c=!1,h=!1)=>{c?s():r(),re++;const m=`${new Date().valueOf().toString()}_${re}`,u=1,p=1;n[m]={withoutRad:c,tic:u,dir:p,popit:o,origR:o.r,origX:o.x,origY:o.y,shake:h}},i=()=>{t.globalAlpha=.25;for(const o in n){const c=n[o];if(c.shake)continue;const h=c.popit;t.fillStyle=a(h.c||"red",-12),t.beginPath(),t.arc(h.x,h.y,h.r+c.origR*.001*(c.tic+(c.dir>0?0:_-c.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return e(l),{popEffect:d,render:i}},te=e=>{const{font:t,ctx:a}=w();return(f=a)=>{const{text:r,x:s,c:n,y:l,fs:d,a:i="center",mw:o}=e;f.textAlign=i,f.fillStyle=n,f.font=`${d}px ${t}`,f.fillText(r,s,l,o)}},G=100,ke=e=>{const{loop:t,ctx:a,useMeasure:f,rand:r}=w();let s=null;const n=()=>{if(!s)return;const{m:i}=f();if(s.tic<=G)s.props.fs=((e==null?void 0:e.mfs)||8)/G*s.tic*i;else{const o=r(1,1),c=r(1,1);s.props.x=s.origX+Math.random()*o*(Math.random()>.5?1:-1),s.props.y=s.origY+Math.random()*c*(Math.random()>.5?1:-1),s.shake=!0}s.tic+=s.tic>G?1:10,s.tic>G*2},l=i=>{const{cx:o,m:c}=f(),h=0,m={x:o,y:Math.round(c*((e==null?void 0:e.dy)||16)),text:i,c:(e==null?void 0:e.color)||"#ffffff",fs:0},u=te(m);s={props:m,shape:u,tic:h,origX:m.x,origY:m.y}},d=()=>{s&&(a.globalAlpha=.01*s.tic,s.shape(),a.globalAlpha=1)};return t(n),{splashEffect:l,render:d}},De=({color:e="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:s,navigate:n,addEventClick:l,intersect:d}=w(),{from:i}=s();let o,c,h;return a(()=>{const{cx:p,cy:g,s:v,m:M}=f(),y=Math.round(v*.25);o={c:e,r:Math.round(v*.08),x:p-y-1*M,y:g-y+1*M,p:(i==="score"||i==="opening")&&!o},c=W(o),h=N({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&t(o,!1,!0),o.p=!1}),l((p,g)=>{d({x:p,y:g},o)&&(t(o),o.p=!0,r(()=>{n("score")},100))}),{render:()=>{c(),o.p||h()},point:()=>({x:o.x,y:o.y,r:o.r})}},Ae=({color:e="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:s,navigate:n,addEventClick:l,intersect:d}=w(),{from:i}=s();let o,c,h;return a(()=>{const{s:p}=f(),g=Math.round(p*.08);o={c:e,r:g,x:Math.round(1.6*g),y:Math.round(1.6*g),p:i==="main"&&!o},c=W(o),h=N({x:Number(o.x)-g+Math.round(g*.4),y:Number(o.y)-g+Math.round(g*.4),w:g*2-Math.round(g*.8),src:"/media/back.svg"})}),r(()=>{o.p&&t(o,!1,!0),o.p=!1}),l((p,g)=>{d({x:p,y:g},o)&&(t(o),o.p=!0,r(()=>{n("main")},100))}),{render:()=>{c(),o.p||h()},point:()=>({x:o.x,y:o.y,r:o.r})}},ze=({onClick:e})=>{const{addEventResize:t,useMeasure:a,useTimer:f,addEventClick:r,intersect:s,rotate:n}=w(),{playPop:l}=O();let d,i,o;return t(()=>{const{s:m}=a(),u=Math.round(m*.08);d={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},i=W(d),o=N({x:Number(d.x)-u+Math.round(u*.4),y:Number(d.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((m,u)=>{s({x:m,y:u},d)&&(l(),d.p=!0,e(),f(()=>{d.p=!1},100))}),{render:()=>{i(),d.p||n(()=>{o()},d.x,d.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:d.x,y:d.y,r:d.r})}},Le=({onClick:e})=>{const{addEventResize:t,useMeasure:a,useTimer:f,addEventClick:r,intersect:s,rotate:n}=w(),{playPop:l}=O();let d,i,o;return t(()=>{const{s:m}=a(),u=Math.round(m*.08),p=innerWidth<innerHeight?Math.round(innerWidth-1.6*u-2*u-.3*u):Math.round(innerWidth-1.6*u),g=innerWidth<innerHeight?Math.round(innerHeight-1.6*u):Math.round(innerHeight-1.6*u-2*u-.3*u);d={c:"#ff6347",r:u,x:p,y:g,p:!1},i=W(d),o=N({x:Number(d.x)-u+Math.round(u*.4),y:Number(d.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((m,u)=>{s({x:m,y:u},d)&&(l(),d.p=!0,e(),f(()=>{d.p=!1},100))}),{render:()=>{i(),d.p||n(()=>{o()},d.x,d.y,innerHeight>innerWidth?0:.5)},point:()=>({x:d.x,y:d.y,r:d.r})}},Fe=e=>{const{ctx:t,shade:a}=w(),f=Math.round(e.r/2.2),r=Math.round(.15*e.r),s=a(e.c||"blue",-3);return(n=t)=>{const{r:l,x:d=l,y:i=l}=e;n.lineCap="round",n.fillStyle=s,n.strokeStyle=s,n.lineWidth=f,n.beginPath(),n.moveTo(d+r,i),n.lineTo(d-r/2,i-r),n.lineTo(d-r/2,i+r),n.closePath(),n.fill(),n.beginPath(),n.moveTo(d+r,i),n.lineTo(d-r/2,i-r),n.moveTo(d-r/2,i-r),n.lineTo(d-r/2,i+r),n.moveTo(d-r/2,i+r),n.lineTo(d+r,i),n.stroke()}},fe=({getX:e,getY:t,color:a="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:r,useMeasure:s,useTimer:n,useScreenMeta:l,navigate:d,addEventClick:i,intersect:o}=w(),{from:c}=l();let h,m,u;return r(()=>{const{cx:v,cy:M,s:y,m:E}=s();h={c:a,r:Math.round(y*.1),x:e(v,y,E),y:t(M,y,E),p:(c==="gamescore"||c==="game"||c==="opening")&&!h},m=W(h),u=Fe(h)}),n(()=>{h.p&&f(h,!1,!0),h.p=!1}),i((v,M)=>{o({x:v,y:M},h)&&(f(h),h.p=!0,n(()=>{d("game")},100))}),{render:()=>{m(),h.p||u()},point:()=>({x:h.x,y:h.y,r:h.r})}},pe=e=>{const{ctx:t,shade:a}=w(),f=Math.round(e.r/4),r=Math.round(.12*e.r);return(s=t)=>{const{r:n,x:l=n,y:d=n}=e,i=a(e.c||"blue",-3);s.lineCap="round",s.strokeStyle=i,s.lineWidth=f,s.beginPath(),s.moveTo(l-1.5*r,d-2*r),s.lineTo(l-1.5*r,d+2*r),s.stroke(),s.beginPath(),s.moveTo(l+1.5*r,d-2*r),s.lineTo(l+1.5*r,d+2*r),s.stroke()}},_e=({getX:e,getY:t,popEffect:a=()=>{}})=>{const{addEventResize:f,useMeasure:r,useTimer:s,useScreenMeta:n,navigate:l,addEventClick:d,intersect:i}=w(),{from:o}=n();let c,h,m;return f(()=>{const{cx:g,cy:v,s:M,m:y}=r();c={c:"#fd8059",r:Math.round(M*.08),x:e(g,M,y),y:t(v,M,y),p:(o==="game"||o==="opening")&&!c},h=W(c),m=pe(c)}),s(()=>{c.p&&a(c,!1,!0),c.p=!1},500),d((g,v)=>{i({x:g,y:v},c)&&(a(c),c.p=!0,s(()=>{l("main")},100))}),{render:()=>{h(),c.p||m()},point:()=>({x:c.x,y:c.y,r:c.r})}},$e=({color:e="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:s,addEventClick:n,intersect:l,navigate:d}=w(),{from:i}=s();let o,c,h,m;return a(()=>{const{cx:g,cy:v,s:M}=f(),y=Math.round(M*.25);o={c:e,x:g,y:v,r:y,p:i==="opening"&&!o},c=W(o),h=te({text:"Yola",c:"#f1f1f1",x:g,y:v-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),m=te({text:"PopiT",c:"#ffeb3b",x:g,y:v-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),r(()=>{o.p&&t(o,!1,!0),o.p=!1}),n((g,v)=>{l({x:g,y:v},o)&&(t(o),o.p=!0,r(()=>{d("opening")},100))}),{render:()=>{c(),o.p||(h(),m())},point:()=>({x:o.x,y:o.y,r:o.r})}},he=({color:e="#00dcfe",frequency:t=20})=>{const{addEventResize:a,useRandChain:f,useMeasure:r,rand:s,useTimer:n,setBackground:l,useScreenMeta:d}=w(),{from:i}=d();l(e);const o=s(0,999);let c=[],h=[];a(()=>{const g=f(o),{s:v}=r();c=[];const M=Math.round(v*.05),y=Math.round(innerWidth/M/2)-1,E=Math.round((innerWidth-2*M*y)/(y+1)),P=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*P)/(P+1));for(let S=0;S<P;S++)for(let R=0;R<y;R++)g(g(t))<1&&c.push({x:E+M+R*M*2+E*R,y:x+M+S*M*2+x*S,r:M,c:e,p:i==="opening"?!0:g(1)>0});h=c.map(S=>W(S))});const m=()=>{n(()=>{const g=s(c.length-1);c[g]&&(c[g].p=!c[g].p),m()},250)};return i==="opening"?n(()=>{c.forEach(g=>g.p=s(1)>0),m()}):m(),{render:()=>{h.forEach(g=>g())},setIntersections:g=>{c=c.filter(({x:v,y:M,r:y})=>g(v,M,y)),h=c.map(v=>W(v))}}},ie="ylp",ce="score",Q="difficulty",Z=[.14,.11,.09,.075],ae=750,Be=350,de=5,z=[];for(let e=0;e*de<=ae-Be;e++)z.push(ae-e*de);const $=()=>{const e=h=>localStorage.getItem(`${ie}_${h}`),t=(h,m)=>localStorage.setItem(`${ie}_${h}`,m.toString()),a=()=>+(e(ce)||0),f=h=>t(ce,h),r=h=>{const m=a();f(m+h)},s=()=>+(e(Q)||0),n=h=>{const m=s();t(Q,Math.min(Math.max(m+h,0),Z.length*z.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>n(1),minusDifficulty:()=>n(-5),getDifficultyRad:()=>{const h=s(),m=Math.floor(h/z.length);return Z[m]||Z[1]},getDifficultyTic:()=>{const h=s(),m=Math.floor(h/z.length),u=h-m*z.length;return z[u]||z[0]},resetDifficulty:()=>t(Q,0)}},ge=(e=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:f,setBackground:r,rand:s}=w(),{getDifficultyRad:n}=$();return t=[...t.splice(s(t.length-1),t.length),...t],e||a(()=>{const{s:d}=f(),i=n(),o=Math.round(d*i),c=Math.round(innerWidth/o/2)-1,h=(innerWidth-2*o*c)/(c+1),m=Math.round(innerHeight/o/2)-1,u=(innerHeight-2*o*m)/(m+1),p=innerWidth>=innerHeight,g=p?c:m,v=p?h:u,M=p?innerWidth:innerHeight;let y=0;const E=[];for(let x=0;x<g;x++)t[y]||(y=0),E.push(`${t[y]} ${(v+o+x*o*2+v*x)/M*100}%`),y++;r(`linear-gradient(${p?"to right":"to bottom"}, ${E.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},me=({palette:e,retry:t,popEffect:a=()=>{}})=>{const{addEventResize:f,useMeasure:r,rand:s,useTimer:n,useScreenMeta:l,navigate:d,addEventClick:i,intersect:o}=w(),{from:c}=l(),{getDifficultyRad:h}=$(),m=[];let u=[],p,g,v,M;const y=P=>Array.isArray(e)?e[P]:e;return f(()=>{const{s:P}=r();m.splice(0);const x=h(),S=Math.round(P*x),R=Math.round(innerWidth/S/2)-1,F=(innerWidth-2*S*R)/(R+1),D=Math.round(innerHeight/S/2)-1,B=(innerHeight-2*S*D)/(D+1),b=innerWidth>=innerHeight;let I=0;for(let T=0;T<D;T++){for(let C=0;C<R;C++){y(I)||(I=0);const H={x:F+S+C*S*2+F*C,y:B+S+T*S*2+B*T,r:S,c:y(I),p:!0};T===0&&C===R-1?(M={...H,p:(c==="main"||c==="gameover"||c==="gamescore")&&!M},p=W(M),g=pe(M)):m.push(H),I+=b?1:0}I=b?0:I+1}t&&(v=m[s(m.length-1)],n(()=>{a(v,!1,!0),v.p=!1})),u=m.map(T=>W(T))}),n(()=>{M.p&&a(M,!1,!0),M.p=!1}),t&&i((P,x)=>{o({x:P,y:x},v)&&(a(v),v.p=!0,n(()=>{d("game")},100))}),i((P,x)=>{o({x:P,y:x},M)&&(a(M),M.p=!0,n(()=>{d("main")},100))}),{render:()=>{u.forEach(P=>P()),p(),M!=null&&M.p||g()},popits:m}},A=100,X="#222",Ne=e=>{const t=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,f=(e==null?void 0:e[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(a<255?a<1?0:a:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},ee={},Oe=e=>{const{ctx:t,createImg:a,useRandChain:f,useTimer:r}=w();let s,n=!1,l=[];const d=e.r*2/A/2;ee[e.imgSrc]?s=ee[e.imgSrc]:(s=ee[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},s.img.src=e.imgSrc);const i=()=>r(()=>{n=!n,i()},250),o=(p,g=t)=>{const{x:v,y:M,c:y,r:E}=p;g.fillStyle=y||"red",g.beginPath(),g.arc(v+E,M+E,E,0,Math.PI*2),g.closePath(),g.fill()},c=(p=t,g=0,v=0)=>{p.fillStyle=X,p.beginPath(),p.roundRect(g,v,2*e.r,2*e.r,d),p.closePath(),p.fill()},h=()=>{const p=[];for(let E=0;E<A;E++)for(let P=0;P<A;P++){const x={x:P*d*2,y:E*d*2,r:d,c:X};p.push(x)}let g=e.score-e.winScore;const v=[...p],M=f(e.seed),y=(E=!1)=>{const P=M(v.length-1),x=v[P],S=p.indexOf(x);x.c=E?X:s.cols[S],v.splice(P,1),E&&l.push({...x,c:s.cols[S]})};for(let E=g;E>0;E--)y();if(e.winScore){l=[];for(let E=e.winScore;E>0;E--)y(!0);i()}return p},m=()=>{const p=h();s.drawImg=a((g=t)=>{c(g),p.filter(v=>v.c!==X).forEach(v=>o(v,g))},2*e.r)},u=async()=>{var v;const p=document.createElement("canvas");p.width=A,p.height=A;const g=p.getContext("2d",{willReadFrequently:!0});g==null||g.drawImage(s.img,0,0);for(let M=0;M<A;M++){const y=[];for(let E=0;E<A;E++){const P=(v=g==null?void 0:g.getImageData(E,M,1,1))==null?void 0:v.data;y.push(Ne(P))}s.cols.push(...y)}s.isFilled=!0,m()};return s.isFilled?(s.r!==e.r||s.score!==e.score)&&m():s.img.onload=u,(p=t)=>{const{x:g,y:v,r:M,winScore:y}=e;if(s.drawImg?p.drawImage(s.drawImg,g-M,v-M,2*M,2*M):c(p,g-M,v-M),n&&y&&s.drawImg)for(const E of l)p.fillStyle=E.c||"red",p.beginPath(),p.arc(g-M+E.x+E.r,v-M+E.y+E.r,E.r,0,Math.PI*2),p.closePath(),p.fill()}},le=1e4,Me=(e=0,t=!1)=>{const{addEventResize:a,useMeasure:f,translate:r}=w(),{getScore:s}=$(),n=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=s();let d,i=0,o=0,c=!1,h=!1;const m=y=>Math.min(Math.floor(y/le),n.length-1);let u=m(l-e);if(e){const y=m(l);c=y!==u,h=y>n.length-1}return a(()=>{const{cx:y,cy:E,s:P,isL:x}=f();d=[],i=(P-2*P*.055*1.6)/2,o=P*.05;let S=t?u:0;for(S;S<(t?u+1:n.length);S++){const R=n[S],F=x?y:y+S*i*2+S*o,D=x?E+S*i*2+S*o:E;d.push(Oe({x:F,y:D,r:i,score:Math.min(l-S*le,1e4),imgSrc:R,winScore:e,seed:S}))}}),{up:()=>{u=u+1<n.length?u+1:n.length-1},down:()=>{u=u-1<0?0:u-1},render:()=>{const{isL:y}=f(),E=y?0:-(u*i*2+u*o),P=y?-(u*i*2+u*o):0;r(()=>{d==null||d.forEach(x=>x())},E,P)},rect:()=>{const{cx:y,cy:E}=f(),P=innerWidth>innerHeight;return{x:P?y-i:0,y:P?0:E-i,w:P?2*i:innerWidth,h:P?innerHeight:2*i}},isJump:c,isCompleted:h}},Ye=({popits:e,popEffect:t=()=>{},splashEffect:a=()=>{}})=>{const{useTimer:f,rand:r,addEventClick:s,addEventMove:n,intersect:l,navigate:d,addEventResize:i}=w(),{getScore:o,addScore:c,getDifficultyTic:h}=$();let m=[],u,p,g=!1,v=0,M=0,y=0;const E=o(),P=h(),x=b=>{const I=e.filter(H=>m.indexOf(H)===-1&&H!==b),T=r(I.length-1),C=I[T];C&&(t(C,!1,!0),C.p=!1,m.push(I[T]))},S=()=>{p=f(()=>{if(y=Math.max(y-10,50),e.length===m.length){g=!0,p.stop(),f(()=>{d("gameover")});return}x(),S()},y)},R=b=>{m=[];const I=e.length;let T=r(Math.round(I*.3),Math.round(I*.6));const C=[...e];if(b){const H=C.indexOf(b);C.splice(H,1)}for(let H=T;H>0;H--){const ne=r(C.length-1),U=C[ne];U.p=!1,t(U,!1,!0),m.push(U),C.splice(ne,1)}y=P,u==null||u.stop(),p==null||p.stop(),E&&(u=f(()=>{a("SLOWLY"),S()},m.length*P)),v=v>0?v:r(3,5)},F=()=>E<1e4?10:E<2e4?5:E<3e4?2:1,D=b=>{t(b),y=Math.min(y+5,P),M++,b.p=!0;const I=m.indexOf(b);if(m.splice(I,1),m.length<=0)if(v--,v>0)f(()=>{a("Round"),R(b)},100);else{u==null||u.stop(),p==null||p.stop();const T=F();c(M*T),f(()=>{d("gamescore",{winScore:M*T})},100)}},B=(b,I,T=!1)=>{if(!g){for(const C of m)if(l({x:b,y:I},C)){D(C);return}if(!T){for(const C of e)if(l({x:b,y:I},C)){t(C,!0),a("Popenalty"),x(C);return}a("Popenalty"),x()}}};s(B),n((b,I)=>B(b,I,!0)),i(()=>{f(()=>{a("Pop it"),R()})})},Ge=()=>{const{addEventResize:e,rand:t,useScreenMeta:a}=w(),{from:f}=a(),{popEffect:r,render:s}=Y(),n=["#00dcfe","#5bb2f7","#92E6E6"],l=f==="opening"?n[0]:n[t(n.length-1)],{render:d,setIntersections:i}=he({color:l}),{render:o,point:c}=$e({popEffect:r}),{render:h,point:m}=fe({getX:(g,v,M)=>g+Math.round(v*.25)+2*M,getY:(g,v,M)=>g+Math.round(v*.25)+0*M,popEffect:r}),{render:u,point:p}=De({popEffect:r});return e(()=>{const g=p(),v=c(),M=m();i((y,E,P)=>!L({x:y,y:E,r:P},g)&&!L({x:y,y:E,r:P},v)&&!L({x:y,y:E,r:P},M))}),()=>{s(),d(),o(),h(),u()}},Xe=()=>{const{useMeasure:e,addEventResize:t}=w(),a=ge(),{popEffect:f,render:r}=Y(),{popits:s,render:n}=me({palette:a,popEffect:f});return Ye({popits:s,popEffect:f}),t(()=>{(s[0].y-s[0].r)/e().m}),()=>{r(),n()}},je=()=>{const e="#ff6347",{popEffect:t,render:a}=Y(),{setBackground:f}=w(),{minusDifficulty:r}=$(),{render:s}=me({palette:e,retry:!0,popEffect:t}),{playFail:n}=O();return f(e),r(),n(),()=>{a(),s()}},qe=()=>{const{translate:e,useScreenMeta:t}=w(),{plusDifficulty:a,resetDifficulty:f}=$(),{data:r}=t(),{popEffect:s,render:n}=Y(),{splashEffect:l,render:d}=ke({infinity:!0});ge();const{playWin:i}=O(),{render:o,isJump:c}=Me(r==null?void 0:r.winScore,!0),{render:h}=fe({getX:(u,p,g)=>innerWidth>innerHeight?Math.min(u+(p-2*p*.055*1.6)/2+4*g+Math.round(p*.1),innerWidth-2*g-Math.round(p*.1)):u+(p-2*p*.055*1.6)/8+0*Math.round(p*.1)+2*g,getY:(u,p,g)=>innerWidth>innerHeight?u+(p-2*p*.055*1.6)/2-1*g-Math.round(p*.1):Math.min(u+(p-2*p*.055*1.6)/2+4*g+Math.round(p*.1),innerHeight-2*g-Math.round(p*.1)),popEffect:s}),{render:m}=_e({getX:(u,p,g)=>innerWidth>innerHeight?Math.max(u-(p-2*p*.055*1.6)/2-4*g-Math.round(p*.1),2*g+Math.round(p*.1)):u+(p-2*p*.055*1.6)/8-2*Math.round(p*.1)-2*g,getY:(u,p,g)=>innerWidth>innerHeight?u-(p-2*p*.055*1.6)/2+0*g+Math.round(p*.1):Math.min(u+(p-2*p*.055*1.6)/2+4*g+Math.round(p*.1),innerHeight-2*g-Math.round(p*.1)),popEffect:s});return c?f():a(),innerHeight>innerWidth&&l(c?"COMPLETED":"YOU WIN"),i(),()=>{n(),innerHeight>innerWidth?e(o,0,-Math.round(innerHeight*.05)):o(),h(),m(),d()}},Ue=()=>{const{addEventResize:e,rand:t}=w(),{popEffect:a,render:f}=Y(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],s=r[t(r.length-1)],{render:n,setIntersections:l}=he({color:s,frequency:10}),{render:d,rect:i,up:o,down:c}=Me(),{render:h,point:m}=Ae({popEffect:a}),{render:u,point:p}=ze({onClick:o,popEffect:a}),{render:g,point:v}=Le({onClick:c,popEffect:a});return e(()=>{const M=m(),y=i(),E=p(),P=v();l((x,S,R)=>!L({x,y:S,r:R},M)&&!Re({x,y:S,r:R},y)&&!L({x,y:S,r:R},E)&&!L({x,y:S,r:R},P))}),()=>{f(),n(),d(),h(),u(),g()}},Ve=()=>{const{ctx:e,addEventResize:t,loop:a}=w(),f={x:40,y:100};let r=1,s=1,n;const l=()=>{n=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return l(),t(l),a(()=>{f.x+=2*r,f.y+=3*s,r*=-1,s*=-1}),()=>{e.save();var d=Math.random()*2,i=Math.random()*3;e.translate(d,i),e.beginPath(),e.fillStyle="red",e.rect(f.x,f.y,n,n),e.fill(),e.restore()}},Ke=[{name:"opening",ctor:He},{name:"main",ctor:Ge},{name:"game",ctor:Xe},{name:"gameover",ctor:je},{name:"gamescore",ctor:qe},{name:"score",ctor:Ue},{name:"devs",ctor:Ve}],Je=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop7.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3","/sounds/fail.mp3","/sounds/win.mp3"];We(Ke,Je);document.title="Your's last Pop it";
