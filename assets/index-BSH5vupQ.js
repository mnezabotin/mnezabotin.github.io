(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function d(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(s){if(s.ep)return;s.ep=!0;const r=d(s);fetch(s.href,r)}})();const ye=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},f=i=>{t.clearRect(0,0,innerWidth,innerHeight),i()};return d(),document.body.appendChild(e),{ctx:t,render:f,resize:d,rotate:(i,o,c,h)=>{t.save(),t.translate(o,c),t.rotate(Math.PI*h),t.translate(-o,-c),i(),t.restore()},translate:(i,o,c)=>{t.save(),t.translate(o,c),i(),t.restore()},shade:(i,o)=>{i=i.substring(1);const c=parseInt(i,16),h=Math.round(2.55*o),p=(c>>16)+h,a=(c>>8&255)+h,g=(c&255)+h;return"#"+(16777216+(p<255?p<1?0:p:255)*65536+(a<255?a<1?0:a:255)*256+(g<255?g<1?0:g:255)).toString(16).slice(1)},setBackground:(i,o)=>{var c;document.body.style.background=i,document.body.style.backgroundColor=o||i,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",o||i)},createImg:(i,o,c=o)=>{const h=document.createElement("canvas"),p=h.getContext("2d");if(!p)throw new Error("CanvasRenderingContext2D is null");return h.width=o*devicePixelRatio,h.height=c*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio),i(p),h}}},ve=e=>{let t="",d="",f;const s=u=>e.find(l=>l.name===u)||e[0],n={render:()=>{},navigate:(u,l)=>{const i=s(u);d=t||"",t=(i==null?void 0:i.name)||"",f=l,n.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:d,data:f})};return n},Pe=()=>{const e=requestAnimationFrame||(n=>setTimeout(n,16.666666666666668)),t=[],d={};return{loop:(n,u)=>{if(Object.entries(d).find(([i,o])=>o===n)||u&&d[u])throw new Error(`Loop${u?" "+u:""} already specified`);u&&t.push(u),u=u||new Date().valueOf().toString(),d[u]=n;const l=()=>{n(),d[u]&&e(l)};l()},stop:n=>{if(typeof n=="string")delete d[n];else{const u=Object.entries(d).find(([l,i])=>i===n);u&&delete d[u[0]]}},stopAll:()=>{for(const n in d)t.indexOf(n)===-1&&delete d[n]}}};let X=[];const Ee=()=>{for(const e of X)clearTimeout(e);X=[]},Se=(e,t=400)=>{let d=new Date,f=t,s=setTimeout(e,f);return X.push(s),{pause:()=>{clearTimeout(s),f-=new Date-d},resume:()=>{d=new Date,clearTimeout(s),s=setTimeout(e,f),X.push(s)},stop:()=>{clearTimeout(s)}}},oe=2147483646,V=2147483647,xe=16807,we=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=oe);const t=()=>(e=e*xe%V,e),d=()=>(t()-1)/oe;return(s,r)=>(r===void 0&&(r=s,s=0),Math.floor(d()*(r-s+1))+s)},Ce=(e,t)=>(t===void 0&&(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e),Re=()=>{const e=[],t=[],d=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>t.push(o),onClickEvents:(o,c)=>t.forEach(h=>h(o,c)),addEventMove:o=>d.push(o),onMoveEvents:(o,c)=>d.forEach(h=>h(o,c)),removeAllEvents:()=>{e.splice(0),t.splice(0),d.splice(0)}}},L=(e,t)=>{const d=Math.pow(Math.abs(e.x-t.x),2),f=Math.pow(Math.abs(e.y-t.y),2),s=e.r||0,r=t.r||0,n=Math.pow(s+r,2);return d+f<=n},be=(e,t)=>{const d=e.r||0,f=t.w||0,s=t.h||0;return Math.abs(t.x+f/2-e.x)<=f/2+d&&Math.abs(t.y+s/2-e.y)<=s/2+d},Ie=(e,t)=>L(e,t),Te=e=>{const t=new AudioContext,d={},f=r=>{fetch(r).then(n=>n.arrayBuffer()).then(n=>(t==null?void 0:t.decodeAudioData(n))||null).then(n=>{n&&(d[r]=n)})};if(e.length)for(const r of e)f(r);return async r=>{const n=t.createBufferSource();d[r]||(d[r]=await fetch(r).then(u=>u.arrayBuffer()).then(u=>(t==null?void 0:t.decodeAudioData(u))||null)),n.buffer=d[r],n.connect(t.destination),n.start()}};let j;const We=(e,t)=>{if(j)throw new Error("Webcore already specified");const d=ye(),f=ve(e),{loop:s,stop:r,stopAll:n}=Pe(),{addEventResize:u,onResizeEvents:l,addEventClick:i,onClickEvents:o,addEventMove:c,onMoveEvents:h,removeAllEvents:p}=Re();let a=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight;const y=()=>({cx:a,cy:g,s:m,m:v,isL:M}),P=Te(t);j={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:y,useScreenMeta:f.useScreenMeta,navigate:(E,x)=>{if(!e.some(S=>S.name===E))throw new Error(`Screen ${E} not specified`);n(),Ee(),p(),new Promise(()=>f.navigate(E,x))},loop:s,loopStop:r,useTimer:Se,rand:Ce,useRandChain:we,intersect:Ie,addEventResize:u,addEventClick:i,addEventMove:c,playSound:P},s(()=>d.render(f.render),"draw"),window.onresize=()=>{a=innerWidth/2,g=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),M=innerWidth>innerHeight,d.resize(),l()},document.onpointerdown=E=>{o(E.clientX,E.clientY)},document.onmousemove=E=>{h(E.clientX,E.clientY)},f.navigate()},w=()=>{if(!j)throw new Error("Webcore not specified");return{...j}},U={},W=e=>{const{shade:t,ctx:d,createImg:f}=w(),s=()=>{const{r:n,c:u="#ffffff",p:l}=e,i=d.createRadialGradient(n,n,n,n,n,n/5);return i.addColorStop(0,t(u,0)),i.addColorStop(.01,t(u,0)),i.addColorStop(.075,t(u,9)),i.addColorStop(.15,t(u,0)),i.addColorStop(.15,t(u,-15)),i.addColorStop(.18,t(u,-5)),i.addColorStop(.22,t(u,-15)),l?(i.addColorStop(.24,t(u,-10)),i.addColorStop(.3,t(u,-8)),i.addColorStop(.34,t(u,-12)),i.addColorStop(.6,t(u,-6)),i.addColorStop(1,t(u,-4))):(i.addColorStop(.24,t(u,-12)),i.addColorStop(.26,t(u,-8)),i.addColorStop(.3,t(u,-2)),i.addColorStop(.34,t(u,0)),i.addColorStop(.5,t(u,5)),i.addColorStop(1,t(u,12))),i},r=()=>{const{r:n,c:u="#ffffff",p:l}=e,i=`${u}_${l?"push":"pop"}_${n}`;if(U[i])return U[i];const o=f((c=d)=>{const h=s();c.fillStyle=h,c.beginPath(),c.arc(n,n,n,0,2*Math.PI),c.closePath(),c.fill()},2*n);return U[i]=o,o};return(n=d)=>{const{x:u,y:l,r:i}=e,o=r();n.drawImage(o,u-i,l-i,2*i,2*i)}},K={},N=e=>{const{ctx:t}=w();let d;return K[e.src]?d=K[e.src]:(d=new Image,d.src=e.src,K[e.src]=d),(f=t)=>{const{w:s,h:r=s,x:n=0,y:u=0}=e;d.complete&&f.drawImage(d,n,u,s,r)}},re=e=>{const{font:t,ctx:d}=w(),f=e.text,s=e.text.length,r=2*Math.PI/s/4;return(n=d)=>{const{x:u,y:l,r:i,s:o=0,fs:c}=e,h=c||Math.round(i/4);n.textAlign="center",n.fillStyle="#f9f9f9",n.font=`${h}px ${t}`,n.save(),n.translate(u,l),n.rotate(o);for(let p=0;p<s;p++)n.save(),n.rotate(p*r),n.fillText(f[p],0,-i),n.restore();n.restore()}},He=()=>{var M,y;const{ctx:e,loop:t,rotate:d,navigate:f,useMeasure:s,addEventClick:r,addEventResize:n,setBackground:u}=w();u("#040404");let l=!1,i,o,c,h,p,a=-.2,g=0;n(()=>{const{cx:P,cy:E,s:x}=s(),S=Math.round(x*.25);i={c:"#ff6347",x:P,y:E,r:S,p:!1},o=W(i),c=N({x:P-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=re({text:"nezabotin",x:P,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),p=re({text:"production",x:P,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{a+=.01,g=a>=1?1:a,a>=1.8&&(i.p=!0),a>=2.2&&(i.c="#f86a9a"),a>=2.6&&f("main")};r(()=>{[1.4,1.8,2.2,2.6].some(P=>{if(a<P)return a=P,!0})});const v=()=>{t(m),l=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(v):v(),()=>{const{cx:P,cy:E}=s();e.globalAlpha=l?1:0,o(),a<1.8&&c(),a<1.4&&d(()=>{h(),p()},P,E,g),e.globalAlpha=1}},ue=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];let k=[...ue];const te=()=>{const{rand:e,playSound:t}=w();return{playPop:()=>{const s=e(k.length-1),r=k[s];k.splice(s,1),k.length||(k=[...ue]);const n=e(k.length-1);k=[...k.splice(n,k.length),...k],t(r)},playPush:()=>{t("/sounds/pop7.mp3")}}},F=100/2;let se=0;const O=()=>{const{loop:e,ctx:t,shade:d,rand:f}=w(),{playPop:s,playPush:r}=te(),n={},u=()=>{for(const o in n){const c=n[o];if(!c)return;const h=c.popit;if(!c.shake)c.tic+=F/5,c.tic>=F&&(c.dir=-1),c.withoutRad||(h.r=c.origR+c.origR*75e-5*(c.tic+(c.dir>0?0:F-c.tic)));else{c.tic+=F/5;const p=f(1,2),a=f(1,2);h.x=c.origX+Math.random()*p*(Math.random()>.5?1:-1),h.y=c.origY+Math.random()*a*(Math.random()>.5?1:-1)}c.tic>=2*F&&(delete n[o],h.r=c.origR,h.x=c.origX,h.y=c.origY)}},l=(o,c=!1,h=!1)=>{c?r():s(),se++;const p=`${new Date().valueOf().toString()}_${se}`,a=1,g=1;n[p]={withoutRad:c,tic:a,dir:g,popit:o,origR:o.r,origX:o.x,origY:o.y,shake:h}},i=()=>{t.globalAlpha=.25;for(const o in n){const c=n[o];if(c.shake)continue;const h=c.popit;t.fillStyle=d(h.c||"red",-12),t.beginPath(),t.arc(h.x,h.y,h.r+c.origR*.001*(c.tic+(c.dir>0?0:F-c.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return e(u),{popEffect:l,render:i}},ee=e=>{const{font:t,ctx:d}=w();return(f=d)=>{const{text:s,x:r,c:n,y:u,fs:l,a:i="center",mw:o}=e;f.textAlign=i,f.fillStyle=n,f.font=`${l}px ${t}`,f.fillText(s,r,u,o)}},Y=100,ke=e=>{const{loop:t,ctx:d,useMeasure:f,rand:s}=w();let r=null;const n=()=>{if(!r)return;const{m:i}=f();if(r.tic<=Y)r.props.fs=((e==null?void 0:e.mfs)||6)/Y*r.tic*i;else{const o=s(1,1),c=s(1,1);r.props.x=r.origX+Math.random()*o*(Math.random()>.5?1:-1),r.props.y=r.origY+Math.random()*c*(Math.random()>.5?1:-1),r.shake=!0}r.tic+=r.tic>Y?1:10,r.tic>Y*2},u=i=>{const{cx:o,m:c}=f(),h=0,p={x:o,y:Math.round(c*((e==null?void 0:e.dy)||16)),text:i,c:(e==null?void 0:e.color)||"#ffffff",fs:0},a=ee(p);r={props:p,shape:a,tic:h,origX:p.x,origY:p.y}},l=()=>{r&&(d.globalAlpha=.01*r.tic,r.shape(),d.globalAlpha=1)};return t(n),{splashEffect:u,render:l}},De=({color:e="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:r,navigate:n,addEventClick:u,intersect:l}=w(),{from:i}=r();let o,c,h;return d(()=>{const{cx:g,cy:m,s:v,m:M}=f(),y=Math.round(v*.25);o={c:e,r:Math.round(v*.08),x:g-y-1*M,y:m-y+1*M,p:(i==="score"||i==="opening")&&!o},c=W(o),h=N({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),s(()=>{o.p&&t(o,!1,!0),o.p=!1}),u((g,m)=>{l({x:g,y:m},o)&&(t(o),o.p=!0,s(()=>{n("score")},100))}),{render:()=>{c(),o.p||h()},point:()=>({x:o.x,y:o.y,r:o.r})}},Ae=({color:e="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:r,navigate:n,addEventClick:u,intersect:l}=w(),{from:i}=r();let o,c,h;return d(()=>{const{s:g}=f(),m=Math.round(g*.08);o={c:e,r:m,x:Math.round(1.6*m),y:Math.round(1.6*m),p:i==="main"&&!o},c=W(o),h=N({x:Number(o.x)-m+Math.round(m*.4),y:Number(o.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),s(()=>{o.p&&t(o,!1,!0),o.p=!1}),u((g,m)=>{l({x:g,y:m},o)&&(t(o),o.p=!0,s(()=>{n("main")},100))}),{render:()=>{c(),o.p||h()},point:()=>({x:o.x,y:o.y,r:o.r})}},ze=({onClick:e})=>{const{addEventResize:t,useMeasure:d,useTimer:f,addEventClick:s,intersect:r,rotate:n}=w(),{playPop:u}=te();let l,i,o;return t(()=>{const{s:p}=d(),a=Math.round(p*.08);l={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a),p:!1},i=W(l),o=N({x:Number(l.x)-a+Math.round(a*.4),y:Number(l.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),s((p,a)=>{r({x:p,y:a},l)&&(u(),l.p=!0,e(),f(()=>{l.p=!1},100))}),{render:()=>{i(),l.p||n(()=>{o()},l.x,l.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:l.x,y:l.y,r:l.r})}},Le=({onClick:e})=>{const{addEventResize:t,useMeasure:d,useTimer:f,addEventClick:s,intersect:r,rotate:n}=w(),{playPop:u}=te();let l,i,o;return t(()=>{const{s:p}=d(),a=Math.round(p*.08),g=innerWidth<innerHeight?Math.round(innerWidth-1.6*a-2*a-.3*a):Math.round(innerWidth-1.6*a),m=innerWidth<innerHeight?Math.round(innerHeight-1.6*a):Math.round(innerHeight-1.6*a-2*a-.3*a);l={c:"#ff6347",r:a,x:g,y:m,p:!1},i=W(l),o=N({x:Number(l.x)-a+Math.round(a*.4),y:Number(l.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),s((p,a)=>{r({x:p,y:a},l)&&(u(),l.p=!0,e(),f(()=>{l.p=!1},100))}),{render:()=>{i(),l.p||n(()=>{o()},l.x,l.y,innerHeight>innerWidth?0:.5)},point:()=>({x:l.x,y:l.y,r:l.r})}},_e=e=>{const{ctx:t,shade:d}=w(),f=Math.round(e.r/2.2),s=Math.round(.15*e.r),r=d(e.c||"blue",-3);return(n=t)=>{const{r:u,x:l=u,y:i=u}=e;n.lineCap="round",n.fillStyle=r,n.strokeStyle=r,n.lineWidth=f,n.beginPath(),n.moveTo(l+s,i),n.lineTo(l-s/2,i-s),n.lineTo(l-s/2,i+s),n.closePath(),n.fill(),n.beginPath(),n.moveTo(l+s,i),n.lineTo(l-s/2,i-s),n.moveTo(l-s/2,i-s),n.lineTo(l-s/2,i+s),n.moveTo(l-s/2,i+s),n.lineTo(l+s,i),n.stroke()}},fe=({getX:e,getY:t,color:d="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:s,useMeasure:r,useTimer:n,useScreenMeta:u,navigate:l,addEventClick:i,intersect:o}=w(),{from:c}=u();let h,p,a;return s(()=>{const{cx:v,cy:M,s:y,m:P}=r();h={c:d,r:Math.round(y*.1),x:e(v,y,P),y:t(M,y,P),p:(c==="gamescore"||c==="game"||c==="opening")&&!h},p=W(h),a=_e(h)}),n(()=>{h.p&&f(h,!1,!0),h.p=!1}),i((v,M)=>{o({x:v,y:M},h)&&(f(h),h.p=!0,n(()=>{l("game")},100))}),{render:()=>{p(),h.p||a()},point:()=>({x:h.x,y:h.y,r:h.r})}},he=e=>{const{ctx:t,shade:d}=w(),f=Math.round(e.r/4),s=Math.round(.12*e.r);return(r=t)=>{const{r:n,x:u=n,y:l=n}=e,i=d(e.c||"blue",-3);r.lineCap="round",r.strokeStyle=i,r.lineWidth=f,r.beginPath(),r.moveTo(u-1.5*s,l-2*s),r.lineTo(u-1.5*s,l+2*s),r.stroke(),r.beginPath(),r.moveTo(u+1.5*s,l-2*s),r.lineTo(u+1.5*s,l+2*s),r.stroke()}},Fe=({getX:e,getY:t,popEffect:d=()=>{}})=>{const{addEventResize:f,useMeasure:s,useTimer:r,useScreenMeta:n,navigate:u,addEventClick:l,intersect:i}=w(),{from:o}=n();let c,h,p;return f(()=>{const{cx:m,cy:v,s:M,m:y}=s();c={c:"#fd8059",r:Math.round(M*.08),x:e(m,M,y),y:t(v,M,y),p:(o==="game"||o==="opening")&&!c},h=W(c),p=he(c)}),r(()=>{c.p&&d(c,!1,!0),c.p=!1},500),l((m,v)=>{i({x:m,y:v},c)&&(d(c),c.p=!0,r(()=>{u("main")},100))}),{render:()=>{h(),c.p||p()},point:()=>({x:c.x,y:c.y,r:c.r})}},$e=({color:e="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:f,useTimer:s,useScreenMeta:r,addEventClick:n,intersect:u,navigate:l}=w(),{from:i}=r();let o,c,h,p;return d(()=>{const{cx:m,cy:v,s:M}=f(),y=Math.round(M*.25);o={c:e,x:m,y:v,r:y,p:i==="opening"&&!o},c=W(o),h=ee({text:"Yola",c:"#f1f1f1",x:m,y:v-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),p=ee({text:"PopiT",c:"#ffeb3b",x:m,y:v-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),s(()=>{o.p&&t(o,!1,!0),o.p=!1}),n((m,v)=>{u({x:m,y:v},o)&&(t(o),o.p=!0,s(()=>{l("opening")},100))}),{render:()=>{c(),o.p||(h(),p())},point:()=>({x:o.x,y:o.y,r:o.r})}},pe=({color:e="#00dcfe",frequency:t=20})=>{const{addEventResize:d,useRandChain:f,useMeasure:s,rand:r,useTimer:n,setBackground:u,useScreenMeta:l}=w(),{from:i}=l();u(e);const o=r(0,999);let c=[],h=[];d(()=>{const m=f(o),{s:v}=s();c=[];const M=Math.round(v*.05),y=Math.round(innerWidth/M/2)-1,P=Math.round((innerWidth-2*M*y)/(y+1)),E=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*E)/(E+1));for(let S=0;S<E;S++)for(let b=0;b<y;b++)m(m(t))<1&&c.push({x:P+M+b*M*2+P*b,y:x+M+S*M*2+x*S,r:M,c:e,p:i==="opening"?!0:m(1)>0});h=c.map(S=>W(S))});const p=()=>{n(()=>{const m=r(c.length-1);c[m]&&(c[m].p=!c[m].p),p()},250)};return i==="opening"?n(()=>{c.forEach(m=>m.p=r(1)>0),p()}):p(),{render:()=>{h.forEach(m=>m())},setIntersections:m=>{c=c.filter(({x:v,y:M,r:y})=>m(v,M,y)),h=c.map(v=>W(v))}}},ie="ylp",ce="score",J="difficulty",Q=[.14,.11,.09,.075],ae=750,Be=350,de=5,z=[];for(let e=0;e*de<=ae-Be;e++)z.push(ae-e*de);const $=()=>{const e=h=>localStorage.getItem(`${ie}_${h}`),t=(h,p)=>localStorage.setItem(`${ie}_${h}`,p.toString()),d=()=>+(e(ce)||0),f=h=>t(ce,h),s=h=>{const p=d();f(p+h)},r=()=>+(e(J)||0),n=h=>{const p=r();t(J,Math.min(Math.max(p+h,0),Q.length*z.length-1))};return{getScore:d,addScore:s,plusDifficulty:()=>n(1),minusDifficulty:()=>n(-5),getDifficultyRad:()=>{const h=r(),p=Math.floor(h/z.length);return Q[p]||Q[1]},getDifficultyTic:()=>{const h=r(),p=Math.floor(h/z.length),a=h-p*z.length;return z[a]||z[0]},resetDifficulty:()=>t(J,0)}},ge=(e=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:f,setBackground:s,rand:r}=w(),{getDifficultyRad:n}=$();return t=[...t.splice(r(t.length-1),t.length),...t],e||d(()=>{const{s:l}=f(),i=n(),o=Math.round(l*i),c=Math.round(innerWidth/o/2)-1,h=(innerWidth-2*o*c)/(c+1),p=Math.round(innerHeight/o/2)-1,a=(innerHeight-2*o*p)/(p+1),g=innerWidth>=innerHeight,m=g?c:p,v=g?h:a,M=g?innerWidth:innerHeight;let y=0;const P=[];for(let x=0;x<m;x++)t[y]||(y=0),P.push(`${t[y]} ${(v+o+x*o*2+v*x)/M*100}%`),y++;s(`linear-gradient(${g?"to right":"to bottom"}, ${P.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},me=({palette:e,retry:t,popEffect:d=()=>{}})=>{const{addEventResize:f,useMeasure:s,rand:r,useTimer:n,useScreenMeta:u,navigate:l,addEventClick:i,intersect:o}=w(),{from:c}=u(),{getDifficultyRad:h}=$(),p=[];let a=[],g,m,v,M;const y=E=>Array.isArray(e)?e[E]:e;return f(()=>{const{s:E}=s();p.splice(0);const x=h(),S=Math.round(E*x),b=Math.round(innerWidth/S/2)-1,_=(innerWidth-2*S*b)/(b+1),D=Math.round(innerHeight/S/2)-1,B=(innerHeight-2*S*D)/(D+1),I=innerWidth>=innerHeight;let R=0;for(let T=0;T<D;T++){for(let C=0;C<b;C++){y(R)||(R=0);const H={x:_+S+C*S*2+_*C,y:B+S+T*S*2+B*T,r:S,c:y(R),p:!0};T===0&&C===b-1?(M={...H,p:(c==="main"||c==="gameover"||c==="gamescore")&&!M},g=W(M),m=he(M)):p.push(H),R+=I?1:0}R=I?0:R+1}t&&(v=p[r(p.length-1)],n(()=>{d(v,!1,!0),v.p=!1})),a=p.map(T=>W(T))}),n(()=>{M.p&&d(M,!1,!0),M.p=!1}),t&&i((E,x)=>{o({x:E,y:x},v)&&(d(v),v.p=!0,n(()=>{l("game")},100))}),i((E,x)=>{o({x:E,y:x},M)&&(d(M),M.p=!0,n(()=>{l("main")},100))}),{render:()=>{a.forEach(E=>E()),g(),M!=null&&M.p||m()},popits:p}},A=100,G="#222",Ne=e=>{const t=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,f=(e==null?void 0:e[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(d<255?d<1?0:d:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},Z={},Oe=e=>{const{ctx:t,createImg:d,useRandChain:f,useTimer:s}=w();let r,n=!1,u=[];const l=e.r*2/A/2;Z[e.imgSrc]?r=Z[e.imgSrc]:(r=Z[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},r.img.src=e.imgSrc);const i=()=>s(()=>{n=!n,i()},250),o=(g,m=t)=>{const{x:v,y:M,c:y,r:P}=g;m.fillStyle=y||"red",m.beginPath(),m.arc(v+P,M+P,P,0,Math.PI*2),m.closePath(),m.fill()},c=(g=t,m=0,v=0)=>{g.fillStyle=G,g.beginPath(),g.roundRect(m,v,2*e.r,2*e.r,l),g.closePath(),g.fill()},h=()=>{const g=[];for(let P=0;P<A;P++)for(let E=0;E<A;E++){const x={x:E*l*2,y:P*l*2,r:l,c:G};g.push(x)}let m=e.score-e.winScore;const v=[...g],M=f(e.seed),y=(P=!1)=>{const E=M(v.length-1),x=v[E],S=g.indexOf(x);x.c=P?G:r.cols[S],v.splice(E,1),P&&u.push({...x,c:r.cols[S]})};for(let P=m;P>0;P--)y();if(e.winScore){u=[];for(let P=e.winScore;P>0;P--)y(!0);i()}return g},p=()=>{const g=h();r.drawImg=d((m=t)=>{c(m),g.filter(v=>v.c!==G).forEach(v=>o(v,m))},2*e.r)},a=async()=>{var v;const g=document.createElement("canvas");g.width=A,g.height=A;const m=g.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(r.img,0,0);for(let M=0;M<A;M++){const y=[];for(let P=0;P<A;P++){const E=(v=m==null?void 0:m.getImageData(P,M,1,1))==null?void 0:v.data;y.push(Ne(E))}r.cols.push(...y)}r.isFilled=!0,p()};return r.isFilled?(r.r!==e.r||r.score!==e.score)&&p():r.img.onload=a,(g=t)=>{const{x:m,y:v,r:M,winScore:y}=e;if(r.drawImg?g.drawImage(r.drawImg,m-M,v-M,2*M,2*M):c(g,m-M,v-M),n&&y&&r.drawImg)for(const P of u)g.fillStyle=P.c||"red",g.beginPath(),g.arc(m-M+P.x+P.r,v-M+P.y+P.r,P.r,0,Math.PI*2),g.closePath(),g.fill()}},le=1e4,Me=(e=0,t=!1)=>{const{addEventResize:d,useMeasure:f,translate:s}=w(),{getScore:r}=$(),n=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],u=r();let l,i=0,o=0,c=!1,h=!1;const p=y=>Math.min(Math.floor(y/le),n.length-1);let a=p(u-e);if(e){const y=p(u);c=y!==a,h=y>n.length-1}return d(()=>{const{cx:y,cy:P,s:E,isL:x}=f();l=[],i=(E-2*E*.055*1.6)/2,o=E*.05;let S=t?a:0;for(S;S<(t?a+1:n.length);S++){const b=n[S],_=x?y:y+S*i*2+S*o,D=x?P+S*i*2+S*o:P;l.push(Oe({x:_,y:D,r:i,score:Math.min(u-S*le,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{a=a+1<n.length?a+1:n.length-1},down:()=>{a=a-1<0?0:a-1},render:()=>{const{isL:y}=f(),P=y?0:-(a*i*2+a*o),E=y?-(a*i*2+a*o):0;s(()=>{l==null||l.forEach(x=>x())},P,E)},rect:()=>{const{cx:y,cy:P}=f(),E=innerWidth>innerHeight;return{x:E?y-i:0,y:E?0:P-i,w:E?2*i:innerWidth,h:E?innerHeight:2*i}},isJump:c,isCompleted:h}},Ye=({popits:e,popEffect:t=()=>{},splashEffect:d=()=>{}})=>{const{useTimer:f,rand:s,addEventClick:r,addEventMove:n,intersect:u,navigate:l,addEventResize:i}=w(),{getScore:o,addScore:c,getDifficultyTic:h}=$();let p=[],a,g,m=!1,v=0,M=0,y=0;const P=o(),E=h(),x=I=>{const R=e.filter(H=>p.indexOf(H)===-1&&H!==I),T=s(R.length-1),C=R[T];C&&(t(C,!1,!0),C.p=!1,p.push(R[T]))},S=()=>{g=f(()=>{if(y=Math.max(y-10,50),e.length===p.length){m=!0,g.stop(),f(()=>{l("gameover")});return}x(),S()},y)},b=I=>{p=[];const R=e.length;let T=s(Math.round(R*.3),Math.round(R*.6));const C=[...e];if(I){const H=C.indexOf(I);C.splice(H,1)}for(let H=T;H>0;H--){const ne=s(C.length-1),q=C[ne];q.p=!1,t(q,!1,!0),p.push(q),C.splice(ne,1)}y=E,a==null||a.stop(),g==null||g.stop(),P&&(a=f(()=>{d("SLOWLY"),S()},p.length*E)),v=v>0?v:s(3,5)},_=()=>P<1e4?10:P<2e4?5:P<3e4?2:1,D=I=>{t(I),y=Math.min(y+5,E),M++,I.p=!0;const R=p.indexOf(I);if(p.splice(R,1),p.length<=0)if(v--,v>0)f(()=>{d("Round"),b(I)},100);else{a==null||a.stop(),g==null||g.stop();const T=_();c(M*T),f(()=>{l("gamescore",{winScore:M*T})},100)}},B=(I,R,T=!1)=>{if(!m){for(const C of p)if(u({x:I,y:R},C)){D(C);return}if(!T){for(const C of e)if(u({x:I,y:R},C)){t(C,!0),d("Popenalty"),x(C);return}d("Popenalty"),x()}}};r(B),n((I,R)=>B(I,R,!0)),i(()=>{f(()=>{d("Pop it"),b()})})},Ge=()=>{const{addEventResize:e,rand:t,useScreenMeta:d}=w(),{from:f}=d(),{popEffect:s,render:r}=O(),n=["#00dcfe","#5bb2f7","#92E6E6"],u=f==="opening"?n[0]:n[t(n.length-1)],{render:l,setIntersections:i}=pe({color:u}),{render:o,point:c}=$e({popEffect:s}),{render:h,point:p}=fe({getX:(m,v,M)=>m+Math.round(v*.25)+2*M,getY:(m,v,M)=>m+Math.round(v*.25)+0*M,popEffect:s}),{render:a,point:g}=De({popEffect:s});return e(()=>{const m=g(),v=c(),M=p();i((y,P,E)=>!L({x:y,y:P,r:E},m)&&!L({x:y,y:P,r:E},v)&&!L({x:y,y:P,r:E},M))}),()=>{r(),l(),o(),h(),a()}},Xe=()=>{const{useMeasure:e,addEventResize:t}=w(),d=ge(),{popEffect:f,render:s}=O(),{popits:r,render:n}=me({palette:d,popEffect:f});return Ye({popits:r,popEffect:f}),t(()=>{(r[0].y-r[0].r)/e().m}),()=>{s(),n()}},je=()=>{const e="#ff6347",{popEffect:t,render:d}=O(),{setBackground:f}=w(),{minusDifficulty:s}=$(),{render:r}=me({palette:e,retry:!0,popEffect:t});return f(e),s(),()=>{d(),r()}},qe=()=>{const{translate:e,useScreenMeta:t}=w(),{plusDifficulty:d,resetDifficulty:f}=$(),{data:s}=t(),{popEffect:r,render:n}=O(),{splashEffect:u,render:l}=ke({infinity:!0});ge();const{render:i,isJump:o}=Me(s==null?void 0:s.winScore,!0),{render:c}=fe({getX:(p,a,g)=>innerWidth>innerHeight?Math.min(p+(a-2*a*.055*1.6)/2+4*g+Math.round(a*.1),innerWidth-2*g-Math.round(a*.1)):p+(a-2*a*.055*1.6)/8+0*Math.round(a*.1)+2*g,getY:(p,a,g)=>innerWidth>innerHeight?p+(a-2*a*.055*1.6)/2-1*g-Math.round(a*.1):Math.min(p+(a-2*a*.055*1.6)/2+4*g+Math.round(a*.1),innerHeight-2*g-Math.round(a*.1)),popEffect:r}),{render:h}=Fe({getX:(p,a,g)=>innerWidth>innerHeight?Math.max(p-(a-2*a*.055*1.6)/2-4*g-Math.round(a*.1),2*g+Math.round(a*.1)):p+(a-2*a*.055*1.6)/8-2*Math.round(a*.1)-2*g,getY:(p,a,g)=>innerWidth>innerHeight?p-(a-2*a*.055*1.6)/2+0*g+Math.round(a*.1):Math.min(p+(a-2*a*.055*1.6)/2+4*g+Math.round(a*.1),innerHeight-2*g-Math.round(a*.1)),popEffect:r});return o?f():d(),innerHeight>innerWidth&&u(o?"Picture filled":"You win"),()=>{n(),innerHeight>innerWidth?e(i,0,-Math.round(innerHeight*.05)):i(),c(),h(),l()}},Ve=()=>{const{addEventResize:e,rand:t}=w(),{popEffect:d,render:f}=O(),s=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],r=s[t(s.length-1)],{render:n,setIntersections:u}=pe({color:r,frequency:10}),{render:l,rect:i,up:o,down:c}=Me(),{render:h,point:p}=Ae({popEffect:d}),{render:a,point:g}=ze({onClick:o,popEffect:d}),{render:m,point:v}=Le({onClick:c,popEffect:d});return e(()=>{const M=p(),y=i(),P=g(),E=v();u((x,S,b)=>!L({x,y:S,r:b},M)&&!be({x,y:S,r:b},y)&&!L({x,y:S,r:b},P)&&!L({x,y:S,r:b},E))}),()=>{f(),n(),l(),h(),a(),m()}},Ue=()=>{const{ctx:e,addEventResize:t,loop:d}=w(),f={x:40,y:100};let s=1,r=1,n;const u=()=>{n=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return u(),t(u),d(()=>{f.x+=2*s,f.y+=3*r,s*=-1,r*=-1}),()=>{e.save();var l=Math.random()*2,i=Math.random()*3;e.translate(l,i),e.beginPath(),e.fillStyle="red",e.rect(f.x,f.y,n,n),e.fill(),e.restore()}},Ke=[{name:"opening",ctor:He},{name:"main",ctor:Ge},{name:"game",ctor:Xe},{name:"gameover",ctor:je},{name:"gamescore",ctor:qe},{name:"score",ctor:Ve},{name:"devs",ctor:Ue}],Je=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3","/sounds/pop6.mp3","/sounds/pop7.mp3","/sounds/pop8.mp3","/sounds/pop9.mp3","/sounds/pop10.mp3","/sounds/pop11.mp3","/sounds/pop12.mp3","/sounds/pop13.mp3","/sounds/pop14.mp3","/sounds/pop15.mp3"];We(Ke,Je);document.title="Your's last Pop it";
