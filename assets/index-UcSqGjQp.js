(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(s){if(s.ep)return;s.ep=!0;const d=l(s);fetch(s.href,d)}})();const Ie=()=>{const n=document.createElement("canvas"),t=n.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const l=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},f=e=>{t.clearRect(0,0,innerWidth,innerHeight),e()};return l(),document.body.appendChild(n),{ctx:t,render:f,resize:l,rotate:(e,r,i,v)=>{t.save(),t.translate(r,i),t.rotate(Math.PI*v),t.translate(-r,-i),e(),t.restore()},translate:(e,r,i)=>{t.save(),t.translate(r,i),e(),t.restore()},shade:(e,r)=>{e=e.substring(1);const i=parseInt(e,16),v=Math.round(2.55*r),P=(i>>16)+v,p=(i>>8&255)+v,h=(i&255)+v;return"#"+(16777216+(P<255?P<1?0:P:255)*65536+(p<255?p<1?0:p:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},setBackground:(e,r)=>{var i;document.body.style.background=e,document.body.style.backgroundColor=r||e,(i=document.querySelector('meta[name="theme-color"]'))==null||i.setAttribute("content",r||e)},createImg:(e,r,i=r)=>{const v=document.createElement("canvas"),P=v.getContext("2d");if(!P)throw new Error("CanvasRenderingContext2D is null");return v.width=r*devicePixelRatio,v.height=i*devicePixelRatio,P.scale(devicePixelRatio,devicePixelRatio),e(P),v}}},Re=n=>{let t="",l="",f;const s=a=>n.find(c=>c.name===a)||n[0],o={render:()=>{},navigate:(a,c)=>{const e=s(a);l=t||"",t=(e==null?void 0:e.name)||"",f=c,o.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:l,data:f})};return o},Te=()=>{const n=requestAnimationFrame||(o=>setTimeout(o,16.666666666666668)),t=[],l={};return{loop:(o,a)=>{if(Object.entries(l).find(([e,r])=>r===o)||a&&l[a])throw new Error(`Loop${a?" "+a:""} already specified`);a&&t.push(a),a=a||new Date().valueOf().toString(),l[a]=o;const c=()=>{o(),l[a]&&n(c)};c()},stop:o=>{if(typeof o=="string")delete l[o];else{const a=Object.entries(l).find(([c,e])=>e===o);a&&delete l[a[0]]}},stopAll:()=>{for(const o in l)t.indexOf(o)===-1&&delete l[o]}}};let J=[];const ke=()=>{for(const n of J)clearTimeout(n);J=[]},We=(n,t=400)=>{let l=new Date,f=t,s=setTimeout(n,f);return J.push(s),{pause:()=>{clearTimeout(s),f-=new Date-l},resume:()=>{l=new Date,clearTimeout(s),s=setTimeout(n,f),J.push(s)},stop:()=>{clearTimeout(s)}}},de=2147483646,ee=2147483647,Ae=16807,De=(n=Math.floor(Math.random()*ee))=>{n=n%ee,n<=0&&(n+=de);const t=()=>(n=n*Ae%ee,n),l=()=>(t()-1)/de;return(s,d)=>(d===void 0&&(d=s,s=0),Math.floor(l()*(d-s+1))+s)},ze=(n,t)=>(t===void 0&&(t=n,n=0),Math.floor(Math.random()*(t-n+1))+n),He=()=>{const n=[],t=[],l=[];return{addEventResize:r=>{r(),n.push(r)},onResizeEvents:()=>n.forEach(r=>r()),addEventClick:r=>t.push(r),onClickEvents:(r,i)=>t.forEach(v=>v(r,i)),addEventMove:r=>l.push(r),onMoveEvents:(r,i)=>l.forEach(v=>v(r,i)),removeAllEvents:()=>{n.splice(0),t.splice(0),l.splice(0)}}},_=(n,t)=>{const l=Math.pow(Math.abs(n.x-t.x),2),f=Math.pow(Math.abs(n.y-t.y),2),s=n.r||0,d=t.r||0,o=Math.pow(s+d,2);return l+f<=o},Le=(n,t)=>{const l=n.r||0,f=t.w||0,s=t.h||0;return Math.abs(t.x+f/2-n.x)<=f/2+l&&Math.abs(t.y+s/2-n.y)<=s/2+l},Fe=(n,t)=>_(n,t),Be=n=>{const t=new AudioContext,l={},f=o=>{fetch(o).then(a=>a.arrayBuffer()).then(a=>(t==null?void 0:t.decodeAudioData(a))||null).then(a=>{a&&(l[o]=a)})};if(n&&n.length)for(const o of n)f(o);let s=!0;const d=(o,a)=>{s&&setTimeout(async()=>{const c=t.createBufferSource();l[o]||(l[o]=await fetch(o).then(e=>e.arrayBuffer()).then(e=>(t==null?void 0:t.decodeAudioData(e))||null)),c.buffer=l[o],c.connect(t.destination),a&&(c.playbackRate.value=a),c.start()},0)};return window.onfocus=()=>{s=!0},window.onblur=()=>{s=!1},d};let Q;const _e=(n,t=[],l)=>{if(Q)throw new Error("Webcore already specified");const f=Ie(),s=Re(n),{loop:d,stop:o,stopAll:a}=Te(),{addEventResize:c,onResizeEvents:e,addEventClick:r,onClickEvents:i,addEventMove:v,onMoveEvents:P,removeAllEvents:p}=He();let h=innerWidth/2,u=innerHeight/2,y=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight;const g=()=>({cx:h,cy:u,s:y,m,isL:w}),M=Be(t);Q={font:"Tijuf",sdk:l,ctx:f.ctx,shade:f.shade,rotate:f.rotate,translate:f.translate,setBackground:f.setBackground,createImg:f.createImg,useMeasure:g,useScreenMeta:s.useScreenMeta,navigate:(S,E)=>{if(!n.some(C=>C.name===S))throw new Error(`Screen ${S} not specified`);a(),ke(),p(),new Promise(()=>s.navigate(S,E))},loop:d,loopStop:o,useTimer:We,rand:ze,useRandChain:De,intersect:Fe,addEventResize:c,addEventClick:r,addEventMove:v,playSound:M},d(()=>f.render(s.render),"draw"),window.onresize=()=>{h=innerWidth/2,u=innerHeight/2,y=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight,f.resize(),e()},document.onpointerdown=S=>{i(S.clientX,S.clientY)},document.onmousemove=S=>{P(S.clientX,S.clientY)},s.navigate()},I=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},z=n=>{const{shade:t,ctx:l,createImg:f}=I(),s=()=>{const{r:o,c:a="#ffffff",p:c}=n,e=l.createRadialGradient(o,o,o,o,o,o/5);return e.addColorStop(0,t(a,0)),e.addColorStop(.01,t(a,0)),e.addColorStop(.075,t(a,9)),e.addColorStop(.15,t(a,0)),e.addColorStop(.15,t(a,-15)),e.addColorStop(.18,t(a,-5)),e.addColorStop(.22,t(a,-15)),c?(e.addColorStop(.24,t(a,-10)),e.addColorStop(.3,t(a,-8)),e.addColorStop(.34,t(a,-12)),e.addColorStop(.6,t(a,-8)),e.addColorStop(1,t(a,-6))):(e.addColorStop(.24,t(a,-12)),e.addColorStop(.26,t(a,-8)),e.addColorStop(.3,t(a,-2)),e.addColorStop(.34,t(a,0)),e.addColorStop(.5,t(a,5)),e.addColorStop(1,t(a,18))),e},d=()=>{const{r:o,c:a="#ffffff",p:c}=n,e=`${a}_${c?"push":"pop"}_${o}`;if(te[e])return te[e];const r=f((i=l)=>{const v=s();i.fillStyle=v,i.beginPath(),i.arc(o,o,o,0,2*Math.PI),i.closePath(),i.fill()},2*o);return te[e]=r,r};return(o=l)=>{const{x:a,y:c,r:e}=n,r=d();o.drawImage(r,a-e,c-e,2*e,2*e)}},ne={},U=n=>{const{ctx:t}=I();let l;return ne[n.src]?l=ne[n.src]:(l=new Image,l.src=n.src,ne[n.src]=l),(f=t)=>{const{w:s,h:d=s,x:o=0,y:a=0}=n;l.complete&&f.drawImage(l,o,a,s,d)}},ue=n=>{const{font:t,ctx:l}=I(),f=n.text,s=n.text.length,d=2*Math.PI/s/4;return(o=l)=>{const{x:a,y:c,r:e,s:r=0,fs:i}=n,v=i||Math.round(e/4);o.textAlign="center",o.fillStyle="#f9f9f9",o.font=`${v}px ${t}`,o.save(),o.translate(a,c),o.rotate(r);for(let P=0;P<s;P++)o.save(),o.rotate(P*d),o.fillText(f[P],0,-e),o.restore();o.restore()}},O=n=>{const{font:t,ctx:l}=I();return(f=l)=>{const{text:s,x:d,c:o,y:a,fs:c,a:e="center",mw:r,f:i}=n;f.textAlign=e,f.fillStyle=o,f.font=`${c}px ${i||t}`,f.fillText(s,d,a,r)}},Oe={tapToSkip:"tab to skip",theEnd:"The end",youWin:"You win",complete:"Complete"},ye={tapToSkip:"нажмите что бы пропустить",theEnd:"Конец игры",youWin:"Вы выйграли",complete:"Открыто"};let ce=ye;const $e=n=>{switch(n){case"ru":ce=ye;break;default:ce=Oe}},Me=()=>ce,Ne=()=>{var E,C;const{ctx:n,loop:t,rotate:l,navigate:f,useMeasure:s,addEventClick:d,addEventResize:o,setBackground:a,useTimer:c}=I(),e=Me();a("#040404");let r=!1,i,v,P,p,h,u,y=-.2,m=0,w=!1;o(()=>{const{cx:x,cy:b,s:D}=s(),T=Math.round(D*.25);i={c:"#ff6347",x,y:b,r:T,p:!1},v=z(i),P=U({x:x-T+Math.round(T*.35),y:b-T+Math.round(T*.35),w:T*2-Math.round(T*.7),src:"/media/sloth.svg"}),p=ue({text:"nezabotin",x,y:b,r:Math.round(T*1.1),s:Math.PI*1.6}),h=ue({text:"production",x,y:b,r:Math.round(T*1.1),s:Math.PI*2.6}),u=O({text:e.tapToSkip,c:"#f1f1f1",y:innerHeight-Math.round(T/5),x,fs:Math.round(T/10),mw:D,f:"PressStart2P"})});const g=()=>{y+=.01,m=y>=1?1:y,y>=1.8&&(i.p=!0),y>=2.2&&(i.c="#f86a9a"),y>=2.6&&f("main")};d(()=>{[1.4,1.8,2.2,2.6].some(x=>{if(y<x)return y=x,!0})});const M=()=>{t(g),r=!0};(E=document==null?void 0:document.fonts)!=null&&E.ready?(C=document==null?void 0:document.fonts)==null||C.ready.then(M):M();const S=()=>c(()=>{w=!w,S()},250);return S(),()=>{const{cx:x,cy:b}=s();n.globalAlpha=r?1:0,v(),y<1.8&&P(),y<1.4&&l(()=>{p(),h()},x,b,m),w&&u(),n.globalAlpha=1}},pe="ylp",fe="score",oe="difficulty",he="sound",se=[.14,.11,.09,.075],me=750,Ye=350,ge=10,G=[];for(let n=0;n*ge<=me-Ye;n++)G.push(me-n*ge);let q=null;const $=()=>{const n=p=>localStorage.getItem(`${pe}_${p}`),t=(p,h)=>localStorage.setItem(`${pe}_${p}`,h.toString()),l=()=>+(n(fe)||0),f=p=>t(fe,p),s=p=>{const h=l();f(h+p)},d=()=>+(n(oe)||0),o=p=>{const h=d();t(oe,Math.min(Math.max(h+p,0),se.length*G.length-1))};return{getScore:l,addScore:s,plusDifficulty:()=>o(1),minusDifficulty:()=>o(-5),getDifficultyRad:()=>{const p=d(),h=Math.floor(p/G.length);return se[h]||se[1]},getDifficultyTic:()=>{const p=d(),h=Math.floor(p/G.length),u=p-h*G.length;return G[u]||G[0]},resetDifficulty:()=>t(oe,0),getSound:()=>{if(q!==null)return q;const p=n(he);return!p||p==="true"?(q=!0,!0):(q=!1,!1)},setSound:p=>{q=p,t(he,p)}}};let Pe=["/sounds/pop/pop1.mp3","/sounds/pop/pop2.mp3","/sounds/pop/pop3.mp3","/sounds/pop/pop4.mp3","/sounds/pop/pop5.mp3","/sounds/pop/pop6.mp3","/sounds/pop/pop7.mp3","/sounds/pop/pop8.mp3","/sounds/pop/pop9.mp3","/sounds/pop/pop10.mp3","/sounds/pop/pop11.mp3","/sounds/pop/pop12.mp3","/sounds/pop/pop13.mp3","/sounds/pop/pop14.mp3","/sounds/pop/pop15.mp3","/sounds/pop/pop16.mp3","/sounds/pop/pop17.mp3","/sounds/pop/pop18.mp3","/sounds/pop/pop19.mp3","/sounds/pop/pop20.mp3","/sounds/pop/pop21.mp3","/sounds/pop/pop22.mp3","/sounds/pop/pop23.mp3","/sounds/pop/pop24.mp3"],F=[...Pe];const V=()=>{const{rand:n,playSound:t}=I(),{getSound:l}=$();return{playPop:()=>{if(!l())return;const c=n(F.length-1),e=F[c];F.splice(c,1),F.length||(F=[...Pe]);const r=n(F.length-1);F=[...F.splice(r,F.length),...F],t(e)},playMissed:()=>{if(!l())return;t("/sounds/wrong.mp3")},playFail:()=>{if(!l())return;t("/sounds/fail.mp3")},playWin:()=>{if(!l())return;t("/sounds/win.mp3")},playComplete:()=>{if(!l())return;t("/sounds/complete.mp3")}}},j=100/2;let ve=0;const X=()=>{const{loop:n,ctx:t,shade:l,rand:f}=I(),{playPop:s,playMissed:d}=V(),o={},a=()=>{for(const r in o){const i=o[r];if(!i)return;const v=i.popit;if(!i.shake)i.tic+=j/5,i.tic>=j&&(i.dir=-1),i.withoutRad||(v.r=i.origR+i.origR*75e-5*(i.tic+(i.dir>0?0:j-i.tic)));else{i.tic+=j/5;const P=f(1,2),p=f(1,2);v.x=i.origX+Math.random()*P*(Math.random()>.5?1:-1),v.y=i.origY+Math.random()*p*(Math.random()>.5?1:-1)}i.tic>=2*j&&(delete o[r],v.r=i.origR,v.x=i.origX,v.y=i.origY)}},c=(r,i=!1,v=!1)=>{var w;i?d():s(),(w=navigator==null?void 0:navigator.vibrate)==null||w.call(navigator,30),ve++;const P=`${new Date().valueOf().toString()}_${ve}`,p=1,h=1;let u=r.r,y=r.x,m=r.y;for(const g in o){const M=o[g];r===M.popit&&(u=M.origR,y=M.origX,m=M.origY)}o[P]={withoutRad:i,tic:p,dir:h,popit:r,origR:u,origX:y,origY:m,shake:v}},e=()=>{t.globalAlpha=.25;for(const r in o){const i=o[r];if(i.shake)continue;const v=i.popit;t.fillStyle=l(v.c||"red",-12),t.beginPath(),t.arc(v.x,v.y,v.r+i.origR*.001*(i.tic+(i.dir>0?0:j-i.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return n(a),{popEffect:c,render:e}},Ge=({color:n="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,useScreenMeta:d,navigate:o,addEventClick:a,intersect:c}=I(),{from:e}=d();let r,i,v;return l(()=>{const{cx:h,cy:u,s:y,m}=f(),w=Math.round(y*.25);r={c:n,r:Math.round(y*.08),x:h-w-1*m,y:u-w+1*m,p:(e==="score"||e==="opening"||e==="devs")&&!r},i=z(r),v=U({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),s(()=>{r.p&&t(r,!1,!0),r.p=!1}),a((h,u)=>{c({x:h,y:u},r)&&(t(r),r.p=!0,s(()=>{o("score")},100))}),{render:()=>{i(),r.p||v()},point:()=>({x:r.x,y:r.y,r:r.r})}},Se=({color:n="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,navigate:d,addEventClick:o,intersect:a}=I();let c,e,r;return l(()=>{const{s:P}=f(),p=Math.round(P*.08);c={c:n,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:!c},e=z(c),r=U({x:Number(c.x)-p+Math.round(p*.4),y:Number(c.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),s(()=>{c.p&&t(c,!1,!0),c.p=!1}),o((P,p)=>{a({x:P,y:p},c)&&(t(c),c.p=!0,s(()=>{d("main")},100))}),{render:()=>{e(),c.p||r()},point:()=>({x:c.x,y:c.y,r:c.r})}},je=({onClick:n,popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,addEventClick:d,intersect:o,rotate:a}=I(),{playPop:c}=V();let e,r,i;return l(()=>{const{s:p}=f(),h=Math.round(p*.08);e={c:"#ff6347",r:h,x:Math.round(innerWidth-1.6*h),y:Math.round(innerHeight-1.6*h),p:!1},r=z(e),i=U({x:Number(e.x)-h+Math.round(h*.4),y:Number(e.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),d((p,h)=>{o({x:p,y:h},e)&&(c(),e!=null&&e.p||t(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{r(),e.p||a(()=>{i()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Xe=({onClick:n,popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,addEventClick:d,intersect:o,rotate:a}=I(),{playPop:c}=V();let e,r,i;return l(()=>{const{s:p,isL:h}=f(),u=Math.round(p*.08),y=Math.round(h?innerWidth-1.6*u:innerWidth-1.6*u-2*u-.3*u),m=Math.round(h?innerHeight-1.6*u-2*u-.3*u:innerHeight-1.6*u);e={c:"#ff6347",r:u,x:y,y:m,p:!1},r=z(e),i=U({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),d((p,h)=>{o({x:p,y:h},e)&&(c(),e!=null&&e.p||t(e),e.p=!0,n(),s(()=>{e.p=!1},200))}),{render:()=>{r(),e.p||a(()=>{i()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},qe=n=>{const{ctx:t,shade:l}=I(),f=Math.round(n.r/2.2),s=Math.round(.15*n.r),d=l(n.c||"blue",-3);return(o=t)=>{const{r:a,x:c=a,y:e=a}=n;o.lineCap="round",o.fillStyle=d,o.strokeStyle=d,o.lineWidth=f,o.beginPath(),o.moveTo(c+s,e),o.lineTo(c-s/2,e-s),o.lineTo(c-s/2,e+s),o.closePath(),o.fill(),o.beginPath(),o.moveTo(c+s,e),o.lineTo(c-s/2,e-s),o.moveTo(c-s/2,e-s),o.lineTo(c-s/2,e+s),o.moveTo(c-s/2,e+s),o.lineTo(c+s,e),o.stroke()}},we=({color:n="#bef181",popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,useScreenMeta:d,navigate:o,addEventClick:a,intersect:c}=I(),{from:e,to:r}=d();let i,v,P;const p=()=>{const{cx:w,cy:g,s:M,m:S}=f(),E=w+Math.round(M*.25)+2*S,C=g+Math.round(M*.25);return{x:E,y:C}},h=()=>{const{cx:w,cy:g,s:M,isL:S,m:E}=f(),C=Math.round(M*.1);if(S){let x=Math.round(w+M/2)+E*2;const b=Math.round(g+M/2-C*2);return x=Math.min(x,Math.round(innerWidth-C*1.5)),{x,y:b}}else{const x=Math.round(w+M*.12);let b=Math.round(g+M/2+C*1.5);return b=Math.min(b,innerHeight-Math.round(C*1.5)),{x,y:b}}},u=()=>r==="main"?p():h();return l(()=>{const{s:w}=f();i={c:n,r:Math.round(w*.1),...u(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!i},v=z(i),P=qe(i)}),s(()=>{i.p&&t(i,!1,!0),i.p=!1}),a((w,g)=>{c({x:w,y:g},i)&&(t(i),i.p=!0,s(()=>{o("game")},100))}),{render:()=>{v(),i.p||P()},point:()=>({x:i.x,y:i.y,r:i.r})}},Ee=n=>{const{ctx:t,shade:l}=I(),f=Math.round(n.r/4),s=Math.round(.12*n.r);return(d=t)=>{const{r:o,x:a=o,y:c=o}=n,e=l(n.c||"blue",-3);d.lineCap="round",d.strokeStyle=e,d.lineWidth=f,d.beginPath(),d.moveTo(a-1.5*s,c-2*s),d.lineTo(a-1.5*s,c+2*s),d.stroke(),d.beginPath(),d.moveTo(a+1.5*s,c-2*s),d.lineTo(a+1.5*s,c+2*s),d.stroke()}},Ue=({popEffect:n=()=>{}})=>{const{addEventResize:t,useMeasure:l,useTimer:f,useScreenMeta:s,navigate:d,addEventClick:o,intersect:a}=I(),{from:c}=s();let e,r,i;const v=()=>{const{cx:h,cy:u,s:y,isL:m,m:w}=l(),g=Math.round(y*.1);if(m){let M=Math.round(h-y/2)-w;const S=Math.round(u-y/2+g*2);return M=Math.max(M,Math.round(g*1.5)),{x:M,y:S}}else{const M=Math.round(h-y*.12);let S=Math.round(u+y/2+g*1.5);return S=Math.min(S,innerHeight-Math.round(g*1.5)),{x:M,y:S}}};return t(()=>{const{s:h}=l();e={c:"#fd8059",r:Math.round(h*.08),...v(),p:(c==="game"||c==="opening")&&!e},r=z(e),i=Ee(e)}),f(()=>{e.p&&n(e,!1,!0),e.p=!1},500),o((h,u)=>{a({x:h,y:u},e)&&(n(e),e.p=!0,f(()=>{d("main")},100))}),{render:()=>{r(),e.p||i()},point:()=>({x:e.x,y:e.y,r:e.r})}},Ve=n=>{const{ctx:t,shade:l}=I(),f=Math.round(n.r/4),s=Math.round(.2*n.r),d=l(n.c||"blue",-5);return(o=t)=>{const{r:a,x:c=a,y:e=a}=n;o.lineCap="round",o.fillStyle=d,o.strokeStyle=d,o.lineWidth=f,o.beginPath(),o.ellipse(c-s,e+s,f,s,10*Math.PI/180,0,2*Math.PI),o.closePath(),o.fill(),o.beginPath(),o.moveTo(c-s/2,e+s),o.lineTo(c,e-s),o.lineTo(c+s,e-s),o.stroke(),n.on||(o.lineWidth=Math.round(f/3),o.beginPath(),o.moveTo(c-a/4,e-a/4),o.lineTo(c+a/4,e+a/4),o.stroke())}},Ke=({color:n="#f9f774",popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,useScreenMeta:d,addEventClick:o,intersect:a}=I(),{from:c}=d(),{getSound:e,setSound:r}=$();let i,v,P;return l(()=>{const{cx:u,cy:y,s:m,m:w}=f(),g=Math.round(m*.25),M=Math.round(m*.065),S=e();i={c:n,r:M,x:u-g-M-w,y:y-g+3*M,p:(c==="opening"||c==="devs")&&!i,on:S},v=z(i),P=Ve(i)}),s(()=>{i.p&&t(i,!1,!0),i.p=!1}),o((u,y)=>{if(a({x:u,y},i)){let m=e();m=!m,r(m),i.p=!0,i.on=m,t(i),s(()=>{i.p=!1},100)}}),{render:()=>{v(),i.p||P()},point:()=>({x:i.x,y:i.y,r:i.r})}},Je=({color:n="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:l,useMeasure:f,useTimer:s,useScreenMeta:d,addEventClick:o,intersect:a,navigate:c}=I(),{from:e}=d();let r,i,v,P,p=0;return l(()=>{const{cx:y,cy:m,s:w}=f(),g=Math.round(w*.25);r={c:n,x:y,y:m,r:g,p:(e==="opening"||e==="devs")&&!r},i=z(r),v=O({text:"Yola",c:"#f1f1f1",x:y,y:m-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2,f:"Tijuf"}),P=O({text:"PopiT",c:"#ffeb3b",x:y,y:m-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2,f:"Tijuf"})}),s(()=>{r.p&&t(r,!1,!0),r.p=!1}),o((y,m)=>{a({x:y,y:m},r)&&!(r!=null&&r.p)&&(p++,t(r),r.p=!0,s(()=>{p>12?c("devs"):(r!=null&&r.p&&t(r,!1,!0),r.p=!1)},200))}),{render:()=>{i(),r.p||(v(),P())},point:()=>({x:r.x,y:r.y,r:r.r})}},Ce=({color:n="#00dcfe",frequency:t=20})=>{const{addEventResize:l,useRandChain:f,useMeasure:s,rand:d,useTimer:o,setBackground:a,useScreenMeta:c}=I(),{from:e}=c();a(n);const r=d(0,999);let i=[],v=[];l(()=>{const u=f(r),{s:y}=s();i=[];const m=Math.round(y*.04),w=Math.round(innerWidth/m/2)-2,g=Math.round((innerWidth-2*m*w)/(w+1)),M=Math.round(innerHeight/m/2)-2,S=Math.round((innerHeight-2*m*M)/(M+1));for(let E=0;E<M;E++)for(let C=0;C<w;C++)u(u(t))<1&&i.push({x:g+m+C*m*2+g*C,y:S+m+E*m*2+S*E,r:m,c:n,p:e==="opening"?!0:u(1)>0});v=i.map(E=>z(E))});const P=()=>{o(()=>{const u=d(i.length-1);i[u]&&(i[u].p=!i[u].p),P()},750)};return e==="opening"?o(()=>{i.forEach(u=>u.p=d(1)>0),P()}):P(),{render:()=>{v.forEach(u=>u())},setIntersections:u=>{i=i.filter(({x:y,y:m,r:w})=>u(y,m,w)),v=i.map(y=>z(y))}}},ae=(n=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:f,setBackground:s,rand:d}=I(),{getDifficultyRad:o}=$();return t=[...t.splice(d(t.length-1),t.length),...t],n||l(()=>{const{s:c}=f(),e=o(),r=Math.round(c*e),i=Math.round(innerWidth/r/2)-1,v=(innerWidth-2*r*i)/(i+1),P=Math.round(innerHeight/r/2)-1,p=(innerHeight-2*r*P)/(P+1),h=innerWidth>=innerHeight,u=h?i:P,y=h?v:p,m=h?innerWidth:innerHeight;let w=0;const g=[];for(let S=0;S<u;S++)t[w]||(w=0),g.push(`${t[w]} ${(y+r+S*r*2+y*S)/m*100}%`),w++;s(`linear-gradient(${h?"to right":"to bottom"}, ${g.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},xe=({palette:n,retry:t,popEffect:l=()=>{}})=>{const{addEventResize:f,useMeasure:s,rand:d,useTimer:o,useScreenMeta:a,navigate:c,addEventClick:e,intersect:r}=I(),{from:i}=a(),{getDifficultyRad:v}=$(),P=[];let p=[],h,u,y,m={x:0,y:0,r:0};const w=M=>Array.isArray(n)?n[M]:n;return f(()=>{const{s:M}=s();P.splice(0);const S=v(),E=Math.round(M*S),C=Math.round(innerWidth/E/2)-1,x=(innerWidth-2*E*C)/(C+1),b=Math.round(innerHeight/E/2)-1,D=(innerHeight-2*E*b)/(b+1),T=innerWidth>=innerHeight;let H=0;for(let A=0;A<b;A++){for(let L=0;L<C;L++){w(H)||(H=0);const R={x:x+E+L*E*2+x*L,y:D+E+A*E*2+D*A,r:E,c:w(H),p:!0};A===0&&L===C-1?(m={x:R.x,y:R.y,r:R.r,c:R.c,p:(i==="main"||i==="gameover"||i==="gamescore")&&!m.r},h=z(m),u=Ee(m)):P.push(R),H+=T?1:0}H=T?0:H+1}t&&(y=P[d(P.length-1)],o(()=>{l(y,!1,!0),y.p=!1})),p=P.map(A=>z(A))}),o(()=>{m.p&&l(m,!1,!0),m.p=!1}),t&&e((M,S)=>{r({x:M,y:S},y)&&(l(y),y.p=!0,o(()=>{c("game")},100))}),e((M,S)=>{r({x:M,y:S},m)&&(l(m),m.p=!0,o(()=>{c("main")},100))}),{render:()=>{p.forEach(M=>M()),h(),m!=null&&m.p||u()},popits:P,pausePpt:m}},Y=100,K="#222",Qe=n=>{const t=(n==null?void 0:n[0])||0,l=(n==null?void 0:n[1])||0,f=(n==null?void 0:n[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(l<255?l<1?0:l:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},re={},Ze=n=>{const{ctx:t,createImg:l,useRandChain:f,useTimer:s}=I();let d,o=!1,a=[];const c=n.r*2/Y/2;re[n.imgSrc]?d=re[n.imgSrc]:(d=re[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},d.img.src=n.imgSrc);const e=()=>s(()=>{o=!o,e()},250),r=(h,u=t)=>{const{x:y,y:m,c:w,r:g}=h;u.fillStyle=w||"red",u.beginPath(),u.arc(y+g,m+g,g,0,Math.PI*2),u.closePath(),u.fill()},i=(h=t,u=0,y=0)=>{h.fillStyle=K,h.beginPath(),h.roundRect(u,y,2*n.r,2*n.r,c),h.closePath(),h.fill()},v=()=>{const h=[];for(let g=0;g<Y;g++)for(let M=0;M<Y;M++){const S={x:M*c*2,y:g*c*2,r:c,c:K};h.push(S)}let u=n.score-n.winScore;const y=[...h],m=f(n.seed),w=(g=!1)=>{const M=m(y.length-1),S=y[M],E=h.indexOf(S);S.c=g?K:d.cols[E],y.splice(M,1),g&&a.push({...S,c:d.cols[E]})};for(let g=u;g>0;g--)w();if(n.winScore){a=[];for(let g=n.winScore;g>0;g--)w(!0);e()}return h},P=()=>{const h=v();d.drawImg=l((u=t)=>{i(u),h.filter(y=>y.c!==K).forEach(y=>r(y,u))},2*n.r)},p=async()=>{var y;const h=document.createElement("canvas");h.width=Y,h.height=Y;const u=h.getContext("2d",{willReadFrequently:!0});u==null||u.drawImage(d.img,0,0);for(let m=0;m<Y;m++){const w=[];for(let g=0;g<Y;g++){const M=(y=u==null?void 0:u.getImageData(g,m,1,1))==null?void 0:y.data;w.push(Qe(M))}d.cols.push(...w)}d.isFilled=!0,P()};return d.isFilled?(d.r!==n.r||d.score!==n.score)&&P():d.img.onload=p,(h=t)=>{const{x:u,y,r:m,winScore:w}=n;if(d.drawImg?h.drawImage(d.drawImg,u-m,y-m,2*m,2*m):i(h,u-m,y-m),o&&w&&d.drawImg)for(const g of a)h.fillStyle=g.c||"red",h.beginPath(),h.arc(u-m+g.x+g.r,y-m+g.y+g.r,g.r,0,Math.PI*2),h.closePath(),h.fill()}},ie=1e4,be=(n=0,t=!1)=>{const{addEventResize:l,useMeasure:f,translate:s}=I(),{getScore:d}=$(),o=["/media/levels/sloth.png","/media/levels/rabbit.png","/media/levels/bear.png","/media/levels/horse.png","/media/levels/fish.png","/media/levels/lion.png","/media/levels/elephant.png","/media/levels/tiger.png","/media/levels/crocodile.png","/media/levels/beaver.png","/media/levels/giraffe.png","/media/levels/penguin.png","/media/levels/wolf.png","/media/levels/chiken.png","/media/levels/pig.png","/media/levels/shimp.png","/media/levels/corgi.png","/media/levels/cow.png","/media/levels/deer.png","/media/levels/donkey.png","/media/levels/panda.png","/media/levels/dinosaur.png","/media/levels/rat.png","/media/levels/turtle.png","/media/levels/cockroach.png","/media/levels/parrot.png","/media/levels/kangaroo.png","/media/levels/spider.png","/media/levels/squirrel.png","/media/levels/stork.png","/media/levels/whale.png"],a=d();let c,e=0,r=0,i=!1,v=!1;const P=g=>Math.min(Math.floor(g/ie),o.length-1);let p=P(a-n);n&&(i=P(a)!==p,v=Math.floor(a/ie)>o.length-1);const h=()=>{const{cx:g,cy:M,s:S,isL:E}=f();c=[],e=(S-2*S*.055*1.6)/2,r=S*.05;let C=t?p:Math.max(p-1,0);for(C;C<(t?p+1:Math.min(p+2,o.length));C++){const x=o[C],b=E?g:g+C*e*2+C*r,D=E?M+C*e*2+C*r:M;c.push(Ze({x:b,y:D,r:e,score:Math.min(a-C*ie,1e4),imgSrc:x,winScore:i||v?0:n,seed:C}))}};return l(h),{up:()=>{p=p+1<o.length?p+1:o.length-1,h()},down:()=>{p=p-1<0?0:p-1,h()},render:()=>{const{isL:g}=f(),M=g?0:-(p*e*2+p*r),S=g?-(p*e*2+p*r):0;s(()=>{c==null||c.forEach(E=>E())},M,S)},rect:()=>{const{cx:g,cy:M}=f(),S=innerWidth>innerHeight;return{x:S?g-e:0,y:S?0:M-e,w:S?2*e:innerWidth,h:S?innerHeight:2*e}},isJump:i,isCompleted:v}},et=({popits:n,pausePpt:t,popEffect:l=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:s,rand:d,addEventClick:o,addEventMove:a,intersect:c,navigate:e,addEventResize:r}=I(),{getScore:i,addScore:v,getDifficultyTic:P}=$();let p=[],h,u,y=!1,m=0,w=0,g=0,M,S,E=!1;const C=i(),x=P(),b=()=>{M&&S&&w&&!E&&new Date().getTime()-M.getTime()<=S*350&&(w=w*2),M=new Date,S=p.length,E=!1},D=R=>{const k=n.filter(N=>p.indexOf(N)===-1&&N!==R),B=d(k.length-1),W=k[B];W&&(l(W,!1,!0),W.p=!1,p.push(k[B]))},T=()=>{u=s(()=>{if(g=Math.max(g-10,50),n.length===p.length){y=!0,u==null||u.stop(),s(()=>{e("gameover")});return}D(),T()},g)},H=R=>{p=[];const k=n.length;let B=d(Math.round(k*.3),Math.round(k*.6));const W=[...n];if(R){const N=W.indexOf(R);W.splice(N,1)}for(let N=B;N>0;N--){const le=d(W.length-1),Z=W[le];Z.p=!1,l(Z,!1,!0),p.push(Z),W.splice(le,1)}g=x,h==null||h.stop(),u==null||u.stop(),u=null,C&&(h=s(()=>{f("SLOWLY"),T()},p.length*x)),m=m>0?m:d(3,5),b()},A=R=>{l(R),g=Math.min(g+5,x),w++,R.p=!0;const k=p.indexOf(R);p.splice(k,1),p.length<=0&&(m--,m>0?s(()=>{f(m>1?"Round":"Last"),H(R)},100):(b(),h==null||h.stop(),u==null||u.stop(),v(w),s(()=>{e("gamescore",{winScore:w})},100)))},L=(R,k,B=!1)=>{if(!y){for(const W of p)if(c({x:R,y:k},W)){A(W);return}if(!c({x:R,y:k},t)&&!B){for(const W of n)if(c({x:R,y:k},W)){l(W,!0),f("Popenalty"),E=!0,D(W),u===null&&(h==null||h.stop(),T());return}f("Popenalty"),E=!0,D()}}};o(L),a((R,k)=>L(R,k,!0)),r(()=>{s(()=>{f("Pop it"),H()})})},tt=n=>{const{addEventResize:t,createImg:l,useMeasure:f,ctx:s,loop:d}=I();let o,a,c,e,r,i,v,P=!1,p=-2;const h=.1;return t(()=>{const{s:u,m:y,cy:m}=f();a=Math.round(u*.16),r=u,i=Math.round(a*1.5),c=0,e=Math.max(Math.round((innerHeight-m-u/2)/2-a/2)+y*4,Math.round(m-u/2-a*2)),v=e,P=e-a/2>-(a/2)+y*2;const w={fs:a,text:n,x:Math.round(u/2),y:a,c:"#f9f9f9",mw:Math.round(u*.8),f:"PressStart2P"},g=O(w);o=l((M=s)=>{g(M)},r,i)}),d(()=>{const{m:u}=f();e+=p,p+=h,e<=u&&(e=u),e>=v&&(e=v,p=-2)}),()=>{P&&s.drawImage(o,c,e,r,i)}},nt=()=>{const{addEventResize:n,rand:t,useScreenMeta:l,sdk:f}=I(),{from:s}=l();s==="opening"?f.ready():s==="game"&&(f.gameplayStop(),f.showFullscreenAdv());const{popEffect:d,render:o}=X(),a=["#00dcfe","#5bb2f7","#92E6E6"],c=s==="opening"?a[0]:a[t(a.length-1)],{render:e,setIntersections:r}=Ce({color:c}),{render:i,point:v}=Je({popEffect:d}),{render:P,point:p}=we({popEffect:d}),{render:h,point:u}=Ge({popEffect:d}),{render:y,point:m}=Ke({popEffect:d});return n(()=>{const w=u(),g=v(),M=p(),S=m();r((E,C,x)=>!_({x:E,y:C,r:x},w)&&!_({x:E,y:C,r:x},g)&&!_({x:E,y:C,r:x},M)&&!_({x:E,y:C,r:x},S))}),()=>{o(),e(),i(),P(),h(),y()}},ot=()=>{const{useMeasure:n,addEventResize:t,sdk:l}=I();l.gameplayStart();const f=ae(),{popEffect:s,render:d}=X(),{popits:o,render:a,pausePpt:c}=xe({palette:f,popEffect:s});return et({popits:o,popEffect:s,pausePpt:c}),t(()=>{(o[0].y-o[0].r)/n().m}),()=>{d(),a()}},st=()=>{const{setBackground:n,sdk:t}=I();t.gameplayStop();const l="#ff6347",{popEffect:f,render:s}=X(),{minusDifficulty:d}=$(),{render:o}=xe({palette:l,retry:!0,popEffect:f}),{playFail:a}=V();return n(l),d(),a(),()=>{s(),o()}},rt=()=>{const{useScreenMeta:n,useTimer:t,navigate:l,sdk:f}=I();f.gameplayStop();const{plusDifficulty:s,resetDifficulty:d}=$(),o=Me(),{data:a}=n(),{popEffect:c,render:e}=X();ae();const{playWin:r,playComplete:i}=V(),{render:v,isJump:P,isCompleted:p}=be(a==null?void 0:a.winScore,!0);let h,u;if(!p){const{render:m}=we({popEffect:c}),{render:w}=Ue({popEffect:c});h=m,u=w}const y=tt(p?o.theEnd:P?o.complete:o.youWin);return P||p?(d(),i()):(s(),r()),p&&t(()=>{l("devs")},5e3),()=>{e(),v(),p||(h(),u()),y()}},it=()=>{const{addEventResize:n,rand:t}=I(),{popEffect:l,render:f}=X(),s=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],d=s[t(s.length-1)],{render:o,setIntersections:a}=Ce({color:d,frequency:10}),{render:c,rect:e,up:r,down:i}=be(),{render:v,point:P}=Se({popEffect:l}),{render:p,point:h}=je({onClick:r,popEffect:l}),{render:u,point:y}=Xe({onClick:i,popEffect:l});return n(()=>{const m=P(),w=e(),g=h(),M=y();a((S,E,C)=>!_({x:S,y:E,r:C},m)&&!Le({x:S,y:E,r:C},w)&&!_({x:S,y:E,r:C},g)&&!_({x:S,y:E,r:C},M))}),()=>{f(),o(),c(),v(),p(),u()}},ct=()=>{var w,g;const{addEventResize:n,setBackground:t,createImg:l,useMeasure:f,ctx:s,loop:d,navigate:o,useTimer:a}=I(),{popEffect:c,render:e}=X();let r=null;const i=ae(!0);let v=[];const P=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Motivator","Mentor"];let p=0,h=!1;const u=()=>{const{m:M,s:S}=f();v=[];const E=Math.round(S*.75),C=Math.round((innerWidth-E)/2);let x=0,b=Math.round(M*7);const D=O({text:"Yo last",c:"#f1f1f1",x:E/2,y:b,fs:b}),T=O({text:"Pop it",c:"#ffeb3b",x:E/2,y:b*2,fs:b}),H=l((A=s)=>{D(A),T(A)},E,3*b);v.push({img:H,x:C,y:p,w:E,h:5*b}),p+=7*b,b=Math.round(M*3.5);for(const A of P){i[x]||(x=0);const L=O({text:A.toLocaleUpperCase(),x:0,y:b,c:i[x],fs:Math.round(b*.6),mw:E,a:"left"}),R=O({text:"Maxim Nezabotin",x:E,y:b*1.9,c:"#f9f9f9",fs:Math.round(b*.5),mw:E,a:"right",f:"PressStart2P"}),k=l((B=s)=>{L(B),R(B)},E,2*b);v.push({img:k,x:C,y:p,w:E,h:5*b}),p+=5*b,x++}};n(u),t("#040404");const y=()=>{for(const S of v)S.y-=2;const M=v[v.length-1];M.y+M.h<0&&o("main")},m=()=>{p=innerHeight,u(),d(y),h=!0};return(w=document==null?void 0:document.fonts)!=null&&w.ready?(g=document==null?void 0:document.fonts)==null||g.ready.then(m):m(),a(()=>{const{render:M}=Se({popEffect:c});r=M},7500),()=>{s.globalAlpha=h?1:0,v.forEach(({img:M,x:S,y:E,w:C,h:x})=>{E+x>=0&&E<=innerHeight&&s.drawImage(M,S,E,C,x)}),e(),r==null||r(),s.globalAlpha=1}},at=async()=>new Promise(n=>{let t=null;const l=()=>{var c,e,r;(e=(c=t==null?void 0:t.features)==null?void 0:c.LoadingAPI)==null||e.ready(),(r=t==null?void 0:t.adv)==null||r.showBannerAdv()},f=()=>{var c;(c=t==null?void 0:t.adv)==null||c.showFullscreenAdv()},s=()=>{var c,e,r;(e=(c=t==null?void 0:t.features)==null?void 0:c.GameplayAPI)==null||e.start(),(r=t==null?void 0:t.adv)==null||r.hideBannerAdv()},d=()=>{var c,e;(e=(c=t==null?void 0:t.features)==null?void 0:c.GameplayAPI)==null||e.stop()},o=async()=>{var c,e,r;try{t=await((c=YaGames==null?void 0:YaGames.init)==null?void 0:c.call(YaGames)),$e(((r=(e=t==null?void 0:t.environment)==null?void 0:e.i18n)==null?void 0:r.lang)||"")}catch(i){console.error(i)}n({ready:l,showFullscreenAdv:f,gameplayStart:s,gameplayStop:d})},a=document.createElement("script");a.src="https://sdk.games.s3.yandex.net/sdk.js",a.onload=o,document.body.append(a)}),lt=()=>({ready:()=>{},showFullscreenAdv:()=>{},gameplayStart:()=>{},gameplayStop:()=>{}}),dt=[{name:"opening",ctor:Ne},{name:"main",ctor:nt},{name:"game",ctor:ot},{name:"gameover",ctor:st},{name:"gamescore",ctor:rt},{name:"score",ctor:it},{name:"devs",ctor:ct}],ut=["/sounds/pop/pop1.mp3","/sounds/pop/pop2.mp3","/sounds/pop/pop3.mp3","/sounds/pop/pop4.mp3","/sounds/pop/pop5.mp3","/sounds/pop/pop6.mp3","/sounds/pop/pop7.mp3","/sounds/pop/pop8.mp3","/sounds/pop/pop9.mp3","/sounds/pop/pop10.mp3","/sounds/pop/pop11.mp3","/sounds/pop/pop12.mp3","/sounds/pop/pop13.mp3","/sounds/pop/pop14.mp3","/sounds/pop/pop15.mp3","/sounds/pop/pop16.mp3","/sounds/pop/pop17.mp3","/sounds/pop/pop18.mp3","/sounds/pop/pop19.mp3","/sounds/pop/pop20.mp3","/sounds/pop/pop21.mp3","/sounds/pop/pop22.mp3","/sounds/pop/pop23.mp3","/sounds/pop/pop24.mp3","/sounds/fail.mp3","/sounds/wrong.mp3","/sounds/win.mp3","/sounds/complete.mp3"];document.title="Yo last Pop it";const pt=async()=>{let n=lt();"serviceWorker"in navigator&&(await navigator.serviceWorker.register("./sw.js"),n=await at()),_e(dt,ut,n)};pt();
