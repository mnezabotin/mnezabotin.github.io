(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function l(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(n){if(n.ep)return;n.ep=!0;const a=l(n);fetch(n.href,a)}})();const pt=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},h=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return l(),document.body.appendChild(t),{ctx:o,render:h,resize:l,rotate:(e,r,d,i)=>{o.save(),o.translate(r,d),o.rotate(Math.PI*i),o.translate(-r,-d),e(),o.restore()},translate:(e,r,d)=>{o.save(),o.translate(r,d),e(),o.restore()},shade:(e,r)=>{e=e.substring(1);const d=parseInt(e,16),i=Math.round(2.55*r),f=(d>>16)+i,E=(d>>8&255)+i,M=(d&255)+i;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(E<255?E<1?0:E:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(e,r)=>{var d;document.body.style.background=e,document.body.style.backgroundColor=r||e,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",r||e)},createImg:(e,r,d=r)=>{const i=document.createElement("canvas"),f=i.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return i.width=r*devicePixelRatio,i.height=d*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),e(f),i}}},gt=t=>{let o="",l="",h;const n=c=>t.find(u=>u.name===c)||t[0],s={render:()=>{},navigate:(c,u)=>{const e=n(c);l=o||"",o=(e==null?void 0:e.name)||"",h=u,s.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:l,data:h})};return s},mt=()=>{const t=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),o=[],l={};return{loop:(s,c)=>{if(Object.entries(l).find(([e,r])=>r===s)||c&&l[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&o.push(c),c=c||new Date().valueOf().toString(),l[c]=s;const u=()=>{s(),l[c]&&t(u)};u()},stop:s=>{if(typeof s=="string")delete l[s];else{const c=Object.entries(l).find(([u,e])=>e===s);c&&delete l[c[0]]}},stopAll:()=>{for(const s in l)o.indexOf(s)===-1&&delete l[s]}}};let Y=[];const Mt=()=>{for(const t of Y)clearTimeout(t);Y=[]},yt=(t,o=400)=>{let l=new Date,h=o,n=setTimeout(t,h);return Y.push(n),{pause:()=>{clearTimeout(n),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(n),n=setTimeout(t,h),Y.push(n)},stop:()=>{clearTimeout(n)}}},tt=2147483646,X=2147483647,vt=16807,Et=(t=Math.floor(Math.random()*X))=>{t=t%X,t<=0&&(t+=tt);const o=()=>(t=t*vt%X,t),l=()=>(o()-1)/tt;return(n,a)=>(a===void 0&&(a=n,n=0),Math.floor(l()*(a-n+1))+n)},Pt=(t,o)=>(o===void 0&&(o=t,t=0),Math.floor(Math.random()*(o-t+1))+t),St=()=>{const t=[],o=[],l=[];return{addEventResize:r=>{r(),t.push(r)},onResizeEvents:()=>t.forEach(r=>r()),addEventClick:r=>o.push(r),onClickEvents:(r,d)=>o.forEach(i=>i(r,d)),addEventMove:r=>l.push(r),onMoveEvents:(r,d)=>l.forEach(i=>i(r,d)),removeAllEvents:()=>{t.splice(0),o.splice(0),l.splice(0)}}},_=(t,o)=>{const l=Math.pow(Math.abs(t.x-o.x),2),h=Math.pow(Math.abs(t.y-o.y),2),n=t.r||0,a=o.r||0,s=Math.pow(n+a,2);return l+h<=s},wt=(t,o)=>{const l=t.r||0,h=o.w||0,n=o.h||0;return Math.abs(o.x+h/2-t.x)<=h/2+l&&Math.abs(o.y+n/2-t.y)<=n/2+l},xt=(t,o)=>_(t,o),Rt=t=>{const o={},l=n=>{const a=n.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const n of t){const a=new Audio(n);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const s=l(n);o[s]={audio:a,path:n}}})(),n=>{var u,e;const a=(u=o[n])==null?void 0:u.audio,s=(e=o[n])==null?void 0:e.path;if(!(!a||!s))if(a.currentTime===0)a.play();else{var c=new Audio(s);c.volume=.25,c.play()}}};let G;const bt=(t,o)=>{if(G)throw new Error("Webcore already specified");const l=pt(),h=gt(t),{loop:n,stop:a,stopAll:s}=mt(),{addEventResize:c,onResizeEvents:u,addEventClick:e,onClickEvents:r,addEventMove:d,onMoveEvents:i,removeAllEvents:f}=St();let E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:E,cy:M,s:p,m}),v=Rt([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(y,P)=>{if(!t.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);s(),Mt(),f(),new Promise(()=>h.navigate(y,P))},loop:n,loopStop:a,useTimer:yt,rand:Pt,useRandChain:Et,intersect:xt,addEventResize:c,addEventClick:e,addEventMove:d,playAudio:v},n(()=>l.render(h.render),"draw"),window.onresize=()=>{E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),u()},document.onpointerdown=y=>{r(y.clientX,y.clientY)},document.onmousemove=y=>{i(y.clientX,y.clientY)},h.navigate()},x=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},j={},W=t=>{const{shade:o,ctx:l,createImg:h}=x(),n=()=>{const{r:s,c="#ffffff",p:u}=t,e=l.createRadialGradient(s,s,s,s,s,s/5);return e.addColorStop(0,o(c,0)),e.addColorStop(.01,o(c,0)),e.addColorStop(.075,o(c,9)),e.addColorStop(.15,o(c,0)),e.addColorStop(.15,o(c,-15)),e.addColorStop(.18,o(c,-5)),e.addColorStop(.22,o(c,-15)),u?(e.addColorStop(.24,o(c,-10)),e.addColorStop(.3,o(c,-8)),e.addColorStop(.34,o(c,-12)),e.addColorStop(.6,o(c,-6)),e.addColorStop(1,o(c,-4))):(e.addColorStop(.24,o(c,-12)),e.addColorStop(.26,o(c,-8)),e.addColorStop(.3,o(c,-2)),e.addColorStop(.34,o(c,0)),e.addColorStop(.5,o(c,5)),e.addColorStop(1,o(c,10))),e},a=()=>{const{r:s,c="#ffffff",p:u}=t,e=`${c}_${u?"push":"pop"}_${s}`;if(j[e])return j[e];const r=h((d=l)=>{const i=n();d.fillStyle=i,d.beginPath(),d.arc(s,s,s,0,2*Math.PI),d.closePath(),d.fill()},2*s);return j[e]=r,r};return(s=l)=>{const{x:c,y:u,r:e}=t,r=a();s.drawImage(r,c-e,u-e,2*e,2*e)}},q={},$=t=>{const{ctx:o}=x();let l;return q[t.src]?l=q[t.src]:(l=new Image,l.src=t.src,q[t.src]=l),(h=o)=>{const{w:n,h:a=n,x:s=0,y:c=0}=t;l.complete&&h.drawImage(l,s,c,n,a)}},et=t=>{const{font:o,ctx:l}=x(),h=t.text,n=t.text.length,a=2*Math.PI/n/4;return(s=l)=>{const{x:c,y:u,r:e,s:r=0,fs:d}=t,i=d||Math.round(e/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${i}px ${o}`,s.save(),s.translate(c,u),s.rotate(r);for(let f=0;f<n;f++)s.save(),s.rotate(f*a),s.fillText(h[f],0,-e),s.restore();s.restore()}},Ct=()=>{var g,v;const{ctx:t,loop:o,rotate:l,navigate:h,useMeasure:n,addEventClick:a,addEventResize:s,setBackground:c}=x();c("#040404");let u=!1,e,r,d,i,f,E=-.2,M=0;s(()=>{const{cx:y,cy:P,s:w}=n(),S=Math.round(w*.25);e={c:"#ff6347",x:y,y:P,r:S,p:!1},r=W(e),d=$({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),i=et({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),f=et({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,M=E>=1?1:E,E>=1.8&&(e.p=!0),E>=2.2&&(e.c="#f86a9a"),E>=2.6&&h("main")};a(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(E<y)return E=y,!0})});const m=()=>{o(p),u=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:y,cy:P}=n();t.globalAlpha=u?1:0,r(),E<1.8&&d(),E<1.4&&l(()=>{i(),f()},y,P,M),t.globalAlpha=1}},F=100/2;let nt=0;const N=()=>{const{loop:t,ctx:o,shade:l,rand:h}=x(),n={},a=()=>{for(const u in n){const e=n[u];if(!e)return;const r=e.popit;if(!e.shake)e.tic+=F/5,e.tic>=F&&(e.dir=-1),e.withoutRad||(r.r=e.origR+e.origR*75e-5*(e.tic+(e.dir>0?0:F-e.tic)));else{e.tic+=F/5;const d=h(1,2),i=h(1,2);r.x=e.origX+Math.random()*d*(Math.random()>.5?1:-1),r.y=e.origY+Math.random()*i*(Math.random()>.5?1:-1)}e.tic>=2*F&&(delete n[u],r.r=e.origR,r.x=e.origX,r.y=e.origY)}},s=(u,e=!1,r=!1)=>{nt++;const d=`${new Date().valueOf().toString()}_${nt}`,i=1,f=1;n[d]={withoutRad:e,tic:i,dir:f,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:r}},c=()=>{o.globalAlpha=.25;for(const u in n){const e=n[u];if(e.shake)continue;const r=e.popit;o.fillStyle=l(r.c||"red",-12),o.beginPath(),o.arc(r.x,r.y,r.r+e.origR*.001*(e.tic+(e.dir>0?0:F-e.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return t(a),{popEffect:s,render:c}},J=t=>{const{font:o,ctx:l}=x();return(h=l)=>{const{text:n,x:a,c:s,y:c,fs:u,a:e="center",mw:r}=t;h.textAlign=e,h.fillStyle=s,h.font=`${u}px ${o}`,h.fillText(n,a,c,r)}},O=100,Q=t=>{const{loop:o,ctx:l,useMeasure:h}=x();let n=null;const a=()=>{if(!n)return;const{m:u}=h();n.tic<=O&&(n.props.fs=((t==null?void 0:t.mfs)||6)/O*n.tic*u),n.tic+=n.tic>O?1:10,n.tic>O*2&&(n=null)},s=u=>{const{cx:e,m:r}=h(),d=0,i={x:e,y:Math.round(r*((t==null?void 0:t.dy)||16)),text:u,c:(t==null?void 0:t.color)||"#ffffff",fs:0},f=J(i);n={props:i,shape:f,tic:d}},c=()=>{n&&(l.globalAlpha=.01*n.tic,n.shape(),l.globalAlpha=1)};return o(a),{splashEffect:s,render:c}},It=({color:t="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,navigate:s,addEventClick:c,intersect:u}=x(),{from:e}=a();let r,d,i;return l(()=>{const{cx:M,cy:p,s:m,m:g}=h(),v=Math.round(m*.25);r={c:t,r:Math.round(m*.08),x:M-v-1*g,y:p-v+1*g,p:(e==="score"||e==="opening")&&!r},d=W(r),i=$({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),n(()=>{r.p=!1}),c((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,n(()=>{s("score")},100))}),{render:()=>{d(),r.p||i()},point:()=>({x:r.x,y:r.y,r:r.r})}},Tt=({color:t="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,navigate:s,addEventClick:c,intersect:u}=x(),{from:e}=a();let r,d,i;return l(()=>{const{s:M}=h(),p=Math.round(M*.08);r={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:e==="main"&&!r},d=W(r),i=$({x:Number(r.x)-p+Math.round(p*.4),y:Number(r.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),n(()=>{r.p=!1}),c((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,n(()=>{s("main")},100))}),{render:()=>{d(),r.p||i()},point:()=>({x:r.x,y:r.y,r:r.r})}},Wt=t=>{const{addEventResize:o,useMeasure:l,useTimer:h,addEventClick:n,intersect:a,rotate:s}=x();let c,u,e;return o(()=>{const{s:i}=l(),f=Math.round(i*.055);c={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f),p:!1},u=W(c),e=$({x:Number(c.x)-f+Math.round(f*.4),y:Number(c.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((i,f)=>{a({x:i,y:f},c)&&(c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{u(),c.p||s(()=>{e()},c.x,c.y,-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},kt=t=>{const{addEventResize:o,useMeasure:l,useTimer:h,addEventClick:n,intersect:a,rotate:s}=x();let c,u,e;return o(()=>{const{s:i}=l(),f=Math.round(i*.055);c={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f-2*f-.3*f),p:!1},u=W(c),e=$({x:Number(c.x)-f+Math.round(f*.4),y:Number(c.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((i,f)=>{a({x:i,y:f},c)&&(c.p=!0,t(),h(()=>{c.p=!1},100))}),{render:()=>{u(),c.p||s(()=>{e()},c.x,c.y,.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},At=t=>{const{ctx:o,shade:l}=x(),h=Math.round(t.r/2.2),n=Math.round(.15*t.r),a=l(t.c||"blue",-3);return(s=o)=>{const{r:c,x:u=c,y:e=c}=t;s.lineCap="round",s.fillStyle=a,s.strokeStyle=a,s.lineWidth=h,s.beginPath(),s.moveTo(u+n,e),s.lineTo(u-n/2,e-n),s.lineTo(u-n/2,e+n),s.closePath(),s.fill(),s.beginPath(),s.moveTo(u+n,e),s.lineTo(u-n/2,e-n),s.moveTo(u-n/2,e-n),s.lineTo(u-n/2,e+n),s.moveTo(u-n/2,e+n),s.lineTo(u+n,e),s.stroke()}},at=({getX:t,getY:o,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:n,useMeasure:a,useTimer:s,useScreenMeta:c,navigate:u,addEventClick:e,intersect:r}=x(),{from:d}=c();let i,f,E;return n(()=>{const{cx:m,cy:g,s:v,m:y}=a();i={c:l,r:Math.round(v*.1),x:t(m,v,y),y:o(g,v,y),p:(d==="gamescore"||d==="game"||d==="opening")&&!i},f=W(i),E=At(i)}),s(()=>{i.p=!1}),e((m,g)=>{r({x:m,y:g},i)&&(h(i),i.p=!0,s(()=>{u("game")},100))}),{render:()=>{f(),i.p||E()},point:()=>({x:i.x,y:i.y,r:i.r})}},dt=t=>{const{ctx:o,shade:l}=x(),h=Math.round(t.r/4),n=Math.round(.12*t.r);return(a=o)=>{const{r:s,x:c=s,y:u=s}=t,e=l(t.c||"blue",-3);a.lineCap="round",a.strokeStyle=e,a.lineWidth=h,a.beginPath(),a.moveTo(c-1.5*n,u-2*n),a.lineTo(c-1.5*n,u+2*n),a.stroke(),a.beginPath(),a.moveTo(c+1.5*n,u-2*n),a.lineTo(c+1.5*n,u+2*n),a.stroke()}},Dt=({getX:t,getY:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:n,useTimer:a,useScreenMeta:s,navigate:c,addEventClick:u,intersect:e}=x(),{from:r}=s();let d,i,f;return h(()=>{const{cx:p,cy:m,s:g,m:v}=n();d={c:"#fd8059",r:Math.round(g*.08),x:t(p,g,v),y:o(m,g,v),p:(r==="game"||r==="opening")&&!d},i=W(d),f=dt(d)}),a(()=>{d.p=!1}),u((p,m)=>{e({x:p,y:m},d)&&(l(d),d.p=!0,a(()=>{c("main")},100))}),{render:()=>{i(),d.p||f()},point:()=>({x:d.x,y:d.y,r:d.r})}},Ht=({color:t="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,addEventClick:s,intersect:c,navigate:u}=x(),{from:e}=a();let r,d,i,f;return l(()=>{const{cx:p,cy:m,s:g}=h(),v=Math.round(g*.25);r={c:t,x:p,y:m,r:v,p:e==="opening"&&!r},d=W(r),i=J({text:"Yola",c:"#f1f1f1",x:p,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),f=J({text:"PopiT",c:"#ffeb3b",x:p,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),n(()=>r.p=!1),s((p,m)=>{c({x:p,y:m},r)&&(o(r),r.p=!0,n(()=>{u("opening")},100))}),{render:()=>{d(),r.p||(i(),f())},point:()=>({x:r.x,y:r.y,r:r.r})}},lt=({color:t="#00dcfe",frequency:o=25})=>{const{addEventResize:l,useRandChain:h,useMeasure:n,rand:a,useTimer:s,setBackground:c,useScreenMeta:u}=x(),{from:e}=u();c(t);const r=a(0,999);let d=[],i=[];l(()=>{const p=h(r),{s:m}=n();d=[];const g=Math.round(m*.05),v=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*v)/(v+1)),P=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<v;b++)p(p(o))<1&&d.push({x:y+g+b*g*2+y*b,y:w+g+S*g*2+w*S,r:g,c:t,p:e==="opening"?!0:p(1)>0});i=d.map(S=>W(S))});const f=()=>{s(()=>{const p=a(d.length-1);d[p]&&(d[p].p=!d[p].p),f()},750)};return e==="opening"?s(()=>{d.forEach(p=>p.p=a(1)>0),f()}):f(),{render:()=>{i.forEach(p=>p())},setIntersections:p=>{d=d.filter(({x:m,y:g,r:v})=>p(m,g,v)),i=d.map(m=>W(m))}}},ot="ylp",rt="score",st="difficulty",U=[.14,.11,.09,.075],ct=500,zt=350,it=5,z=[];for(let t=0;t*it<=ct-zt;t++)z.push(ct-t*it);const L=()=>{const t=d=>localStorage.getItem(`${ot}_${d}`),o=(d,i)=>localStorage.setItem(`${ot}_${d}`,i.toString()),l=()=>+(t(rt)||0),h=d=>o(rt,d),n=d=>{const i=l();h(i+d)},a=()=>+(t(st)||0),s=d=>{const i=a();o(st,Math.min(Math.max(i+d,0),U.length*z.length-1))};return{getScore:l,addScore:n,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const d=a(),i=Math.floor(d/z.length);return U[i]||U[1]},getDifficultyTic:()=>{const d=a(),i=Math.floor(d/z.length),f=d-i*z.length;return z[f]||z[0]}}},ut=(t=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:n,rand:a}=x(),{getDifficultyRad:s}=L();return o=[...o.splice(a(o.length-1),o.length),...o],t||l(()=>{const{s:u}=h(),e=s(),r=Math.round(u*e),d=Math.round(innerWidth/r/2)-1,i=(innerWidth-2*r*d)/(d+1),f=Math.round(innerHeight/r/2)-1,E=(innerHeight-2*r*f)/(f+1),M=innerWidth>=innerHeight,p=M?d:f,m=M?i:E,g=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)o[v]||(v=0),y.push(`${o[v]} ${(m+r+w*r*2+m*w)/g*100}%`),v++;n(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ft=({palette:t,retry:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:n,rand:a,useTimer:s,useScreenMeta:c,navigate:u,addEventClick:e,intersect:r}=x(),{from:d}=c(),{getDifficultyRad:i}=L(),f=[];let E=[],M,p,m,g;const v=P=>Array.isArray(t)?t[P]:t;return h(()=>{const{s:P}=n();f.splice(0);const w=i(),S=Math.round(P*w),b=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*b)/(b+1),I=Math.round(innerHeight/S/2)-1,A=(innerHeight-2*S*I)/(I+1),R=innerWidth>=innerHeight;let T=0;for(let k=0;k<I;k++){for(let D=0;D<b;D++){v(T)||(T=0);const Z={x:C+S+D*S*2+C*D,y:A+S+k*S*2+A*k,r:S,c:v(T),p:!0};k===0&&D===b-1?(g={...Z,p:(d==="main"||d==="gameover"||d==="gamescore")&&!g},M=W(g),p=dt(g)):f.push(Z),T+=R?1:0}T=R?0:T+1}o&&(m=f[a(f.length-1)],s(()=>{m.p=!1})),E=f.map(k=>W(k))}),s(()=>{g.p=!1}),o&&e((P,w)=>{r({x:P,y:w},m)&&(l(m),m.p=!0,s(()=>{u("game")},100))}),e((P,w)=>{r({x:P,y:w},g)&&(l(g),g.p=!0,s(()=>{u("main")},100))}),{render:()=>{E.forEach(P=>P()),M(),g!=null&&g.p||p()},popits:f}},H=100,B="#222",_t=t=>{const o=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},V={},Ft=t=>{const{ctx:o,createImg:l,useRandChain:h,useTimer:n}=x();let a,s=!1,c=[];const u=t.r*2/H/2;V[t.imgSrc]?a=V[t.imgSrc]:(a=V[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},a.img.src=t.imgSrc);const e=()=>n(()=>{s=!s,e()},250),r=(M,p=o)=>{const{x:m,y:g,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(m+y,g+y,y,0,Math.PI*2),p.closePath(),p.fill()},d=(M=o,p=0,m=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,m,2*t.r,2*t.r,u),M.closePath(),M.fill()},i=()=>{const M=[];for(let y=0;y<H;y++)for(let P=0;P<H;P++){const w={x:P*u*2,y:y*u*2,r:u,c:B};M.push(w)}let p=t.score-t.winScore;const m=[...M],g=h(0),v=(y=!1)=>{const P=g(m.length-1),w=m[P],S=M.indexOf(w);w.c=y?B:a.cols[S],m.splice(P,1),y&&c.push({...w,c:a.cols[S]})};for(let y=p;y>0;y--)v();if(t.winScore){c=[];for(let y=t.winScore;y>0;y--)v(!0);e()}return M},f=()=>{const M=i();a.drawImg=l((p=o)=>{d(p),M.filter(m=>m.c!==B).forEach(m=>r(m,p))},2*t.r)},E=async()=>{var m;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(a.img,0,0);for(let g=0;g<H;g++){const v=[];for(let y=0;y<H;y++){const P=(m=p==null?void 0:p.getImageData(y,g,1,1))==null?void 0:m.data;v.push(_t(P))}a.cols.push(...v)}a.isFilled=!0,f()};return a.isFilled?(a.r!==t.r||a.score!==t.score)&&f():a.img.onload=E,(M=o)=>{const{x:p,y:m,r:g,winScore:v}=t;if(a.drawImg?M.drawImage(a.drawImg,p-g,m-g,2*g,2*g):d(M,p-g,m-g),s&&v&&a.drawImg)for(const y of c)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-g+y.x+y.r,m-g+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,ht=(t=0)=>{const{addEventResize:o,useMeasure:l,translate:h}=x(),{getScore:n}=L(),a=["/media/cat.png"],s=n();let c,u=0,e=0,r=Math.floor(s/K);return o(()=>{const{cx:M,cy:p,s:m}=l();c=[],u=(m-2*m*.055*1.6)/2,e=m*.05;for(let g=0;g<a.length;g++){const v=a[g];c.push(Ft({x:M,y:p+g*u*2+g*e,r:u,score:s-g*K<0?0:s-g*K,imgSrc:v,winScore:t}))}}),{up:()=>{r=r+1<a.length?r+1:a.length-1},down:()=>{r=r-1<0?0:r-1},render:()=>{h(()=>{c==null||c.forEach(M=>M())},0,-(r*u*2+r*e))},rect:()=>{const{cx:M,cy:p}=l(),m=innerWidth>innerHeight;return{x:m?M-u:0,y:m?0:p-u,w:m?2*u:innerWidth,h:m?innerHeight:2*u}}}},Lt=({popits:t,popEffect:o=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:h,rand:n,addEventClick:a,addEventMove:s,intersect:c,navigate:u,addEventResize:e}=x(),{addScore:r,getDifficultyTic:d}=L();let i=[],f,E,M=!1,p=0,m=0,g=0;const v=d(),y=C=>{const I=t.filter(T=>i.indexOf(T)===-1&&T!==C),A=n(I.length-1),R=I[A];R&&(o(R,!1,!0),R.p=!1,i.push(I[A]))},P=()=>{E=h(()=>{if(g=Math.max(g-10,50),t.length===i.length){M=!0,E.stop(),h(()=>{u("gameover")});return}y(),P()},g)},w=C=>{i=[];const I=t.length;let A=n(Math.round(I*.3),Math.round(I*.6));const R=[...t];if(C){const T=R.indexOf(C);R.splice(T,1)}for(let T=A;T>0;T--){const k=n(R.length-1),D=R[k];D.p=!1,o(D,!1,!0),i.push(D),R.splice(k,1)}g=v,f==null||f.stop(),E==null||E.stop(),f=h(()=>{l("Too slow"),P()},i.length*v),p=p>0?p:n(3,5)},S=C=>{o(C),g=Math.min(g+5,v),m++,C.p=!0;const I=i.indexOf(C);i.splice(I,1),i.length<=0&&(p--,p>0?h(()=>{l("Round up"),w(C)},100):(f==null||f.stop(),E==null||E.stop(),r(m),h(()=>{u("gamescore",{winScore:m})},100)))},b=(C,I,A=!1)=>{if(!M){for(const R of i)if(c({x:C,y:I},R)){S(R);return}if(!A){for(const R of t)if(c({x:C,y:I},R)){o(R,!0),l("Popenalty"),y(R);return}l("Popenalty"),y()}}};a(b),s((C,I)=>b(C,I,!0)),e(()=>{h(()=>{l("Let's Go"),w()})})},$t=()=>{const{addEventResize:t,rand:o,useScreenMeta:l}=x(),{from:h}=l(),{popEffect:n,render:a}=N(),s=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=h==="opening"?s[0]:s[o(s.length-1)],{render:u,setIntersections:e}=lt({color:c}),{render:r,point:d}=Ht({popEffect:n}),{render:i,point:f}=at({getX:(p,m,g)=>p+Math.round(m*.25)+2*g,getY:(p,m,g)=>p+Math.round(m*.25)+0*g,popEffect:n}),{render:E,point:M}=It({popEffect:n});return t(()=>{const p=M(),m=d(),g=f();e((v,y,P)=>!_({x:v,y,r:P},p)&&!_({x:v,y,r:P},m)&&!_({x:v,y,r:P},g))}),()=>{a(),u(),r(),i(),E()}},Nt=()=>{const{useMeasure:t,addEventResize:o}=x(),l=ut(),{popEffect:h,render:n}=N(),{popits:a,render:s}=ft({palette:l,popEffect:h}),c={mfs:0,dy:0},{splashEffect:u,render:e}=Q(c);return Lt({popits:a,popEffect:h,splashEffect:u}),o(()=>{const r=(a[0].y-a[0].r)/t().m;c.mfs=r,c.dy=r}),()=>{n(),s(),e()}},Ot=()=>{const t="#ff6347",{popEffect:o,render:l}=N(),{setBackground:h}=x(),{minusDifficulty:n}=L(),{render:a}=ft({palette:t,retry:!0,popEffect:o});return h(t),n(),()=>{l(),a()}},Bt=()=>{const{translate:t,useScreenMeta:o}=x(),{plusDifficulty:l}=L(),{data:h}=o(),{popEffect:n,render:a}=N(),{splashEffect:s,render:c}=Q();ut();const{render:u}=ht(h==null?void 0:h.winScore),{render:e}=at({getX:(d,i,f)=>innerWidth>innerHeight?Math.min(d+(i-2*i*.055*1.6)/2+4*f+Math.round(i*.1),innerWidth-2*f-Math.round(i*.1)):d+(i-2*i*.055*1.6)/8+0*Math.round(i*.1)+2*f,getY:(d,i,f)=>innerWidth>innerHeight?d+(i-2*i*.055*1.6)/2-1*f-Math.round(i*.1):Math.min(d+(i-2*i*.055*1.6)/2+4*f+Math.round(i*.1),innerHeight-2*f-Math.round(i*.1)),popEffect:n}),{render:r}=Dt({getX:(d,i,f)=>innerWidth>innerHeight?Math.max(d-(i-2*i*.055*1.6)/2-4*f-Math.round(i*.1),2*f+Math.round(i*.1)):d+(i-2*i*.055*1.6)/8-2*Math.round(i*.1)-2*f,getY:(d,i,f)=>innerWidth>innerHeight?d-(i-2*i*.055*1.6)/2+0*f+Math.round(i*.1):Math.min(d+(i-2*i*.055*1.6)/2+4*f+Math.round(i*.1),innerHeight-2*f-Math.round(i*.1)),popEffect:n});return l(),s("You win"),()=>{a(),innerHeight>innerWidth?t(u,0,-Math.round(innerHeight*.07)):u(),e(),r(),c()}},Yt=()=>{const{addEventResize:t,rand:o}=x(),{popEffect:l,render:h}=N(),{splashEffect:n,render:a}=Q(),s=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],c=s[o(s.length-1)],{render:u,setIntersections:e}=lt({color:c,frequency:10}),{render:r,rect:d,up:i,down:f}=ht(),{render:E,point:M}=Tt({popEffect:l}),{point:p}=Wt(i),{point:m}=kt(f);return t(()=>{const g=M(),v=d(),y=p(),P=m();e((w,S,b)=>!_({x:w,y:S,r:b},g)&&!wt({x:w,y:S,r:b},v)&&!_({x:w,y:S,r:b},y)&&!_({x:w,y:S,r:b},P))}),n("Score"),()=>{h(),u(),r(),E(),a()}},Gt=()=>{const{ctx:t,addEventResize:o,loop:l}=x(),h={x:40,y:100};let n=1,a=1,s;const c=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),o(c),l(()=>{h.x+=2*n,h.y+=3*a,n*=-1,a*=-1}),()=>{t.save();var u=Math.random()*2,e=Math.random()*3;t.translate(u,e),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,s,s),t.fill(),t.restore()}},Xt=[{name:"opening",ctor:Ct},{name:"main",ctor:$t},{name:"game",ctor:Nt},{name:"gameover",ctor:Ot},{name:"gamescore",ctor:Bt},{name:"score",ctor:Yt},{name:"devs",ctor:Gt}];bt(Xt);document.title="Your's last Pop it";
