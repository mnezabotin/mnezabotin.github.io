(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function l(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(n){if(n.ep)return;n.ep=!0;const a=l(n);fetch(n.href,a)}})();const pe=()=>{const e=document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const l=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=t=>{o.clearRect(0,0,innerWidth,innerHeight),t()};return l(),document.body.appendChild(e),{ctx:o,render:h,resize:l,rotate:(t,r,d,c)=>{o.save(),o.translate(r,d),o.rotate(Math.PI*c),o.translate(-r,-d),t(),o.restore()},translate:(t,r,d)=>{o.save(),o.translate(r,d),t(),o.restore()},shade:(t,r)=>{t=t.substring(1);const d=parseInt(t,16),c=Math.round(2.55*r),f=(d>>16)+c,E=(d>>8&255)+c,M=(d&255)+c;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(E<255?E<1?0:E:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(t,r)=>{var d;document.body.style.background=t,document.body.style.backgroundColor=r||t,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",r||t)},createImg:(t,r,d=r)=>{const c=document.createElement("canvas"),f=c.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return c.width=r*devicePixelRatio,c.height=d*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),t(f),c}}},ge=e=>{let o="",l="",h;const n=i=>e.find(u=>u.name===i)||e[0],s={render:()=>{},navigate:(i,u)=>{const t=n(i);l=o||"",o=(t==null?void 0:t.name)||"",h=u,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:l,data:h})};return s},me=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),o=[],l={};return{loop:(s,i)=>{if(Object.entries(l).find(([t,r])=>r===s)||i&&l[i])throw new Error(`Loop${i?" "+i:""} already specified`);i&&o.push(i),i=i||new Date().valueOf().toString(),l[i]=s;const u=()=>{s(),l[i]&&e(u)};u()},stop:s=>{if(typeof s=="string")delete l[s];else{const i=Object.entries(l).find(([u,t])=>t===s);i&&delete l[i[0]]}},stopAll:()=>{for(const s in l)o.indexOf(s)===-1&&delete l[s]}}};let Y=[];const Me=()=>{for(const e of Y)clearTimeout(e);Y=[]},ye=(e,o=400)=>{let l=new Date,h=o,n=setTimeout(e,h);return Y.push(n),{pause:()=>{clearTimeout(n),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(n),n=setTimeout(e,h),Y.push(n)},stop:()=>{clearTimeout(n)}}},ee=2147483646,X=2147483647,ve=16807,Ee=(e=Math.floor(Math.random()*X))=>{e=e%X,e<=0&&(e+=ee);const o=()=>(e=e*ve%X,e),l=()=>(o()-1)/ee;return(n,a)=>(a===void 0&&(a=n,n=0),Math.floor(l()*(a-n+1))+n)},Pe=(e,o)=>(o===void 0&&(o=e,e=0),Math.floor(Math.random()*(o-e+1))+e),Se=()=>{const e=[],o=[],l=[];return{addEventResize:r=>{r(),e.push(r)},onResizeEvents:()=>e.forEach(r=>r()),addEventClick:r=>o.push(r),onClickEvents:(r,d)=>o.forEach(c=>c(r,d)),addEventMove:r=>l.push(r),onMoveEvents:(r,d)=>l.forEach(c=>c(r,d)),removeAllEvents:()=>{e.splice(0),o.splice(0),l.splice(0)}}},_=(e,o)=>{const l=Math.pow(Math.abs(e.x-o.x),2),h=Math.pow(Math.abs(e.y-o.y),2),n=e.r||0,a=o.r||0,s=Math.pow(n+a,2);return l+h<=s},we=(e,o)=>{const l=e.r||0,h=o.w||0,n=o.h||0;return Math.abs(o.x+h/2-e.x)<=h/2+l&&Math.abs(o.y+n/2-e.y)<=n/2+l},xe=(e,o)=>_(e,o),Re=e=>{const o={},l=n=>{const a=n.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const n of e){const a=new Audio(n);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const s=l(n);o[s]={audio:a,path:n}}})(),n=>{var u,t;const a=(u=o[n])==null?void 0:u.audio,s=(t=o[n])==null?void 0:t.path;if(!(!a||!s))if(a.currentTime===0)a.play();else{var i=new Audio(s);i.volume=.25,i.play()}}};let G;const be=(e,o)=>{if(G)throw new Error("Webcore already specified");const l=pe(),h=ge(e),{loop:n,stop:a,stopAll:s}=me(),{addEventResize:i,onResizeEvents:u,addEventClick:t,onClickEvents:r,addEventMove:d,onMoveEvents:c,removeAllEvents:f}=Se();let E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:E,cy:M,s:p,m}),v=Re([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(y,P)=>{if(!e.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);s(),Me(),f(),new Promise(()=>h.navigate(y,P))},loop:n,loopStop:a,useTimer:ye,rand:Pe,useRandChain:Ee,intersect:xe,addEventResize:i,addEventClick:t,addEventMove:d,playAudio:v},n(()=>l.render(h.render),"draw"),window.onresize=()=>{E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),u()},document.onpointerdown=y=>{r(y.clientX,y.clientY)},document.onmousemove=y=>{c(y.clientX,y.clientY)},h.navigate()},x=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},j={},W=e=>{const{shade:o,ctx:l,createImg:h}=x(),n=()=>{const{r:s,c:i="#ffffff",p:u}=e,t=l.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,o(i,0)),t.addColorStop(.01,o(i,0)),t.addColorStop(.075,o(i,9)),t.addColorStop(.15,o(i,0)),t.addColorStop(.15,o(i,-15)),t.addColorStop(.18,o(i,-5)),t.addColorStop(.22,o(i,-15)),u?(t.addColorStop(.24,o(i,-10)),t.addColorStop(.3,o(i,-8)),t.addColorStop(.34,o(i,-12)),t.addColorStop(.6,o(i,-6)),t.addColorStop(1,o(i,-4))):(t.addColorStop(.24,o(i,-12)),t.addColorStop(.26,o(i,-8)),t.addColorStop(.3,o(i,-2)),t.addColorStop(.34,o(i,0)),t.addColorStop(.5,o(i,5)),t.addColorStop(1,o(i,10))),t},a=()=>{const{r:s,c:i="#ffffff",p:u}=e,t=`${i}_${u?"push":"pop"}_${s}`;if(j[t])return j[t];const r=h((d=l)=>{const c=n();d.fillStyle=c,d.beginPath(),d.arc(s,s,s,0,2*Math.PI),d.closePath(),d.fill()},2*s);return j[t]=r,r};return(s=l)=>{const{x:i,y:u,r:t}=e,r=a();s.drawImage(r,i-t,u-t,2*t,2*t)}},q={},L=e=>{const{ctx:o}=x();let l;return q[e.src]?l=q[e.src]:(l=new Image,l.src=e.src,q[e.src]=l),(h=o)=>{const{w:n,h:a=n,x:s=0,y:i=0}=e;l.complete&&h.drawImage(l,s,i,n,a)}},te=e=>{const{font:o,ctx:l}=x(),h=e.text,n=e.text.length,a=2*Math.PI/n/4;return(s=l)=>{const{x:i,y:u,r:t,s:r=0,fs:d}=e,c=d||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${c}px ${o}`,s.save(),s.translate(i,u),s.rotate(r);for(let f=0;f<n;f++)s.save(),s.rotate(f*a),s.fillText(h[f],0,-t),s.restore();s.restore()}},Ce=()=>{var g,v;const{ctx:e,loop:o,rotate:l,navigate:h,useMeasure:n,addEventClick:a,addEventResize:s,setBackground:i}=x();i("#040404");let u=!1,t,r,d,c,f,E=-.2,M=0;s(()=>{const{cx:y,cy:P,s:w}=n(),S=Math.round(w*.25);t={c:"#ff6347",x:y,y:P,r:S,p:!1},r=W(t),d=L({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),c=te({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),f=te({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,M=E>=1?1:E,E>=1.8&&(t.p=!0),E>=2.2&&(t.c="#f86a9a"),E>=2.6&&h("main")};a(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(E<y)return E=y,!0})});const m=()=>{o(p),u=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:y,cy:P}=n();e.globalAlpha=u?1:0,r(),E<1.8&&d(),E<1.4&&l(()=>{c(),f()},y,P,M),e.globalAlpha=1}},F=100/2;let ne=0;const N=()=>{const{loop:e,ctx:o,shade:l,rand:h}=x(),n={},a=()=>{for(const u in n){const t=n[u];if(!t)return;const r=t.popit;if(!t.shake)t.tic+=F/5,t.tic>=F&&(t.dir=-1),t.withoutRad||(r.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:F-t.tic)));else{t.tic+=F/5;const d=h(1,2),c=h(1,2);r.x=t.origX+Math.random()*d*(Math.random()>.5?1:-1),r.y=t.origY+Math.random()*c*(Math.random()>.5?1:-1)}t.tic>=2*F&&(delete n[u],r.r=t.origR,r.x=t.origX,r.y=t.origY)}},s=(u,t=!1,r=!1)=>{ne++;const d=`${new Date().valueOf().toString()}_${ne}`,c=1,f=1;n[d]={withoutRad:t,tic:c,dir:f,popit:u,origR:u.r,origX:u.x,origY:u.y,shake:r}},i=()=>{o.globalAlpha=.25;for(const u in n){const t=n[u];if(t.shake)continue;const r=t.popit;o.fillStyle=l(r.c||"red",-12),o.beginPath(),o.arc(r.x,r.y,r.r+t.origR*.001*(t.tic+(t.dir>0?0:F-t.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return e(a),{popEffect:s,render:i}},J=e=>{const{font:o,ctx:l}=x();return(h=l)=>{const{text:n,x:a,c:s,y:i,fs:u,a:t="center",mw:r}=e;h.textAlign=t,h.fillStyle=s,h.font=`${u}px ${o}`,h.fillText(n,a,i,r)}},O=100,Q=e=>{const{loop:o,ctx:l,useMeasure:h}=x();let n=null;const a=()=>{if(!n)return;const{m:u}=h();n.tic<=O&&(n.props.fs=((e==null?void 0:e.mfs)||6)/O*n.tic*u),n.tic+=n.tic>O?1:10,n.tic>O*2&&(n=null)},s=u=>{const{cx:t,m:r}=h(),d=0,c={x:t,y:Math.round(r*((e==null?void 0:e.dy)||16)),text:u,c:(e==null?void 0:e.color)||"#ffffff",fs:0},f=J(c);n={props:c,shape:f,tic:d}},i=()=>{n&&(l.globalAlpha=.01*n.tic,n.shape(),l.globalAlpha=1)};return o(a),{splashEffect:s,render:i}},Ie=({color:e="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,navigate:s,addEventClick:i,intersect:u}=x(),{from:t}=a();let r,d,c;return l(()=>{const{cx:M,cy:p,s:m,m:g}=h(),v=Math.round(m*.25);r={c:e,r:Math.round(m*.08),x:M-v-1*g,y:p-v+1*g,p:(t==="score"||t==="opening")&&!r},d=W(r),c=L({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),n(()=>{r.p&&o(r,!1,!0),r.p=!1}),i((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,n(()=>{s("score")},100))}),{render:()=>{d(),r.p||c()},point:()=>({x:r.x,y:r.y,r:r.r})}},Te=({color:e="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,navigate:s,addEventClick:i,intersect:u}=x(),{from:t}=a();let r,d,c;return l(()=>{const{s:M}=h(),p=Math.round(M*.08);r={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:t==="main"&&!r},d=W(r),c=L({x:Number(r.x)-p+Math.round(p*.4),y:Number(r.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),n(()=>{r.p&&o(r,!1,!0),r.p=!1}),i((M,p)=>{u({x:M,y:p},r)&&(o(r),r.p=!0,n(()=>{s("main")},100))}),{render:()=>{d(),r.p||c()},point:()=>({x:r.x,y:r.y,r:r.r})}},We=e=>{const{addEventResize:o,useMeasure:l,useTimer:h,addEventClick:n,intersect:a,rotate:s}=x();let i,u,t;return o(()=>{const{s:c}=l(),f=Math.round(c*.055);i={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f),p:!1},u=W(i),t=L({x:Number(i.x)-f+Math.round(f*.4),y:Number(i.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((c,f)=>{a({x:c,y:f},i)&&(i.p=!0,e(),h(()=>{i.p=!1},100))}),{render:()=>{u(),i.p||s(()=>{t()},i.x,i.y,-.5)},point:()=>({x:i.x,y:i.y,r:i.r})}},ke=e=>{const{addEventResize:o,useMeasure:l,useTimer:h,addEventClick:n,intersect:a,rotate:s}=x();let i,u,t;return o(()=>{const{s:c}=l(),f=Math.round(c*.055);i={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f-2*f-.3*f),p:!1},u=W(i),t=L({x:Number(i.x)-f+Math.round(f*.4),y:Number(i.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"/media/back.svg"})}),n((c,f)=>{a({x:c,y:f},i)&&(i.p=!0,e(),h(()=>{i.p=!1},100))}),{render:()=>{u(),i.p||s(()=>{t()},i.x,i.y,.5)},point:()=>({x:i.x,y:i.y,r:i.r})}},Ae=e=>{const{ctx:o,shade:l}=x(),h=Math.round(e.r/2.2),n=Math.round(.15*e.r),a=l(e.c||"blue",-3);return(s=o)=>{const{r:i,x:u=i,y:t=i}=e;s.lineCap="round",s.fillStyle=a,s.strokeStyle=a,s.lineWidth=h,s.beginPath(),s.moveTo(u+n,t),s.lineTo(u-n/2,t-n),s.lineTo(u-n/2,t+n),s.closePath(),s.fill(),s.beginPath(),s.moveTo(u+n,t),s.lineTo(u-n/2,t-n),s.moveTo(u-n/2,t-n),s.lineTo(u-n/2,t+n),s.moveTo(u-n/2,t+n),s.lineTo(u+n,t),s.stroke()}},ae=({getX:e,getY:o,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:n,useMeasure:a,useTimer:s,useScreenMeta:i,navigate:u,addEventClick:t,intersect:r}=x(),{from:d}=i();let c,f,E;return n(()=>{const{cx:m,cy:g,s:v,m:y}=a();c={c:l,r:Math.round(v*.1),x:e(m,v,y),y:o(g,v,y),p:(d==="gamescore"||d==="game"||d==="opening")&&!c},f=W(c),E=Ae(c)}),s(()=>{c.p&&h(c,!1,!0),c.p=!1}),t((m,g)=>{r({x:m,y:g},c)&&(h(c),c.p=!0,s(()=>{u("game")},100))}),{render:()=>{f(),c.p||E()},point:()=>({x:c.x,y:c.y,r:c.r})}},de=e=>{const{ctx:o,shade:l}=x(),h=Math.round(e.r/4),n=Math.round(.12*e.r);return(a=o)=>{const{r:s,x:i=s,y:u=s}=e,t=l(e.c||"blue",-3);a.lineCap="round",a.strokeStyle=t,a.lineWidth=h,a.beginPath(),a.moveTo(i-1.5*n,u-2*n),a.lineTo(i-1.5*n,u+2*n),a.stroke(),a.beginPath(),a.moveTo(i+1.5*n,u-2*n),a.lineTo(i+1.5*n,u+2*n),a.stroke()}},De=({getX:e,getY:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:n,useTimer:a,useScreenMeta:s,navigate:i,addEventClick:u,intersect:t}=x(),{from:r}=s();let d,c,f;return h(()=>{const{cx:p,cy:m,s:g,m:v}=n();d={c:"#fd8059",r:Math.round(g*.08),x:e(p,g,v),y:o(m,g,v),p:(r==="game"||r==="opening")&&!d},c=W(d),f=de(d)}),a(()=>{d.p&&l(d,!1,!0),d.p=!1}),u((p,m)=>{t({x:p,y:m},d)&&(l(d),d.p=!0,a(()=>{i("main")},100))}),{render:()=>{c(),d.p||f()},point:()=>({x:d.x,y:d.y,r:d.r})}},He=({color:e="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:n,useScreenMeta:a,addEventClick:s,intersect:i,navigate:u}=x(),{from:t}=a();let r,d,c,f;return l(()=>{const{cx:p,cy:m,s:g}=h(),v=Math.round(g*.25);r={c:e,x:p,y:m,r:v,p:t==="opening"&&!r},d=W(r),c=J({text:"Yola",c:"#f1f1f1",x:p,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),f=J({text:"PopiT",c:"#ffeb3b",x:p,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),n(()=>{r.p&&o(r,!1,!0),r.p=!1}),s((p,m)=>{i({x:p,y:m},r)&&(o(r),r.p=!0,n(()=>{u("opening")},100))}),{render:()=>{d(),r.p||(c(),f())},point:()=>({x:r.x,y:r.y,r:r.r})}},le=({color:e="#00dcfe",frequency:o=25})=>{const{addEventResize:l,useRandChain:h,useMeasure:n,rand:a,useTimer:s,setBackground:i,useScreenMeta:u}=x(),{from:t}=u();i(e);const r=a(0,999);let d=[],c=[];l(()=>{const p=h(r),{s:m}=n();d=[];const g=Math.round(m*.05),v=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*v)/(v+1)),P=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<v;b++)p(p(o))<1&&d.push({x:y+g+b*g*2+y*b,y:w+g+S*g*2+w*S,r:g,c:e,p:t==="opening"?!0:p(1)>0});c=d.map(S=>W(S))});const f=()=>{s(()=>{const p=a(d.length-1);d[p]&&(d[p].p=!d[p].p),f()},750)};return t==="opening"?s(()=>{d.forEach(p=>p.p=a(1)>0),f()}):f(),{render:()=>{c.forEach(p=>p())},setIntersections:p=>{d=d.filter(({x:m,y:g,r:v})=>p(m,g,v)),c=d.map(m=>W(m))}}},oe="ylp",re="score",se="difficulty",U=[.14,.11,.09,.075],ie=500,ze=350,ce=5,z=[];for(let e=0;e*ce<=ie-ze;e++)z.push(ie-e*ce);const $=()=>{const e=d=>localStorage.getItem(`${oe}_${d}`),o=(d,c)=>localStorage.setItem(`${oe}_${d}`,c.toString()),l=()=>+(e(re)||0),h=d=>o(re,d),n=d=>{const c=l();h(c+d)},a=()=>+(e(se)||0),s=d=>{const c=a();o(se,Math.min(Math.max(c+d,0),U.length*z.length-1))};return{getScore:l,addScore:n,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const d=a(),c=Math.floor(d/z.length);return U[c]||U[1]},getDifficultyTic:()=>{const d=a(),c=Math.floor(d/z.length),f=d-c*z.length;return z[f]||z[0]}}},ue=(e=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:n,rand:a}=x(),{getDifficultyRad:s}=$();return o=[...o.splice(a(o.length-1),o.length),...o],e||l(()=>{const{s:u}=h(),t=s(),r=Math.round(u*t),d=Math.round(innerWidth/r/2)-1,c=(innerWidth-2*r*d)/(d+1),f=Math.round(innerHeight/r/2)-1,E=(innerHeight-2*r*f)/(f+1),M=innerWidth>=innerHeight,p=M?d:f,m=M?c:E,g=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)o[v]||(v=0),y.push(`${o[v]} ${(m+r+w*r*2+m*w)/g*100}%`),v++;n(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},fe=({palette:e,retry:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:n,rand:a,useTimer:s,useScreenMeta:i,navigate:u,addEventClick:t,intersect:r}=x(),{from:d}=i(),{getDifficultyRad:c}=$(),f=[];let E=[],M,p,m,g;const v=P=>Array.isArray(e)?e[P]:e;return h(()=>{const{s:P}=n();f.splice(0);const w=c(),S=Math.round(P*w),b=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*b)/(b+1),I=Math.round(innerHeight/S/2)-1,A=(innerHeight-2*S*I)/(I+1),R=innerWidth>=innerHeight;let T=0;for(let k=0;k<I;k++){for(let D=0;D<b;D++){v(T)||(T=0);const Z={x:C+S+D*S*2+C*D,y:A+S+k*S*2+A*k,r:S,c:v(T),p:!0};k===0&&D===b-1?(g={...Z,p:(d==="main"||d==="gameover"||d==="gamescore")&&!g},M=W(g),p=de(g)):f.push(Z),T+=R?1:0}T=R?0:T+1}o&&(m=f[a(f.length-1)],s(()=>{l(m,!1,!0),m.p=!1})),E=f.map(k=>W(k))}),s(()=>{g.p&&l(g,!1,!0),g.p=!1}),o&&t((P,w)=>{r({x:P,y:w},m)&&(l(m),m.p=!0,s(()=>{u("game")},100))}),t((P,w)=>{r({x:P,y:w},g)&&(l(g),g.p=!0,s(()=>{u("main")},100))}),{render:()=>{E.forEach(P=>P()),M(),g!=null&&g.p||p()},popits:f}},H=100,B="#222",_e=e=>{const o=(e==null?void 0:e[0])||0,l=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},V={},Fe=e=>{const{ctx:o,createImg:l,useRandChain:h,useTimer:n}=x();let a,s=!1,i=[];const u=e.r*2/H/2;V[e.imgSrc]?a=V[e.imgSrc]:(a=V[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},a.img.src=e.imgSrc);const t=()=>n(()=>{s=!s,t()},250),r=(M,p=o)=>{const{x:m,y:g,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(m+y,g+y,y,0,Math.PI*2),p.closePath(),p.fill()},d=(M=o,p=0,m=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,m,2*e.r,2*e.r,u),M.closePath(),M.fill()},c=()=>{const M=[];for(let y=0;y<H;y++)for(let P=0;P<H;P++){const w={x:P*u*2,y:y*u*2,r:u,c:B};M.push(w)}let p=e.score-e.winScore;const m=[...M],g=h(0),v=(y=!1)=>{const P=g(m.length-1),w=m[P],S=M.indexOf(w);w.c=y?B:a.cols[S],m.splice(P,1),y&&i.push({...w,c:a.cols[S]})};for(let y=p;y>0;y--)v();if(e.winScore){i=[];for(let y=e.winScore;y>0;y--)v(!0);t()}return M},f=()=>{const M=c();a.drawImg=l((p=o)=>{d(p),M.filter(m=>m.c!==B).forEach(m=>r(m,p))},2*e.r)},E=async()=>{var m;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(a.img,0,0);for(let g=0;g<H;g++){const v=[];for(let y=0;y<H;y++){const P=(m=p==null?void 0:p.getImageData(y,g,1,1))==null?void 0:m.data;v.push(_e(P))}a.cols.push(...v)}a.isFilled=!0,f()};return a.isFilled?(a.r!==e.r||a.score!==e.score)&&f():a.img.onload=E,(M=o)=>{const{x:p,y:m,r:g,winScore:v}=e;if(a.drawImg?M.drawImage(a.drawImg,p-g,m-g,2*g,2*g):d(M,p-g,m-g),s&&v&&a.drawImg)for(const y of i)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-g+y.x+y.r,m-g+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,he=(e=0)=>{const{addEventResize:o,useMeasure:l,translate:h}=x(),{getScore:n}=$(),a=["/media/cat.png"],s=n();let i,u=0,t=0,r=Math.floor(s/K);return o(()=>{const{cx:M,cy:p,s:m}=l();i=[],u=(m-2*m*.055*1.6)/2,t=m*.05;for(let g=0;g<a.length;g++){const v=a[g];i.push(Fe({x:M,y:p+g*u*2+g*t,r:u,score:s-g*K<0?0:s-g*K,imgSrc:v,winScore:e}))}}),{up:()=>{r=r+1<a.length?r+1:a.length-1},down:()=>{r=r-1<0?0:r-1},render:()=>{h(()=>{i==null||i.forEach(M=>M())},0,-(r*u*2+r*t))},rect:()=>{const{cx:M,cy:p}=l(),m=innerWidth>innerHeight;return{x:m?M-u:0,y:m?0:p-u,w:m?2*u:innerWidth,h:m?innerHeight:2*u}}}},$e=({popits:e,popEffect:o=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:h,rand:n,addEventClick:a,addEventMove:s,intersect:i,navigate:u,addEventResize:t}=x(),{addScore:r,getDifficultyTic:d}=$();let c=[],f,E,M=!1,p=0,m=0,g=0;const v=d(),y=C=>{const I=e.filter(T=>c.indexOf(T)===-1&&T!==C),A=n(I.length-1),R=I[A];R&&(o(R,!1,!0),R.p=!1,c.push(I[A]))},P=()=>{E=h(()=>{if(g=Math.max(g-10,50),e.length===c.length){M=!0,E.stop(),h(()=>{u("gameover")});return}y(),P()},g)},w=C=>{c=[];const I=e.length;let A=n(Math.round(I*.3),Math.round(I*.6));const R=[...e];if(C){const T=R.indexOf(C);R.splice(T,1)}for(let T=A;T>0;T--){const k=n(R.length-1),D=R[k];D.p=!1,o(D,!1,!0),c.push(D),R.splice(k,1)}g=v,f==null||f.stop(),E==null||E.stop(),f=h(()=>{l("Too slow"),P()},c.length*v),p=p>0?p:n(3,5)},S=C=>{o(C),g=Math.min(g+5,v),m++,C.p=!0;const I=c.indexOf(C);c.splice(I,1),c.length<=0&&(p--,p>0?h(()=>{l("Round up"),w(C)},100):(f==null||f.stop(),E==null||E.stop(),r(m),h(()=>{u("gamescore",{winScore:m})},100)))},b=(C,I,A=!1)=>{if(!M){for(const R of c)if(i({x:C,y:I},R)){S(R);return}if(!A){for(const R of e)if(i({x:C,y:I},R)){o(R,!0),l("Popenalty"),y(R);return}l("Popenalty"),y()}}};a(b),s((C,I)=>b(C,I,!0)),t(()=>{h(()=>{l("Go"),w()})})},Le=()=>{const{addEventResize:e,rand:o,useScreenMeta:l}=x(),{from:h}=l(),{popEffect:n,render:a}=N(),s=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],i=h==="opening"?s[0]:s[o(s.length-1)],{render:u,setIntersections:t}=le({color:i}),{render:r,point:d}=He({popEffect:n}),{render:c,point:f}=ae({getX:(p,m,g)=>p+Math.round(m*.25)+2*g,getY:(p,m,g)=>p+Math.round(m*.25)+0*g,popEffect:n}),{render:E,point:M}=Ie({popEffect:n});return e(()=>{const p=M(),m=d(),g=f();t((v,y,P)=>!_({x:v,y,r:P},p)&&!_({x:v,y,r:P},m)&&!_({x:v,y,r:P},g))}),()=>{a(),u(),r(),c(),E()}},Ne=()=>{const{useMeasure:e,addEventResize:o}=x(),l=ue(),{popEffect:h,render:n}=N(),{popits:a,render:s}=fe({palette:l,popEffect:h}),i={mfs:0,dy:0},{splashEffect:u,render:t}=Q(i);return $e({popits:a,popEffect:h,splashEffect:u}),o(()=>{const r=(a[0].y-a[0].r)/e().m;i.mfs=r,i.dy=r}),()=>{n(),s(),t()}},Oe=()=>{const e="#ff6347",{popEffect:o,render:l}=N(),{setBackground:h}=x(),{minusDifficulty:n}=$(),{render:a}=fe({palette:e,retry:!0,popEffect:o});return h(e),n(),()=>{l(),a()}},Be=()=>{const{translate:e,useScreenMeta:o}=x(),{plusDifficulty:l}=$(),{data:h}=o(),{popEffect:n,render:a}=N(),{splashEffect:s,render:i}=Q();ue();const{render:u}=he(h==null?void 0:h.winScore),{render:t}=ae({getX:(d,c,f)=>innerWidth>innerHeight?Math.min(d+(c-2*c*.055*1.6)/2+4*f+Math.round(c*.1),innerWidth-2*f-Math.round(c*.1)):d+(c-2*c*.055*1.6)/8+0*Math.round(c*.1)+2*f,getY:(d,c,f)=>innerWidth>innerHeight?d+(c-2*c*.055*1.6)/2-1*f-Math.round(c*.1):Math.min(d+(c-2*c*.055*1.6)/2+4*f+Math.round(c*.1),innerHeight-2*f-Math.round(c*.1)),popEffect:n}),{render:r}=De({getX:(d,c,f)=>innerWidth>innerHeight?Math.max(d-(c-2*c*.055*1.6)/2-4*f-Math.round(c*.1),2*f+Math.round(c*.1)):d+(c-2*c*.055*1.6)/8-2*Math.round(c*.1)-2*f,getY:(d,c,f)=>innerWidth>innerHeight?d-(c-2*c*.055*1.6)/2+0*f+Math.round(c*.1):Math.min(d+(c-2*c*.055*1.6)/2+4*f+Math.round(c*.1),innerHeight-2*f-Math.round(c*.1)),popEffect:n});return l(),s("You win"),()=>{a(),innerHeight>innerWidth?e(u,0,-Math.round(innerHeight*.07)):u(),t(),r(),i()}},Ye=()=>{const{addEventResize:e,rand:o}=x(),{popEffect:l,render:h}=N(),{splashEffect:n,render:a}=Q(),s=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],i=s[o(s.length-1)],{render:u,setIntersections:t}=le({color:i,frequency:10}),{render:r,rect:d,up:c,down:f}=he(),{render:E,point:M}=Te({popEffect:l}),{point:p}=We(c),{point:m}=ke(f);return e(()=>{const g=M(),v=d(),y=p(),P=m();t((w,S,b)=>!_({x:w,y:S,r:b},g)&&!we({x:w,y:S,r:b},v)&&!_({x:w,y:S,r:b},y)&&!_({x:w,y:S,r:b},P))}),n("Score"),()=>{h(),u(),r(),E(),a()}},Ge=()=>{const{ctx:e,addEventResize:o,loop:l}=x(),h={x:40,y:100};let n=1,a=1,s;const i=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return i(),o(i),l(()=>{h.x+=2*n,h.y+=3*a,n*=-1,a*=-1}),()=>{e.save();var u=Math.random()*2,t=Math.random()*3;e.translate(u,t),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,s,s),e.fill(),e.restore()}},Xe=[{name:"opening",ctor:Ce},{name:"main",ctor:Le},{name:"game",ctor:Ne},{name:"gameover",ctor:Oe},{name:"gamescore",ctor:Be},{name:"score",ctor:Ye},{name:"devs",ctor:Ge}];be(Xe);document.title="Your's last Pop it";
