(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function d(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function h(r){if(r.ep)return;r.ep=!0;const i=d(r);fetch(r.href,i)}})();const pe=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return d(),document.body.appendChild(e),{ctx:n,render:h,resize:d,rotate:(t,o,c,l)=>{n.save(),n.translate(o,c),n.rotate(Math.PI*l),n.translate(-o,-c),t(),n.restore()},translate:(t,o,c)=>{n.save(),n.translate(o,c),t(),n.restore()},shade:(t,o)=>{t=t.substring(1);const c=parseInt(t,16),l=Math.round(2.55*o),u=(c>>16)+l,P=(c>>8&255)+l,M=(c&255)+l;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(P<255?P<1?0:P:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(t,o)=>{var c;document.body.style.background=t,document.body.style.backgroundColor=o||t,(c=document.querySelector('meta[name="theme-color"]'))==null||c.setAttribute("content",o||t)},createImg:(t,o,c=o)=>{const l=document.createElement("canvas"),u=l.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return l.width=o*devicePixelRatio,l.height=c*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),t(u),l}}},me=e=>{let n="",d="",h;const r=a=>e.find(f=>f.name===a)||e[0],s={render:()=>{},navigate:(a,f)=>{const t=r(a);d=n||"",n=(t==null?void 0:t.name)||"",h=f,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:d,data:h})};return s},Me=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),n=[],d={};return{loop:(s,a)=>{if(Object.entries(d).find(([t,o])=>o===s)||a&&d[a])throw new Error(`Loop${a?" "+a:""} already specified`);a&&n.push(a),a=a||new Date().valueOf().toString(),d[a]=s;const f=()=>{s(),d[a]&&e(f)};f()},stop:s=>{if(typeof s=="string")delete d[s];else{const a=Object.entries(d).find(([f,t])=>t===s);a&&delete d[a[0]]}},stopAll:()=>{for(const s in d)n.indexOf(s)===-1&&delete d[s]}}};let G=[];const ye=()=>{for(const e of G)clearTimeout(e);G=[]},ve=(e,n=400)=>{let d=new Date,h=n,r=setTimeout(e,h);return G.push(r),{pause:()=>{clearTimeout(r),h-=new Date-d},resume:()=>{d=new Date,clearTimeout(r),r=setTimeout(e,h),G.push(r)},stop:()=>{clearTimeout(r)}}},Z=2147483646,q=2147483647,Ee=16807,Pe=(e=Math.floor(Math.random()*q))=>{e=e%q,e<=0&&(e+=Z);const n=()=>(e=e*Ee%q,e),d=()=>(n()-1)/Z;return(r,i)=>(i===void 0&&(i=r,r=0),Math.floor(d()*(i-r+1))+r)},Se=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),xe=()=>{const e=[],n=[],d=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>n.push(o),onClickEvents:(o,c)=>n.forEach(l=>l(o,c)),addEventMove:o=>d.push(o),onMoveEvents:(o,c)=>d.forEach(l=>l(o,c)),removeAllEvents:()=>{e.splice(0),n.splice(0),d.splice(0)}}},D=(e,n)=>{const d=Math.pow(Math.abs(e.x-n.x),2),h=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,i=n.r||0,s=Math.pow(r+i,2);return d+h<=s},we=(e,n)=>{const d=e.r||0,h=n.w||0,r=n.h||0;return Math.abs(n.x+h/2-e.x)<=h/2+d&&Math.abs(n.y+r/2-e.y)<=r/2+d},Re=(e,n)=>D(e,n),Ce=e=>{const n={},d=r=>{const i=r.split("/");return i[i.length-1].split(".")[0]};return(()=>{for(const r of e){const i=new Audio(r);i.volume=.25,i.addEventListener("ended",function(){this.currentTime=0});const s=d(r);n[s]={audio:i,path:r}}})(),r=>{var f,t;const i=(f=n[r])==null?void 0:f.audio,s=(t=n[r])==null?void 0:t.path;if(!(!i||!s))if(i.currentTime===0)i.play();else{var a=new Audio(s);a.volume=.25,a.play()}}};let X;const be=(e,n)=>{if(X)throw new Error("Webcore already specified");const d=pe(),h=me(e),{loop:r,stop:i,stopAll:s}=Me(),{addEventResize:a,onResizeEvents:f,addEventClick:t,onClickEvents:o,addEventMove:c,onMoveEvents:l,removeAllEvents:u}=xe();let P=innerWidth/2,M=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),p=innerWidth>innerHeight;const v=()=>({cx:P,cy:M,s:g,m,isL:p}),y=Ce([]);X={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:v,useScreenMeta:h.useScreenMeta,navigate:(E,x)=>{if(!e.some(S=>S.name===E))throw new Error(`Screen ${E} not specified`);s(),ye(),u(),new Promise(()=>h.navigate(E,x))},loop:r,loopStop:i,useTimer:ve,rand:Se,useRandChain:Pe,intersect:Re,addEventResize:a,addEventClick:t,addEventMove:c,playAudio:y},r(()=>d.render(h.render),"draw"),window.onresize=()=>{P=innerWidth/2,M=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),p=innerWidth>innerHeight,d.resize(),f()},document.onpointerdown=E=>{o(E.clientX,E.clientY)},document.onmousemove=E=>{l(E.clientX,E.clientY)},h.navigate()},w=()=>{if(!X)throw new Error("Webcore not specified");return{...X}},V={},H=e=>{const{shade:n,ctx:d,createImg:h}=w(),r=()=>{const{r:s,c:a="#ffffff",p:f}=e,t=d.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,n(a,0)),t.addColorStop(.01,n(a,0)),t.addColorStop(.075,n(a,9)),t.addColorStop(.15,n(a,0)),t.addColorStop(.15,n(a,-15)),t.addColorStop(.18,n(a,-5)),t.addColorStop(.22,n(a,-15)),f?(t.addColorStop(.24,n(a,-10)),t.addColorStop(.3,n(a,-8)),t.addColorStop(.34,n(a,-12)),t.addColorStop(.6,n(a,-6)),t.addColorStop(1,n(a,-4))):(t.addColorStop(.24,n(a,-12)),t.addColorStop(.26,n(a,-8)),t.addColorStop(.3,n(a,-2)),t.addColorStop(.34,n(a,0)),t.addColorStop(.5,n(a,5)),t.addColorStop(1,n(a,12))),t},i=()=>{const{r:s,c:a="#ffffff",p:f}=e,t=`${a}_${f?"push":"pop"}_${s}`;if(V[t])return V[t];const o=h((c=d)=>{const l=r();c.fillStyle=l,c.beginPath(),c.arc(s,s,s,0,2*Math.PI),c.closePath(),c.fill()},2*s);return V[t]=o,o};return(s=d)=>{const{x:a,y:f,r:t}=e,o=i();s.drawImage(o,a-t,f-t,2*t,2*t)}},U={},$=e=>{const{ctx:n}=w();let d;return U[e.src]?d=U[e.src]:(d=new Image,d.src=e.src,U[e.src]=d),(h=n)=>{const{w:r,h:i=r,x:s=0,y:a=0}=e;d.complete&&h.drawImage(d,s,a,r,i)}},ee=e=>{const{font:n,ctx:d}=w(),h=e.text,r=e.text.length,i=2*Math.PI/r/4;return(s=d)=>{const{x:a,y:f,r:t,s:o=0,fs:c}=e,l=c||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${l}px ${n}`,s.save(),s.translate(a,f),s.rotate(o);for(let u=0;u<r;u++)s.save(),s.rotate(u*i),s.fillText(h[u],0,-t),s.restore();s.restore()}},Ie=()=>{var p,v;const{ctx:e,loop:n,rotate:d,navigate:h,useMeasure:r,addEventClick:i,addEventResize:s,setBackground:a}=w();a("#040404");let f=!1,t,o,c,l,u,P=-.2,M=0;s(()=>{const{cx:y,cy:E,s:x}=r(),S=Math.round(x*.25);t={c:"#ff6347",x:y,y:E,r:S,p:!1},o=H(t),c=$({x:y-S+Math.round(S*.35),y:E-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),l=ee({text:"nezabotin",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*1.6}),u=ee({text:"production",x:y,y:E,r:Math.round(S*1.1),s:Math.PI*2.6})});const g=()=>{P+=.01,M=P>=1?1:P,P>=1.8&&(t.p=!0),P>=2.2&&(t.c="#f86a9a"),P>=2.6&&h("main")};i(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(P<y)return P=y,!0})});const m=()=>{n(g),f=!0};return(p=document==null?void 0:document.fonts)!=null&&p.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:y,cy:E}=r();e.globalAlpha=f?1:0,o(),P<1.8&&c(),P<1.4&&d(()=>{l(),u()},y,E,M),e.globalAlpha=1}},L=100/2;let te=0;const N=()=>{const{loop:e,ctx:n,shade:d,rand:h}=w(),r={},i=()=>{for(const f in r){const t=r[f];if(!t)return;const o=t.popit;if(!t.shake)t.tic+=L/5,t.tic>=L&&(t.dir=-1),t.withoutRad||(o.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:L-t.tic)));else{t.tic+=L/5;const c=h(1,2),l=h(1,2);o.x=t.origX+Math.random()*c*(Math.random()>.5?1:-1),o.y=t.origY+Math.random()*l*(Math.random()>.5?1:-1)}t.tic>=2*L&&(delete r[f],o.r=t.origR,o.x=t.origX,o.y=t.origY)}},s=(f,t=!1,o=!1)=>{te++;const c=`${new Date().valueOf().toString()}_${te}`,l=1,u=1;r[c]={withoutRad:t,tic:l,dir:u,popit:f,origR:f.r,origX:f.x,origY:f.y,shake:o}},a=()=>{n.globalAlpha=.25;for(const f in r){const t=r[f];if(t.shake)continue;const o=t.popit;n.fillStyle=d(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+t.origR*.001*(t.tic+(t.dir>0?0:L-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(i),{popEffect:s,render:a}},Q=e=>{const{font:n,ctx:d}=w();return(h=d)=>{const{text:r,x:i,c:s,y:a,fs:f,a:t="center",mw:o}=e;h.textAlign=t,h.fillStyle=s,h.font=`${f}px ${n}`,h.fillText(r,i,a,o)}},Y=100,ae=e=>{const{loop:n,ctx:d,useMeasure:h,rand:r}=w();let i=null;const s=()=>{if(!i)return;const{m:t}=h();if(i.tic<=Y)i.props.fs=((e==null?void 0:e.mfs)||6)/Y*i.tic*t;else{const o=r(1,1),c=r(1,1);i.props.x=i.origX+Math.random()*o*(Math.random()>.5?1:-1),i.props.y=i.origY+Math.random()*c*(Math.random()>.5?1:-1),i.shake=!0}i.tic+=i.tic>Y?1:10,i.tic>Y*2&&(i=null)},a=t=>{const{cx:o,m:c}=h(),l=0,u={x:o,y:Math.round(c*((e==null?void 0:e.dy)||16)),text:t,c:(e==null?void 0:e.color)||"#ffffff",fs:0},P=Q(u);i={props:u,shape:P,tic:l,origX:u.x,origY:u.y}},f=()=>{i&&(d.globalAlpha=.01*i.tic,i.shape(),d.globalAlpha=1)};return n(s),{splashEffect:a,render:f}},Te=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:a,intersect:f}=w(),{from:t}=i();let o,c,l;return d(()=>{const{cx:M,cy:g,s:m,m:p}=h(),v=Math.round(m*.25);o={c:e,r:Math.round(m*.08),x:M-v-1*p,y:g-v+1*p,p:(t==="score"||t==="opening")&&!o},c=H(o),l=$({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),a((M,g)=>{f({x:M,y:g},o)&&(n(o),o.p=!0,r(()=>{s("score")},100))}),{render:()=>{c(),o.p||l()},point:()=>({x:o.x,y:o.y,r:o.r})}},We=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:a,intersect:f}=w(),{from:t}=i();let o,c,l;return d(()=>{const{s:M}=h(),g=Math.round(M*.08);o={c:e,r:g,x:Math.round(1.6*g),y:Math.round(1.6*g),p:t==="main"&&!o},c=H(o),l=$({x:Number(o.x)-g+Math.round(g*.4),y:Number(o.y)-g+Math.round(g*.4),w:g*2-Math.round(g*.8),src:"/media/back.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),a((M,g)=>{f({x:M,y:g},o)&&(n(o),o.p=!0,r(()=>{s("main")},100))}),{render:()=>{c(),o.p||l()},point:()=>({x:o.x,y:o.y,r:o.r})}},He=({onClick:e})=>{const{addEventResize:n,useMeasure:d,useTimer:h,addEventClick:r,intersect:i,rotate:s}=w();let a,f,t;return n(()=>{const{s:l}=d(),u=Math.round(l*.08);a={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},f=H(a),t=$({x:Number(a.x)-u+Math.round(u*.4),y:Number(a.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((l,u)=>{i({x:l,y:u},a)&&(a.p=!0,e(),h(()=>{a.p=!1},100))}),{render:()=>{f(),a.p||s(()=>{t()},a.x,a.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:a.x,y:a.y,r:a.r})}},ke=({onClick:e})=>{const{addEventResize:n,useMeasure:d,useTimer:h,addEventClick:r,intersect:i,rotate:s}=w();let a,f,t;return n(()=>{const{s:l}=d(),u=Math.round(l*.08),P=innerWidth<innerHeight?Math.round(innerWidth-1.6*u-2*u-.3*u):Math.round(innerWidth-1.6*u),M=innerWidth<innerHeight?Math.round(innerHeight-1.6*u):Math.round(innerHeight-1.6*u-2*u-.3*u);a={c:"#ff6347",r:u,x:P,y:M,p:!1},f=H(a),t=$({x:Number(a.x)-u+Math.round(u*.4),y:Number(a.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((l,u)=>{i({x:l,y:u},a)&&(a.p=!0,e(),h(()=>{a.p=!1},100))}),{render:()=>{f(),a.p||s(()=>{t()},a.x,a.y,innerHeight>innerWidth?0:.5)},point:()=>({x:a.x,y:a.y,r:a.r})}},Ae=e=>{const{ctx:n,shade:d}=w(),h=Math.round(e.r/2.2),r=Math.round(.15*e.r),i=d(e.c||"blue",-3);return(s=n)=>{const{r:a,x:f=a,y:t=a}=e;s.lineCap="round",s.fillStyle=i,s.strokeStyle=i,s.lineWidth=h,s.beginPath(),s.moveTo(f+r,t),s.lineTo(f-r/2,t-r),s.lineTo(f-r/2,t+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(f+r,t),s.lineTo(f-r/2,t-r),s.moveTo(f-r/2,t-r),s.lineTo(f-r/2,t+r),s.moveTo(f-r/2,t+r),s.lineTo(f+r,t),s.stroke()}},de=({getX:e,getY:n,color:d="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:r,useMeasure:i,useTimer:s,useScreenMeta:a,navigate:f,addEventClick:t,intersect:o}=w(),{from:c}=a();let l,u,P;return r(()=>{const{cx:m,cy:p,s:v,m:y}=i();l={c:d,r:Math.round(v*.1),x:e(m,v,y),y:n(p,v,y),p:(c==="gamescore"||c==="game"||c==="opening")&&!l},u=H(l),P=Ae(l)}),s(()=>{l.p&&h(l,!1,!0),l.p=!1}),t((m,p)=>{o({x:m,y:p},l)&&(h(l),l.p=!0,s(()=>{f("game")},100))}),{render:()=>{u(),l.p||P()},point:()=>({x:l.x,y:l.y,r:l.r})}},le=e=>{const{ctx:n,shade:d}=w(),h=Math.round(e.r/4),r=Math.round(.12*e.r);return(i=n)=>{const{r:s,x:a=s,y:f=s}=e,t=d(e.c||"blue",-3);i.lineCap="round",i.strokeStyle=t,i.lineWidth=h,i.beginPath(),i.moveTo(a-1.5*r,f-2*r),i.lineTo(a-1.5*r,f+2*r),i.stroke(),i.beginPath(),i.moveTo(a+1.5*r,f-2*r),i.lineTo(a+1.5*r,f+2*r),i.stroke()}},De=({getX:e,getY:n,popEffect:d=()=>{}})=>{const{addEventResize:h,useMeasure:r,useTimer:i,useScreenMeta:s,navigate:a,addEventClick:f,intersect:t}=w(),{from:o}=s();let c,l,u;return h(()=>{const{cx:g,cy:m,s:p,m:v}=r();c={c:"#fd8059",r:Math.round(p*.08),x:e(g,p,v),y:n(m,p,v),p:(o==="game"||o==="opening")&&!c},l=H(c),u=le(c)}),i(()=>{c.p&&d(c,!1,!0),c.p=!1}),f((g,m)=>{t({x:g,y:m},c)&&(d(c),c.p=!0,i(()=>{a("main")},100))}),{render:()=>{l(),c.p||u()},point:()=>({x:c.x,y:c.y,r:c.r})}},ze=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:h,useTimer:r,useScreenMeta:i,addEventClick:s,intersect:a,navigate:f}=w(),{from:t}=i();let o,c,l,u;return d(()=>{const{cx:g,cy:m,s:p}=h(),v=Math.round(p*.25);o={c:e,x:g,y:m,r:v,p:t==="opening"&&!o},c=H(o),l=Q({text:"Yola",c:"#f1f1f1",x:g,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),u=Q({text:"PopiT",c:"#ffeb3b",x:g,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),s((g,m)=>{a({x:g,y:m},o)&&(n(o),o.p=!0,r(()=>{f("opening")},100))}),{render:()=>{c(),o.p||(l(),u())},point:()=>({x:o.x,y:o.y,r:o.r})}},ue=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:d,useRandChain:h,useMeasure:r,rand:i,useTimer:s,setBackground:a,useScreenMeta:f}=w(),{from:t}=f();a(e);const o=i(0,999);let c=[],l=[];d(()=>{const g=h(o),{s:m}=r();c=[];const p=Math.round(m*.05),v=Math.round(innerWidth/p/2)-1,y=Math.round((innerWidth-2*p*v)/(v+1)),E=Math.round(innerHeight/p/2)-1,x=Math.round((innerHeight-2*p*E)/(E+1));for(let S=0;S<E;S++)for(let C=0;C<v;C++)g(g(n))<1&&c.push({x:y+p+C*p*2+y*C,y:x+p+S*p*2+x*S,r:p,c:e,p:t==="opening"?!0:g(1)>0});l=c.map(S=>H(S))});const u=()=>{s(()=>{const g=i(c.length-1);c[g]&&(c[g].p=!c[g].p),u()},250)};return t==="opening"?s(()=>{c.forEach(g=>g.p=i(1)>0),u()}):u(),{render:()=>{l.forEach(g=>g())},setIntersections:g=>{c=c.filter(({x:m,y:p,r:v})=>g(m,p,v)),l=c.map(m=>H(m))}}},ne="ylp",oe="score",re="difficulty",K=[.14,.11,.09,.075],se=750,Le=350,ie=5,A=[];for(let e=0;e*ie<=se-Le;e++)A.push(se-e*ie);const _=()=>{const e=c=>localStorage.getItem(`${ne}_${c}`),n=(c,l)=>localStorage.setItem(`${ne}_${c}`,l.toString()),d=()=>+(e(oe)||0),h=c=>n(oe,c),r=c=>{const l=d();h(l+c)},i=()=>+(e(re)||0),s=c=>{const l=i();n(re,Math.min(Math.max(l+c,0),K.length*A.length-1))};return{getScore:d,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const c=i(),l=Math.floor(c/A.length);return K[l]||K[1]},getDifficultyTic:()=>{const c=i(),l=Math.floor(c/A.length),u=c-l*A.length;return A[u]||A[0]}}},he=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:h,setBackground:r,rand:i}=w(),{getDifficultyRad:s}=_();return n=[...n.splice(i(n.length-1),n.length),...n],e||d(()=>{const{s:f}=h(),t=s(),o=Math.round(f*t),c=Math.round(innerWidth/o/2)-1,l=(innerWidth-2*o*c)/(c+1),u=Math.round(innerHeight/o/2)-1,P=(innerHeight-2*o*u)/(u+1),M=innerWidth>=innerHeight,g=M?c:u,m=M?l:P,p=M?innerWidth:innerHeight;let v=0;const y=[];for(let x=0;x<g;x++)n[v]||(v=0),y.push(`${n[v]} ${(m+o+x*o*2+m*x)/p*100}%`),v++;r(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},fe=({palette:e,retry:n,popEffect:d=()=>{}})=>{const{addEventResize:h,useMeasure:r,rand:i,useTimer:s,useScreenMeta:a,navigate:f,addEventClick:t,intersect:o}=w(),{from:c}=a(),{getDifficultyRad:l}=_(),u=[];let P=[],M,g,m,p;const v=E=>Array.isArray(e)?e[E]:e;return h(()=>{const{s:E}=r();u.splice(0);const x=l(),S=Math.round(E*x),C=Math.round(innerWidth/S/2)-1,O=(innerWidth-2*S*C)/(C+1),z=Math.round(innerHeight/S/2)-1,b=(innerHeight-2*S*z)/(z+1),I=innerWidth>=innerHeight;let T=0;for(let R=0;R<z;R++){for(let W=0;W<C;W++){v(T)||(T=0);const F={x:O+S+W*S*2+O*W,y:b+S+R*S*2+b*R,r:S,c:v(T),p:!0};R===0&&W===C-1?(p={...F,p:(c==="main"||c==="gameover"||c==="gamescore")&&!p},M=H(p),g=le(p)):u.push(F),T+=I?1:0}T=I?0:T+1}n&&(m=u[i(u.length-1)],s(()=>{d(m,!1,!0),m.p=!1})),P=u.map(R=>H(R))}),s(()=>{p.p&&d(p,!1,!0),p.p=!1}),n&&t((E,x)=>{o({x:E,y:x},m)&&(d(m),m.p=!0,s(()=>{f("game")},100))}),t((E,x)=>{o({x:E,y:x},p)&&(d(p),p.p=!0,s(()=>{f("main")},100))}),{render:()=>{P.forEach(E=>E()),M(),p!=null&&p.p||g()},popits:u}},k=100,B="#222",_e=e=>{const n=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(d<255?d<1?0:d:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},J={},Fe=e=>{const{ctx:n,createImg:d,useRandChain:h,useTimer:r}=w();let i,s=!1,a=[];const f=e.r*2/k/2;J[e.imgSrc]?i=J[e.imgSrc]:(i=J[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},i.img.src=e.imgSrc);const t=()=>r(()=>{s=!s,t()},250),o=(M,g=n)=>{const{x:m,y:p,c:v,r:y}=M;g.fillStyle=v||"red",g.beginPath(),g.arc(m+y,p+y,y,0,Math.PI*2),g.closePath(),g.fill()},c=(M=n,g=0,m=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(g,m,2*e.r,2*e.r,f),M.closePath(),M.fill()},l=()=>{const M=[];for(let y=0;y<k;y++)for(let E=0;E<k;E++){const x={x:E*f*2,y:y*f*2,r:f,c:B};M.push(x)}let g=e.score-e.winScore;const m=[...M],p=h(0),v=(y=!1)=>{const E=p(m.length-1),x=m[E],S=M.indexOf(x);x.c=y?B:i.cols[S],m.splice(E,1),y&&a.push({...x,c:i.cols[S]})};for(let y=g;y>0;y--)v();if(e.winScore){a=[];for(let y=e.winScore;y>0;y--)v(!0);t()}return M},u=()=>{const M=l();i.drawImg=d((g=n)=>{c(g),M.filter(m=>m.c!==B).forEach(m=>o(m,g))},2*e.r)},P=async()=>{var m;const M=document.createElement("canvas");M.width=k,M.height=k;const g=M.getContext("2d",{willReadFrequently:!0});g==null||g.drawImage(i.img,0,0);for(let p=0;p<k;p++){const v=[];for(let y=0;y<k;y++){const E=(m=g==null?void 0:g.getImageData(y,p,1,1))==null?void 0:m.data;v.push(_e(E))}i.cols.push(...v)}i.isFilled=!0,u()};return i.isFilled?(i.r!==e.r||i.score!==e.score)&&u():i.img.onload=P,(M=n)=>{const{x:g,y:m,r:p,winScore:v}=e;if(i.drawImg?M.drawImage(i.drawImg,g-p,m-p,2*p,2*p):c(M,g-p,m-p),s&&v&&i.drawImg)for(const y of a)M.fillStyle=y.c||"red",M.beginPath(),M.arc(g-p+y.x+y.r,m-p+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},ce=1e4,ge=(e=0,n=!1)=>{const{addEventResize:d,useMeasure:h,translate:r}=w(),{getScore:i}=_(),s=["/media/levels/cat.png","/media/levels/city.png","/media/levels/donut.png","/media/levels/girl.png","/media/levels/max.png"],a=i();let f,t=0,o=0,c=Math.min(Math.floor(a/ce),s.length-1);return d(()=>{const{cx:g,cy:m,s:p,isL:v}=h();f=[],t=(p-2*p*.055*1.6)/2,o=p*.05;let y=n?c:0;for(y;y<(n?c+1:s.length);y++){const E=s[y],x=v?g:g+y*t*2+y*o,S=v?m+y*t*2+y*o:m;f.push(Fe({x,y:S,r:t,score:Math.min(a-y*ce,1e4),imgSrc:E,winScore:e}))}}),{up:()=>{c=c+1<s.length?c+1:s.length-1},down:()=>{c=c-1<0?0:c-1},render:()=>{const{isL:g}=h(),m=g?0:-(c*t*2+c*o),p=g?-(c*t*2+c*o):0;r(()=>{f==null||f.forEach(v=>v())},m,p)},rect:()=>{const{cx:g,cy:m}=h(),p=innerWidth>innerHeight;return{x:p?g-t:0,y:p?0:m-t,w:p?2*t:innerWidth,h:p?innerHeight:2*t}}}},$e=({popits:e,popEffect:n=()=>{},splashEffect:d=()=>{}})=>{const{useTimer:h,rand:r,addEventClick:i,addEventMove:s,intersect:a,navigate:f,addEventResize:t}=w(),{getScore:o,addScore:c,getDifficultyTic:l}=_();let u=[],P,M,g=!1,m=0,p=0,v=0;const y=o(),E=l(),x=b=>{const I=e.filter(W=>u.indexOf(W)===-1&&W!==b),T=r(I.length-1),R=I[T];R&&(n(R,!1,!0),R.p=!1,u.push(I[T]))},S=()=>{M=h(()=>{if(v=Math.max(v-10,50),e.length===u.length){g=!0,M.stop(),h(()=>{f("gameover")});return}x(),S()},v)},C=b=>{u=[];const I=e.length;let T=r(Math.round(I*.3),Math.round(I*.6));const R=[...e];if(b){const W=R.indexOf(b);R.splice(W,1)}for(let W=T;W>0;W--){const F=r(R.length-1),j=R[F];j.p=!1,n(j,!1,!0),u.push(j),R.splice(F,1)}v=E,P==null||P.stop(),M==null||M.stop(),y&&(P=h(()=>{d("SLOWLY"),S()},u.length*E)),m=m>0?m:r(3,5)},O=b=>{n(b),v=Math.min(v+5,E),p++,b.p=!0;const I=u.indexOf(b);u.splice(I,1),u.length<=0&&(m--,m>0?h(()=>{d("Round"),C(b)},100):(P==null||P.stop(),M==null||M.stop(),c(p),h(()=>{f("gamescore",{winScore:p})},100)))},z=(b,I,T=!1)=>{if(!g){for(const R of u)if(a({x:b,y:I},R)){O(R);return}if(!T){for(const R of e)if(a({x:b,y:I},R)){n(R,!0),d("Popenalty"),x(R);return}d("Popenalty"),x()}}};i(z),s((b,I)=>z(b,I,!0)),t(()=>{h(()=>{d("Pop it"),C()})})},Ne=()=>{const{addEventResize:e,rand:n,useScreenMeta:d}=w(),{from:h}=d(),{popEffect:r,render:i}=N(),s=["#00dcfe","#5bb2f7","#92E6E6"],a=h==="opening"?s[0]:s[n(s.length-1)],{render:f,setIntersections:t}=ue({color:a}),{render:o,point:c}=ze({popEffect:r}),{render:l,point:u}=de({getX:(g,m,p)=>g+Math.round(m*.25)+2*p,getY:(g,m,p)=>g+Math.round(m*.25)+0*p,popEffect:r}),{render:P,point:M}=Te({popEffect:r});return e(()=>{const g=M(),m=c(),p=u();t((v,y,E)=>!D({x:v,y,r:E},g)&&!D({x:v,y,r:E},m)&&!D({x:v,y,r:E},p))}),()=>{i(),f(),o(),l(),P()}},Oe=()=>{const{useMeasure:e,addEventResize:n}=w(),d=he(),{popEffect:h,render:r}=N(),{popits:i,render:s}=fe({palette:d,popEffect:h}),a={mfs:0,dy:0},{splashEffect:f,render:t}=ae(a);return $e({popits:i,popEffect:h,splashEffect:f}),n(()=>{const o=(i[0].y-i[0].r)/e().m;a.mfs=o,a.dy=o}),()=>{r(),s(),t()}},Ye=()=>{const e="#ff6347",{popEffect:n,render:d}=N(),{setBackground:h}=w(),{minusDifficulty:r}=_(),{render:i}=fe({palette:e,retry:!0,popEffect:n});return h(e),r(),()=>{d(),i()}},Be=()=>{const{translate:e,useScreenMeta:n}=w(),{plusDifficulty:d}=_(),{data:h}=n(),{popEffect:r,render:i}=N(),{splashEffect:s,render:a}=ae();he();const{render:f}=ge(h==null?void 0:h.winScore,!0),{render:t}=de({getX:(c,l,u)=>innerWidth>innerHeight?Math.min(c+(l-2*l*.055*1.6)/2+4*u+Math.round(l*.1),innerWidth-2*u-Math.round(l*.1)):c+(l-2*l*.055*1.6)/8+0*Math.round(l*.1)+2*u,getY:(c,l,u)=>innerWidth>innerHeight?c+(l-2*l*.055*1.6)/2-1*u-Math.round(l*.1):Math.min(c+(l-2*l*.055*1.6)/2+4*u+Math.round(l*.1),innerHeight-2*u-Math.round(l*.1)),popEffect:r}),{render:o}=De({getX:(c,l,u)=>innerWidth>innerHeight?Math.max(c-(l-2*l*.055*1.6)/2-4*u-Math.round(l*.1),2*u+Math.round(l*.1)):c+(l-2*l*.055*1.6)/8-2*Math.round(l*.1)-2*u,getY:(c,l,u)=>innerWidth>innerHeight?c-(l-2*l*.055*1.6)/2+0*u+Math.round(l*.1):Math.min(c+(l-2*l*.055*1.6)/2+4*u+Math.round(l*.1),innerHeight-2*u-Math.round(l*.1)),popEffect:r});return d(),innerHeight>innerWidth&&s("You win"),()=>{i(),innerHeight>innerWidth?e(f,0,-Math.round(innerHeight*.05)):f(),t(),o(),a()}},Ge=()=>{const{addEventResize:e,rand:n}=w(),{popEffect:d,render:h}=N(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],i=r[n(r.length-1)],{render:s,setIntersections:a}=ue({color:i,frequency:10}),{render:f,rect:t,up:o,down:c}=ge(),{render:l,point:u}=We({popEffect:d}),{render:P,point:M}=He({onClick:o,popEffect:d}),{render:g,point:m}=ke({onClick:c,popEffect:d});return e(()=>{const p=u(),v=t(),y=M(),E=m();a((x,S,C)=>!D({x,y:S,r:C},p)&&!we({x,y:S,r:C},v)&&!D({x,y:S,r:C},y)&&!D({x,y:S,r:C},E))}),()=>{h(),s(),f(),l(),P(),g()}},Xe=()=>{const{ctx:e,addEventResize:n,loop:d}=w(),h={x:40,y:100};let r=1,i=1,s;const a=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return a(),n(a),d(()=>{h.x+=2*r,h.y+=3*i,r*=-1,i*=-1}),()=>{e.save();var f=Math.random()*2,t=Math.random()*3;e.translate(f,t),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,s,s),e.fill(),e.restore()}},je=[{name:"opening",ctor:Ie},{name:"main",ctor:Ne},{name:"game",ctor:Oe},{name:"gameover",ctor:Ye},{name:"gamescore",ctor:Be},{name:"score",ctor:Ge},{name:"devs",ctor:Xe}];be(je);document.title="Your's last Pop it";
