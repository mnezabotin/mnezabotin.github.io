(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();const J=()=>{const t=document.createElement("canvas"),s=t.getContext("2d");if(!s)throw new Error("CanvasRenderingContext2D is null");const i=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,s.scale(devicePixelRatio,devicePixelRatio)},h=o=>{s.clearRect(0,0,innerWidth,innerHeight),o()};return i(),document.body.appendChild(t),{ctx:s,render:h,resize:i,rotate:(o,d,f,p)=>{s.save(),s.translate(d,f),s.rotate(Math.PI*p),s.translate(-d,-f),o(),s.restore()},translate:(o,d,f)=>{s.save(),s.translate(d,f),o(),s.restore()},shade:(o,d)=>{o=o.substring(1);const f=parseInt(o,16),p=Math.round(2.55*d),u=(f>>16)+p,l=(f>>8&255)+p,m=(f&255)+p;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(l<255?l<1?0:l:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},setBackground:(o,d)=>{var f;document.body.style.background=o,document.body.style.backgroundColor=d||o,(f=document.querySelector('meta[name="theme-color"]'))==null||f.setAttribute("content",d||o)},createImg:(o,d,f=d)=>{const p=document.createElement("canvas"),u=p.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return p.width=d*devicePixelRatio,p.height=f*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),o(u),p}}},Q=t=>{let s="",i="",h;const n=e=>t.find(c=>c.name===e)||t[0],r={render:()=>{},navigate:(e,c)=>{const o=n(e);i=s||"",s=(o==null?void 0:o.name)||"",h=c,r.render=(o==null?void 0:o.ctor())||(()=>{})},useScreenMeta:()=>({to:s,from:i,data:h})};return r},Z=()=>{const t=requestAnimationFrame||(r=>setTimeout(r,16.666666666666668)),s=[],i={};return{loop:(r,e)=>{if(Object.entries(i).find(([o,d])=>d===r)||e&&i[e])throw new Error(`Loop${e?" "+e:""} already specified`);e&&s.push(e),e=e||new Date().valueOf().toString(),i[e]=r;const c=()=>{r(),i[e]&&t(c)};c()},stop:r=>{if(typeof r=="string")delete i[r];else{const e=Object.entries(i).find(([c,o])=>o===r);e&&delete i[e[0]]}},stopAll:()=>{for(const r in i)s.indexOf(r)===-1&&delete i[r]}}};let H=[];const ee=()=>{for(const t of H)clearTimeout(t);H=[]},te=(t,s=400)=>{let i=new Date,h=s,n=setTimeout(t,h);return H.push(n),{pause:()=>{clearTimeout(n),h-=new Date-i},resume:()=>{i=new Date,clearTimeout(n),n=setTimeout(t,h),H.push(n)},stop:()=>{clearTimeout(n)}}},j=2147483646,N=2147483647,ne=16807,oe=(t=Math.floor(Math.random()*N))=>{t=t%N,t<=0&&(t+=j);const s=()=>(t=t*ne%N,t),i=()=>(s()-1)/j;return(n,a)=>(a===void 0&&(a=n,n=0),Math.floor(i()*(a-n+1))+n)},re=(t,s)=>(s===void 0&&(s=t,t=0),Math.floor(Math.random()*(s-t+1))+t),se=()=>{const t=[],s=[];return{addEventResize:e=>{e(),t.push(e)},onResizeEvents:()=>t.forEach(e=>e()),addEventClick:e=>{s.push(e)},onClickEvents:(e,c)=>s.forEach(o=>o(e,c)),removeAllEvents:()=>{t.splice(0),s.splice(0)}}},ie=(t,s)=>{const i=t.r||0,h=s.r||0,n=t.x||0,a=t.y||0,r=s.x||0,e=s.y||0,c=Math.pow(Math.abs(n-r),2),o=Math.pow(Math.abs(a-e),2),d=Math.pow(i+h,2);return c+o<=d},I=(t,s)=>{const i=Math.pow(Math.abs(t.x-s.x),2),h=Math.pow(Math.abs(t.y-s.y),2),n=t.r||0,a=s.r||0,r=Math.pow(n+a,2);return i+h<=r},ce=(t,s)=>{const i=t.r||0,h=s.w||0,n=s.h||0;return Math.abs(s.x+h/2-t.x)<=h/2+i&&Math.abs(s.y+n/2-t.y)<=n/2+i},ae=t=>{const s={},i=n=>{const a=n.split("/");return a[a.length-1].split(".")[0]};return(()=>{for(const n of t){const a=new Audio(n);a.volume=.25,a.addEventListener("ended",function(){this.currentTime=0});const r=i(n);s[r]={audio:a,path:n}}})(),n=>{var c,o;const a=(c=s[n])==null?void 0:c.audio,r=(o=s[n])==null?void 0:o.path;if(!(!a||!r))if(a.currentTime===0)a.play();else{var e=new Audio(r);e.volume=.25,e.play()}}};let B;const de=(t,s)=>{if(B)throw new Error("Webcore already specified");const i=J(),h=Q(t),{loop:n,stop:a,stopAll:r}=Z(),{addEventResize:e,onResizeEvents:c,addEventClick:o,onClickEvents:d,removeAllEvents:f}=se();let p=innerWidth/2,u=innerHeight/2,l=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const M=()=>({cx:p,cy:u,s:l,m}),g=ae([]);B={font:"Tijuf",ctx:i.ctx,shade:i.shade,rotate:i.rotate,translate:i.translate,setBackground:i.setBackground,createImg:i.createImg,useMeasure:M,useScreenMeta:h.useScreenMeta,navigate:(w,E)=>{if(!t.some(v=>v.name===w))throw new Error(`Screen ${w} not specified`);r(),ee(),f(),new Promise(()=>h.navigate(w,E))},loop:n,loopStop:a,useTimer:te,rand:re,useRandChain:oe,intersect:ie,addEventResize:e,addEventClick:o,playAudio:g},n(()=>i.render(h.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,l=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),i.resize(),c()},document.onpointerdown=w=>{d(w.clientX,w.clientY)},h.navigate()},y=()=>{if(!B)throw new Error("Webcore not specified");return{...B}},O={},b=t=>{const{shade:s,ctx:i,createImg:h}=y(),n=()=>{const{r,c:e="#ffffff",p:c}=t,o=i.createRadialGradient(r,r,r,r,r,r/5);return o.addColorStop(0,s(e,0)),o.addColorStop(.01,s(e,0)),o.addColorStop(.075,s(e,9)),o.addColorStop(.15,s(e,0)),o.addColorStop(.15,s(e,-15)),o.addColorStop(.18,s(e,-5)),o.addColorStop(.22,s(e,-15)),c?(o.addColorStop(.24,s(e,-10)),o.addColorStop(.3,s(e,-8)),o.addColorStop(.34,s(e,-12)),o.addColorStop(.6,s(e,-6)),o.addColorStop(1,s(e,-4))):(o.addColorStop(.24,s(e,-12)),o.addColorStop(.26,s(e,-8)),o.addColorStop(.3,s(e,-2)),o.addColorStop(.34,s(e,0)),o.addColorStop(.5,s(e,5)),o.addColorStop(1,s(e,10))),o},a=()=>{const{r,c:e="#ffffff",p:c}=t,o=`${e}_${c?"push":"pop"}_${r}`;if(O[o])return O[o];const d=h((f=i)=>{const p=n();f.fillStyle=p,f.beginPath(),f.arc(r,r,r,0,2*Math.PI),f.closePath(),f.fill()},2*r);return O[o]=d,d};return(r=i)=>{const{x:e,y:c,r:o}=t,d=a();r.drawImage(d,e-o,c-o,2*o,2*o)}},F={},k=t=>{const{ctx:s}=y();let i;return F[t.src]?i=F[t.src]:(i=new Image,i.src=t.src,F[t.src]=i),(h=s)=>{const{w:n,h:a=n,x:r=0,y:e=0}=t;i.complete&&h.drawImage(i,r,e,n,a)}},q=t=>{const{font:s,ctx:i}=y(),h=t.text,n=t.text.length,a=2*Math.PI/n/4;return(r=i)=>{const{x:e,y:c,r:o,s:d=0,fs:f}=t,p=f||Math.round(o/4);r.textAlign="center",r.fillStyle="#f9f9f9",r.font=`${p}px ${s}`,r.save(),r.translate(e,c),r.rotate(d);for(let u=0;u<n;u++)r.save(),r.rotate(u*a),r.fillText(h[u],0,-o),r.restore();r.restore()}},le=()=>{var w,E;const{ctx:t,loop:s,rotate:i,navigate:h,useMeasure:n,addEventClick:a,addEventResize:r,setBackground:e}=y();e("#040404");let c=!1,o,d,f,p,u,l=-.2,m=0;r(()=>{const{cx:v,cy:x,s:S}=n(),P=Math.round(S*.25);o={c:"#ff6347",x:v,y:x,r:P,p:!1},d=b(o),f=k({x:v-P+Math.round(P*.35),y:x-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),p=q({text:"nezabotin",x:v,y:x,r:Math.round(P*1.1),s:Math.PI*1.6}),u=q({text:"production",x:v,y:x,r:Math.round(P*1.1),s:Math.PI*2.6})});const M=()=>{l+=.01,m=l>=1?1:l,l>=1.8&&(o.p=!0),l>=2.2&&(o.c="#f86a9a"),l>=2.6&&h("main")};a(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(l<v)return l=v,!0})});const g=()=>{s(M),c=!0};return(w=document==null?void 0:document.fonts)!=null&&w.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(g):g(),()=>{const{cx:v,cy:x}=n();t.globalAlpha=c?1:0,d(),l<1.8&&f(),l<1.4&&i(()=>{p(),u()},v,x,m),t.globalAlpha=1}},ue=()=>{const{addEventResize:t,useMeasure:s,useTimer:i,addEventClick:h,navigate:n,useScreenMeta:a}=y(),{from:r}=a();let e,c,o;return t(()=>{const{cx:p,cy:u,s:l,m}=s(),M=Math.round(l*.25);e={c:"#ba68c8",r:Math.round(l*.08),x:p-M-1*m,y:u-M+1*m,p:(r==="score"||r==="opening")&&!e},c=b(e),o=k({x:Number(e.x)-e.r+Math.round(e.r*.5),y:Number(e.y)-e.r+Math.round(e.r*.5),w:e.r*2-Math.round(e.r*1),src:"/media/star.svg"})}),i(()=>{e.p=!1}),h((p,u)=>{I({x:p,y:u},e)&&(e.p=!0,i(()=>{n("score")},100))}),{render:()=>{c(),e.p||o()},point:()=>({x:e.x,y:e.y,r:e.r})}},he=()=>{const{addEventResize:t,useMeasure:s,useTimer:i,addEventClick:h,intersect:n,navigate:a,useScreenMeta:r}=y(),{from:e}=r();let c,o,d;return t(()=>{const{s:u}=s(),l=Math.round(u*.08);c={c:"#ff6347",r:l,x:Math.round(1.6*l),y:Math.round(1.6*l),p:e==="main"&&!c},o=b(c),d=k({x:Number(c.x)-l+Math.round(l*.4),y:Number(c.y)-l+Math.round(l*.4),w:l*2-Math.round(l*.8),src:"/media/back.svg"})}),i(()=>{c.p=!1}),h((u,l)=>{n({x:u,y:l},c)&&(c.p=!0,i(()=>{a("main")},100))}),{render:()=>{o(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},fe=t=>{const{addEventResize:s,useMeasure:i,useTimer:h,addEventClick:n,intersect:a,rotate:r}=y();let e,c,o;return s(()=>{const{s:p}=i(),u=Math.round(p*.055);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},c=b(e),o=k({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),n((p,u)=>{a({x:p,y:u},e)&&(e.p=!0,t(),h(()=>{e.p=!1},100))}),{render:()=>{c(),e.p||r(()=>{o()},e.x,e.y,-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},pe=t=>{const{addEventResize:s,useMeasure:i,useTimer:h,addEventClick:n,intersect:a,rotate:r}=y();let e,c,o;return s(()=>{const{s:p}=i(),u=Math.round(p*.055);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},c=b(e),o=k({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),n((p,u)=>{a({x:p,y:u},e)&&(e.p=!0,t(),h(()=>{e.p=!1},100))}),{render:()=>{c(),e.p||r(()=>{o()},e.x,e.y,.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},me=t=>{const{ctx:s,shade:i}=y(),h=Math.round(t.r/2.2),n=Math.round(.15*t.r),a=i(t.c||"blue",-3);return(r=s)=>{const{r:e,x:c=e,y:o=e}=t;r.lineCap="round",r.fillStyle=a,r.strokeStyle=a,r.lineWidth=h,r.beginPath(),r.moveTo(c+n,o),r.lineTo(c-n/2,o-n),r.lineTo(c-n/2,o+n),r.closePath(),r.fill(),r.beginPath(),r.moveTo(c+n,o),r.lineTo(c-n/2,o-n),r.moveTo(c-n/2,o-n),r.lineTo(c-n/2,o+n),r.moveTo(c-n/2,o+n),r.lineTo(c+n,o),r.stroke()}},ge=()=>{const{addEventResize:t,useMeasure:s,useTimer:i,addEventClick:h,intersect:n,navigate:a,useScreenMeta:r}=y(),{from:e}=r();let c,o,d;return t(()=>{const{cx:u,cy:l,s:m,m:M}=s(),g=Math.round(m*.25);c={c:"#bef181",r:Math.round(m*.1),x:u+g+2*M,y:l+g,p:(e==="game"||e==="opening")&&!c},o=b(c),d=me(c)}),i(()=>{c.p=!1}),h((u,l)=>{n({x:u,y:l},c)&&(c.p=!0,i(()=>{a("game")},100))}),{render:()=>{o(),c.p||d()},point:()=>({x:c.x,y:c.y,r:c.r})}},X=t=>{const{font:s,ctx:i}=y();return(h=i)=>{const{text:n,x:a,c:r,y:e,fs:c,a:o="center",mw:d}=t;h.textAlign=o,h.fillStyle=r,h.font=`${c}px ${s}`,h.fillText(n,a,e,d)}},Me=()=>{const{addEventResize:t,useMeasure:s,useTimer:i,useScreenMeta:h}=y(),{from:n}=h();let a,r,e,c;return t(()=>{const{cx:f,cy:p,s:u}=s(),l=Math.round(u*.25);a={c:"#f86a9a",x:f,y:p,r:l,p:n==="opening"&&!a},r=b(a),e=X({text:"Yola",c:"#f1f1f1",x:f,y:p-l+Math.round(l*.9),fs:Math.round(l/2.6),mw:l*2}),c=X({text:"PopiT",c:"#ffeb3b",x:f,y:p-l+Math.round(l*1.3),fs:Math.round(l/2.3),mw:l*2})}),i(()=>a.p=!1),{render:()=>{r(),a.p||(e(),c())},point:()=>({x:a.x,y:a.y,r:a.r})}},U=(t="#00dcfe")=>{const{addEventResize:s,useRandChain:i,useMeasure:h,rand:n,useTimer:a,setBackground:r,useScreenMeta:e}=y(),{from:c}=e();r(t);const o=n(0,999);let d=[],f=[];s(()=>{const m=i(o),{s:M}=h();d=[];const g=Math.round(M*.05),w=Math.round(innerWidth/g/2)-1,E=Math.round((innerWidth-2*g*w)/(w+1)),v=Math.round(innerHeight/g/2)-1,x=Math.round((innerHeight-2*g*v)/(v+1));for(let S=0;S<v;S++)for(let P=0;P<w;P++)m(m(25))<1&&d.push({x:E+g+P*g*2+E*P,y:x+g+S*g*2+x*S,r:g,c:t,p:c==="opening"?!0:m(1)>0});f=d.map(S=>b(S))});const p=()=>{a(()=>{const m=n(d.length-1);d[m]&&(d[m].p=!d[m].p),p()})};return c==="opening"?a(()=>{d.forEach(m=>m.p=n(1)>0),p()}):p(),{render:()=>{f.forEach(m=>m())},setIntersections:m=>{d=d.filter(({x:M,y:g,r:w})=>m(M,g,w)),f=d.map(M=>b(M))}}},V=(t=!1)=>{const s=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"],{addEventResize:i,useMeasure:h,setBackground:n}=y();return t||i(()=>{const{s:r}=h(),e=Math.round(r*.14),c=Math.round(innerWidth/e/2)-1,o=(innerWidth-2*e*c)/(c+1),d=Math.round(innerHeight/e/2)-1,f=(innerHeight-2*e*d)/(d+1),p=innerWidth>=innerHeight,u=p?c:d,l=p?o:f,m=p?innerWidth:innerHeight;let M=0;const g=[];for(let E=0;E<u;E++)s[M]||(M=0),g.push(`${s[M]} ${(l+e+E*e*2+l*E)/m*100}%`),M++;n(`linear-gradient(${p?"to right":"to bottom"}, ${g.join(", ")})`,s[0])}),s},ve=t=>{const{ctx:s,shade:i}=y(),h=Math.round(t.r/4),n=Math.round(.12*t.r);return(a=s)=>{const{r,x:e=r,y:c=r}=t,o=i(t.c||"blue",-3);a.lineCap="round",a.strokeStyle=o,a.lineWidth=h,a.beginPath(),a.moveTo(e-1.5*n,c-2*n),a.lineTo(e-1.5*n,c+2*n),a.stroke(),a.beginPath(),a.moveTo(e+1.5*n,c-2*n),a.lineTo(e+1.5*n,c+2*n),a.stroke()}},ye=(t,s)=>{const{addEventClick:i,intersect:h,useTimer:n,navigate:a}=y();i((r,e)=>{h({x:r,y:e},t)&&(t.p=!0,n(()=>{a(s)},100))})},Y=({palette:t,retry:s})=>{const{navigate:i,addEventResize:h,addEventClick:n,useMeasure:a,rand:r,useTimer:e,intersect:c,useScreenMeta:o}=y(),{from:d}=o(),f=[];let p=[],u={x:0,y:0,r:0},l,m,M;const g=E=>Array.isArray(t)?t[E]:t;return h(()=>{const{s:E}=a();f.splice(0);const v=Math.round(E*.14),x=Math.round(innerWidth/v/2)-1,S=(innerWidth-2*v*x)/(x+1),P=Math.round(innerHeight/v/2)-1,$=(innerHeight-2*v*P)/(P+1),G=innerWidth>=innerHeight;let T=0;for(let C=0;C<P;C++){for(let z=0;z<x;z++){g(T)||(T=0);const _={x:S+v+z*v*2+S*z,y:$+v+C*v*2+$*C,r:v,c:g(T),p:!0};C===0&&z===x-1?(u={..._,p:(d==="main"||d==="gameover"||d==="gamescore")&&!u},l=b(u),m=ve(u)):f.push(_),T+=G?1:0}T=G?0:T+1}s&&(M=f[r(f.length-1)],e(()=>{M.p=!1})),p=f.map(C=>b(C))}),e(()=>{u.p=!1}),s&&n((E,v)=>{c({x:E,y:v},M)&&(M.p=!0,e(()=>{i("game")},100))}),ye(u,"main"),{render:()=>{p.forEach(E=>E()),l(),u!=null&&u.p||m()},popits:f}},R=100,L=2,W="#222",we=t=>{const s=(t==null?void 0:t[0])||0,i=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(s<255?s<1?0:s:255)*65536+(i<255?i<1?0:i:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},D={},Ee=t=>{const{ctx:s,shade:i,createImg:h}=y();let n;D[t.imgSrc]?n=D[t.imgSrc]:(n=D[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},n.img.src=t.imgSrc);const a=(o,d=s)=>{const{x:f,y:p,c:u,r:l,p:m}=o;m?(d.fillStyle=i(u,5),d.beginPath(),d.arc(f+l,p+l,l,0,Math.PI*2),d.closePath(),d.fill()):(d.fillStyle=u,d.beginPath(),d.arc(f+l,p+l,l+2,0,Math.PI*2),d.closePath(),d.fill())},r=()=>{const o=[],d=(t.r*2-2*L)/R;for(let f=0;f<R;f++)for(let p=0;p<R;p++){const u={x:L+p*d,y:L+f*d,r:d/2,c:f*100+p>=t.score?W:n.cols[p][f]};o.push(u)}return o},e=()=>{const o=r();n.drawImg=h((d=s)=>{o.filter(f=>f.c===W).forEach(f=>a(f,d)),o.filter(f=>f.c!==W).forEach(f=>a(f,d)),o.filter(f=>f.c!==W).forEach(f=>a({...f,p:!0},d))},2*t.r)},c=async()=>{var f;const o=document.createElement("canvas");o.width=R,o.height=R;const d=o.getContext("2d",{willReadFrequently:!0});d==null||d.drawImage(n.img,0,0);for(let p=0;p<R;p++){const u=[];for(let l=0;l<R;l++){const m=(f=d==null?void 0:d.getImageData(p,l,1,1))==null?void 0:f.data;u.push(we(m))}n.cols.push(u)}n.isFilled=!0,e()};return n.isFilled?(n.r!==t.r||n.score!==t.score)&&e():n.img.onload=c,(o=s)=>{const{x:d,y:f,r:p}=t;n.drawImg&&o.drawImage(n.drawImg,d-p,f-p,2*p,2*p)}},A=1e4,K=()=>{const{addEventResize:t,useMeasure:s,translate:i,rand:h}=y(),n=["/media/cat.png"],a=h(n.length*A);let r,e=0,c=0,o=Math.floor(a/A);return t(()=>{const{cx:l,cy:m,s:M}=s();r=[],e=(M-2*M*.055*1.6)/2,c=M*.05;for(let g=0;g<n.length;g++){const w=n[g];r.push(Ee({x:l,y:m+g*e*2+g*c,r:e,score:a-g*A<0?0:a-g*A,imgSrc:w}))}}),{up:()=>{o=o+1<n.length?o+1:n.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{i(()=>{r==null||r.forEach(l=>l())},0,-(o*e*2+o*c))},rect:()=>{const{cx:l}=s();return{x:l-e,y:0,w:2*e,h:innerHeight}}}},Pe=t=>{const{useTimer:s,rand:i,addEventClick:h,intersect:n,navigate:a}=y();let r=[],e,c,o=!1,d=0;const f=()=>{c=s(()=>{if(t.length===r.length){o=!0,c.stop(),s(()=>{a("gameover")});return}const l=t.filter(g=>r.indexOf(g)===-1),m=i(l.length-1),M=l[m];M&&(M.p=!1,r.push(l[m])),f()})},p=l=>{r=[];const m=t.length;let M=i(Math.round(m*.3),Math.round(m*.6));const g=[...t];if(l){const w=g.indexOf(l);g.splice(w,1)}for(let w=M;w>0;w--){const E=i(g.length-1),v=g[E];v.p=!1,r.push(v),g.splice(E,1)}e==null||e.stop(),c==null||c.stop(),e=s(f,r.length*350),d=d>0?d:i(3,5)},u=l=>{l.p=!0;const m=r.indexOf(l);r.splice(m,1),r.length<=0&&(d--,d>0?p(l):a("gamescore"))};h((l,m)=>{if(!o)for(const M of r)n({x:l,y:m},M)&&u(M)}),s(()=>{p()})},xe=()=>{const{addEventResize:t}=y(),{render:s,setIntersections:i}=U(),{render:h,point:n}=Me(),{render:a,point:r}=ge(),{render:e,point:c}=ue();return t(()=>{const o=c(),d=n(),f=r();i((p,u,l)=>!I({x:p,y:u,r:l},o)&&!I({x:p,y:u,r:l},d)&&!I({x:p,y:u,r:l},f))}),()=>{s(),h(),a(),e()}},Se=()=>{const t=V(),{popits:s,render:i}=Y({palette:t});return Pe(s),()=>{i()}},be=()=>{const t="#ff6347",{setBackground:s}=y(),{render:i}=Y({palette:t,retry:!0});return s(t),()=>{i()}},Ce=()=>{const{addEventClick:t,navigate:s}=y();V();const{render:i}=K();return t(()=>{s("game")}),()=>{i()}},Re=()=>{const{addEventResize:t}=y(),{render:s,setIntersections:i}=U("#ffeb3b"),{render:h,rect:n,up:a,down:r}=K(),{render:e,point:c}=he(),{point:o}=fe(a),{point:d}=pe(r);return t(()=>{const f=c(),p=n(),u=o(),l=d();i((m,M,g)=>!I({x:m,y:M,r:g},f)&&!ce({x:m,y:M,r:g},p)&&!I({x:m,y:M,r:g},u)&&!I({x:m,y:M,r:g},l))}),()=>{s(),h(),e()}},Ie=()=>{const{ctx:t,addEventResize:s,loop:i}=y(),h={x:40,y:100};let n=1,a=1,r;const e=()=>{r=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return e(),s(e),i(()=>{h.x+=2*n,h.y+=3*a,n*=-1,a*=-1}),()=>{t.save();var c=Math.random()*2,o=Math.random()*3;t.translate(c,o),t.beginPath(),t.fillStyle="red",t.rect(h.x,h.y,r,r),t.fill(),t.restore()}},Te=[{name:"opening",ctor:le},{name:"main",ctor:xe},{name:"game",ctor:Se},{name:"gameover",ctor:be},{name:"gamescore",ctor:Ce},{name:"score",ctor:Re},{name:"devs",ctor:Ie}];de(Te);document.title="Your's last PopiT";
