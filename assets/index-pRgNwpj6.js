(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const n of d.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&h(n)}).observe(document,{childList:!0,subtree:!0});function l(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function h(s){if(s.ep)return;s.ep=!0;const d=l(s);fetch(s.href,d)}})();const xe=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const l=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},h=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return l(),document.body.appendChild(t),{ctx:o,render:h,resize:l,rotate:(e,i,r,v)=>{o.save(),o.translate(i,r),o.rotate(Math.PI*v),o.translate(-i,-r),e(),o.restore()},translate:(e,i,r)=>{o.save(),o.translate(i,r),e(),o.restore()},shade:(e,i)=>{e=e.substring(1);const r=parseInt(e,16),v=Math.round(2.55*i),M=(r>>16)+v,p=(r>>8&255)+v,f=(r&255)+v;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(p<255?p<1?0:p:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},setBackground:(e,i)=>{var r;document.body.style.background=e,document.body.style.backgroundColor=i||e,(r=document.querySelector('meta[name="theme-color"]'))==null||r.setAttribute("content",i||e)},createImg:(e,i,r=i)=>{const v=document.createElement("canvas"),M=v.getContext("2d");if(!M)throw new Error("CanvasRenderingContext2D is null");return v.width=i*devicePixelRatio,v.height=r*devicePixelRatio,M.scale(devicePixelRatio,devicePixelRatio),e(M),v}}},be=t=>{let o="",l="",h;const s=c=>t.find(a=>a.name===c)||t[0],n={render:()=>{},navigate:(c,a)=>{const e=s(c);l=o||"",o=(e==null?void 0:e.name)||"",h=a,n.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:l,data:h})};return n},Re=()=>{const t=requestAnimationFrame||(n=>setTimeout(n,16.666666666666668)),o=[],l={};return{loop:(n,c)=>{if(Object.entries(l).find(([e,i])=>i===n)||c&&l[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&o.push(c),c=c||new Date().valueOf().toString(),l[c]=n;const a=()=>{n(),l[c]&&t(a)};a()},stop:n=>{if(typeof n=="string")delete l[n];else{const c=Object.entries(l).find(([a,e])=>e===n);c&&delete l[c[0]]}},stopAll:()=>{for(const n in l)o.indexOf(n)===-1&&delete l[n]}}};let J=[];const Ie=()=>{for(const t of J)clearTimeout(t);J=[]},Te=(t,o=400)=>{let l=new Date,h=o,s=setTimeout(t,h);return J.push(s),{pause:()=>{clearTimeout(s),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(s),s=setTimeout(t,h),J.push(s)},stop:()=>{clearTimeout(s)}}},le=2147483646,ee=2147483647,ke=16807,We=(t=Math.floor(Math.random()*ee))=>{t=t%ee,t<=0&&(t+=le);const o=()=>(t=t*ke%ee,t),l=()=>(o()-1)/le;return(s,d)=>(d===void 0&&(d=s,s=0),Math.floor(l()*(d-s+1))+s)},De=(t,o)=>(o===void 0&&(o=t,t=0),Math.floor(Math.random()*(o-t+1))+t),Ae=()=>{const t=[],o=[],l=[];return{addEventResize:i=>{i(),t.push(i)},onResizeEvents:()=>t.forEach(i=>i()),addEventClick:i=>o.push(i),onClickEvents:(i,r)=>o.forEach(v=>v(i,r)),addEventMove:i=>l.push(i),onMoveEvents:(i,r)=>l.forEach(v=>v(i,r)),removeAllEvents:()=>{t.splice(0),o.splice(0),l.splice(0)}}},O=(t,o)=>{const l=Math.pow(Math.abs(t.x-o.x),2),h=Math.pow(Math.abs(t.y-o.y),2),s=t.r||0,d=o.r||0,n=Math.pow(s+d,2);return l+h<=n},ze=(t,o)=>{const l=t.r||0,h=o.w||0,s=o.h||0;return Math.abs(o.x+h/2-t.x)<=h/2+l&&Math.abs(o.y+s/2-t.y)<=s/2+l},He=(t,o)=>O(t,o),Le=t=>{const o=new AudioContext,l={},h=n=>{fetch(n).then(c=>c.arrayBuffer()).then(c=>(o==null?void 0:o.decodeAudioData(c))||null).then(c=>{c&&(l[n]=c)})};if(t&&t.length)for(const n of t)h(n);let s=!0;const d=(n,c)=>{s&&setTimeout(async()=>{const a=o.createBufferSource();l[n]||(l[n]=await fetch(n).then(e=>e.arrayBuffer()).then(e=>(o==null?void 0:o.decodeAudioData(e))||null)),a.buffer=l[n],a.connect(o.destination),c&&(a.playbackRate.value=c),a.start()},0)};return window.onfocus=()=>{s=!0},window.onblur=()=>{s=!1},d};let Q;const Fe=(t,o=[],l)=>{if(Q)throw new Error("Webcore already specified");const h=xe(),s=be(t),{loop:d,stop:n,stopAll:c}=Re(),{addEventResize:a,onResizeEvents:e,addEventClick:i,onClickEvents:r,addEventMove:v,onMoveEvents:M,removeAllEvents:p}=Ae();let f=innerWidth/2,u=innerHeight/2,y=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight;const g=()=>({cx:f,cy:u,s:y,m,isL:w}),S=Le(o);Q={font:"Tijuf",sdk:l,ctx:h.ctx,shade:h.shade,rotate:h.rotate,translate:h.translate,setBackground:h.setBackground,createImg:h.createImg,useMeasure:g,useScreenMeta:s.useScreenMeta,navigate:(P,C)=>{if(!t.some(E=>E.name===P))throw new Error(`Screen ${P} not specified`);c(),Ie(),p(),new Promise(()=>s.navigate(P,C))},loop:d,loopStop:n,useTimer:Te,rand:De,useRandChain:We,intersect:He,addEventResize:a,addEventClick:i,addEventMove:v,playSound:S},d(()=>h.render(s.render),"draw"),window.onresize=()=>{f=innerWidth/2,u=innerHeight/2,y=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),w=innerWidth>innerHeight,h.resize(),e()},document.onpointerdown=P=>{r(P.clientX,P.clientY)},document.onmousemove=P=>{M(P.clientX,P.clientY)},s.navigate()},b=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},z=t=>{const{shade:o,ctx:l,createImg:h}=b(),s=()=>{const{r:n,c="#ffffff",p:a}=t,e=l.createRadialGradient(n,n,n,n,n,n/5);return e.addColorStop(0,o(c,0)),e.addColorStop(.01,o(c,0)),e.addColorStop(.075,o(c,9)),e.addColorStop(.15,o(c,0)),e.addColorStop(.15,o(c,-15)),e.addColorStop(.18,o(c,-5)),e.addColorStop(.22,o(c,-15)),a?(e.addColorStop(.24,o(c,-10)),e.addColorStop(.3,o(c,-8)),e.addColorStop(.34,o(c,-12)),e.addColorStop(.6,o(c,-8)),e.addColorStop(1,o(c,-6))):(e.addColorStop(.24,o(c,-12)),e.addColorStop(.26,o(c,-8)),e.addColorStop(.3,o(c,-2)),e.addColorStop(.34,o(c,0)),e.addColorStop(.5,o(c,5)),e.addColorStop(1,o(c,18))),e},d=()=>{const{r:n,c="#ffffff",p:a}=t,e=`${c}_${a?"push":"pop"}_${n}`;if(te[e])return te[e];const i=h((r=l)=>{const v=s();r.fillStyle=v,r.beginPath(),r.arc(n,n,n,0,2*Math.PI),r.closePath(),r.fill()},2*n);return te[e]=i,i};return(n=l)=>{const{x:c,y:a,r:e}=t,i=d();n.drawImage(i,c-e,a-e,2*e,2*e)}},ne={},U=t=>{const{ctx:o}=b();let l;return ne[t.src]?l=ne[t.src]:(l=new Image,l.src=t.src,ne[t.src]=l),(h=o)=>{const{w:s,h:d=s,x:n=0,y:c=0}=t;l.complete&&h.drawImage(l,n,c,s,d)}},ue=t=>{const{font:o,ctx:l}=b(),h=t.text,s=t.text.length,d=1.2*Math.PI/s/2;return(n=l)=>{const{x:c,y:a,r:e,s:i=0,fs:r,f:v}=t,M=r||Math.round(e/4);n.textAlign="center",n.fillStyle="#f9f9f9",n.font=`${M}px ${v||o}`,n.save(),n.translate(c,a),n.rotate(i);for(let p=0;p<s;p++)n.save(),n.rotate(p*d),n.fillText(h[p],0,-e),n.restore();n.restore()}},$=t=>{const{font:o,ctx:l}=b();return(h=l)=>{const{text:s,x:d,c:n,y:c,fs:a,a:e="center",mw:i,f:r}=t;h.textAlign=e,h.fillStyle=n,h.font=`${a}px ${r||o}`,h.fillText(s,d,c,i)}},Be={tapToSkip:"нажмите что бы пропустить",theEnd:"Конец игры",youWin:"Вы выйграли",complete:"Открыто",production:"производство",nezabotin:"незаботин",dev:"Максим Незаботин",positions:["Идея","Автор","Разработчик","Аналитика","Дизайн","Тестирование"]};let _e=Be;const ce=()=>_e,Oe=()=>{var C,E;const{ctx:t,loop:o,rotate:l,navigate:h,useMeasure:s,addEventClick:d,addEventResize:n,setBackground:c,useTimer:a}=b(),e=ce();c("#040404");let i=!1,r,v,M,p,f,u,y=-.2,m=0,w=!1;n(()=>{const{cx:x,cy:R,s:I}=s(),k=Math.round(I*.25);r={c:"#ff6347",x,y:R,r:k,p:!1},v=z(r),M=U({x:x-k+Math.round(k*.35),y:R-k+Math.round(k*.35),w:k*2-Math.round(k*.7),src:"./media/sloth.svg"}),p=ue({text:e.nezabotin,x,y:R,r:Math.round(k*1.1),s:Math.PI*1.6,f:"PressStart2P"}),f=ue({text:e.production,x,y:R,r:Math.round(k*1.1),s:Math.PI*2.6,f:"PressStart2P"}),u=$({text:e.tapToSkip,c:"#f1f1f1",y:innerHeight-Math.round(k/5),x,fs:Math.round(k/10),mw:I,f:"PressStart2P"})});const g=()=>{y+=.01,m=y>=1?1:y,y>=1.8&&(r.p=!0),y>=2.2&&(r.c="#f86a9a"),y>=2.6&&h("main")};d(()=>{[1.4,1.8,2.2,2.6].some(x=>{if(y<x)return y=x,!0})});const S=()=>{o(g),i=!0};(C=document==null?void 0:document.fonts)!=null&&C.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(S):S();const P=()=>a(()=>{w=!w,P()},250);return P(),()=>{const{cx:x,cy:R}=s();t.globalAlpha=i?1:0,v(),y<1.8&&M(),y<1.4&&l(()=>{p(),f()},x,R,m),w&&u(),t.globalAlpha=1}},pe="ylp",fe="score",oe="difficulty",he="sound",se=[.14,.11,.09,.075],me=750,$e=350,ge=10,G=[];for(let t=0;t*ge<=me-$e;t++)G.push(me-t*ge);let q=null;const N=()=>{const t=p=>localStorage.getItem(`${pe}_${p}`),o=(p,f)=>localStorage.setItem(`${pe}_${p}`,f.toString()),l=()=>+(t(fe)||0),h=p=>o(fe,p),s=p=>{const f=l();h(f+p)},d=()=>+(t(oe)||0),n=p=>{const f=d();o(oe,Math.min(Math.max(f+p,0),se.length*G.length-1))};return{getScore:l,addScore:s,plusDifficulty:()=>n(1),minusDifficulty:()=>n(-5),getDifficultyRad:()=>{const p=d(),f=Math.floor(p/G.length);return se[f]||se[1]},getDifficultyTic:()=>{const p=d(),f=Math.floor(p/G.length),u=p-f*G.length;return G[u]||G[0]},resetDifficulty:()=>o(oe,0),getSound:()=>{if(q!==null)return q;const p=t(he);return!p||p==="true"?(q=!0,!0):(q=!1,!1)},setSound:p=>{q=p,o(he,p)}}};let ve=["./sounds/pop/pop1.mp3","./sounds/pop/pop2.mp3","./sounds/pop/pop3.mp3","./sounds/pop/pop4.mp3","./sounds/pop/pop5.mp3","./sounds/pop/pop6.mp3","./sounds/pop/pop7.mp3","./sounds/pop/pop8.mp3","./sounds/pop/pop9.mp3","./sounds/pop/pop10.mp3","./sounds/pop/pop11.mp3","./sounds/pop/pop12.mp3","./sounds/pop/pop13.mp3","./sounds/pop/pop14.mp3","./sounds/pop/pop15.mp3","./sounds/pop/pop16.mp3","./sounds/pop/pop17.mp3","./sounds/pop/pop18.mp3","./sounds/pop/pop19.mp3","./sounds/pop/pop20.mp3","./sounds/pop/pop21.mp3","./sounds/pop/pop22.mp3","./sounds/pop/pop23.mp3","./sounds/pop/pop24.mp3"],F=[...ve];const V=()=>{const{rand:t,playSound:o}=b(),{getSound:l}=N();return{playPop:()=>{if(!l())return;const a=t(F.length-1),e=F[a];F.splice(a,1),F.length||(F=[...ve]);const i=t(F.length-1);F=[...F.splice(i,F.length),...F],o(e)},playMissed:()=>{if(!l())return;o("./sounds/wrong.mp3")},playFail:()=>{if(!l())return;o("./sounds/fail.mp3")},playWin:()=>{if(!l())return;o("./sounds/win.mp3")},playComplete:()=>{if(!l())return;o("./sounds/complete.mp3")}}},j=100/2;let ye=0;const X=()=>{const{loop:t,ctx:o,shade:l,rand:h}=b(),{playPop:s,playMissed:d}=V(),n={},c=()=>{for(const i in n){const r=n[i];if(!r)return;const v=r.popit;if(!r.shake)r.tic+=j/5,r.tic>=j&&(r.dir=-1),r.withoutRad||(v.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:j-r.tic)));else{r.tic+=j/5;const M=h(1,2),p=h(1,2);v.x=r.origX+Math.random()*M*(Math.random()>.5?1:-1),v.y=r.origY+Math.random()*p*(Math.random()>.5?1:-1)}r.tic>=2*j&&(delete n[i],v.r=r.origR,v.x=r.origX,v.y=r.origY)}},a=(i,r=!1,v=!1)=>{var w;r?d():s(),(w=navigator==null?void 0:navigator.vibrate)==null||w.call(navigator,30),ye++;const M=`${new Date().valueOf().toString()}_${ye}`,p=1,f=1;let u=i.r,y=i.x,m=i.y;for(const g in n){const S=n[g];i===S.popit&&(u=S.origR,y=S.origX,m=S.origY)}n[M]={withoutRad:r,tic:p,dir:f,popit:i,origR:u,origX:y,origY:m,shake:v}},e=()=>{o.globalAlpha=.25;for(const i in n){const r=n[i];if(r.shake)continue;const v=r.popit;o.fillStyle=l(v.c||"red",-12),o.beginPath(),o.arc(v.x,v.y,v.r+r.origR*.001*(r.tic+(r.dir>0?0:j-r.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return t(c),{popEffect:a,render:e}},Ne=({color:t="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,useScreenMeta:d,navigate:n,addEventClick:c,intersect:a}=b(),{from:e}=d();let i,r,v;return l(()=>{const{cx:f,cy:u,s:y,m}=h(),w=Math.round(y*.25);i={c:t,r:Math.round(y*.08),x:f-w-1*m,y:u-w+1*m,p:(e==="score"||e==="opening"||e==="devs")&&!i},r=z(i),v=U({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"./media/star.svg"})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),c((f,u)=>{a({x:f,y:u},i)&&(o(i),i.p=!0,s(()=>{n("score")},100))}),{render:()=>{r(),i.p||v()},point:()=>({x:i.x,y:i.y,r:i.r})}},Me=({color:t="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,navigate:d,addEventClick:n,intersect:c}=b();let a,e,i;return l(()=>{const{s:M}=h(),p=Math.round(M*.08);a={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:!a},e=z(a),i=U({x:Number(a.x)-p+Math.round(p*.4),y:Number(a.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"./media/back.svg"})}),s(()=>{a.p&&o(a,!1,!0),a.p=!1}),n((M,p)=>{c({x:M,y:p},a)&&(o(a),a.p=!0,s(()=>{d("main")},100))}),{render:()=>{e(),a.p||i()},point:()=>({x:a.x,y:a.y,r:a.r})}},Ye=({onClick:t,popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,addEventClick:d,intersect:n,rotate:c}=b(),{playPop:a}=V();let e,i,r;return l(()=>{const{s:p}=h(),f=Math.round(p*.08);e={c:"#ff6347",r:f,x:Math.round(innerWidth-1.6*f),y:Math.round(innerHeight-1.6*f),p:!1},i=z(e),r=U({x:Number(e.x)-f+Math.round(f*.4),y:Number(e.y)-f+Math.round(f*.4),w:f*2-Math.round(f*.8),src:"./media/back.svg"})}),d((p,f)=>{n({x:p,y:f},e)&&(a(),e!=null&&e.p||o(e),e.p=!0,t(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||c(()=>{r()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Ge=({onClick:t,popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,addEventClick:d,intersect:n,rotate:c}=b(),{playPop:a}=V();let e,i,r;return l(()=>{const{s:p,isL:f}=h(),u=Math.round(p*.08),y=Math.round(f?innerWidth-1.6*u:innerWidth-1.6*u-2*u-.3*u),m=Math.round(f?innerHeight-1.6*u-2*u-.3*u:innerHeight-1.6*u);e={c:"#ff6347",r:u,x:y,y:m,p:!1},i=z(e),r=U({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"./media/back.svg"})}),d((p,f)=>{n({x:p,y:f},e)&&(a(),e!=null&&e.p||o(e),e.p=!0,t(),s(()=>{e.p=!1},200))}),{render:()=>{i(),e.p||c(()=>{r()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},je=t=>{const{ctx:o,shade:l}=b(),h=Math.round(t.r/2.2),s=Math.round(.15*t.r),d=l(t.c||"blue",-3);return(n=o)=>{const{r:c,x:a=c,y:e=c}=t;n.lineCap="round",n.fillStyle=d,n.strokeStyle=d,n.lineWidth=h,n.beginPath(),n.moveTo(a+s,e),n.lineTo(a-s/2,e-s),n.lineTo(a-s/2,e+s),n.closePath(),n.fill(),n.beginPath(),n.moveTo(a+s,e),n.lineTo(a-s/2,e-s),n.moveTo(a-s/2,e-s),n.lineTo(a-s/2,e+s),n.moveTo(a-s/2,e+s),n.lineTo(a+s,e),n.stroke()}},Pe=({color:t="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,useScreenMeta:d,navigate:n,addEventClick:c,intersect:a}=b(),{from:e,to:i}=d();let r,v,M;const p=()=>{const{cx:w,cy:g,s:S,m:P}=h(),C=w+Math.round(S*.25)+2*P,E=g+Math.round(S*.25);return{x:C,y:E}},f=()=>{const{cx:w,cy:g,s:S,isL:P,m:C}=h(),E=Math.round(S*.1);if(P){let x=Math.round(w+S/2)+C*2;const R=Math.round(g+S/2-E*2);return x=Math.min(x,Math.round(innerWidth-E*1.5)),{x,y:R}}else{const x=Math.round(w+S*.12);let R=Math.round(g+S/2+E*1.5);return R=Math.min(R,innerHeight-Math.round(E*1.5)),{x,y:R}}},u=()=>i==="main"?p():f();return l(()=>{const{s:w}=h();r={c:t,r:Math.round(w*.1),...u(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!r},v=z(r),M=je(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),c((w,g)=>{a({x:w,y:g},r)&&(o(r),r.p=!0,s(()=>{n("game")},100))}),{render:()=>{v(),r.p||M()},point:()=>({x:r.x,y:r.y,r:r.r})}},Se=t=>{const{ctx:o,shade:l}=b(),h=Math.round(t.r/4),s=Math.round(.12*t.r);return(d=o)=>{const{r:n,x:c=n,y:a=n}=t,e=l(t.c||"blue",-3);d.lineCap="round",d.strokeStyle=e,d.lineWidth=h,d.beginPath(),d.moveTo(c-1.5*s,a-2*s),d.lineTo(c-1.5*s,a+2*s),d.stroke(),d.beginPath(),d.moveTo(c+1.5*s,a-2*s),d.lineTo(c+1.5*s,a+2*s),d.stroke()}},Xe=({popEffect:t=()=>{}})=>{const{addEventResize:o,useMeasure:l,useTimer:h,useScreenMeta:s,navigate:d,addEventClick:n,intersect:c}=b(),{from:a}=s();let e,i,r;const v=()=>{const{cx:f,cy:u,s:y,isL:m,m:w}=l(),g=Math.round(y*.1);if(m){let S=Math.round(f-y/2)-w;const P=Math.round(u-y/2+g*2);return S=Math.max(S,Math.round(g*1.5)),{x:S,y:P}}else{const S=Math.round(f-y*.12);let P=Math.round(u+y/2+g*1.5);return P=Math.min(P,innerHeight-Math.round(g*1.5)),{x:S,y:P}}};return o(()=>{const{s:f}=l();e={c:"#fd8059",r:Math.round(f*.08),...v(),p:(a==="game"||a==="opening")&&!e},i=z(e),r=Se(e)}),h(()=>{e.p&&t(e,!1,!0),e.p=!1},500),n((f,u)=>{c({x:f,y:u},e)&&(t(e),e.p=!0,h(()=>{d("main")},100))}),{render:()=>{i(),e.p||r()},point:()=>({x:e.x,y:e.y,r:e.r})}},qe=t=>{const{ctx:o,shade:l}=b(),h=Math.round(t.r/4),s=Math.round(.2*t.r),d=l(t.c||"blue",-5);return(n=o)=>{const{r:c,x:a=c,y:e=c}=t;n.lineCap="round",n.fillStyle=d,n.strokeStyle=d,n.lineWidth=h,n.beginPath(),n.ellipse(a-s,e+s,h,s,10*Math.PI/180,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.moveTo(a-s/2,e+s),n.lineTo(a,e-s),n.lineTo(a+s,e-s),n.stroke(),t.on||(n.lineWidth=Math.round(h/3),n.beginPath(),n.moveTo(a-c/4,e-c/4),n.lineTo(a+c/4,e+c/4),n.stroke())}},Ue=({color:t="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,useScreenMeta:d,addEventClick:n,intersect:c}=b(),{from:a}=d(),{getSound:e,setSound:i}=N();let r,v,M;return l(()=>{const{cx:u,cy:y,s:m,m:w}=h(),g=Math.round(m*.25),S=Math.round(m*.065),P=e();r={c:t,r:S,x:u-g-S-w,y:y-g+3*S,p:(a==="opening"||a==="devs")&&!r,on:P},v=z(r),M=qe(r)}),s(()=>{r.p&&o(r,!1,!0),r.p=!1}),n((u,y)=>{if(c({x:u,y},r)){let m=e();m=!m,i(m),r.p=!0,r.on=m,o(r),s(()=>{r.p=!1},100)}}),{render:()=>{v(),r.p||M()},point:()=>({x:r.x,y:r.y,r:r.r})}},Ve=({color:t="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:s,useScreenMeta:d,addEventClick:n,intersect:c,navigate:a}=b(),{from:e}=d();let i,r,v,M,p=0;return l(()=>{const{cx:y,cy:m,s:w}=h(),g=Math.round(w*.25);i={c:t,x:y,y:m,r:g,p:(e==="opening"||e==="devs")&&!i},r=z(i),v=$({text:"Yola",c:"#f1f1f1",x:y,y:m-g+Math.round(g*.9),fs:Math.round(g/2.6),mw:g*2,f:"Tijuf"}),M=$({text:"PopiT",c:"#ffeb3b",x:y,y:m-g+Math.round(g*1.3),fs:Math.round(g/2.3),mw:g*2,f:"Tijuf"})}),s(()=>{i.p&&o(i,!1,!0),i.p=!1}),n((y,m)=>{c({x:y,y:m},i)&&!(i!=null&&i.p)&&(p++,o(i),i.p=!0,s(()=>{p>2?a("devs"):(i!=null&&i.p&&o(i,!1,!0),i.p=!1)},200))}),{render:()=>{r(),i.p||(v(),M())},point:()=>({x:i.x,y:i.y,r:i.r})}},we=({color:t="#00dcfe",frequency:o=20})=>{const{addEventResize:l,useRandChain:h,useMeasure:s,rand:d,useTimer:n,setBackground:c,useScreenMeta:a}=b(),{from:e}=a();c(t);const i=d(0,999);let r=[],v=[];l(()=>{const u=h(i),{s:y}=s();r=[];const m=Math.round(y*.04),w=Math.round(innerWidth/m/2)-2,g=Math.round((innerWidth-2*m*w)/(w+1)),S=Math.round(innerHeight/m/2)-2,P=Math.round((innerHeight-2*m*S)/(S+1));for(let C=0;C<S;C++)for(let E=0;E<w;E++)u(u(o))<1&&r.push({x:g+m+E*m*2+g*E,y:P+m+C*m*2+P*C,r:m,c:t,p:e==="opening"?!0:u(1)>0});v=r.map(C=>z(C))});const M=()=>{n(()=>{const u=d(r.length-1);r[u]&&(r[u].p=!r[u].p),M()},750)};return e==="opening"?n(()=>{r.forEach(u=>u.p=d(1)>0),M()}):M(),{render:()=>{v.forEach(u=>u())},setIntersections:u=>{r=r.filter(({x:y,y:m,r:w})=>u(y,m,w)),v=r.map(y=>z(y))}}},ae=(t=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:s,rand:d}=b(),{getDifficultyRad:n}=N();return o=[...o.splice(d(o.length-1),o.length),...o],t||l(()=>{const{s:a}=h(),e=n(),i=Math.round(a*e),r=Math.round(innerWidth/i/2)-1,v=(innerWidth-2*i*r)/(r+1),M=Math.round(innerHeight/i/2)-1,p=(innerHeight-2*i*M)/(M+1),f=innerWidth>=innerHeight,u=f?r:M,y=f?v:p,m=f?innerWidth:innerHeight;let w=0;const g=[];for(let P=0;P<u;P++)o[w]||(w=0),g.push(`${o[w]} ${(y+i+P*i*2+y*P)/m*100}%`),w++;s(`linear-gradient(${f?"to right":"to bottom"}, ${g.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},Ee=({palette:t,retry:o,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:s,rand:d,useTimer:n,useScreenMeta:c,navigate:a,addEventClick:e,intersect:i}=b(),{from:r}=c(),{getDifficultyRad:v}=N(),M=[];let p=[],f,u,y,m={x:0,y:0,r:0};const w=S=>Array.isArray(t)?t[S]:t;return h(()=>{const{s:S}=s();M.splice(0);const P=v(),C=Math.round(S*P),E=Math.round(innerWidth/C/2)-1,x=(innerWidth-2*C*E)/(E+1),R=Math.round(innerHeight/C/2)-1,I=(innerHeight-2*C*R)/(R+1),k=innerWidth>=innerHeight;let H=0;for(let L=0;L<R;L++){for(let A=0;A<E;A++){w(H)||(H=0);const T={x:x+C+A*C*2+x*A,y:I+C+L*C*2+I*L,r:C,c:w(H),p:!0};L===0&&A===E-1?(m={x:T.x,y:T.y,r:T.r,c:T.c,p:(r==="main"||r==="gameover"||r==="gamescore")&&!m.r},f=z(m),u=Se(m)):M.push(T),H+=k?1:0}H=k?0:H+1}o&&(y=M[d(M.length-1)],n(()=>{l(y,!1,!0),y.p=!1})),p=M.map(L=>z(L))}),n(()=>{m.p&&l(m,!1,!0),m.p=!1}),o&&e((S,P)=>{i({x:S,y:P},y)&&(l(y),y.p=!0,n(()=>{a("game")},100))}),e((S,P)=>{i({x:S,y:P},m)&&(l(m),m.p=!0,n(()=>{a("main")},100))}),{render:()=>{p.forEach(S=>S()),f(),m!=null&&m.p||u()},popits:M,pausePpt:m}},Y=100,K="#222",Ke=t=>{const o=(t==null?void 0:t[0])||0,l=(t==null?void 0:t[1])||0,h=(t==null?void 0:t[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},re={},Je=t=>{const{ctx:o,createImg:l,useRandChain:h,useTimer:s}=b();let d,n=!1,c=[];const a=t.r*2/Y/2;re[t.imgSrc]?d=re[t.imgSrc]:(d=re[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},d.img.src=t.imgSrc);const e=()=>s(()=>{n=!n,e()},250),i=(f,u=o)=>{const{x:y,y:m,c:w,r:g}=f;u.fillStyle=w||"red",u.beginPath(),u.arc(y+g,m+g,g,0,Math.PI*2),u.closePath(),u.fill()},r=(f=o,u=0,y=0)=>{f.fillStyle=K,f.beginPath(),f.roundRect(u,y,2*t.r,2*t.r,a),f.closePath(),f.fill()},v=()=>{const f=[];for(let g=0;g<Y;g++)for(let S=0;S<Y;S++){const P={x:S*a*2,y:g*a*2,r:a,c:K};f.push(P)}let u=t.score-t.winScore;const y=[...f],m=h(t.seed),w=(g=!1)=>{const S=m(y.length-1),P=y[S],C=f.indexOf(P);P.c=g?K:d.cols[C],y.splice(S,1),g&&c.push({...P,c:d.cols[C]})};for(let g=u;g>0;g--)w();if(t.winScore){c=[];for(let g=t.winScore;g>0;g--)w(!0);e()}return f},M=()=>{const f=v();d.drawImg=l((u=o)=>{r(u),f.filter(y=>y.c!==K).forEach(y=>i(y,u))},2*t.r)},p=async()=>{var y;const f=document.createElement("canvas");f.width=Y,f.height=Y;const u=f.getContext("2d",{willReadFrequently:!0});u==null||u.drawImage(d.img,0,0);for(let m=0;m<Y;m++){const w=[];for(let g=0;g<Y;g++){const S=(y=u==null?void 0:u.getImageData(g,m,1,1))==null?void 0:y.data;w.push(Ke(S))}d.cols.push(...w)}d.isFilled=!0,M()};return d.isFilled?(d.r!==t.r||d.score!==t.score)&&M():d.img.onload=p,(f=o)=>{const{x:u,y,r:m,winScore:w}=t;if(d.drawImg?f.drawImage(d.drawImg,u-m,y-m,2*m,2*m):r(f,u-m,y-m),n&&w&&d.drawImg)for(const g of c)f.fillStyle=g.c||"red",f.beginPath(),f.arc(u-m+g.x+g.r,y-m+g.y+g.r,g.r,0,Math.PI*2),f.closePath(),f.fill()}},ie=1e4,Ce=(t=0,o=!1)=>{const{addEventResize:l,useMeasure:h,translate:s}=b(),{getScore:d}=N(),n=["./media/levels/sloth.png","./media/levels/rabbit.png","./media/levels/bear.png","./media/levels/horse.png","./media/levels/fish.png","./media/levels/lion.png","./media/levels/elephant.png","./media/levels/tiger.png","./media/levels/crocodile.png","./media/levels/beaver.png","./media/levels/giraffe.png","./media/levels/penguin.png","./media/levels/wolf.png","./media/levels/chiken.png","./media/levels/pig.png","./media/levels/shimp.png","./media/levels/corgi.png","./media/levels/cow.png","./media/levels/deer.png","./media/levels/donkey.png","./media/levels/panda.png","./media/levels/dinosaur.png","./media/levels/rat.png","./media/levels/turtle.png","./media/levels/cockroach.png","./media/levels/parrot.png","./media/levels/kangaroo.png","./media/levels/spider.png","./media/levels/squirrel.png","./media/levels/stork.png","./media/levels/whale.png","./media/levels/cat-c.png"],c=d();let a,e=0,i=0,r=!1,v=!1;const M=g=>Math.min(Math.floor(g/ie),n.length-1);let p=M(c-t);t&&(r=M(c)!==p,v=Math.floor(c/ie)>n.length-1);const f=()=>{const{cx:g,cy:S,s:P,isL:C}=h();a=[],e=(P-2*P*.055*1.6)/2,i=P*.05;let E=o?p:Math.max(p-1,0);for(E;E<(o?p+1:Math.min(p+2,n.length));E++){const x=n[E],R=C?g:g+E*e*2+E*i,I=C?S+E*e*2+E*i:S;a.push(Je({x:R,y:I,r:e,score:Math.min(c-E*ie,1e4),imgSrc:x,winScore:r||v?0:t,seed:E}))}};return l(f),{up:()=>{p=p+1<n.length?p+1:n.length-1,f()},down:()=>{p=p-1<0?0:p-1,f()},render:()=>{const{isL:g}=h(),S=g?0:-(p*e*2+p*i),P=g?-(p*e*2+p*i):0;s(()=>{a==null||a.forEach(C=>C())},S,P)},rect:()=>{const{cx:g,cy:S}=h(),P=innerWidth>innerHeight;return{x:P?g-e:0,y:P?0:S-e,w:P?2*e:innerWidth,h:P?innerHeight:2*e}},isJump:r,isCompleted:v}},Qe=({popits:t,pausePpt:o,popEffect:l=()=>{},splashEffect:h=()=>{}})=>{const{useTimer:s,rand:d,addEventClick:n,addEventMove:c,intersect:a,navigate:e,addEventResize:i}=b(),{getScore:r,addScore:v,getDifficultyTic:M}=N();let p=[],f,u,y=!1,m=0,w=0,g=0,S,P,C=!1;const E=r(),x=M(),R=()=>{S&&P&&w&&!C&&new Date().getTime()-S.getTime()<=P*350&&(w=w*2),S=new Date,P=p.length,C=!1},I=T=>{const D=t.filter(B=>p.indexOf(B)===-1&&B!==T),_=d(D.length-1),W=D[_];W&&(l(W,!1,!0),W.p=!1,p.push(D[_]))},k=()=>{u=s(()=>{if(g=Math.max(g-10,50),t.length===p.length){y=!0,u==null||u.stop(),s(()=>{e("gameover")});return}I(),k()},g)},H=T=>{p=[];const D=t.length;let _=d(Math.round(D*.3),Math.round(D*.6));for(const B of t)B.p=!0;const W=[...t];if(T){const B=W.indexOf(T);W.splice(B,1)}for(let B=_;B>0;B--){const de=d(W.length-1),Z=W[de];Z.p=!1,l(Z,!1,!0),p.push(Z),W.splice(de,1)}g=x,f==null||f.stop(),u==null||u.stop(),u=null,E&&(f=s(()=>{h("SLOWLY"),k()},p.length*x)),m=m>0?m:d(3,5),R()},L=T=>{l(T),g=Math.min(g+5,x),w++,T.p=!0;const D=p.indexOf(T);p.splice(D,1),p.length<=0&&(m--,m>0?s(()=>{h(m>1?"Round":"Last"),H(T)},100):(R(),f==null||f.stop(),u==null||u.stop(),v(w),s(()=>{e("gamescore",{winScore:w})},100)))},A=(T,D,_=!1)=>{if(!y){for(const W of p)if(a({x:T,y:D},W)){L(W);return}if(!a({x:T,y:D},o)&&!_){for(const W of t)if(a({x:T,y:D},W)){l(W,!0),h("Popenalty"),C=!0,I(W),u===null&&(f==null||f.stop(),k());return}h("Popenalty"),C=!0,I()}}};n(A),c((T,D)=>A(T,D,!0)),i(()=>{s(()=>{h("Pop it"),H()})})},Ze=t=>{const{addEventResize:o,createImg:l,useMeasure:h,ctx:s,loop:d}=b();let n,c,a,e,i,r,v,M=!1,p=-2;const f=.1;return o(()=>{const{s:u,m:y,cy:m}=h();c=Math.round(u*.16),i=u,r=Math.round(c*1.5),a=0,e=Math.max(Math.round((innerHeight-m-u/2)/2-c/2)+y*4,Math.round(m-u/2-c*2)),v=e,M=e-c/2>-(c/2)+y*2;const w={fs:c,text:t,x:Math.round(u/2),y:c,c:"#f9f9f9",mw:Math.round(u*.8),f:"PressStart2P"},g=$(w);n=l((S=s)=>{g(S)},i,r)}),d(()=>{const{m:u}=h();e+=p,p+=f,e<=u&&(e=u),e>=v&&(e=v,p=-2)}),()=>{M&&s.drawImage(n,a,e,i,r)}},et=()=>{const{addEventResize:t,rand:o,useScreenMeta:l,sdk:h}=b(),{from:s}=l();s==="opening"?h.ready():s==="game"&&(h.gameplayStop(),h.showFullscreenAdv());const{popEffect:d,render:n}=X(),c=["#00dcfe","#5bb2f7","#92E6E6"],a=s==="opening"?c[0]:c[o(c.length-1)],{render:e,setIntersections:i}=we({color:a}),{render:r,point:v}=Ve({popEffect:d}),{render:M,point:p}=Pe({popEffect:d}),{render:f,point:u}=Ne({popEffect:d}),{render:y,point:m}=Ue({popEffect:d});return t(()=>{const w=u(),g=v(),S=p(),P=m();i((C,E,x)=>!O({x:C,y:E,r:x},w)&&!O({x:C,y:E,r:x},g)&&!O({x:C,y:E,r:x},S)&&!O({x:C,y:E,r:x},P))}),()=>{n(),e(),r(),M(),f(),y()}},tt=()=>{const{useMeasure:t,addEventResize:o,sdk:l}=b();l.gameplayStart();const h=ae(),{popEffect:s,render:d}=X(),{popits:n,render:c,pausePpt:a}=Ee({palette:h,popEffect:s});return Qe({popits:n,popEffect:s,pausePpt:a}),o(()=>{(n[0].y-n[0].r)/t().m}),()=>{d(),c()}},nt=()=>{const{setBackground:t,sdk:o}=b();o.gameplayStop();const l="#ff6347",{popEffect:h,render:s}=X(),{minusDifficulty:d}=N(),{render:n}=Ee({palette:l,retry:!0,popEffect:h}),{playFail:c}=V();return t(l),d(),c(),()=>{s(),n()}},ot=()=>{const{useScreenMeta:t,useTimer:o,navigate:l,sdk:h}=b();h.gameplayStop();const{plusDifficulty:s,resetDifficulty:d}=N(),n=ce(),{data:c}=t(),{popEffect:a,render:e}=X();ae();const{playWin:i,playComplete:r}=V(),{render:v,isJump:M,isCompleted:p}=Ce(c==null?void 0:c.winScore,!0);let f,u;if(!p){const{render:m}=Pe({popEffect:a}),{render:w}=Xe({popEffect:a});f=m,u=w}const y=Ze(p?n.theEnd:M?n.complete:n.youWin);return M||p?(d(),r()):(s(),i()),p&&o(()=>{l("devs")},5e3),()=>{e(),v(),p||(f(),u()),y()}},st=()=>{const{addEventResize:t,rand:o,sdk:l}=b(),{popEffect:h,render:s}=X(),d=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],n=d[o(d.length-1)],{render:c,setIntersections:a}=we({color:n,frequency:10});l.showBannerAdv();const{render:e,rect:i,up:r,down:v}=Ce(),{render:M,point:p}=Me({popEffect:h}),{render:f,point:u}=Ye({onClick:r,popEffect:h}),{render:y,point:m}=Ge({onClick:v,popEffect:h});return t(()=>{const w=p(),g=i(),S=u(),P=m();a((C,E,x)=>!O({x:C,y:E,r:x},w)&&!ze({x:C,y:E,r:x},g)&&!O({x:C,y:E,r:x},S)&&!O({x:C,y:E,r:x},P))}),()=>{s(),c(),e(),M(),f(),y()}},rt=()=>{var g,S;const{addEventResize:t,setBackground:o,createImg:l,useMeasure:h,ctx:s,loop:d,navigate:n,useTimer:c}=b(),{popEffect:a,render:e}=X();let i=null;const r=ae(!0),v=ce();let M=[];const p=v.positions;let f=0,u=!1;const y=()=>{const{m:P,s:C}=h();M=[];const E=Math.round(C*.75),x=Math.round((innerWidth-E)/2);let R=0,I=Math.round(P*7);const k=$({text:"Yola",c:"#f1f1f1",x:E/2,y:I,fs:I}),H=$({text:"PopiT",c:"#ffeb3b",x:E/2,y:I*2,fs:I}),L=l((A=s)=>{k(A),H(A)},E,3*I);M.push({img:L,x,y:f,w:E,h:5*I}),f+=7*I,I=Math.round(P*3.5);for(const A of p){r[R]||(R=0);const T=$({text:A.toLocaleUpperCase(),x:0,y:I,c:r[R],fs:Math.round(I*.6),mw:E,a:"left",f:"PressStart2P"}),D=$({text:v.dev,x:E,y:I*1.9,c:"#f9f9f9",fs:Math.round(I*.5),mw:E,a:"right",f:"PressStart2P"}),_=l((W=s)=>{T(W),D(W)},E,2*I);M.push({img:_,x,y:f,w:E,h:5*I}),f+=5*I,R++}};t(y),o("#040404");const m=()=>{for(const C of M)C.y-=2;const P=M[M.length-1];P.y+P.h<0&&n("main")},w=()=>{f=innerHeight,y(),d(m),u=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(S=document==null?void 0:document.fonts)==null||S.ready.then(w):w(),c(()=>{const{render:P}=Me({popEffect:a});i=P},7500),()=>{s.globalAlpha=u?1:0,M.forEach(({img:P,x:C,y:E,w:x,h:R})=>{E+R>=0&&E<=innerHeight&&s.drawImage(P,C,E,x,R)}),e(),i==null||i(),s.globalAlpha=1}},it=()=>({ready:()=>{},showFullscreenAdv:()=>{},gameplayStart:()=>{},gameplayStop:()=>{},showBannerAdv:()=>{}}),ct=[{name:"opening",ctor:Oe},{name:"main",ctor:et},{name:"game",ctor:tt},{name:"gameover",ctor:nt},{name:"gamescore",ctor:ot},{name:"score",ctor:st},{name:"devs",ctor:rt}],at=["./sounds/pop/pop1.mp3","./sounds/pop/pop2.mp3","./sounds/pop/pop3.mp3","./sounds/pop/pop4.mp3","./sounds/pop/pop5.mp3","./sounds/pop/pop6.mp3","./sounds/pop/pop7.mp3","./sounds/pop/pop8.mp3","./sounds/pop/pop9.mp3","./sounds/pop/pop10.mp3","./sounds/pop/pop11.mp3","./sounds/pop/pop12.mp3","./sounds/pop/pop13.mp3","./sounds/pop/pop14.mp3","./sounds/pop/pop15.mp3","./sounds/pop/pop16.mp3","./sounds/pop/pop17.mp3","./sounds/pop/pop18.mp3","./sounds/pop/pop19.mp3","./sounds/pop/pop20.mp3","./sounds/pop/pop21.mp3","./sounds/pop/pop22.mp3","./sounds/pop/pop23.mp3","./sounds/pop/pop24.mp3","./sounds/fail.mp3","./sounds/wrong.mp3","./sounds/win.mp3","./sounds/complete.mp3"];document.title="Yo last Pop it";document.body.oncontextmenu=()=>!1;const dt=async()=>{const t="production";let o;o=it(),"serviceWorker"in navigator&&t!=="development"&&navigator.serviceWorker.register("./sw.js",{scope:"./"}),Fe(ct,at,o)};dt();
