(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const t of c.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&f(t)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const Ce=()=>{const n=document.createElement("canvas"),o=n.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const a=()=>{n.width=innerWidth*devicePixelRatio,n.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),n.style.width=`${innerWidth}px`,n.style.height=`${innerHeight}px`},f=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return a(),document.body.appendChild(n),{ctx:o,render:f,resize:a,rotate:(e,i,s,M)=>{o.save(),o.translate(i,s),o.rotate(Math.PI*M),o.translate(-i,-s),e(),o.restore()},translate:(e,i,s)=>{o.save(),o.translate(i,s),e(),o.restore()},shade:(e,i)=>{e=e.substring(1);const s=parseInt(e,16),M=Math.round(2.55*i),v=(s>>16)+M,p=(s>>8&255)+M,u=(s&255)+M;return"#"+(16777216+(v<255?v<1?0:v:255)*65536+(p<255?p<1?0:p:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},setBackground:(e,i)=>{var s;document.body.style.background=e,document.body.style.backgroundColor=i||e,(s=document.querySelector('meta[name="theme-color"]'))==null||s.setAttribute("content",i||e)},createImg:(e,i,s=i)=>{const M=document.createElement("canvas"),v=M.getContext("2d");if(!v)throw new Error("CanvasRenderingContext2D is null");return M.width=i*devicePixelRatio,M.height=s*devicePixelRatio,v.scale(devicePixelRatio,devicePixelRatio),e(v),M}}},xe=n=>{let o="",a="",f;const r=d=>n.find(l=>l.name===d)||n[0],t={render:()=>{},navigate:(d,l)=>{const e=r(d);a=o||"",o=(e==null?void 0:e.name)||"",f=l,t.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:a,data:f})};return t},Re=()=>{const n=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),o=[],a={};return{loop:(t,d)=>{if(Object.entries(a).find(([e,i])=>i===t)||d&&a[d])throw new Error(`Loop${d?" "+d:""} already specified`);d&&o.push(d),d=d||new Date().valueOf().toString(),a[d]=t;const l=()=>{t(),a[d]&&n(l)};l()},stop:t=>{if(typeof t=="string")delete a[t];else{const d=Object.entries(a).find(([l,e])=>e===t);d&&delete a[d[0]]}},stopAll:()=>{for(const t in a)o.indexOf(t)===-1&&delete a[t]}}};let J=[];const be=()=>{for(const n of J)clearTimeout(n);J=[]},Ie=(n,o=400)=>{let a=new Date,f=o,r=setTimeout(n,f);return J.push(r),{pause:()=>{clearTimeout(r),f-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(n,f),J.push(r)},stop:()=>{clearTimeout(r)}}},de=2147483646,ee=2147483647,Te=16807,ke=(n=Math.floor(Math.random()*ee))=>{n=n%ee,n<=0&&(n+=de);const o=()=>(n=n*Te%ee,n),a=()=>(o()-1)/de;return(r,c)=>(c===void 0&&(c=r,r=0),Math.floor(a()*(c-r+1))+r)},We=(n,o)=>(o===void 0&&(o=n,n=0),Math.floor(Math.random()*(o-n+1))+n),De=()=>{const n=[],o=[],a=[];return{addEventResize:i=>{i(),n.push(i)},onResizeEvents:()=>n.forEach(i=>i()),addEventClick:i=>o.push(i),onClickEvents:(i,s)=>o.forEach(M=>M(i,s)),addEventMove:i=>a.push(i),onMoveEvents:(i,s)=>a.forEach(M=>M(i,s)),removeAllEvents:()=>{n.splice(0),o.splice(0),a.splice(0)}}},_=(n,o)=>{const a=Math.pow(Math.abs(n.x-o.x),2),f=Math.pow(Math.abs(n.y-o.y),2),r=n.r||0,c=o.r||0,t=Math.pow(r+c,2);return a+f<=t},Ae=(n,o)=>{const a=n.r||0,f=o.w||0,r=o.h||0;return Math.abs(o.x+f/2-n.x)<=f/2+a&&Math.abs(o.y+r/2-n.y)<=r/2+a},He=(n,o)=>_(n,o),ze=n=>{const o=new AudioContext,a={},f=c=>{fetch(c).then(t=>t.arrayBuffer()).then(t=>(o==null?void 0:o.decodeAudioData(t))||null).then(t=>{t&&(a[c]=t)})};if(n.length)for(const c of n)f(c);return(c,t)=>{setTimeout(async()=>{const d=o.createBufferSource();a[c]||(a[c]=await fetch(c).then(l=>l.arrayBuffer()).then(l=>(o==null?void 0:o.decodeAudioData(l))||null)),d.buffer=a[c],d.connect(o.destination),t&&(d.playbackRate.value=t),d.start()},0)}};let Q;const Le=(n,o)=>{if(Q)throw new Error("Webcore already specified");const a=Ce(),f=xe(n),{loop:r,stop:c,stopAll:t}=Re(),{addEventResize:d,onResizeEvents:l,addEventClick:e,onClickEvents:i,addEventMove:s,onMoveEvents:M,removeAllEvents:v}=De();let p=innerWidth/2,u=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight;const P=()=>({cx:p,cy:u,s:h,m:w,isL:g}),m=ze(o);Q={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:P,useScreenMeta:f.useScreenMeta,navigate:(y,E)=>{if(!n.some(S=>S.name===y))throw new Error(`Screen ${y} not specified`);t(),be(),v(),new Promise(()=>f.navigate(y,E))},loop:r,loopStop:c,useTimer:Ie,rand:We,useRandChain:ke,intersect:He,addEventResize:d,addEventClick:e,addEventMove:s,playSound:m},r(()=>a.render(f.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,h=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight,a.resize(),l()},document.onpointerdown=y=>{i(y.clientX,y.clientY)},document.onmousemove=y=>{M(y.clientX,y.clientY)},f.navigate()},x=()=>{if(!Q)throw new Error("Webcore not specified");return{...Q}},te={},W=n=>{const{shade:o,ctx:a,createImg:f}=x(),r=()=>{const{r:t,c:d="#ffffff",p:l}=n,e=a.createRadialGradient(t,t,t,t,t,t/5);return e.addColorStop(0,o(d,0)),e.addColorStop(.01,o(d,0)),e.addColorStop(.075,o(d,9)),e.addColorStop(.15,o(d,0)),e.addColorStop(.15,o(d,-15)),e.addColorStop(.18,o(d,-5)),e.addColorStop(.22,o(d,-15)),l?(e.addColorStop(.24,o(d,-10)),e.addColorStop(.3,o(d,-8)),e.addColorStop(.34,o(d,-12)),e.addColorStop(.6,o(d,-8)),e.addColorStop(1,o(d,-6))):(e.addColorStop(.24,o(d,-12)),e.addColorStop(.26,o(d,-8)),e.addColorStop(.3,o(d,-2)),e.addColorStop(.34,o(d,0)),e.addColorStop(.5,o(d,5)),e.addColorStop(1,o(d,18))),e},c=()=>{const{r:t,c:d="#ffffff",p:l}=n,e=`${d}_${l?"push":"pop"}_${t}`;if(te[e])return te[e];const i=f((s=a)=>{const M=r();s.fillStyle=M,s.beginPath(),s.arc(t,t,t,0,2*Math.PI),s.closePath(),s.fill()},2*t);return te[e]=i,i};return(t=a)=>{const{x:d,y:l,r:e}=n,i=c();t.drawImage(i,d-e,l-e,2*e,2*e)}},ne={},q=n=>{const{ctx:o}=x();let a;return ne[n.src]?a=ne[n.src]:(a=new Image,a.src=n.src,ne[n.src]=a),(f=o)=>{const{w:r,h:c=r,x:t=0,y:d=0}=n;a.complete&&f.drawImage(a,t,d,r,c)}},le=n=>{const{font:o,ctx:a}=x(),f=n.text,r=n.text.length,c=2*Math.PI/r/4;return(t=a)=>{const{x:d,y:l,r:e,s:i=0,fs:s}=n,M=s||Math.round(e/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${M}px ${o}`,t.save(),t.translate(d,l),t.rotate(i);for(let v=0;v<r;v++)t.save(),t.rotate(v*c),t.fillText(f[v],0,-e),t.restore();t.restore()}},Fe=()=>{var g,P;const{ctx:n,loop:o,rotate:a,navigate:f,useMeasure:r,addEventClick:c,addEventResize:t,setBackground:d}=x();d("#040404");let l=!1,e,i,s,M,v,p=-.2,u=0;t(()=>{const{cx:m,cy:y,s:E}=r(),S=Math.round(E*.25);e={c:"#ff6347",x:m,y,r:S,p:!1},i=W(e),s=q({x:m-S+Math.round(S*.35),y:y-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),M=le({text:"nezabotin",x:m,y,r:Math.round(S*1.1),s:Math.PI*1.6}),v=le({text:"production",x:m,y,r:Math.round(S*1.1),s:Math.PI*2.6})});const h=()=>{p+=.01,u=p>=1?1:p,p>=1.8&&(e.p=!0),p>=2.2&&(e.c="#f86a9a"),p>=2.6&&f("main")};c(()=>{[1.4,1.8,2.2,2.6].some(m=>{if(p<m)return p=m,!0})});const w=()=>{o(h),l=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(P=document==null?void 0:document.fonts)==null||P.ready.then(w):w(),()=>{const{cx:m,cy:y}=r();n.globalAlpha=l?1:0,i(),p<1.8&&s(),p<1.4&&a(()=>{M(),v()},m,y,u),n.globalAlpha=1}},ue="ylp",pe="score",oe="difficulty",fe="sound",se=[.14,.11,.09,.075],he=750,_e=350,me=5,N=[];for(let n=0;n*me<=he-_e;n++)N.push(he-n*me);let X=null;const B=()=>{const n=p=>localStorage.getItem(`${ue}_${p}`),o=(p,u)=>localStorage.setItem(`${ue}_${p}`,u.toString()),a=()=>+(n(pe)||0),f=p=>o(pe,p),r=p=>{const u=a();f(u+p)},c=()=>+(n(oe)||0),t=p=>{const u=c();o(oe,Math.min(Math.max(u+p,0),se.length*N.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const p=c(),u=Math.floor(p/N.length);return se[u]||se[1]},getDifficultyTic:()=>{const p=c(),u=Math.floor(p/N.length),h=p-u*N.length;return N[h]||N[0]},resetDifficulty:()=>o(oe,0),getSound:()=>{if(X!==null)return X;const p=n(fe);return!p||p==="true"?(X=!0,!0):(X=!1,!1)},setSound:p=>{X=p,o(fe,p)}}};let ye=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3"],H=[...ye];const K=()=>{const{rand:n,playSound:o}=x(),{getSound:a}=B();return{playPop:()=>{if(!a())return;const l=n(H.length-1),e=H[l];H.splice(l,1),H.length||(H=[...ye]);const i=n(H.length-1);H=[...H.splice(i,H.length),...H],o(e,1.2)},playMissed:()=>{if(!a())return;o("/sounds/new/wrong.mp3")},playFail:()=>{if(!a())return;o("/sounds/fail-fast.mp3")},playWin:()=>{if(!a())return;o("/sounds/win.mp3")},playComplete:()=>{if(!a())return;o("/sounds/complete.mp3")}}},G=100/2;let ge=0;const j=()=>{const{loop:n,ctx:o,shade:a,rand:f}=x(),{playPop:r,playMissed:c}=K(),t={},d=()=>{for(const i in t){const s=t[i];if(!s)return;const M=s.popit;if(!s.shake)s.tic+=G/5,s.tic>=G&&(s.dir=-1),s.withoutRad||(M.r=s.origR+s.origR*75e-5*(s.tic+(s.dir>0?0:G-s.tic)));else{s.tic+=G/5;const v=f(1,2),p=f(1,2);M.x=s.origX+Math.random()*v*(Math.random()>.5?1:-1),M.y=s.origY+Math.random()*p*(Math.random()>.5?1:-1)}s.tic>=2*G&&(delete t[i],M.r=s.origR,M.x=s.origX,M.y=s.origY)}},l=(i,s=!1,M=!1)=>{var P;s?c():r(),(P=navigator==null?void 0:navigator.vibrate)==null||P.call(navigator,30),ge++;const v=`${new Date().valueOf().toString()}_${ge}`,p=1,u=1;let h=i.r,w=i.x,g=i.y;for(const m in t){const y=t[m];i===y.popit&&(h=y.origR,w=y.origX,g=y.origY)}t[v]={withoutRad:s,tic:p,dir:u,popit:i,origR:h,origX:w,origY:g,shake:M}},e=()=>{o.globalAlpha=.25;for(const i in t){const s=t[i];if(s.shake)continue;const M=s.popit;o.fillStyle=a(M.c||"red",-12),o.beginPath(),o.arc(M.x,M.y,M.r+s.origR*.001*(s.tic+(s.dir>0?0:G-s.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return n(d),{popEffect:l,render:e}},V=n=>{const{font:o,ctx:a}=x();return(f=a)=>{const{text:r,x:c,c:t,y:d,fs:l,a:e="center",mw:i,f:s}=n;f.textAlign=e,f.fillStyle=t,f.font=`${l}px ${s||o}`,f.fillText(r,c,d,i)}},Be=({color:n="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,navigate:t,addEventClick:d,intersect:l}=x(),{from:e}=c();let i,s,M;return a(()=>{const{cx:u,cy:h,s:w,m:g}=f(),P=Math.round(w*.25);i={c:n,r:Math.round(w*.08),x:u-P-1*g,y:h-P+1*g,p:(e==="score"||e==="opening"||e==="devs")&&!i},s=W(i),M=q({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),r(()=>{i.p&&o(i,!1,!0),i.p=!1}),d((u,h)=>{l({x:u,y:h},i)&&(o(i),i.p=!0,r(()=>{t("score")},100))}),{render:()=>{s(),i.p||M()},point:()=>({x:i.x,y:i.y,r:i.r})}},Me=({color:n="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,navigate:c,addEventClick:t,intersect:d}=x();let l,e,i;return a(()=>{const{s:v}=f(),p=Math.round(v*.08);l={c:n,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:!l},e=W(l),i=q({x:Number(l.x)-p+Math.round(p*.4),y:Number(l.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{l.p&&o(l,!1,!0),l.p=!1}),t((v,p)=>{d({x:v,y:p},l)&&(o(l),l.p=!0,r(()=>{c("main")},100))}),{render:()=>{e(),l.p||i()},point:()=>({x:l.x,y:l.y,r:l.r})}},Oe=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,addEventClick:c,intersect:t,rotate:d}=x(),{playPop:l}=K();let e,i,s;return a(()=>{const{s:p}=f(),u=Math.round(p*.08);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},i=W(e),s=q({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),c((p,u)=>{t({x:p,y:u},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),r(()=>{e!=null&&e.p&&o(e,!1,!0),e.p=!1},200))}),{render:()=>{i(),e.p||d(()=>{s()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},$e=({onClick:n,popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,addEventClick:c,intersect:t,rotate:d}=x(),{playPop:l}=K();let e,i,s;return a(()=>{const{s:p}=f(),u=Math.round(p*.08),h=innerWidth<innerHeight?Math.round(innerWidth-1.6*u-2*u-.3*u):Math.round(innerWidth-1.6*u),w=innerWidth<innerHeight?Math.round(innerHeight-1.6*u):Math.round(innerHeight-1.6*u-2*u-.3*u);e={c:"#ff6347",r:u,x:h,y:w,p:!1},i=W(e),s=q({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),c((p,u)=>{t({x:p,y:u},e)&&(l(),e!=null&&e.p||o(e),e.p=!0,n(),r(()=>{e!=null&&e.p&&o(e,!1,!0),e.p=!1},200))}),{render:()=>{i(),e.p||d(()=>{s()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Ne=n=>{const{ctx:o,shade:a}=x(),f=Math.round(n.r/2.2),r=Math.round(.15*n.r),c=a(n.c||"blue",-3);return(t=o)=>{const{r:d,x:l=d,y:e=d}=n;t.lineCap="round",t.fillStyle=c,t.strokeStyle=c,t.lineWidth=f,t.beginPath(),t.moveTo(l+r,e),t.lineTo(l-r/2,e-r),t.lineTo(l-r/2,e+r),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l+r,e),t.lineTo(l-r/2,e-r),t.moveTo(l-r/2,e-r),t.lineTo(l-r/2,e+r),t.moveTo(l-r/2,e+r),t.lineTo(l+r,e),t.stroke()}},we=({color:n="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,navigate:t,addEventClick:d,intersect:l}=x(),{from:e,to:i}=c();let s,M,v;const p=()=>{const{cx:P,cy:m,s:y,m:E}=f(),S=P+Math.round(y*.25)+2*E,C=m+Math.round(y*.25);return{x:S,y:C}},u=()=>{const{cx:P,cy:m,s:y,isL:E,m:S}=f(),C=Math.round(y*.1);if(E){let b=Math.round(P+y/2)+S*2;const I=Math.round(m+y/2-C*2);return b=Math.min(b,Math.round(innerWidth-C*1.5)),{x:b,y:I}}else{const b=Math.round(P+y*.12);let I=Math.round(m+y/2+C*1.5);return I=Math.min(I,innerHeight-Math.round(C*1.5)),{x:b,y:I}}},h=()=>i==="main"?p():u();return a(()=>{const{s:P}=f();s={c:n,r:Math.round(P*.1),...h(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!s},M=W(s),v=Ne(s)}),r(()=>{s.p&&o(s,!1,!0),s.p=!1}),d((P,m)=>{l({x:P,y:m},s)&&(o(s),s.p=!0,r(()=>{t("game")},100))}),{render:()=>{M(),s.p||v()},point:()=>({x:s.x,y:s.y,r:s.r})}},ve=n=>{const{ctx:o,shade:a}=x(),f=Math.round(n.r/4),r=Math.round(.12*n.r);return(c=o)=>{const{r:t,x:d=t,y:l=t}=n,e=a(n.c||"blue",-3);c.lineCap="round",c.strokeStyle=e,c.lineWidth=f,c.beginPath(),c.moveTo(d-1.5*r,l-2*r),c.lineTo(d-1.5*r,l+2*r),c.stroke(),c.beginPath(),c.moveTo(d+1.5*r,l-2*r),c.lineTo(d+1.5*r,l+2*r),c.stroke()}},Ye=({popEffect:n=()=>{}})=>{const{addEventResize:o,useMeasure:a,useTimer:f,useScreenMeta:r,navigate:c,addEventClick:t,intersect:d}=x(),{from:l}=r();let e,i,s;const M=()=>{const{cx:u,cy:h,s:w,isL:g,m:P}=a(),m=Math.round(w*.1);if(g){let y=Math.round(u-w/2)-P;const E=Math.round(h-w/2+m*2);return y=Math.max(y,Math.round(m*1.5)),{x:y,y:E}}else{const y=Math.round(u-w*.12);let E=Math.round(h+w/2+m*1.5);return E=Math.min(E,innerHeight-Math.round(m*1.5)),{x:y,y:E}}};return o(()=>{const{s:u}=a();e={c:"#fd8059",r:Math.round(u*.08),...M(),p:(l==="game"||l==="opening")&&!e},i=W(e),s=ve(e)}),f(()=>{e.p&&n(e,!1,!0),e.p=!1},500),t((u,h)=>{d({x:u,y:h},e)&&(n(e),e.p=!0,f(()=>{c("main")},100))}),{render:()=>{i(),e.p||s()},point:()=>({x:e.x,y:e.y,r:e.r})}},Ge=n=>{const{ctx:o,shade:a}=x(),f=Math.round(n.r/4),r=Math.round(.2*n.r),c=a(n.c||"blue",-5);return(t=o)=>{const{r:d,x:l=d,y:e=d}=n;t.lineCap="round",t.fillStyle=c,t.strokeStyle=c,t.lineWidth=f,t.beginPath(),t.ellipse(l-r,e+r,f,r,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l-r/2,e+r),t.lineTo(l,e-r),t.lineTo(l+r,e-r),t.stroke(),n.on||(t.lineWidth=Math.round(f/3),t.beginPath(),t.moveTo(l-d/4,e-d/4),t.lineTo(l+d/4,e+d/4),t.stroke())}},je=({color:n="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,addEventClick:t,intersect:d}=x(),{from:l}=c(),{getSound:e,setSound:i}=B();let s,M,v;return a(()=>{const{cx:h,cy:w,s:g,m:P}=f(),m=Math.round(g*.25),y=Math.round(g*.065),E=e();s={c:n,r:y,x:h-m-y-P,y:w-m+3*y,p:(l==="opening"||l==="devs")&&!s,on:E},M=W(s),v=Ge(s)}),r(()=>{s.p&&o(s,!1,!0),s.p=!1}),t((h,w)=>{if(d({x:h,y:w},s)){let g=e();g=!g,i(g),s.p=!0,s.on=g,o(s),r(()=>{s.p=!1},100)}}),{render:()=>{M(),s.p||v()},point:()=>({x:s.x,y:s.y,r:s.r})}},Xe=({color:n="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,addEventClick:t,intersect:d,navigate:l}=x(),{from:e}=c();let i,s,M,v,p=0;return a(()=>{const{cx:w,cy:g,s:P}=f(),m=Math.round(P*.25);i={c:n,x:w,y:g,r:m,p:(e==="opening"||e==="devs")&&!i},s=W(i),M=V({text:"Yola",c:"#f1f1f1",x:w,y:g-m+Math.round(m*.9),fs:Math.round(m/2.6),mw:m*2}),v=V({text:"PopiT",c:"#ffeb3b",x:w,y:g-m+Math.round(m*1.3),fs:Math.round(m/2.3),mw:m*2})}),r(()=>{i.p&&o(i,!1,!0),i.p=!1}),t((w,g)=>{d({x:w,y:g},i)&&!(i!=null&&i.p)&&(p++,o(i),i.p=!0,r(()=>{p>50?l("devs"):(i!=null&&i.p&&o(i,!1,!0),i.p=!1)},200))}),{render:()=>{s(),i.p||(M(),v())},point:()=>({x:i.x,y:i.y,r:i.r})}},Pe=({color:n="#00dcfe",frequency:o=20})=>{const{addEventResize:a,useRandChain:f,useMeasure:r,rand:c,useTimer:t,setBackground:d,useScreenMeta:l}=x(),{from:e}=l();d(n);const i=c(0,999);let s=[],M=[];a(()=>{const h=f(i),{s:w}=r();s=[];const g=Math.round(w*.04),P=Math.round(innerWidth/g/2)-2,m=Math.round((innerWidth-2*g*P)/(P+1)),y=Math.round(innerHeight/g/2)-2,E=Math.round((innerHeight-2*g*y)/(y+1));for(let S=0;S<y;S++)for(let C=0;C<P;C++)h(h(o))<1&&s.push({x:m+g+C*g*2+m*C,y:E+g+S*g*2+E*S,r:g,c:n,p:e==="opening"?!0:h(1)>0});M=s.map(S=>W(S))});const v=()=>{t(()=>{const h=c(s.length-1);s[h]&&(s[h].p=!s[h].p),v()},750)};return e==="opening"?t(()=>{s.forEach(h=>h.p=c(1)>0),v()}):v(),{render:()=>{M.forEach(h=>h())},setIntersections:h=>{s=s.filter(({x:w,y:g,r:P})=>h(w,g,P)),M=s.map(w=>W(w))}}},ce=(n=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:f,setBackground:r,rand:c}=x(),{getDifficultyRad:t}=B();return o=[...o.splice(c(o.length-1),o.length),...o],n||a(()=>{const{s:l}=f(),e=t(),i=Math.round(l*e),s=Math.round(innerWidth/i/2)-1,M=(innerWidth-2*i*s)/(s+1),v=Math.round(innerHeight/i/2)-1,p=(innerHeight-2*i*v)/(v+1),u=innerWidth>=innerHeight,h=u?s:v,w=u?M:p,g=u?innerWidth:innerHeight;let P=0;const m=[];for(let E=0;E<h;E++)o[P]||(P=0),m.push(`${o[P]} ${(w+i+E*i*2+w*E)/g*100}%`),P++;r(`linear-gradient(${u?"to right":"to bottom"}, ${m.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},Se=({palette:n,retry:o,popEffect:a=()=>{}})=>{const{addEventResize:f,useMeasure:r,rand:c,useTimer:t,useScreenMeta:d,navigate:l,addEventClick:e,intersect:i}=x(),{from:s}=d(),{getDifficultyRad:M}=B(),v=[];let p=[],u,h,w,g={x:0,y:0,r:0};const P=y=>Array.isArray(n)?n[y]:n;return f(()=>{const{s:y}=r();v.splice(0);const E=M(),S=Math.round(y*E),C=Math.round(innerWidth/S/2)-1,b=(innerWidth-2*S*C)/(C+1),I=Math.round(innerHeight/S/2)-1,z=(innerHeight-2*S*I)/(I+1),L=innerWidth>=innerHeight;let A=0;for(let D=0;D<I;D++){for(let F=0;F<C;F++){P(A)||(A=0);const R={x:b+S+F*S*2+b*F,y:z+S+D*S*2+z*D,r:S,c:P(A),p:!0};D===0&&F===C-1?(g={x:R.x,y:R.y,r:R.r,c:R.c,p:(s==="main"||s==="gameover"||s==="gamescore")&&!g.r},u=W(g),h=ve(g)):v.push(R),A+=L?1:0}A=L?0:A+1}o&&(w=v[c(v.length-1)],t(()=>{a(w,!1,!0),w.p=!1})),p=v.map(D=>W(D))}),t(()=>{g.p&&a(g,!1,!0),g.p=!1}),o&&e((y,E)=>{i({x:y,y:E},w)&&(a(w),w.p=!0,t(()=>{l("game")},100))}),e((y,E)=>{i({x:y,y:E},g)&&(a(g),g.p=!0,t(()=>{l("main")},100))}),{render:()=>{p.forEach(y=>y()),u(),g!=null&&g.p||h()},popits:v,pausePpt:g}},$=100,U="#222",Ve=n=>{const o=(n==null?void 0:n[0])||0,a=(n==null?void 0:n[1])||0,f=(n==null?void 0:n[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(a<255?a<1?0:a:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},re={},qe=n=>{const{ctx:o,createImg:a,useRandChain:f,useTimer:r}=x();let c,t=!1,d=[];const l=n.r*2/$/2;re[n.imgSrc]?c=re[n.imgSrc]:(c=re[n.imgSrc]={img:new Image,cols:[],isFilled:!1,r:n.r,drawImg:null,score:n.score},c.img.src=n.imgSrc);const e=()=>r(()=>{t=!t,e()},250),i=(u,h=o)=>{const{x:w,y:g,c:P,r:m}=u;h.fillStyle=P||"red",h.beginPath(),h.arc(w+m,g+m,m,0,Math.PI*2),h.closePath(),h.fill()},s=(u=o,h=0,w=0)=>{u.fillStyle=U,u.beginPath(),u.roundRect(h,w,2*n.r,2*n.r,l),u.closePath(),u.fill()},M=()=>{const u=[];for(let m=0;m<$;m++)for(let y=0;y<$;y++){const E={x:y*l*2,y:m*l*2,r:l,c:U};u.push(E)}let h=n.score-n.winScore;const w=[...u],g=f(n.seed),P=(m=!1)=>{const y=g(w.length-1),E=w[y],S=u.indexOf(E);E.c=m?U:c.cols[S],w.splice(y,1),m&&d.push({...E,c:c.cols[S]})};for(let m=h;m>0;m--)P();if(n.winScore){d=[];for(let m=n.winScore;m>0;m--)P(!0);e()}return u},v=()=>{const u=M();c.drawImg=a((h=o)=>{s(h),u.filter(w=>w.c!==U).forEach(w=>i(w,h))},2*n.r)},p=async()=>{var w;const u=document.createElement("canvas");u.width=$,u.height=$;const h=u.getContext("2d",{willReadFrequently:!0});h==null||h.drawImage(c.img,0,0);for(let g=0;g<$;g++){const P=[];for(let m=0;m<$;m++){const y=(w=h==null?void 0:h.getImageData(m,g,1,1))==null?void 0:w.data;P.push(Ve(y))}c.cols.push(...P)}c.isFilled=!0,v()};return c.isFilled?(c.r!==n.r||c.score!==n.score)&&v():c.img.onload=p,(u=o)=>{const{x:h,y:w,r:g,winScore:P}=n;if(c.drawImg?u.drawImage(c.drawImg,h-g,w-g,2*g,2*g):s(u,h-g,w-g),t&&P&&c.drawImg)for(const m of d)u.fillStyle=m.c||"red",u.beginPath(),u.arc(h-g+m.x+m.r,w-g+m.y+m.r,m.r,0,Math.PI*2),u.closePath(),u.fill()}},ie=1e4,Ee=(n=0,o=!1)=>{const{addEventResize:a,useMeasure:f,translate:r}=x(),{getScore:c}=B(),t=["/media/levels/dog.png","/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],d=c();let l,e=0,i=0,s=!1,M=!1;const v=P=>Math.min(Math.floor(P/ie),t.length-1);let p=v(d-n);return n&&(s=v(d)!==p,M=Math.floor(d/ie)>t.length-1),a(()=>{const{cx:P,cy:m,s:y,isL:E}=f();l=[],e=(y-2*y*.055*1.6)/2,i=y*.05;let S=o?p:0;for(S;S<(o?p+1:t.length);S++){const C=t[S],b=E?P:P+S*e*2+S*i,I=E?m+S*e*2+S*i:m;l.push(qe({x:b,y:I,r:e,score:Math.min(d-S*ie,1e4),imgSrc:C,winScore:s||M?0:n,seed:S}))}}),{up:()=>{p=p+1<t.length?p+1:t.length-1},down:()=>{p=p-1<0?0:p-1},render:()=>{const{isL:P}=f(),m=P?0:-(p*e*2+p*i),y=P?-(p*e*2+p*i):0;r(()=>{l==null||l.forEach(E=>E())},m,y)},rect:()=>{const{cx:P,cy:m}=f(),y=innerWidth>innerHeight;return{x:y?P-e:0,y:y?0:m-e,w:y?2*e:innerWidth,h:y?innerHeight:2*e}},isJump:s,isCompleted:M}},Ke=({popits:n,pausePpt:o,popEffect:a=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:r,rand:c,addEventClick:t,addEventMove:d,intersect:l,navigate:e,addEventResize:i}=x(),{getScore:s,addScore:M,getDifficultyTic:v}=B();let p=[],u,h,w=!1,g=0,P=0,m=0,y,E,S=!1;const C=s(),b=v(),I=()=>{y&&E&&P&&!S&&new Date().getTime()-y.getTime()<=E*350&&(P=P*4),y=new Date,E=p.length,S=!1},z=R=>{const k=n.filter(O=>p.indexOf(O)===-1&&O!==R),Y=c(k.length-1),T=k[Y];T&&(a(T,!1,!0),T.p=!1,p.push(k[Y])),S=!0},L=()=>{h=r(()=>{if(m=Math.max(m-10,50),n.length===p.length){w=!0,h.stop(),r(()=>{e("gameover")});return}z(),L()},m)},A=R=>{p=[];const k=n.length;let Y=c(Math.round(k*.3),Math.round(k*.6));const T=[...n];if(R){const O=T.indexOf(R);T.splice(O,1)}for(let O=Y;O>0;O--){const ae=c(T.length-1),Z=T[ae];Z.p=!1,a(Z,!1,!0),p.push(Z),T.splice(ae,1)}m=b,u==null||u.stop(),h==null||h.stop(),C&&(u=r(()=>{f("SLOWLY"),L()},p.length*b)),g=g>0?g:c(3,5),I()},D=R=>{a(R),m=Math.min(m+5,b),P++,R.p=!0;const k=p.indexOf(R);p.splice(k,1),p.length<=0&&(g--,g>0?r(()=>{f(g>1?"Round":"Last"),A(R)},100):(I(),u==null||u.stop(),h==null||h.stop(),M(P),r(()=>{e("gamescore",{winScore:P})},100)))},F=(R,k,Y=!1)=>{if(!w){for(const T of p)if(l({x:R,y:k},T)){D(T);return}if(!l({x:R,y:k},o)&&!Y){for(const T of n)if(l({x:R,y:k},T)){a(T,!0),f("Popenalty"),z(T),u==null||u.stop(),h==null||h.stop(),L();return}f("Popenalty"),z()}}};t(F),d((R,k)=>F(R,k,!0)),i(()=>{r(()=>{f("Pop it"),A()})})},Ue=n=>{const{addEventResize:o,createImg:a,useMeasure:f,ctx:r,loop:c}=x();let t,d,l,e,i,s,M,v=!1,p=-2;const u=.1;return o(()=>{const{s:h,m:w}=f();d=Math.round(h*.16),i=h,s=Math.round(d*1.5),l=0,e=Math.round((innerHeight-innerHeight/2-h/2)/2-d/2)+w*2,M=e,v=e-d/2>-(d/2)+w*2;const g={fs:d,text:n,x:Math.round(h/2),y:d,c:"#f9f9f9",mw:Math.round(h*.8)},P=V(g);t=a((m=r)=>{P(m)},i,s)}),c(()=>{const{m:h}=f();e+=p,p+=u,e<=h&&(e=h),e>=M&&(e=M,p=-2)}),()=>{v&&r.drawImage(t,l,e,i,s)}},Je=()=>{const{addEventResize:n,rand:o,useScreenMeta:a}=x(),{from:f}=a(),{popEffect:r,render:c}=j(),t=["#00dcfe","#5bb2f7","#92E6E6"],d=f==="opening"?t[0]:t[o(t.length-1)],{render:l,setIntersections:e}=Pe({color:d}),{render:i,point:s}=Xe({popEffect:r}),{render:M,point:v}=we({popEffect:r}),{render:p,point:u}=Be({popEffect:r}),{render:h,point:w}=je({popEffect:r});return n(()=>{const g=u(),P=s(),m=v(),y=w();e((E,S,C)=>!_({x:E,y:S,r:C},g)&&!_({x:E,y:S,r:C},P)&&!_({x:E,y:S,r:C},m)&&!_({x:E,y:S,r:C},y))}),()=>{c(),l(),i(),M(),p(),h()}},Qe=()=>{const{useMeasure:n,addEventResize:o}=x(),a=ce(),{popEffect:f,render:r}=j(),{popits:c,render:t,pausePpt:d}=Se({palette:a,popEffect:f});return Ke({popits:c,popEffect:f,pausePpt:d}),o(()=>{(c[0].y-c[0].r)/n().m}),()=>{r(),t()}},Ze=()=>{const n="#ff6347",{popEffect:o,render:a}=j(),{setBackground:f}=x(),{minusDifficulty:r}=B(),{render:c}=Se({palette:n,retry:!0,popEffect:o}),{playFail:t}=K();return f(n),r(),t(),()=>{a(),c()}},et=()=>{const{useScreenMeta:n,useTimer:o,navigate:a}=x(),{plusDifficulty:f,resetDifficulty:r}=B(),{data:c}=n(),{popEffect:t,render:d}=j();ce();const{playWin:l,playComplete:e}=K(),{render:i,isJump:s,isCompleted:M}=Ee(c==null?void 0:c.winScore,!0);let v,p;if(!M){const{render:h}=we({popEffect:t}),{render:w}=Ye({popEffect:t});v=h,p=w}const u=Ue(M?"The end":s?"Complete":"You win");return s||M?(r(),e()):(f(),l()),M&&o(()=>{a("devs")},5e3),()=>{d(),i(),M||(v(),p()),u()}},tt=()=>{const{addEventResize:n,rand:o}=x(),{popEffect:a,render:f}=j(),r=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],c=r[o(r.length-1)],{render:t,setIntersections:d}=Pe({color:c,frequency:10}),{render:l,rect:e,up:i,down:s}=Ee(),{render:M,point:v}=Me({popEffect:a}),{render:p,point:u}=Oe({onClick:i,popEffect:a}),{render:h,point:w}=$e({onClick:s,popEffect:a});return n(()=>{const g=v(),P=e(),m=u(),y=w();d((E,S,C)=>!_({x:E,y:S,r:C},g)&&!Ae({x:E,y:S,r:C},P)&&!_({x:E,y:S,r:C},m)&&!_({x:E,y:S,r:C},y))}),()=>{f(),t(),l(),M(),p(),h()}},nt=()=>{var g,P;const{addEventResize:n,setBackground:o,createImg:a,useMeasure:f,ctx:r,loop:c,navigate:t}=x(),{popEffect:d,render:l}=j(),{render:e}=Me({popEffect:d}),i=ce(!0);let s=[];const M=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let v=0,p=!1;const u=()=>{const{m,s:y}=f();s=[];const E=Math.round(m*3.5),S=Math.round(y*.75),C=Math.round((innerWidth-S)/2);let b=0;for(const I of M){i[b]||(b=0);const z=V({text:I,x:0,y:E,c:i[b],fs:Math.round(E*.6),mw:S,a:"left",f:"Slackey"}),L=V({text:"Maksim Nezabotin",x:S,y:E*1.5,c:"#f9f9f9",fs:Math.round(E*.7),mw:S,a:"right",f:"Slackey"}),A=a((D=r)=>{z(D),L(D)},S,2*E);s.push({img:A,x:C,y:v,w:S,h:5*E}),v+=5*E,b++}};n(u),o("#040404");const h=()=>{for(const y of s)y.y-=2;const m=s[s.length-1];m.y+m.h<0&&t("main")},w=()=>{v=innerHeight,u(),c(h),p=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(P=document==null?void 0:document.fonts)==null||P.ready.then(w):w(),()=>{r.globalAlpha=p?1:0,s.forEach(({img:m,x:y,y:E,w:S,h:C})=>{r.drawImage(m,y,E,S,C)}),l(),e(),r.globalAlpha=1}},ot=[{name:"opening",ctor:Fe},{name:"main",ctor:Je},{name:"game",ctor:Qe},{name:"gameover",ctor:Ze},{name:"gamescore",ctor:et},{name:"score",ctor:tt},{name:"devs",ctor:nt}],st=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3","/sounds/new/pop26.mp3","/sounds/new/pop27.mp3","/sounds/new/pop28.mp3","/sounds/new/pop29.mp3","/sounds/new/pop30.mp3","/sounds/new/pop31.mp3","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3","/sounds/complete.mp3"];Le(ot,st);document.title="Yo last Pop it";
