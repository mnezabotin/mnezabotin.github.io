(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function d(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(r){if(r.ep)return;r.ep=!0;const i=d(r);fetch(r.href,i)}})();const Me=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},u=o=>{t.clearRect(0,0,innerWidth,innerHeight),o()};return d(),document.body.appendChild(e),{ctx:t,render:u,resize:d,rotate:(o,n,l,f)=>{t.save(),t.translate(n,l),t.rotate(Math.PI*f),t.translate(-n,-l),o(),t.restore()},translate:(o,n,l)=>{t.save(),t.translate(n,l),o(),t.restore()},shade:(o,n)=>{o=o.substring(1);const l=parseInt(o,16),f=Math.round(2.55*n),a=(l>>16)+f,h=(l>>8&255)+f,p=(l&255)+f;return"#"+(16777216+(a<255?a<1?0:a:255)*65536+(h<255?h<1?0:h:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},setBackground:(o,n)=>{var l;document.body.style.background=o,document.body.style.backgroundColor=n||o,(l=document.querySelector('meta[name="theme-color"]'))==null||l.setAttribute("content",n||o)},createImg:(o,n,l=n)=>{const f=document.createElement("canvas"),a=f.getContext("2d");if(!a)throw new Error("CanvasRenderingContext2D is null");return f.width=n*devicePixelRatio,f.height=l*devicePixelRatio,a.scale(devicePixelRatio,devicePixelRatio),o(a),f}}},ye=e=>{let t="",d="",u;const r=c=>e.find(g=>g.name===c)||e[0],s={render:()=>{},navigate:(c,g)=>{const o=r(c);d=t||"",t=(o==null?void 0:o.name)||"",u=g,s.render=(o==null?void 0:o.ctor())||(()=>{})},useScreenMeta:()=>({to:t,from:d,data:u})};return s},ve=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),t=[],d={};return{loop:(s,c)=>{if(Object.entries(d).find(([o,n])=>n===s)||c&&d[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&t.push(c),c=c||new Date().valueOf().toString(),d[c]=s;const g=()=>{s(),d[c]&&e(g)};g()},stop:s=>{if(typeof s=="string")delete d[s];else{const c=Object.entries(d).find(([g,o])=>o===s);c&&delete d[c[0]]}},stopAll:()=>{for(const s in d)t.indexOf(s)===-1&&delete d[s]}}};let X=[];const Ee=()=>{for(const e of X)clearTimeout(e);X=[]},Pe=(e,t=400)=>{let d=new Date,u=t,r=setTimeout(e,u);return X.push(r),{pause:()=>{clearTimeout(r),u-=new Date-d},resume:()=>{d=new Date,clearTimeout(r),r=setTimeout(e,u),X.push(r)},stop:()=>{clearTimeout(r)}}},ne=2147483646,V=2147483647,Se=16807,xe=(e=Math.floor(Math.random()*V))=>{e=e%V,e<=0&&(e+=ne);const t=()=>(e=e*Se%V,e),d=()=>(t()-1)/ne;return(r,i)=>(i===void 0&&(i=r,r=0),Math.floor(d()*(i-r+1))+r)},we=(e,t)=>(t===void 0&&(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e),Ce=()=>{const e=[],t=[],d=[];return{addEventResize:n=>{n(),e.push(n)},onResizeEvents:()=>e.forEach(n=>n()),addEventClick:n=>t.push(n),onClickEvents:(n,l)=>t.forEach(f=>f(n,l)),addEventMove:n=>d.push(n),onMoveEvents:(n,l)=>d.forEach(f=>f(n,l)),removeAllEvents:()=>{e.splice(0),t.splice(0),d.splice(0)}}},z=(e,t)=>{const d=Math.pow(Math.abs(e.x-t.x),2),u=Math.pow(Math.abs(e.y-t.y),2),r=e.r||0,i=t.r||0,s=Math.pow(r+i,2);return d+u<=s},be=(e,t)=>{const d=e.r||0,u=t.w||0,r=t.h||0;return Math.abs(t.x+u/2-e.x)<=u/2+d&&Math.abs(t.y+r/2-e.y)<=r/2+d},Re=(e,t)=>z(e,t),Ie=()=>{let e=null,t={};return async d=>{e=new AudioContext;const u=e.createBufferSource();t[d]||(t[d]=await fetch(d).then(r=>r.arrayBuffer()).then(r=>(e==null?void 0:e.decodeAudioData(r))||null)),u.buffer=t[d],u.connect(e.destination),u.start()}};let j;const Te=e=>{if(j)throw new Error("Webcore already specified");const t=Me(),d=ye(e),{loop:u,stop:r,stopAll:i}=ve(),{addEventResize:s,onResizeEvents:c,addEventClick:g,onClickEvents:o,addEventMove:n,onMoveEvents:l,removeAllEvents:f}=Ce();let a=innerWidth/2,h=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight;const M=()=>({cx:a,cy:h,s:p,m,isL:E}),v=Ie();j={font:"Tijuf",ctx:t.ctx,shade:t.shade,rotate:t.rotate,translate:t.translate,setBackground:t.setBackground,createImg:t.createImg,useMeasure:M,useScreenMeta:d.useScreenMeta,navigate:(y,P)=>{if(!e.some(x=>x.name===y))throw new Error(`Screen ${y} not specified`);i(),Ee(),f(),new Promise(()=>d.navigate(y,P))},loop:u,loopStop:r,useTimer:Pe,rand:we,useRandChain:xe,intersect:Re,addEventResize:s,addEventClick:g,addEventMove:n,playSound:v},u(()=>t.render(d.render),"draw"),window.onresize=()=>{a=innerWidth/2,h=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),E=innerWidth>innerHeight,t.resize(),c()},document.onpointerdown=y=>{o(y.clientX,y.clientY)},document.onmousemove=y=>{l(y.clientX,y.clientY)},d.navigate()},w=()=>{if(!j)throw new Error("Webcore not specified");return{...j}},U={},W=e=>{const{shade:t,ctx:d,createImg:u}=w(),r=()=>{const{r:s,c="#ffffff",p:g}=e,o=d.createRadialGradient(s,s,s,s,s,s/5);return o.addColorStop(0,t(c,0)),o.addColorStop(.01,t(c,0)),o.addColorStop(.075,t(c,9)),o.addColorStop(.15,t(c,0)),o.addColorStop(.15,t(c,-15)),o.addColorStop(.18,t(c,-5)),o.addColorStop(.22,t(c,-15)),g?(o.addColorStop(.24,t(c,-10)),o.addColorStop(.3,t(c,-8)),o.addColorStop(.34,t(c,-12)),o.addColorStop(.6,t(c,-6)),o.addColorStop(1,t(c,-4))):(o.addColorStop(.24,t(c,-12)),o.addColorStop(.26,t(c,-8)),o.addColorStop(.3,t(c,-2)),o.addColorStop(.34,t(c,0)),o.addColorStop(.5,t(c,5)),o.addColorStop(1,t(c,12))),o},i=()=>{const{r:s,c="#ffffff",p:g}=e,o=`${c}_${g?"push":"pop"}_${s}`;if(U[o])return U[o];const n=u((l=d)=>{const f=r();l.fillStyle=f,l.beginPath(),l.arc(s,s,s,0,2*Math.PI),l.closePath(),l.fill()},2*s);return U[o]=n,n};return(s=d)=>{const{x:c,y:g,r:o}=e,n=i();s.drawImage(n,c-o,g-o,2*o,2*o)}},K={},N=e=>{const{ctx:t}=w();let d;return K[e.src]?d=K[e.src]:(d=new Image,d.src=e.src,K[e.src]=d),(u=t)=>{const{w:r,h:i=r,x:s=0,y:c=0}=e;d.complete&&u.drawImage(d,s,c,r,i)}},oe=e=>{const{font:t,ctx:d}=w(),u=e.text,r=e.text.length,i=2*Math.PI/r/4;return(s=d)=>{const{x:c,y:g,r:o,s:n=0,fs:l}=e,f=l||Math.round(o/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${f}px ${t}`,s.save(),s.translate(c,g),s.rotate(n);for(let a=0;a<r;a++)s.save(),s.rotate(a*i),s.fillText(u[a],0,-o),s.restore();s.restore()}},We=()=>{var M,v;const{ctx:e,loop:t,rotate:d,navigate:u,useMeasure:r,addEventClick:i,addEventResize:s,setBackground:c}=w();c("#040404");let g=!1,o,n,l,f,a,h=-.2,p=0;s(()=>{const{cx:y,cy:P,s:x}=r(),S=Math.round(x*.25);o={c:"#ff6347",x:y,y:P,r:S,p:!1},n=W(o),l=N({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),f=oe({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),a=oe({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{h+=.01,p=h>=1?1:h,h>=1.8&&(o.p=!0),h>=2.2&&(o.c="#f86a9a"),h>=2.6&&u("main")};i(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(h<y)return h=y,!0})});const E=()=>{t(m),g=!0};return(M=document==null?void 0:document.fonts)!=null&&M.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(E):E(),()=>{const{cx:y,cy:P}=r();e.globalAlpha=g?1:0,n(),h<1.8&&l(),h<1.4&&d(()=>{f(),a()},y,P,p),e.globalAlpha=1}};let _=["/sounds/pop1.mp3","/sounds/pop2.mp3","/sounds/pop3.mp3","/sounds/pop4.mp3","/sounds/pop5.mp3"];const He=()=>{const{rand:e,playSound:t}=w();return{playPop:()=>{const u=e(_.length-1),r=_[u];_=[..._.splice(u,_.length),..._],t(r)}}},F=100/2;let re=0;const O=()=>{const{loop:e,ctx:t,shade:d,rand:u}=w(),{playPop:r}=He(),i={},s=()=>{for(const o in i){const n=i[o];if(!n)return;const l=n.popit;if(!n.shake)n.tic+=F/5,n.tic>=F&&(n.dir=-1),n.withoutRad||(l.r=n.origR+n.origR*75e-5*(n.tic+(n.dir>0?0:F-n.tic)));else{n.tic+=F/5;const f=u(1,2),a=u(1,2);l.x=n.origX+Math.random()*f*(Math.random()>.5?1:-1),l.y=n.origY+Math.random()*a*(Math.random()>.5?1:-1)}n.tic>=2*F&&(delete i[o],l.r=n.origR,l.x=n.origX,l.y=n.origY)}},c=(o,n=!1,l=!1)=>{!l&&!n&&r(),re++;const f=`${new Date().valueOf().toString()}_${re}`,a=1,h=1;i[f]={withoutRad:n,tic:a,dir:h,popit:o,origR:o.r,origX:o.x,origY:o.y,shake:l}},g=()=>{t.globalAlpha=.25;for(const o in i){const n=i[o];if(n.shake)continue;const l=n.popit;t.fillStyle=d(l.c||"red",-12),t.beginPath(),t.arc(l.x,l.y,l.r+n.origR*.001*(n.tic+(n.dir>0?0:F-n.tic)),0,Math.PI*2),t.closePath(),t.fill()}t.globalAlpha=1};return e(s),{popEffect:c,render:g}},ee=e=>{const{font:t,ctx:d}=w();return(u=d)=>{const{text:r,x:i,c:s,y:c,fs:g,a:o="center",mw:n}=e;u.textAlign=o,u.fillStyle=s,u.font=`${g}px ${t}`,u.fillText(r,i,c,n)}},Y=100,le=e=>{const{loop:t,ctx:d,useMeasure:u,rand:r}=w();let i=null;const s=()=>{if(!i)return;const{m:o}=u();if(i.tic<=Y)i.props.fs=((e==null?void 0:e.mfs)||6)/Y*i.tic*o;else{const n=r(1,1),l=r(1,1);i.props.x=i.origX+Math.random()*n*(Math.random()>.5?1:-1),i.props.y=i.origY+Math.random()*l*(Math.random()>.5?1:-1),i.shake=!0}i.tic+=i.tic>Y?1:10,i.tic>Y*2&&!(e!=null&&e.infinity)&&(i=null)},c=o=>{const{cx:n,m:l}=u(),f=0,a={x:n,y:Math.round(l*((e==null?void 0:e.dy)||16)),text:o,c:(e==null?void 0:e.color)||"#ffffff",fs:0},h=ee(a);i={props:a,shape:h,tic:f,origX:a.x,origY:a.y}},g=()=>{i&&(d.globalAlpha=.01*i.tic,i.shape(),d.globalAlpha=1)};return t(s),{splashEffect:c,render:g}},ke=({color:e="#ba68c8",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:g}=w(),{from:o}=i();let n,l,f;return d(()=>{const{cx:p,cy:m,s:E,m:M}=u(),v=Math.round(E*.25);n={c:e,r:Math.round(E*.08),x:p-v-1*M,y:m-v+1*M,p:(o==="score"||o==="opening")&&!n},l=W(n),f=N({x:Number(n.x)-n.r+Math.round(n.r*.5),y:Number(n.y)-n.r+Math.round(n.r*.5),w:n.r*2-Math.round(n.r*1),src:"/media/star.svg"})}),r(()=>{n.p&&t(n,!1,!0),n.p=!1}),c((p,m)=>{g({x:p,y:m},n)&&(t(n),n.p=!0,r(()=>{s("score")},100))}),{render:()=>{l(),n.p||f()},point:()=>({x:n.x,y:n.y,r:n.r})}},De=({color:e="#ff6347",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:i,navigate:s,addEventClick:c,intersect:g}=w(),{from:o}=i();let n,l,f;return d(()=>{const{s:p}=u(),m=Math.round(p*.08);n={c:e,r:m,x:Math.round(1.6*m),y:Math.round(1.6*m),p:o==="main"&&!n},l=W(n),f=N({x:Number(n.x)-m+Math.round(m*.4),y:Number(n.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),r(()=>{n.p&&t(n,!1,!0),n.p=!1}),c((p,m)=>{g({x:p,y:m},n)&&(t(n),n.p=!0,r(()=>{s("main")},100))}),{render:()=>{l(),n.p||f()},point:()=>({x:n.x,y:n.y,r:n.r})}},Ae=({onClick:e})=>{const{addEventResize:t,useMeasure:d,useTimer:u,addEventClick:r,intersect:i,rotate:s}=w();let c,g,o;return t(()=>{const{s:f}=d(),a=Math.round(f*.08);c={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a),p:!1},g=W(c),o=N({x:Number(c.x)-a+Math.round(a*.4),y:Number(c.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),r((f,a)=>{i({x:f,y:a},c)&&(c.p=!0,e(),u(()=>{c.p=!1},100))}),{render:()=>{g(),c.p||s(()=>{o()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},ze=({onClick:e})=>{const{addEventResize:t,useMeasure:d,useTimer:u,addEventClick:r,intersect:i,rotate:s}=w();let c,g,o;return t(()=>{const{s:f}=d(),a=Math.round(f*.08),h=innerWidth<innerHeight?Math.round(innerWidth-1.6*a-2*a-.3*a):Math.round(innerWidth-1.6*a),p=innerWidth<innerHeight?Math.round(innerHeight-1.6*a):Math.round(innerHeight-1.6*a-2*a-.3*a);c={c:"#ff6347",r:a,x:h,y:p,p:!1},g=W(c),o=N({x:Number(c.x)-a+Math.round(a*.4),y:Number(c.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),r((f,a)=>{i({x:f,y:a},c)&&(c.p=!0,e(),u(()=>{c.p=!1},100))}),{render:()=>{g(),c.p||s(()=>{o()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Le=e=>{const{ctx:t,shade:d}=w(),u=Math.round(e.r/2.2),r=Math.round(.15*e.r),i=d(e.c||"blue",-3);return(s=t)=>{const{r:c,x:g=c,y:o=c}=e;s.lineCap="round",s.fillStyle=i,s.strokeStyle=i,s.lineWidth=u,s.beginPath(),s.moveTo(g+r,o),s.lineTo(g-r/2,o-r),s.lineTo(g-r/2,o+r),s.closePath(),s.fill(),s.beginPath(),s.moveTo(g+r,o),s.lineTo(g-r/2,o-r),s.moveTo(g-r/2,o-r),s.lineTo(g-r/2,o+r),s.moveTo(g-r/2,o+r),s.lineTo(g+r,o),s.stroke()}},ue=({getX:e,getY:t,color:d="#bef181",popEffect:u=()=>{}})=>{const{addEventResize:r,useMeasure:i,useTimer:s,useScreenMeta:c,navigate:g,addEventClick:o,intersect:n}=w(),{from:l}=c();let f,a,h;return r(()=>{const{cx:E,cy:M,s:v,m:y}=i();f={c:d,r:Math.round(v*.1),x:e(E,v,y),y:t(M,v,y),p:(l==="gamescore"||l==="game"||l==="opening")&&!f},a=W(f),h=Le(f)}),s(()=>{f.p&&u(f,!1,!0),f.p=!1}),o((E,M)=>{n({x:E,y:M},f)&&(u(f),f.p=!0,s(()=>{g("game")},100))}),{render:()=>{a(),f.p||h()},point:()=>({x:f.x,y:f.y,r:f.r})}},fe=e=>{const{ctx:t,shade:d}=w(),u=Math.round(e.r/4),r=Math.round(.12*e.r);return(i=t)=>{const{r:s,x:c=s,y:g=s}=e,o=d(e.c||"blue",-3);i.lineCap="round",i.strokeStyle=o,i.lineWidth=u,i.beginPath(),i.moveTo(c-1.5*r,g-2*r),i.lineTo(c-1.5*r,g+2*r),i.stroke(),i.beginPath(),i.moveTo(c+1.5*r,g-2*r),i.lineTo(c+1.5*r,g+2*r),i.stroke()}},_e=({getX:e,getY:t,popEffect:d=()=>{}})=>{const{addEventResize:u,useMeasure:r,useTimer:i,useScreenMeta:s,navigate:c,addEventClick:g,intersect:o}=w(),{from:n}=s();let l,f,a;return u(()=>{const{cx:m,cy:E,s:M,m:v}=r();l={c:"#fd8059",r:Math.round(M*.08),x:e(m,M,v),y:t(E,M,v),p:(n==="game"||n==="opening")&&!l},f=W(l),a=fe(l)}),i(()=>{l.p&&d(l,!1,!0),l.p=!1}),g((m,E)=>{o({x:m,y:E},l)&&(d(l),l.p=!0,i(()=>{c("main")},100))}),{render:()=>{f(),l.p||a()},point:()=>({x:l.x,y:l.y,r:l.r})}},Fe=({color:e="#f86a9a",popEffect:t=()=>{}})=>{const{addEventResize:d,useMeasure:u,useTimer:r,useScreenMeta:i,addEventClick:s,intersect:c,navigate:g}=w(),{from:o}=i();let n,l,f,a;return d(()=>{const{cx:m,cy:E,s:M}=u(),v=Math.round(M*.25);n={c:e,x:m,y:E,r:v,p:o==="opening"&&!n},l=W(n),f=ee({text:"Yola",c:"#f1f1f1",x:m,y:E-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),a=ee({text:"PopiT",c:"#ffeb3b",x:m,y:E-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{n.p&&t(n,!1,!0),n.p=!1}),s((m,E)=>{c({x:m,y:E},n)&&(t(n),n.p=!0,r(()=>{g("opening")},100))}),{render:()=>{l(),n.p||(f(),a())},point:()=>({x:n.x,y:n.y,r:n.r})}},he=({color:e="#00dcfe",frequency:t=20})=>{const{addEventResize:d,useRandChain:u,useMeasure:r,rand:i,useTimer:s,setBackground:c,useScreenMeta:g}=w(),{from:o}=g();c(e);const n=i(0,999);let l=[],f=[];d(()=>{const m=u(n),{s:E}=r();l=[];const M=Math.round(E*.05),v=Math.round(innerWidth/M/2)-1,y=Math.round((innerWidth-2*M*v)/(v+1)),P=Math.round(innerHeight/M/2)-1,x=Math.round((innerHeight-2*M*P)/(P+1));for(let S=0;S<P;S++)for(let R=0;R<v;R++)m(m(t))<1&&l.push({x:y+M+R*M*2+y*R,y:x+M+S*M*2+x*S,r:M,c:e,p:o==="opening"?!0:m(1)>0});f=l.map(S=>W(S))});const a=()=>{s(()=>{const m=i(l.length-1);l[m]&&(l[m].p=!l[m].p),a()},250)};return o==="opening"?s(()=>{l.forEach(m=>m.p=i(1)>0),a()}):a(),{render:()=>{f.forEach(m=>m())},setIntersections:m=>{l=l.filter(({x:E,y:M,r:v})=>m(E,M,v)),f=l.map(E=>W(E))}}},se="ylp",ie="score",J="difficulty",Q=[.14,.11,.09,.075],ce=750,$e=350,ae=5,A=[];for(let e=0;e*ae<=ce-$e;e++)A.push(ce-e*ae);const $=()=>{const e=f=>localStorage.getItem(`${se}_${f}`),t=(f,a)=>localStorage.setItem(`${se}_${f}`,a.toString()),d=()=>+(e(ie)||0),u=f=>t(ie,f),r=f=>{const a=d();u(a+f)},i=()=>+(e(J)||0),s=f=>{const a=i();t(J,Math.min(Math.max(a+f,0),Q.length*A.length-1))};return{getScore:d,addScore:r,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const f=i(),a=Math.floor(f/A.length);return Q[a]||Q[1]},getDifficultyTic:()=>{const f=i(),a=Math.floor(f/A.length),h=f-a*A.length;return A[h]||A[0]},resetDifficulty:()=>t(J,0)}},ge=(e=!1)=>{let t=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:u,setBackground:r,rand:i}=w(),{getDifficultyRad:s}=$();return t=[...t.splice(i(t.length-1),t.length),...t],e||d(()=>{const{s:g}=u(),o=s(),n=Math.round(g*o),l=Math.round(innerWidth/n/2)-1,f=(innerWidth-2*n*l)/(l+1),a=Math.round(innerHeight/n/2)-1,h=(innerHeight-2*n*a)/(a+1),p=innerWidth>=innerHeight,m=p?l:a,E=p?f:h,M=p?innerWidth:innerHeight;let v=0;const y=[];for(let x=0;x<m;x++)t[v]||(v=0),y.push(`${t[v]} ${(E+n+x*n*2+E*x)/M*100}%`),v++;r(`linear-gradient(${p?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?t[0]:"#040404")}),t},pe=({palette:e,retry:t,popEffect:d=()=>{}})=>{const{addEventResize:u,useMeasure:r,rand:i,useTimer:s,useScreenMeta:c,navigate:g,addEventClick:o,intersect:n}=w(),{from:l}=c(),{getDifficultyRad:f}=$(),a=[];let h=[],p,m,E,M;const v=P=>Array.isArray(e)?e[P]:e;return u(()=>{const{s:P}=r();a.splice(0);const x=f(),S=Math.round(P*x),R=Math.round(innerWidth/S/2)-1,L=(innerWidth-2*S*R)/(R+1),k=Math.round(innerHeight/S/2)-1,B=(innerHeight-2*S*k)/(k+1),I=innerWidth>=innerHeight;let b=0;for(let T=0;T<k;T++){for(let C=0;C<R;C++){v(b)||(b=0);const H={x:L+S+C*S*2+L*C,y:B+S+T*S*2+B*T,r:S,c:v(b),p:!0};T===0&&C===R-1?(M={...H,p:(l==="main"||l==="gameover"||l==="gamescore")&&!M},p=W(M),m=fe(M)):a.push(H),b+=I?1:0}b=I?0:b+1}t&&(E=a[i(a.length-1)],s(()=>{d(E,!1,!0),E.p=!1})),h=a.map(T=>W(T))}),s(()=>{M.p&&d(M,!1,!0),M.p=!1}),t&&o((P,x)=>{n({x:P,y:x},E)&&(d(E),E.p=!0,s(()=>{g("game")},100))}),o((P,x)=>{n({x:P,y:x},M)&&(d(M),M.p=!0,s(()=>{g("main")},100))}),{render:()=>{h.forEach(P=>P()),p(),M!=null&&M.p||m()},popits:a}},D=100,G="#222",Be=e=>{const t=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,u=(e==null?void 0:e[2])||0;return"#"+(16777216+(t<255?t<1?0:t:255)*65536+(d<255?d<1?0:d:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},Z={},Ne=e=>{const{ctx:t,createImg:d,useRandChain:u,useTimer:r}=w();let i,s=!1,c=[];const g=e.r*2/D/2;Z[e.imgSrc]?i=Z[e.imgSrc]:(i=Z[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},i.img.src=e.imgSrc);const o=()=>r(()=>{s=!s,o()},250),n=(p,m=t)=>{const{x:E,y:M,c:v,r:y}=p;m.fillStyle=v||"red",m.beginPath(),m.arc(E+y,M+y,y,0,Math.PI*2),m.closePath(),m.fill()},l=(p=t,m=0,E=0)=>{p.fillStyle=G,p.beginPath(),p.roundRect(m,E,2*e.r,2*e.r,g),p.closePath(),p.fill()},f=()=>{const p=[];for(let y=0;y<D;y++)for(let P=0;P<D;P++){const x={x:P*g*2,y:y*g*2,r:g,c:G};p.push(x)}let m=e.score-e.winScore;const E=[...p],M=u(e.seed),v=(y=!1)=>{const P=M(E.length-1),x=E[P],S=p.indexOf(x);x.c=y?G:i.cols[S],E.splice(P,1),y&&c.push({...x,c:i.cols[S]})};for(let y=m;y>0;y--)v();if(e.winScore){c=[];for(let y=e.winScore;y>0;y--)v(!0);o()}return p},a=()=>{const p=f();i.drawImg=d((m=t)=>{l(m),p.filter(E=>E.c!==G).forEach(E=>n(E,m))},2*e.r)},h=async()=>{var E;const p=document.createElement("canvas");p.width=D,p.height=D;const m=p.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(i.img,0,0);for(let M=0;M<D;M++){const v=[];for(let y=0;y<D;y++){const P=(E=m==null?void 0:m.getImageData(y,M,1,1))==null?void 0:E.data;v.push(Be(P))}i.cols.push(...v)}i.isFilled=!0,a()};return i.isFilled?(i.r!==e.r||i.score!==e.score)&&a():i.img.onload=h,(p=t)=>{const{x:m,y:E,r:M,winScore:v}=e;if(i.drawImg?p.drawImage(i.drawImg,m-M,E-M,2*M,2*M):l(p,m-M,E-M),s&&v&&i.drawImg)for(const y of c)p.fillStyle=y.c||"red",p.beginPath(),p.arc(m-M+y.x+y.r,E-M+y.y+y.r,y.r,0,Math.PI*2),p.closePath(),p.fill()}},de=1e4,me=(e=0,t=!1)=>{const{addEventResize:d,useMeasure:u,translate:r}=w(),{getScore:i}=$(),s=["/media/levels/cat.png","/media/levels/city.png","/media/levels/donut.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],c=i();let g,o=0,n=0,l=!1,f=!1;const a=v=>Math.min(Math.floor(v/de),s.length-1);let h=a(c-e);if(e){const v=a(c);l=v!==h,f=v>s.length-1}return d(()=>{const{cx:v,cy:y,s:P,isL:x}=u();g=[],o=(P-2*P*.055*1.6)/2,n=P*.05;let S=t?h:0;for(S;S<(t?h+1:s.length);S++){const R=s[S],L=x?v:v+S*o*2+S*n,k=x?y+S*o*2+S*n:y;g.push(Ne({x:L,y:k,r:o,score:Math.min(c-S*de,1e4),imgSrc:R,winScore:e,seed:S}))}}),{up:()=>{h=h+1<s.length?h+1:s.length-1},down:()=>{h=h-1<0?0:h-1},render:()=>{const{isL:v}=u(),y=v?0:-(h*o*2+h*n),P=v?-(h*o*2+h*n):0;r(()=>{g==null||g.forEach(x=>x())},y,P)},rect:()=>{const{cx:v,cy:y}=u(),P=innerWidth>innerHeight;return{x:P?v-o:0,y:P?0:y-o,w:P?2*o:innerWidth,h:P?innerHeight:2*o}},isJump:l,isCompleted:f}},Oe=({popits:e,popEffect:t=()=>{},splashEffect:d=()=>{}})=>{const{useTimer:u,rand:r,addEventClick:i,addEventMove:s,intersect:c,navigate:g,addEventResize:o}=w(),{getScore:n,addScore:l,getDifficultyTic:f}=$();let a=[],h,p,m=!1,E=0,M=0,v=0;const y=n(),P=f(),x=I=>{const b=e.filter(H=>a.indexOf(H)===-1&&H!==I),T=r(b.length-1),C=b[T];C&&(t(C,!1,!0),C.p=!1,a.push(b[T]))},S=()=>{p=u(()=>{if(v=Math.max(v-10,50),e.length===a.length){m=!0,p.stop(),u(()=>{g("gameover")});return}x(),S()},v)},R=I=>{a=[];const b=e.length;let T=r(Math.round(b*.3),Math.round(b*.6));const C=[...e];if(I){const H=C.indexOf(I);C.splice(H,1)}for(let H=T;H>0;H--){const te=r(C.length-1),q=C[te];q.p=!1,t(q,!1,!0),a.push(q),C.splice(te,1)}v=P,h==null||h.stop(),p==null||p.stop(),y&&(h=u(()=>{d("SLOWLY"),S()},a.length*P)),E=E>0?E:r(3,5)},L=()=>y<1e4?10:y<2e4?5:y<3e4?2:1,k=I=>{t(I),v=Math.min(v+5,P),M++,I.p=!0;const b=a.indexOf(I);if(a.splice(b,1),a.length<=0)if(E--,E>0)u(()=>{d("Round"),R(I)},100);else{h==null||h.stop(),p==null||p.stop();const T=L();l(M*T),u(()=>{g("gamescore",{winScore:M*T})},100)}},B=(I,b,T=!1)=>{if(!m){for(const C of a)if(c({x:I,y:b},C)){k(C);return}if(!T){for(const C of e)if(c({x:I,y:b},C)){t(C,!0),d("Popenalty"),x(C);return}d("Popenalty"),x()}}};i(B),s((I,b)=>B(I,b,!0)),o(()=>{u(()=>{d("Pop it"),R()})})},Ye=()=>{const{addEventResize:e,rand:t,useScreenMeta:d}=w(),{from:u}=d(),{popEffect:r,render:i}=O(),s=["#00dcfe","#5bb2f7","#92E6E6"],c=u==="opening"?s[0]:s[t(s.length-1)],{render:g,setIntersections:o}=he({color:c}),{render:n,point:l}=Fe({popEffect:r}),{render:f,point:a}=ue({getX:(m,E,M)=>m+Math.round(E*.25)+2*M,getY:(m,E,M)=>m+Math.round(E*.25)+0*M,popEffect:r}),{render:h,point:p}=ke({popEffect:r});return e(()=>{const m=p(),E=l(),M=a();o((v,y,P)=>!z({x:v,y,r:P},m)&&!z({x:v,y,r:P},E)&&!z({x:v,y,r:P},M))}),()=>{i(),g(),n(),f(),h()}},Ge=()=>{const{useMeasure:e,addEventResize:t}=w(),d=ge(),{popEffect:u,render:r}=O(),{popits:i,render:s}=pe({palette:d,popEffect:u}),c={mfs:0,dy:0},{splashEffect:g,render:o}=le(c);return Oe({popits:i,popEffect:u,splashEffect:g}),t(()=>{const n=(i[0].y-i[0].r)/e().m;c.mfs=n,c.dy=n}),()=>{r(),s(),o()}},Xe=()=>{const e="#ff6347",{popEffect:t,render:d}=O(),{setBackground:u}=w(),{minusDifficulty:r}=$(),{render:i}=pe({palette:e,retry:!0,popEffect:t});return u(e),r(),()=>{d(),i()}},je=()=>{const{translate:e,useScreenMeta:t}=w(),{plusDifficulty:d,resetDifficulty:u}=$(),{data:r}=t(),{popEffect:i,render:s}=O(),{splashEffect:c,render:g}=le({infinity:!0});ge();const{render:o,isJump:n}=me(r==null?void 0:r.winScore,!0),{render:l}=ue({getX:(a,h,p)=>innerWidth>innerHeight?Math.min(a+(h-2*h*.055*1.6)/2+4*p+Math.round(h*.1),innerWidth-2*p-Math.round(h*.1)):a+(h-2*h*.055*1.6)/8+0*Math.round(h*.1)+2*p,getY:(a,h,p)=>innerWidth>innerHeight?a+(h-2*h*.055*1.6)/2-1*p-Math.round(h*.1):Math.min(a+(h-2*h*.055*1.6)/2+4*p+Math.round(h*.1),innerHeight-2*p-Math.round(h*.1)),popEffect:i}),{render:f}=_e({getX:(a,h,p)=>innerWidth>innerHeight?Math.max(a-(h-2*h*.055*1.6)/2-4*p-Math.round(h*.1),2*p+Math.round(h*.1)):a+(h-2*h*.055*1.6)/8-2*Math.round(h*.1)-2*p,getY:(a,h,p)=>innerWidth>innerHeight?a-(h-2*h*.055*1.6)/2+0*p+Math.round(h*.1):Math.min(a+(h-2*h*.055*1.6)/2+4*p+Math.round(h*.1),innerHeight-2*p-Math.round(h*.1)),popEffect:i});return n?u():d(),innerHeight>innerWidth&&c(n?"Picture filled":"You win"),()=>{s(),innerHeight>innerWidth?e(o,0,-Math.round(innerHeight*.05)):o(),l(),f(),g()}},qe=()=>{const{addEventResize:e,rand:t}=w(),{popEffect:d,render:u}=O(),r=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],i=r[t(r.length-1)],{render:s,setIntersections:c}=he({color:i,frequency:10}),{render:g,rect:o,up:n,down:l}=me(),{render:f,point:a}=De({popEffect:d}),{render:h,point:p}=Ae({onClick:n,popEffect:d}),{render:m,point:E}=ze({onClick:l,popEffect:d});return e(()=>{const M=a(),v=o(),y=p(),P=E();c((x,S,R)=>!z({x,y:S,r:R},M)&&!be({x,y:S,r:R},v)&&!z({x,y:S,r:R},y)&&!z({x,y:S,r:R},P))}),()=>{u(),s(),g(),f(),h(),m()}},Ve=()=>{const{ctx:e,addEventResize:t,loop:d}=w(),u={x:40,y:100};let r=1,i=1,s;const c=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),t(c),d(()=>{u.x+=2*r,u.y+=3*i,r*=-1,i*=-1}),()=>{e.save();var g=Math.random()*2,o=Math.random()*3;e.translate(g,o),e.beginPath(),e.fillStyle="red",e.rect(u.x,u.y,s,s),e.fill(),e.restore()}},Ue=[{name:"opening",ctor:We},{name:"main",ctor:Ye},{name:"game",ctor:Ge},{name:"gameover",ctor:Xe},{name:"gamescore",ctor:je},{name:"score",ctor:qe},{name:"devs",ctor:Ve}];Te(Ue);document.title="Your's last Pop it";
