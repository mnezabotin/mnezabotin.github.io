(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const Se=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");if(!o)throw new Error("CanvasRenderingContext2D is null");const a=()=>{t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,o.scale(devicePixelRatio,devicePixelRatio),t.style.width=`${innerWidth}px`,t.style.height=`${innerHeight}px`},f=e=>{o.clearRect(0,0,innerWidth,innerHeight),e()};return a(),document.body.appendChild(t),{ctx:o,render:f,resize:a,rotate:(e,i,s,y)=>{o.save(),o.translate(i,s),o.rotate(Math.PI*y),o.translate(-i,-s),e(),o.restore()},translate:(e,i,s)=>{o.save(),o.translate(i,s),e(),o.restore()},shade:(e,i)=>{e=e.substring(1);const s=parseInt(e,16),y=Math.round(2.55*i),w=(s>>16)+y,p=(s>>8&255)+y,u=(s&255)+y;return"#"+(16777216+(w<255?w<1?0:w:255)*65536+(p<255?p<1?0:p:255)*256+(u<255?u<1?0:u:255)).toString(16).slice(1)},setBackground:(e,i)=>{var s;document.body.style.background=e,document.body.style.backgroundColor=i||e,(s=document.querySelector('meta[name="theme-color"]'))==null||s.setAttribute("content",i||e)},createImg:(e,i,s=i)=>{const y=document.createElement("canvas"),w=y.getContext("2d");if(!w)throw new Error("CanvasRenderingContext2D is null");return y.width=i*devicePixelRatio,y.height=s*devicePixelRatio,w.scale(devicePixelRatio,devicePixelRatio),e(w),y}}},Ee=t=>{let o="",a="",f;const r=l=>t.find(d=>d.name===l)||t[0],n={render:()=>{},navigate:(l,d)=>{const e=r(l);a=o||"",o=(e==null?void 0:e.name)||"",f=d,n.render=(e==null?void 0:e.ctor())||(()=>{})},useScreenMeta:()=>({to:o,from:a,data:f})};return n},xe=()=>{const t=requestAnimationFrame||(n=>setTimeout(n,16.666666666666668)),o=[],a={};return{loop:(n,l)=>{if(Object.entries(a).find(([e,i])=>i===n)||l&&a[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&o.push(l),l=l||new Date().valueOf().toString(),a[l]=n;const d=()=>{n(),a[l]&&t(d)};d()},stop:n=>{if(typeof n=="string")delete a[n];else{const l=Object.entries(a).find(([d,e])=>e===n);l&&delete a[l[0]]}},stopAll:()=>{for(const n in a)o.indexOf(n)===-1&&delete a[n]}}};let K=[];const Ce=()=>{for(const t of K)clearTimeout(t);K=[]},Re=(t,o=400)=>{let a=new Date,f=o,r=setTimeout(t,f);return K.push(r),{pause:()=>{clearTimeout(r),f-=new Date-a},resume:()=>{a=new Date,clearTimeout(r),r=setTimeout(t,f),K.push(r)},stop:()=>{clearTimeout(r)}}},ce=2147483646,Q=2147483647,be=16807,Ie=(t=Math.floor(Math.random()*Q))=>{t=t%Q,t<=0&&(t+=ce);const o=()=>(t=t*be%Q,t),a=()=>(o()-1)/ce;return(r,c)=>(c===void 0&&(c=r,r=0),Math.floor(a()*(c-r+1))+r)},Te=(t,o)=>(o===void 0&&(o=t,t=0),Math.floor(Math.random()*(o-t+1))+t),ke=()=>{const t=[],o=[],a=[];return{addEventResize:i=>{i(),t.push(i)},onResizeEvents:()=>t.forEach(i=>i()),addEventClick:i=>o.push(i),onClickEvents:(i,s)=>o.forEach(y=>y(i,s)),addEventMove:i=>a.push(i),onMoveEvents:(i,s)=>a.forEach(y=>y(i,s)),removeAllEvents:()=>{t.splice(0),o.splice(0),a.splice(0)}}},H=(t,o)=>{const a=Math.pow(Math.abs(t.x-o.x),2),f=Math.pow(Math.abs(t.y-o.y),2),r=t.r||0,c=o.r||0,n=Math.pow(r+c,2);return a+f<=n},We=(t,o)=>{const a=t.r||0,f=o.w||0,r=o.h||0;return Math.abs(o.x+f/2-t.x)<=f/2+a&&Math.abs(o.y+r/2-t.y)<=r/2+a},De=(t,o)=>H(t,o),Ae=t=>{const o=new AudioContext,a={},f=c=>{fetch(c).then(n=>n.arrayBuffer()).then(n=>(o==null?void 0:o.decodeAudioData(n))||null).then(n=>{n&&(a[c]=n)})};if(t.length)for(const c of t)f(c);return(c,n)=>{setTimeout(async()=>{const l=o.createBufferSource();a[c]||(a[c]=await fetch(c).then(d=>d.arrayBuffer()).then(d=>(o==null?void 0:o.decodeAudioData(d))||null)),l.buffer=a[c],l.connect(o.destination),n&&(l.playbackRate.value=n),l.start()},0)}};let U;const He=(t,o)=>{if(U)throw new Error("Webcore already specified");const a=Se(),f=Ee(t),{loop:r,stop:c,stopAll:n}=xe(),{addEventResize:l,onResizeEvents:d,addEventClick:e,onClickEvents:i,addEventMove:s,onMoveEvents:y,removeAllEvents:w}=ke();let p=innerWidth/2,u=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight;const P=()=>({cx:p,cy:u,s:m,m:v,isL:g}),h=Ae(o);U={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:P,useScreenMeta:f.useScreenMeta,navigate:(M,E)=>{if(!t.some(S=>S.name===M))throw new Error(`Screen ${M} not specified`);n(),Ce(),w(),new Promise(()=>f.navigate(M,E))},loop:r,loopStop:c,useTimer:Re,rand:Te,useRandChain:Ie,intersect:De,addEventResize:l,addEventClick:e,addEventMove:s,playSound:h},r(()=>a.render(f.render),"draw"),window.onresize=()=>{p=innerWidth/2,u=innerHeight/2,m=innerWidth<innerHeight?innerWidth:innerHeight,v=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),g=innerWidth>innerHeight,a.resize(),d()},document.onpointerdown=M=>{i(M.clientX,M.clientY)},document.onmousemove=M=>{y(M.clientX,M.clientY)},f.navigate()},C=()=>{if(!U)throw new Error("Webcore not specified");return{...U}},Z={},D=t=>{const{shade:o,ctx:a,createImg:f}=C(),r=()=>{const{r:n,c:l="#ffffff",p:d}=t,e=a.createRadialGradient(n,n,n,n,n,n/5);return e.addColorStop(0,o(l,0)),e.addColorStop(.01,o(l,0)),e.addColorStop(.075,o(l,9)),e.addColorStop(.15,o(l,0)),e.addColorStop(.15,o(l,-15)),e.addColorStop(.18,o(l,-5)),e.addColorStop(.22,o(l,-15)),d?(e.addColorStop(.24,o(l,-10)),e.addColorStop(.3,o(l,-8)),e.addColorStop(.34,o(l,-12)),e.addColorStop(.6,o(l,-8)),e.addColorStop(1,o(l,-6))):(e.addColorStop(.24,o(l,-12)),e.addColorStop(.26,o(l,-8)),e.addColorStop(.3,o(l,-2)),e.addColorStop(.34,o(l,0)),e.addColorStop(.5,o(l,5)),e.addColorStop(1,o(l,18))),e},c=()=>{const{r:n,c:l="#ffffff",p:d}=t,e=`${l}_${d?"push":"pop"}_${n}`;if(Z[e])return Z[e];const i=f((s=a)=>{const y=r();s.fillStyle=y,s.beginPath(),s.arc(n,n,n,0,2*Math.PI),s.closePath(),s.fill()},2*n);return Z[e]=i,i};return(n=a)=>{const{x:l,y:d,r:e}=t,i=c();n.drawImage(i,l-e,d-e,2*e,2*e)}},ee={},X=t=>{const{ctx:o}=C();let a;return ee[t.src]?a=ee[t.src]:(a=new Image,a.src=t.src,ee[t.src]=a),(f=o)=>{const{w:r,h:c=r,x:n=0,y:l=0}=t;a.complete&&f.drawImage(a,n,l,r,c)}},ae=t=>{const{font:o,ctx:a}=C(),f=t.text,r=t.text.length,c=2*Math.PI/r/4;return(n=a)=>{const{x:l,y:d,r:e,s:i=0,fs:s}=t,y=s||Math.round(e/4);n.textAlign="center",n.fillStyle="#f9f9f9",n.font=`${y}px ${o}`,n.save(),n.translate(l,d),n.rotate(i);for(let w=0;w<r;w++)n.save(),n.rotate(w*c),n.fillText(f[w],0,-e),n.restore();n.restore()}},ze=()=>{var g,P;const{ctx:t,loop:o,rotate:a,navigate:f,useMeasure:r,addEventClick:c,addEventResize:n,setBackground:l}=C();l("#040404");let d=!1,e,i,s,y,w,p=-.2,u=0;n(()=>{const{cx:h,cy:M,s:E}=r(),S=Math.round(E*.25);e={c:"#ff6347",x:h,y:M,r:S,p:!1},i=D(e),s=X({x:h-S+Math.round(S*.35),y:M-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),y=ae({text:"nezabotin",x:h,y:M,r:Math.round(S*1.1),s:Math.PI*1.6}),w=ae({text:"production",x:h,y:M,r:Math.round(S*1.1),s:Math.PI*2.6})});const m=()=>{p+=.01,u=p>=1?1:p,p>=1.8&&(e.p=!0),p>=2.2&&(e.c="#f86a9a"),p>=2.6&&f("main")};c(()=>{[1.4,1.8,2.2,2.6].some(h=>{if(p<h)return p=h,!0})});const v=()=>{o(m),d=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(P=document==null?void 0:document.fonts)==null||P.ready.then(v):v(),()=>{const{cx:h,cy:M}=r();t.globalAlpha=d?1:0,i(),p<1.8&&s(),p<1.4&&a(()=>{y(),w()},h,M,u),t.globalAlpha=1}},de="ylp",le="score",te="difficulty",ue="sound",ne=[.14,.11,.09,.075],pe=750,Le=350,fe=5,B=[];for(let t=0;t*fe<=pe-Le;t++)B.push(pe-t*fe);let G=null;const z=()=>{const t=p=>localStorage.getItem(`${de}_${p}`),o=(p,u)=>localStorage.setItem(`${de}_${p}`,u.toString()),a=()=>+(t(le)||0),f=p=>o(le,p),r=p=>{const u=a();f(u+p)},c=()=>+(t(te)||0),n=p=>{const u=c();o(te,Math.min(Math.max(u+p,0),ne.length*B.length-1))};return{getScore:a,addScore:r,plusDifficulty:()=>n(1),minusDifficulty:()=>n(-5),getDifficultyRad:()=>{const p=c(),u=Math.floor(p/B.length);return ne[u]||ne[1]},getDifficultyTic:()=>{const p=c(),u=Math.floor(p/B.length),m=p-u*B.length;return B[m]||B[0]},resetDifficulty:()=>o(te,0),getSound:()=>{if(G!==null)return G;const p=t(ue);return!p||p==="true"?(G=!0,!0):(G=!1,!1)},setSound:p=>{G=p,o(ue,p)}}};let me=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3"],A=[...me];const j=()=>{const{rand:t,playSound:o}=C(),{getSound:a}=z();return{playPop:()=>{if(!a())return;const d=t(A.length-1),e=A[d];A.splice(d,1),A.length||(A=[...me]);const i=t(A.length-1);A=[...A.splice(i,A.length),...A],o(e)},playMissed:()=>{if(!a())return;o("/sounds/new/wrong.mp3")},playFail:()=>{if(!a())return;o("/sounds/fail-fast.mp3")},playWin:()=>{if(!a())return;o("/sounds/win.mp3")},playComplete:()=>{if(!a())return;o("/sounds/complete.mp3")}}},$=100/2;let he=0;const Y=()=>{const{loop:t,ctx:o,shade:a,rand:f}=C(),{playPop:r,playMissed:c}=j(),n={},l=()=>{for(const i in n){const s=n[i];if(!s)return;const y=s.popit;if(!s.shake)s.tic+=$/5,s.tic>=$&&(s.dir=-1),s.withoutRad||(y.r=s.origR+s.origR*75e-5*(s.tic+(s.dir>0?0:$-s.tic)));else{s.tic+=$/5;const w=f(1,2),p=f(1,2);y.x=s.origX+Math.random()*w*(Math.random()>.5?1:-1),y.y=s.origY+Math.random()*p*(Math.random()>.5?1:-1)}s.tic>=2*$&&(delete n[i],y.r=s.origR,y.x=s.origX,y.y=s.origY)}},d=(i,s=!1,y=!1)=>{var P;s?c():r(),(P=navigator==null?void 0:navigator.vibrate)==null||P.call(navigator,30),he++;const w=`${new Date().valueOf().toString()}_${he}`,p=1,u=1;let m=i.r,v=i.x,g=i.y;for(const h in n){const M=n[h];i===M.popit&&(m=M.origR,v=M.origX,g=M.origY)}n[w]={withoutRad:s,tic:p,dir:u,popit:i,origR:m,origX:v,origY:g,shake:y}},e=()=>{o.globalAlpha=.25;for(const i in n){const s=n[i];if(s.shake)continue;const y=s.popit;o.fillStyle=a(y.c||"red",-12),o.beginPath(),o.arc(y.x,y.y,y.r+s.origR*.001*(s.tic+(s.dir>0?0:$-s.tic)),0,Math.PI*2),o.closePath(),o.fill()}o.globalAlpha=1};return t(l),{popEffect:d,render:e}},N=t=>{const{font:o,ctx:a}=C();return(f=a)=>{const{text:r,x:c,c:n,y:l,fs:d,a:e="center",mw:i,f:s}=t;f.textAlign=e,f.fillStyle=n,f.font=`${d}px ${s||o}`,f.fillText(r,c,l,i)}},V=100,Fe=t=>{const{loop:o,ctx:a,useMeasure:f,rand:r}=C();let c=null;const n=()=>{if(!c)return;const{m:e}=f();if(c.tic<=V)c.props.fs=((t==null?void 0:t.mfs)||8)/V*c.tic*e;else{const i=r(1,1),s=r(1,1);c.props.x=c.origX+Math.random()*i*(Math.random()>.5?1:-1),c.props.y=c.origY+Math.random()*s*(Math.random()>.5?1:-1),c.shake=!0}c.tic+=c.tic>V?1:10,c.tic>V*2&&!(t!=null&&t.infinity)&&(c=null)},l=e=>{const{cx:i,m:s}=f(),y=0,w={x:i,y:Math.round(s*((t==null?void 0:t.dy)||16)),text:e,c:(t==null?void 0:t.color)||"#ffffff",fs:0},p=N(w);c={props:w,shape:p,tic:y,origX:w.x,origY:w.y}};return o(n),{splashEffect:l,render:()=>{c&&(a.globalAlpha=.01*c.tic,c.shape(),a.globalAlpha=1)}}},_e=({color:t="#ba68c8",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,navigate:n,addEventClick:l,intersect:d}=C(),{from:e}=c();let i,s,y;return a(()=>{const{cx:u,cy:m,s:v,m:g}=f(),P=Math.round(v*.25);i={c:t,r:Math.round(v*.08),x:u-P-1*g,y:m-P+1*g,p:(e==="score"||e==="opening"||e==="devs")&&!i},s=D(i),y=X({x:Number(i.x)-i.r+Math.round(i.r*.5),y:Number(i.y)-i.r+Math.round(i.r*.5),w:i.r*2-Math.round(i.r*1),src:"/media/star.svg"})}),r(()=>{i.p&&o(i,!1,!0),i.p=!1}),l((u,m)=>{d({x:u,y:m},i)&&(o(i),i.p=!0,r(()=>{n("score")},100))}),{render:()=>{s(),i.p||y()},point:()=>({x:i.x,y:i.y,r:i.r})}},ge=({color:t="#ff6347",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,navigate:c,addEventClick:n,intersect:l}=C();let d,e,i;return a(()=>{const{s:w}=f(),p=Math.round(w*.08);d={c:t,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:!d},e=D(d),i=X({x:Number(d.x)-p+Math.round(p*.4),y:Number(d.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{d.p&&o(d,!1,!0),d.p=!1}),n((w,p)=>{l({x:w,y:p},d)&&(o(d),d.p=!0,r(()=>{c("main")},100))}),{render:()=>{e(),d.p||i()},point:()=>({x:d.x,y:d.y,r:d.r})}},Be=({onClick:t,popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,addEventClick:c,intersect:n,rotate:l}=C(),{playPop:d}=j();let e,i,s;return a(()=>{const{s:p}=f(),u=Math.round(p*.08);e={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},i=D(e),s=X({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),c((p,u)=>{n({x:p,y:u},e)&&(d(),e!=null&&e.p||o(e),e.p=!0,t(),r(()=>{e!=null&&e.p&&o(e,!1,!0),e.p=!1},200))}),{render:()=>{i(),e.p||l(()=>{s()},e.x,e.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},Oe=({onClick:t,popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,addEventClick:c,intersect:n,rotate:l}=C(),{playPop:d}=j();let e,i,s;return a(()=>{const{s:p}=f(),u=Math.round(p*.08),m=innerWidth<innerHeight?Math.round(innerWidth-1.6*u-2*u-.3*u):Math.round(innerWidth-1.6*u),v=innerWidth<innerHeight?Math.round(innerHeight-1.6*u):Math.round(innerHeight-1.6*u-2*u-.3*u);e={c:"#ff6347",r:u,x:m,y:v,p:!1},i=D(e),s=X({x:Number(e.x)-u+Math.round(u*.4),y:Number(e.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),c((p,u)=>{n({x:p,y:u},e)&&(d(),e!=null&&e.p||o(e),e.p=!0,t(),r(()=>{e!=null&&e.p&&o(e,!1,!0),e.p=!1},200))}),{render:()=>{i(),e.p||l(()=>{s()},e.x,e.y,innerHeight>innerWidth?0:.5)},point:()=>({x:e.x,y:e.y,r:e.r})}},$e=t=>{const{ctx:o,shade:a}=C(),f=Math.round(t.r/2.2),r=Math.round(.15*t.r),c=a(t.c||"blue",-3);return(n=o)=>{const{r:l,x:d=l,y:e=l}=t;n.lineCap="round",n.fillStyle=c,n.strokeStyle=c,n.lineWidth=f,n.beginPath(),n.moveTo(d+r,e),n.lineTo(d-r/2,e-r),n.lineTo(d-r/2,e+r),n.closePath(),n.fill(),n.beginPath(),n.moveTo(d+r,e),n.lineTo(d-r/2,e-r),n.moveTo(d-r/2,e-r),n.lineTo(d-r/2,e+r),n.moveTo(d-r/2,e+r),n.lineTo(d+r,e),n.stroke()}},ye=({color:t="#bef181",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,navigate:n,addEventClick:l,intersect:d}=C(),{from:e,to:i}=c();let s,y,w;const p=()=>{const{cx:P,cy:h,s:M,m:E}=f(),S=P+Math.round(M*.25)+2*E,x=h+Math.round(M*.25);return{x:S,y:x}},u=()=>{const{cx:P,cy:h,s:M,isL:E,m:S}=f(),x=Math.round(M*.1);if(E){let T=Math.round(P+M/2)+S*2;const k=Math.round(h+M/2-x*2);return T=Math.min(T,Math.round(innerWidth-x*1.5)),{x:T,y:k}}else{const T=Math.round(P+M*.12);let k=Math.round(h+M/2+x*1.5);return k=Math.min(k,innerHeight-Math.round(x*1.5)),{x:T,y:k}}},m=()=>i==="main"?p():u();return a(()=>{const{s:P}=f();s={c:t,r:Math.round(P*.1),...m(),p:(e==="gamescore"||e==="game"||e==="gameover"||e==="opening"||e==="devs")&&!s},y=D(s),w=$e(s)}),r(()=>{s.p&&o(s,!1,!0),s.p=!1}),l((P,h)=>{d({x:P,y:h},s)&&(o(s),s.p=!0,r(()=>{n("game")},100))}),{render:()=>{y(),s.p||w()},point:()=>({x:s.x,y:s.y,r:s.r})}},Me=t=>{const{ctx:o,shade:a}=C(),f=Math.round(t.r/4),r=Math.round(.12*t.r);return(c=o)=>{const{r:n,x:l=n,y:d=n}=t,e=a(t.c||"blue",-3);c.lineCap="round",c.strokeStyle=e,c.lineWidth=f,c.beginPath(),c.moveTo(l-1.5*r,d-2*r),c.lineTo(l-1.5*r,d+2*r),c.stroke(),c.beginPath(),c.moveTo(l+1.5*r,d-2*r),c.lineTo(l+1.5*r,d+2*r),c.stroke()}},Ne=({popEffect:t=()=>{}})=>{const{addEventResize:o,useMeasure:a,useTimer:f,useScreenMeta:r,navigate:c,addEventClick:n,intersect:l}=C(),{from:d}=r();let e,i,s;const y=()=>{const{cx:u,cy:m,s:v,isL:g,m:P}=a(),h=Math.round(v*.1);if(g){let M=Math.round(u-v/2)-P;const E=Math.round(m-v/2+h*2);return M=Math.max(M,Math.round(h*1.5)),{x:M,y:E}}else{const M=Math.round(u-v*.12);let E=Math.round(m+v/2+h*1.5);return E=Math.min(E,innerHeight-Math.round(h*1.5)),{x:M,y:E}}};return o(()=>{const{s:u}=a();e={c:"#fd8059",r:Math.round(u*.08),...y(),p:(d==="game"||d==="opening")&&!e},i=D(e),s=Me(e)}),f(()=>{e.p&&t(e,!1,!0),e.p=!1},500),n((u,m)=>{l({x:u,y:m},e)&&(t(e),e.p=!0,f(()=>{c("main")},100))}),{render:()=>{i(),e.p||s()},point:()=>({x:e.x,y:e.y,r:e.r})}},Ye=t=>{const{ctx:o,shade:a}=C(),f=Math.round(t.r/4),r=Math.round(.2*t.r),c=a(t.c||"blue",-5);return(n=o)=>{const{r:l,x:d=l,y:e=l}=t;n.lineCap="round",n.fillStyle=c,n.strokeStyle=c,n.lineWidth=f,n.beginPath(),n.ellipse(d-r,e+r,f,r,10*Math.PI/180,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.moveTo(d-r/2,e+r),n.lineTo(d,e-r),n.lineTo(d+r,e-r),n.stroke(),t.on||(n.lineWidth=Math.round(f/3),n.beginPath(),n.moveTo(d-l/4,e-l/4),n.lineTo(d+l/4,e+l/4),n.stroke())}},Ge=({color:t="#f9f774",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,addEventClick:n,intersect:l}=C(),{from:d}=c(),{getSound:e,setSound:i}=z();let s,y,w;return a(()=>{const{cx:m,cy:v,s:g,m:P}=f(),h=Math.round(g*.25),M=Math.round(g*.065),E=e();s={c:t,r:M,x:m-h-M-P,y:v-h+3*M,p:(d==="opening"||d==="devs")&&!s,on:E},y=D(s),w=Ye(s)}),r(()=>{s.p&&o(s,!1,!0),s.p=!1}),n((m,v)=>{if(l({x:m,y:v},s)){let g=e();g=!g,i(g),s.p=!0,s.on=g,o(s),r(()=>{s.p=!1},100)}}),{render:()=>{y(),s.p||w()},point:()=>({x:s.x,y:s.y,r:s.r})}},Xe=({color:t="#f86a9a",popEffect:o=()=>{}})=>{const{addEventResize:a,useMeasure:f,useTimer:r,useScreenMeta:c,addEventClick:n,intersect:l,navigate:d}=C(),{from:e}=c();let i,s,y,w,p=0;return a(()=>{const{cx:v,cy:g,s:P}=f(),h=Math.round(P*.25);i={c:t,x:v,y:g,r:h,p:(e==="opening"||e==="devs")&&!i},s=D(i),y=N({text:"Yola",c:"#f1f1f1",x:v,y:g-h+Math.round(h*.9),fs:Math.round(h/2.6),mw:h*2}),w=N({text:"PopiT",c:"#ffeb3b",x:v,y:g-h+Math.round(h*1.3),fs:Math.round(h/2.3),mw:h*2})}),r(()=>{i.p&&o(i,!1,!0),i.p=!1}),n((v,g)=>{l({x:v,y:g},i)&&!(i!=null&&i.p)&&(p++,o(i),i.p=!0,r(()=>{p>50?d("devs"):(i!=null&&i.p&&o(i,!1,!0),i.p=!1)},200))}),{render:()=>{s(),i.p||(y(),w())},point:()=>({x:i.x,y:i.y,r:i.r})}},we=({color:t="#00dcfe",frequency:o=20})=>{const{addEventResize:a,useRandChain:f,useMeasure:r,rand:c,useTimer:n,setBackground:l,useScreenMeta:d}=C(),{from:e}=d();l(t);const i=c(0,999);let s=[],y=[];a(()=>{const m=f(i),{s:v}=r();s=[];const g=Math.round(v*.04),P=Math.round(innerWidth/g/2)-2,h=Math.round((innerWidth-2*g*P)/(P+1)),M=Math.round(innerHeight/g/2)-2,E=Math.round((innerHeight-2*g*M)/(M+1));for(let S=0;S<M;S++)for(let x=0;x<P;x++)m(m(o))<1&&s.push({x:h+g+x*g*2+h*x,y:E+g+S*g*2+E*S,r:g,c:t,p:e==="opening"?!0:m(1)>0});y=s.map(S=>D(S))});const w=()=>{n(()=>{const m=c(s.length-1);s[m]&&(s[m].p=!s[m].p),w()},750)};return e==="opening"?n(()=>{s.forEach(m=>m.p=c(1)>0),w()}):w(),{render:()=>{y.forEach(m=>m())},setIntersections:m=>{s=s.filter(({x:v,y:g,r:P})=>m(v,g,P)),y=s.map(v=>D(v))}}},re=(t=!1)=>{let o=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:f,setBackground:r,rand:c}=C(),{getDifficultyRad:n}=z();return o=[...o.splice(c(o.length-1),o.length),...o],t||a(()=>{const{s:d}=f(),e=n(),i=Math.round(d*e),s=Math.round(innerWidth/i/2)-1,y=(innerWidth-2*i*s)/(s+1),w=Math.round(innerHeight/i/2)-1,p=(innerHeight-2*i*w)/(w+1),u=innerWidth>=innerHeight,m=u?s:w,v=u?y:p,g=u?innerWidth:innerHeight;let P=0;const h=[];for(let E=0;E<m;E++)o[P]||(P=0),h.push(`${o[P]} ${(v+i+E*i*2+v*E)/g*100}%`),P++;r(`linear-gradient(${u?"to right":"to bottom"}, ${h.join(", ")})`,innerWidth<innerHeight?o[0]:"#040404")}),o},ve=({palette:t,retry:o,popEffect:a=()=>{}})=>{const{addEventResize:f,useMeasure:r,rand:c,useTimer:n,useScreenMeta:l,navigate:d,addEventClick:e,intersect:i}=C(),{from:s}=l(),{getDifficultyRad:y}=z(),w=[];let p=[],u,m,v,g={x:0,y:0,r:0};const P=M=>Array.isArray(t)?t[M]:t;return f(()=>{const{s:M}=r();w.splice(0);const E=y(),S=Math.round(M*E),x=Math.round(innerWidth/S/2)-1,T=(innerWidth-2*S*x)/(x+1),k=Math.round(innerHeight/S/2)-1,O=(innerHeight-2*S*k)/(k+1),L=innerWidth>=innerHeight;let b=0;for(let R=0;R<k;R++){for(let W=0;W<x;W++){P(b)||(b=0);const I={x:T+S+W*S*2+T*W,y:O+S+R*S*2+O*R,r:S,c:P(b),p:!0};R===0&&W===x-1?(g={x:I.x,y:I.y,r:I.r,c:I.c,p:(s==="main"||s==="gameover"||s==="gamescore")&&!g.r},u=D(g),m=Me(g)):w.push(I),b+=L?1:0}b=L?0:b+1}o&&(v=w[c(w.length-1)],n(()=>{a(v,!1,!0),v.p=!1})),p=w.map(R=>D(R))}),n(()=>{g.p&&a(g,!1,!0),g.p=!1}),o&&e((M,E)=>{i({x:M,y:E},v)&&(a(v),v.p=!0,n(()=>{d("game")},100))}),e((M,E)=>{i({x:M,y:E},g)&&(a(g),g.p=!0,n(()=>{d("main")},100))}),{render:()=>{p.forEach(M=>M()),u(),g!=null&&g.p||m()},popits:w,pausePpt:g}},_=100,q="#222",je=t=>{const o=(t==null?void 0:t[0])||0,a=(t==null?void 0:t[1])||0,f=(t==null?void 0:t[2])||0;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(a<255?a<1?0:a:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},oe={},Ve=t=>{const{ctx:o,createImg:a,useRandChain:f,useTimer:r}=C();let c,n=!1,l=[];const d=t.r*2/_/2;oe[t.imgSrc]?c=oe[t.imgSrc]:(c=oe[t.imgSrc]={img:new Image,cols:[],isFilled:!1,r:t.r,drawImg:null,score:t.score},c.img.src=t.imgSrc);const e=()=>r(()=>{n=!n,e()},250),i=(u,m=o)=>{const{x:v,y:g,c:P,r:h}=u;m.fillStyle=P||"red",m.beginPath(),m.arc(v+h,g+h,h,0,Math.PI*2),m.closePath(),m.fill()},s=(u=o,m=0,v=0)=>{u.fillStyle=q,u.beginPath(),u.roundRect(m,v,2*t.r,2*t.r,d),u.closePath(),u.fill()},y=()=>{const u=[];for(let h=0;h<_;h++)for(let M=0;M<_;M++){const E={x:M*d*2,y:h*d*2,r:d,c:q};u.push(E)}let m=t.score-t.winScore;const v=[...u],g=f(t.seed),P=(h=!1)=>{const M=g(v.length-1),E=v[M],S=u.indexOf(E);E.c=h?q:c.cols[S],v.splice(M,1),h&&l.push({...E,c:c.cols[S]})};for(let h=m;h>0;h--)P();if(t.winScore){l=[];for(let h=t.winScore;h>0;h--)P(!0);e()}return u},w=()=>{const u=y();c.drawImg=a((m=o)=>{s(m),u.filter(v=>v.c!==q).forEach(v=>i(v,m))},2*t.r)},p=async()=>{var v;const u=document.createElement("canvas");u.width=_,u.height=_;const m=u.getContext("2d",{willReadFrequently:!0});m==null||m.drawImage(c.img,0,0);for(let g=0;g<_;g++){const P=[];for(let h=0;h<_;h++){const M=(v=m==null?void 0:m.getImageData(h,g,1,1))==null?void 0:v.data;P.push(je(M))}c.cols.push(...P)}c.isFilled=!0,w()};return c.isFilled?(c.r!==t.r||c.score!==t.score)&&w():c.img.onload=p,(u=o)=>{const{x:m,y:v,r:g,winScore:P}=t;if(c.drawImg?u.drawImage(c.drawImg,m-g,v-g,2*g,2*g):s(u,m-g,v-g),n&&P&&c.drawImg)for(const h of l)u.fillStyle=h.c||"red",u.beginPath(),u.arc(m-g+h.x+h.r,v-g+h.y+h.r,h.r,0,Math.PI*2),u.closePath(),u.fill()}},se=1e4,Pe=(t=0,o=!1)=>{const{addEventResize:a,useMeasure:f,translate:r}=C(),{getScore:c}=z(),n=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=c();let d,e=0,i=0,s=!1,y=!1;const w=P=>Math.min(Math.floor(P/se),n.length-1);let p=w(l-t);return t&&(s=w(l)!==p,y=Math.floor(l/se)>n.length-1),a(()=>{const{cx:P,cy:h,s:M,isL:E}=f();d=[],e=(M-2*M*.055*1.6)/2,i=M*.05;let S=o?p:0;for(S;S<(o?p+1:n.length);S++){const x=n[S],T=E?P:P+S*e*2+S*i,k=E?h+S*e*2+S*i:h;d.push(Ve({x:T,y:k,r:e,score:Math.min(l-S*se,1e4),imgSrc:x,winScore:s||y?0:t,seed:S}))}}),{up:()=>{p=p+1<n.length?p+1:n.length-1},down:()=>{p=p-1<0?0:p-1},render:()=>{const{isL:P}=f(),h=P?0:-(p*e*2+p*i),M=P?-(p*e*2+p*i):0;r(()=>{d==null||d.forEach(E=>E())},h,M)},rect:()=>{const{cx:P,cy:h}=f(),M=innerWidth>innerHeight;return{x:M?P-e:0,y:M?0:h-e,w:M?2*e:innerWidth,h:M?innerHeight:2*e}},isJump:s,isCompleted:y}},qe=({popits:t,pausePpt:o,popEffect:a=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:r,rand:c,addEventClick:n,addEventMove:l,intersect:d,navigate:e,addEventResize:i}=C(),{getScore:s,addScore:y,getDifficultyTic:w}=z();let p=[],u,m,v=!1,g=0,P=0,h=0;const M=s(),E=w(),S=b=>{const R=t.filter(F=>p.indexOf(F)===-1&&F!==b),W=c(R.length-1),I=R[W];I&&(a(I,!1,!0),I.p=!1,p.push(R[W]))},x=()=>{m=r(()=>{if(h=Math.max(h-10,50),t.length===p.length){v=!0,m.stop(),r(()=>{e("gameover")});return}S(),x()},h)},T=b=>{p=[];const R=t.length;let W=c(Math.round(R*.3),Math.round(R*.6));const I=[...t];if(b){const F=I.indexOf(b);I.splice(F,1)}for(let F=W;F>0;F--){const ie=c(I.length-1),J=I[ie];J.p=!1,a(J,!1,!0),p.push(J),I.splice(ie,1)}h=E,u==null||u.stop(),m==null||m.stop(),M&&(u=r(()=>{f("SLOWLY"),x()},p.length*E)),g=g>0?g:c(3,5)},k=()=>1,O=b=>{a(b),h=Math.min(h+5,E),P++,b.p=!0;const R=p.indexOf(b);if(p.splice(R,1),p.length<=0)if(g--,g>0)r(()=>{f(g>1?"Round":"Last"),T(b)},100);else{u==null||u.stop(),m==null||m.stop();const W=k();y(P*W),r(()=>{e("gamescore",{winScore:P*W})},100)}},L=(b,R,W=!1)=>{if(!v){for(const I of p)if(d({x:b,y:R},I)){O(I);return}if(!d({x:b,y:R},o)&&!W){for(const I of t)if(d({x:b,y:R},I)){a(I,!0),f("Popenalty"),S(I);return}f("Popenalty"),S()}}};n(L),l((b,R)=>L(b,R,!0)),i(()=>{r(()=>{f("Pop it"),T()})})},Ke=t=>{const{addEventResize:o,createImg:a,useMeasure:f,ctx:r,loop:c}=C();let n,l,d,e,i,s,y,w=!1,p=-2;const u=.1;return o(()=>{const{s:m,m:v}=f();l=Math.round(m*.16),i=m,s=Math.round(l*1.5),d=0,e=Math.round((innerHeight-innerHeight/2-m/2)/2-l/2)+v*2,y=e,w=e-l/2>-(l/2)+v*2;const g={fs:l,text:t,x:Math.round(m/2),y:l,c:"#f9f9f9",mw:Math.round(m*.8)},P=N(g);n=a((h=r)=>{P(h)},i,s)}),c(()=>{const{m}=f();e+=p,p+=u,e<=m&&(e=m),e>=y&&(e=y,p=-2)}),()=>{w&&r.drawImage(n,d,e,i,s)}},Ue=()=>{const{addEventResize:t,rand:o,useScreenMeta:a}=C(),{from:f}=a(),{popEffect:r,render:c}=Y(),n=["#00dcfe","#5bb2f7","#92E6E6"],l=f==="opening"?n[0]:n[o(n.length-1)],{render:d,setIntersections:e}=we({color:l}),{render:i,point:s}=Xe({popEffect:r}),{render:y,point:w}=ye({popEffect:r}),{render:p,point:u}=_e({popEffect:r}),{render:m,point:v}=Ge({popEffect:r});return t(()=>{const g=u(),P=s(),h=w(),M=v();e((E,S,x)=>!H({x:E,y:S,r:x},g)&&!H({x:E,y:S,r:x},P)&&!H({x:E,y:S,r:x},h)&&!H({x:E,y:S,r:x},M))}),()=>{c(),d(),i(),y(),p(),m()}},Je=()=>{const{useMeasure:t,addEventResize:o}=C(),a=re(),{popEffect:f,render:r}=Y(),{popits:c,render:n,pausePpt:l}=ve({palette:a,popEffect:f}),d={mfs:0,dy:0},{splashEffect:e,render:i}=Fe(d);return qe({popits:c,popEffect:f,pausePpt:l,splashEffect:e}),o(()=>{const s=(c[0].y-c[0].r)/t().m;d.mfs=s,d.dy=s}),()=>{r(),n(),i()}},Qe=()=>{const t="#ff6347",{popEffect:o,render:a}=Y(),{setBackground:f}=C(),{minusDifficulty:r}=z(),{render:c}=ve({palette:t,retry:!0,popEffect:o}),{playFail:n}=j();return f(t),r(),n(),()=>{a(),c()}},Ze=()=>{const{useScreenMeta:t,useTimer:o,navigate:a}=C(),{plusDifficulty:f,resetDifficulty:r}=z(),{data:c}=t(),{popEffect:n,render:l}=Y();re();const{playWin:d,playComplete:e}=j(),{render:i,isJump:s,isCompleted:y}=Pe(c==null?void 0:c.winScore,!0);let w,p;if(!y){const{render:m}=ye({popEffect:n}),{render:v}=Ne({popEffect:n});w=m,p=v}const u=Ke(y?"The end":s?"Complete":"You win");return s||y?(r(),e()):(f(),d()),y&&o(()=>{a("devs")},5e3),()=>{l(),i(),y||(w(),p()),u()}},et=()=>{const{addEventResize:t,rand:o}=C(),{popEffect:a,render:f}=Y(),r=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],c=r[o(r.length-1)],{render:n,setIntersections:l}=we({color:c,frequency:10}),{render:d,rect:e,up:i,down:s}=Pe(),{render:y,point:w}=ge({popEffect:a}),{render:p,point:u}=Be({onClick:i,popEffect:a}),{render:m,point:v}=Oe({onClick:s,popEffect:a});return t(()=>{const g=w(),P=e(),h=u(),M=v();l((E,S,x)=>!H({x:E,y:S,r:x},g)&&!We({x:E,y:S,r:x},P)&&!H({x:E,y:S,r:x},h)&&!H({x:E,y:S,r:x},M))}),()=>{f(),n(),d(),y(),p(),m()}},tt=()=>{var g,P;const{addEventResize:t,setBackground:o,createImg:a,useMeasure:f,ctx:r,loop:c,navigate:n}=C(),{popEffect:l,render:d}=Y(),{render:e}=ge({popEffect:l}),i=re(!0);let s=[];const y=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let w=0,p=!1;const u=()=>{const{m:h,s:M}=f();s=[];const E=Math.round(h*3.5),S=Math.round(M*.75),x=Math.round((innerWidth-S)/2);let T=0;for(const k of y){i[T]||(T=0);const O=N({text:k,x:0,y:E,c:i[T],fs:Math.round(E*.6),mw:S,a:"left",f:"Slackey"}),L=N({text:"Maksim Nezabotin",x:S,y:E*1.5,c:"#f9f9f9",fs:Math.round(E*.7),mw:S,a:"right",f:"Slackey"}),b=a((R=r)=>{O(R),L(R)},S,2*E);s.push({img:b,x,y:w,w:S,h:5*E}),w+=5*E,T++}};t(u),o("#040404");const m=()=>{for(const M of s)M.y-=2;const h=s[s.length-1];h.y+h.h<0&&n("main")},v=()=>{w=innerHeight,u(),c(m),p=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(P=document==null?void 0:document.fonts)==null||P.ready.then(v):v(),()=>{r.globalAlpha=p?1:0,s.forEach(({img:h,x:M,y:E,w:S,h:x})=>{r.drawImage(h,M,E,S,x)}),d(),e(),r.globalAlpha=1}},nt=[{name:"opening",ctor:ze},{name:"main",ctor:Ue},{name:"game",ctor:Je},{name:"gameover",ctor:Qe},{name:"gamescore",ctor:Ze},{name:"score",ctor:et},{name:"devs",ctor:tt}],ot=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/new/pop25.mp3","/sounds/new/pop26.mp3","/sounds/new/pop27.mp3","/sounds/new/pop28.mp3","/sounds/new/pop29.mp3","/sounds/new/pop30.mp3","/sounds/new/pop31.mp3","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3","/sounds/complete.mp3"];He(nt,ot);document.title="Yo last Pop it";
