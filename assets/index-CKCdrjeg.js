(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))p(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const t of c.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&p(t)}).observe(document,{childList:!0,subtree:!0});function d(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function p(o){if(o.ep)return;o.ep=!0;const c=d(o);fetch(o.href,c)}})();const we=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const d=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},p=s=>{n.clearRect(0,0,innerWidth,innerHeight),s()};return d(),document.body.appendChild(e),{ctx:n,render:p,resize:d,rotate:(s,r,i,h)=>{n.save(),n.translate(r,i),n.rotate(Math.PI*h),n.translate(-r,-i),s(),n.restore()},translate:(s,r,i)=>{n.save(),n.translate(r,i),s(),n.restore()},shade:(s,r)=>{s=s.substring(1);const i=parseInt(s,16),h=Math.round(2.55*r),f=(i>>16)+h,a=(i>>8&255)+h,M=(i&255)+h;return"#"+(16777216+(f<255?f<1?0:f:255)*65536+(a<255?a<1?0:a:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(s,r)=>{var i;document.body.style.background=s,document.body.style.backgroundColor=r||s,(i=document.querySelector('meta[name="theme-color"]'))==null||i.setAttribute("content",r||s)},createImg:(s,r,i=r)=>{const h=document.createElement("canvas"),f=h.getContext("2d");if(!f)throw new Error("CanvasRenderingContext2D is null");return h.width=r*devicePixelRatio,h.height=i*devicePixelRatio,f.scale(devicePixelRatio,devicePixelRatio),s(f),h}}},Pe=e=>{let n="",d="",p;const o=l=>e.find(u=>u.name===l)||e[0],t={render:()=>{},navigate:(l,u)=>{const s=o(l);d=n||"",n=(s==null?void 0:s.name)||"",p=u,t.render=(s==null?void 0:s.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:d,data:p})};return t},Se=()=>{const e=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),n=[],d={};return{loop:(t,l)=>{if(Object.entries(d).find(([s,r])=>r===t)||l&&d[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&n.push(l),l=l||new Date().valueOf().toString(),d[l]=t;const u=()=>{t(),d[l]&&e(u)};u()},stop:t=>{if(typeof t=="string")delete d[t];else{const l=Object.entries(d).find(([u,s])=>s===t);l&&delete d[l[0]]}},stopAll:()=>{for(const t in d)n.indexOf(t)===-1&&delete d[t]}}};let q=[];const Ee=()=>{for(const e of q)clearTimeout(e);q=[]},Ce=(e,n=400)=>{let d=new Date,p=n,o=setTimeout(e,p);return q.push(o),{pause:()=>{clearTimeout(o),p-=new Date-d},resume:()=>{d=new Date,clearTimeout(o),o=setTimeout(e,p),q.push(o)},stop:()=>{clearTimeout(o)}}},oe=2147483646,K=2147483647,Ie=16807,xe=(e=Math.floor(Math.random()*K))=>{e=e%K,e<=0&&(e+=oe);const n=()=>(e=e*Ie%K,e),d=()=>(n()-1)/oe;return(o,c)=>(c===void 0&&(c=o,o=0),Math.floor(d()*(c-o+1))+o)},Re=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),be=()=>{const e=[],n=[],d=[];return{addEventResize:r=>{r(),e.push(r)},onResizeEvents:()=>e.forEach(r=>r()),addEventClick:r=>n.push(r),onClickEvents:(r,i)=>n.forEach(h=>h(r,i)),addEventMove:r=>d.push(r),onMoveEvents:(r,i)=>d.forEach(h=>h(r,i)),removeAllEvents:()=>{e.splice(0),n.splice(0),d.splice(0)}}},H=(e,n)=>{const d=Math.pow(Math.abs(e.x-n.x),2),p=Math.pow(Math.abs(e.y-n.y),2),o=e.r||0,c=n.r||0,t=Math.pow(o+c,2);return d+p<=t},Te=(e,n)=>{const d=e.r||0,p=n.w||0,o=n.h||0;return Math.abs(n.x+p/2-e.x)<=p/2+d&&Math.abs(n.y+o/2-e.y)<=o/2+d},We=(e,n)=>H(e,n),ke=e=>{const n=new AudioContext,d={},p=c=>{fetch(c).then(t=>t.arrayBuffer()).then(t=>(n==null?void 0:n.decodeAudioData(t))||null).then(t=>{t&&(d[c]=t)})};if(e.length)for(const c of e)p(c);return c=>{setTimeout(async()=>{const t=n.createBufferSource();d[c]||(d[c]=await fetch(c).then(l=>l.arrayBuffer()).then(l=>(n==null?void 0:n.decodeAudioData(l))||null)),t.buffer=d[c],t.connect(n.destination),t.start()},0)}};let U;const He=(e,n)=>{if(U)throw new Error("Webcore already specified");const d=we(),p=Pe(e),{loop:o,stop:c,stopAll:t}=Se(),{addEventResize:l,onResizeEvents:u,addEventClick:s,onClickEvents:r,addEventMove:i,onMoveEvents:h,removeAllEvents:f}=be();let a=innerWidth/2,M=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight;const y=()=>({cx:a,cy:M,s:g,m:w,isL:m}),v=ke(n);U={font:"Tijuf",ctx:d.ctx,shade:d.shade,rotate:d.rotate,translate:d.translate,setBackground:d.setBackground,createImg:d.createImg,useMeasure:y,useScreenMeta:p.useScreenMeta,navigate:(P,E)=>{if(!e.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);t(),Ee(),f(),new Promise(()=>p.navigate(P,E))},loop:o,loopStop:c,useTimer:Ce,rand:Re,useRandChain:xe,intersect:We,addEventResize:l,addEventClick:s,addEventMove:i,playSound:v},o(()=>d.render(p.render),"draw"),window.onresize=()=>{a=innerWidth/2,M=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,w=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight,d.resize(),u()},document.onpointerdown=P=>{r(P.clientX,P.clientY)},document.onmousemove=P=>{h(P.clientX,P.clientY)},p.navigate()},C=()=>{if(!U)throw new Error("Webcore not specified");return{...U}},J={},W=e=>{const{shade:n,ctx:d,createImg:p}=C(),o=()=>{const{r:t,c:l="#ffffff",p:u}=e,s=d.createRadialGradient(t,t,t,t,t,t/5);return s.addColorStop(0,n(l,0)),s.addColorStop(.01,n(l,0)),s.addColorStop(.075,n(l,9)),s.addColorStop(.15,n(l,0)),s.addColorStop(.15,n(l,-15)),s.addColorStop(.18,n(l,-5)),s.addColorStop(.22,n(l,-15)),u?(s.addColorStop(.24,n(l,-10)),s.addColorStop(.3,n(l,-8)),s.addColorStop(.34,n(l,-12)),s.addColorStop(.6,n(l,-6)),s.addColorStop(1,n(l,-4))):(s.addColorStop(.24,n(l,-12)),s.addColorStop(.26,n(l,-8)),s.addColorStop(.3,n(l,-2)),s.addColorStop(.34,n(l,0)),s.addColorStop(.5,n(l,5)),s.addColorStop(1,n(l,12))),s},c=()=>{const{r:t,c:l="#ffffff",p:u}=e,s=`${l}_${u?"push":"pop"}_${t}`;if(J[s])return J[s];const r=p((i=d)=>{const h=o();i.fillStyle=h,i.beginPath(),i.arc(t,t,t,0,2*Math.PI),i.closePath(),i.fill()},2*t);return J[s]=r,r};return(t=d)=>{const{x:l,y:u,r:s}=e,r=c();t.drawImage(r,l-s,u-s,2*s,2*s)}},Q={},N=e=>{const{ctx:n}=C();let d;return Q[e.src]?d=Q[e.src]:(d=new Image,d.src=e.src,Q[e.src]=d),(p=n)=>{const{w:o,h:c=o,x:t=0,y:l=0}=e;d.complete&&p.drawImage(d,t,l,o,c)}},se=e=>{const{font:n,ctx:d}=C(),p=e.text,o=e.text.length,c=2*Math.PI/o/4;return(t=d)=>{const{x:l,y:u,r:s,s:r=0,fs:i}=e,h=i||Math.round(s/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${h}px ${n}`,t.save(),t.translate(l,u),t.rotate(r);for(let f=0;f<o;f++)t.save(),t.rotate(f*c),t.fillText(p[f],0,-s),t.restore();t.restore()}},De=()=>{var m,y;const{ctx:e,loop:n,rotate:d,navigate:p,useMeasure:o,addEventClick:c,addEventResize:t,setBackground:l}=C();l("#040404");let u=!1,s,r,i,h,f,a=-.2,M=0;t(()=>{const{cx:v,cy:P,s:E}=o(),S=Math.round(E*.25);s={c:"#ff6347",x:v,y:P,r:S,p:!1},r=W(s),i=N({x:v-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=se({text:"nezabotin",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),f=se({text:"production",x:v,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const g=()=>{a+=.01,M=a>=1?1:a,a>=1.8&&(s.p=!0),a>=2.2&&(s.c="#f86a9a"),a>=2.6&&p("main")};c(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(a<v)return a=v,!0})});const w=()=>{n(g),u=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(y=document==null?void 0:document.fonts)==null||y.ready.then(w):w(),()=>{const{cx:v,cy:P}=o();e.globalAlpha=u?1:0,r(),a<1.8&&i(),a<1.4&&d(()=>{h(),f()},v,P,M),e.globalAlpha=1}},re="ylp",ie="score",Z="difficulty",ce="sound",ee=[.14,.11,.09,.075],ae=750,ze=350,de=5,_=[];for(let e=0;e*de<=ae-ze;e++)_.push(ae-e*de);let $=null;const D=()=>{const e=a=>localStorage.getItem(`${re}_${a}`),n=(a,M)=>localStorage.setItem(`${re}_${a}`,M.toString()),d=()=>+(e(ie)||0),p=a=>n(ie,a),o=a=>{const M=d();p(M+a)},c=()=>+(e(Z)||0),t=a=>{const M=c();n(Z,Math.min(Math.max(M+a,0),ee.length*_.length-1))};return{getScore:d,addScore:o,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const a=c(),M=Math.floor(a/_.length);return ee[M]||ee[1]},getDifficultyTic:()=>{const a=c(),M=Math.floor(a/_.length),g=a-M*_.length;return _[g]||_[0]},resetDifficulty:()=>n(Z,0),getSound:()=>$!==null?$:e(ce)==="true"?($=!0,!0):($=!1,!1),setSound:a=>{$=a,n(ce,a)}}},fe=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3"];let k=[...fe];const Y=()=>{const{rand:e,playSound:n}=C(),{getSound:d}=D();return{playPop:()=>{if(!d())return;const l=e(k.length-1),u=k[l];k.splice(l,1),k.length||(k=[...fe]);const s=e(k.length-1);k=[...k.splice(s,k.length),...k],n(u)},playMissed:()=>{if(!d())return;n("/sounds/new/wrong.mp3")},playFail:()=>{if(!d())return;n("/sounds/fail-fast.mp3")},playWin:()=>{if(!d())return;n("/sounds/win.mp3")}}},B=100/2;let le=0;const G=()=>{const{loop:e,ctx:n,shade:d,rand:p}=C(),{playPop:o,playMissed:c}=Y(),t={},l=()=>{for(const r in t){const i=t[r];if(!i)return;const h=i.popit;if(!i.shake)i.tic+=B/5,i.tic>=B&&(i.dir=-1),i.withoutRad||(h.r=i.origR+i.origR*75e-5*(i.tic+(i.dir>0?0:B-i.tic)));else{i.tic+=B/5;const f=p(1,2),a=p(1,2);h.x=i.origX+Math.random()*f*(Math.random()>.5?1:-1),h.y=i.origY+Math.random()*a*(Math.random()>.5?1:-1)}i.tic>=2*B&&(delete t[r],h.r=i.origR,h.x=i.origX,h.y=i.origY)}},u=(r,i=!1,h=!1)=>{i?c():o(),le++;const f=`${new Date().valueOf().toString()}_${le}`,a=1,M=1;t[f]={withoutRad:i,tic:a,dir:M,popit:r,origR:r.r,origX:r.x,origY:r.y,shake:h}},s=()=>{n.globalAlpha=.25;for(const r in t){const i=t[r];if(i.shake)continue;const h=i.popit;n.fillStyle=d(h.c||"red",-12),n.beginPath(),n.arc(h.x,h.y,h.r+i.origR*.001*(i.tic+(i.dir>0?0:B-i.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(l),{popEffect:u,render:s}},ue=e=>{const{font:n,ctx:d}=C();return(p=d)=>{const{text:o,x:c,c:t,y:l,fs:u,a:s="center",mw:r}=e;p.textAlign=s,p.fillStyle=t,p.font=`${u}px ${n}`,p.fillText(o,c,l,r)}},Ae=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:p,useTimer:o,useScreenMeta:c,navigate:t,addEventClick:l,intersect:u}=C(),{from:s}=c();let r,i,h;return d(()=>{const{cx:M,cy:g,s:w,m}=p(),y=Math.round(w*.25);r={c:e,r:Math.round(w*.08),x:M-y-1*m,y:g-y+1*m,p:(s==="score"||s==="opening")&&!r},i=W(r),h=N({x:Number(r.x)-r.r+Math.round(r.r*.5),y:Number(r.y)-r.r+Math.round(r.r*.5),w:r.r*2-Math.round(r.r*1),src:"/media/star.svg"})}),o(()=>{r.p&&n(r,!1,!0),r.p=!1}),l((M,g)=>{u({x:M,y:g},r)&&(n(r),r.p=!0,o(()=>{t("score")},100))}),{render:()=>{i(),r.p||h()},point:()=>({x:r.x,y:r.y,r:r.r})}},Fe=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:p,useTimer:o,useScreenMeta:c,navigate:t,addEventClick:l,intersect:u}=C(),{from:s}=c();let r,i,h;return d(()=>{const{s:M}=p(),g=Math.round(M*.08);r={c:e,r:g,x:Math.round(1.6*g),y:Math.round(1.6*g),p:s==="main"&&!r},i=W(r),h=N({x:Number(r.x)-g+Math.round(g*.4),y:Number(r.y)-g+Math.round(g*.4),w:g*2-Math.round(g*.8),src:"/media/back.svg"})}),o(()=>{r.p&&n(r,!1,!0),r.p=!1}),l((M,g)=>{u({x:M,y:g},r)&&(n(r),r.p=!0,o(()=>{t("main")},100))}),{render:()=>{i(),r.p||h()},point:()=>({x:r.x,y:r.y,r:r.r})}},Le=({onClick:e})=>{const{addEventResize:n,useMeasure:d,useTimer:p,addEventClick:o,intersect:c,rotate:t}=C(),{playPop:l}=Y();let u,s,r;return n(()=>{const{s:f}=d(),a=Math.round(f*.08);u={c:"#ff6347",r:a,x:Math.round(innerWidth-1.6*a),y:Math.round(innerHeight-1.6*a),p:!1},s=W(u),r=N({x:Number(u.x)-a+Math.round(a*.4),y:Number(u.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),o((f,a)=>{c({x:f,y:a},u)&&(l(),u.p=!0,e(),p(()=>{u.p=!1},100))}),{render:()=>{s(),u.p||t(()=>{r()},u.x,u.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:u.x,y:u.y,r:u.r})}},_e=({onClick:e})=>{const{addEventResize:n,useMeasure:d,useTimer:p,addEventClick:o,intersect:c,rotate:t}=C(),{playPop:l}=Y();let u,s,r;return n(()=>{const{s:f}=d(),a=Math.round(f*.08),M=innerWidth<innerHeight?Math.round(innerWidth-1.6*a-2*a-.3*a):Math.round(innerWidth-1.6*a),g=innerWidth<innerHeight?Math.round(innerHeight-1.6*a):Math.round(innerHeight-1.6*a-2*a-.3*a);u={c:"#ff6347",r:a,x:M,y:g,p:!1},s=W(u),r=N({x:Number(u.x)-a+Math.round(a*.4),y:Number(u.y)-a+Math.round(a*.4),w:a*2-Math.round(a*.8),src:"/media/back.svg"})}),o((f,a)=>{c({x:f,y:a},u)&&(l(),u.p=!0,e(),p(()=>{u.p=!1},100))}),{render:()=>{s(),u.p||t(()=>{r()},u.x,u.y,innerHeight>innerWidth?0:.5)},point:()=>({x:u.x,y:u.y,r:u.r})}},Be=e=>{const{ctx:n,shade:d}=C(),p=Math.round(e.r/2.2),o=Math.round(.15*e.r),c=d(e.c||"blue",-3);return(t=n)=>{const{r:l,x:u=l,y:s=l}=e;t.lineCap="round",t.fillStyle=c,t.strokeStyle=c,t.lineWidth=p,t.beginPath(),t.moveTo(u+o,s),t.lineTo(u-o/2,s-o),t.lineTo(u-o/2,s+o),t.closePath(),t.fill(),t.beginPath(),t.moveTo(u+o,s),t.lineTo(u-o/2,s-o),t.moveTo(u-o/2,s-o),t.lineTo(u-o/2,s+o),t.moveTo(u-o/2,s+o),t.lineTo(u+o,s),t.stroke()}},he=({getX:e,getY:n,color:d="#bef181",popEffect:p=()=>{}})=>{const{addEventResize:o,useMeasure:c,useTimer:t,useScreenMeta:l,navigate:u,addEventClick:s,intersect:r}=C(),{from:i}=l();let h,f,a;return o(()=>{const{cx:w,cy:m,s:y,m:v}=c();h={c:d,r:Math.round(y*.1),x:e(w,y,v),y:n(m,y,v),p:(i==="gamescore"||i==="game"||i==="gameover"||i==="opening")&&!h},f=W(h),a=Be(h)}),t(()=>{h.p&&p(h,!1,!0),h.p=!1}),s((w,m)=>{r({x:w,y:m},h)&&(p(h),h.p=!0,t(()=>{u("game")},100))}),{render:()=>{f(),h.p||a()},point:()=>({x:h.x,y:h.y,r:h.r})}},ge=e=>{const{ctx:n,shade:d}=C(),p=Math.round(e.r/4),o=Math.round(.12*e.r);return(c=n)=>{const{r:t,x:l=t,y:u=t}=e,s=d(e.c||"blue",-3);c.lineCap="round",c.strokeStyle=s,c.lineWidth=p,c.beginPath(),c.moveTo(l-1.5*o,u-2*o),c.lineTo(l-1.5*o,u+2*o),c.stroke(),c.beginPath(),c.moveTo(l+1.5*o,u-2*o),c.lineTo(l+1.5*o,u+2*o),c.stroke()}},Oe=({getX:e,getY:n,popEffect:d=()=>{}})=>{const{addEventResize:p,useMeasure:o,useTimer:c,useScreenMeta:t,navigate:l,addEventClick:u,intersect:s}=C(),{from:r}=t();let i,h,f;return p(()=>{const{cx:g,cy:w,s:m,m:y}=o();i={c:"#fd8059",r:Math.round(m*.08),x:e(g,m,y),y:n(w,m,y),p:(r==="game"||r==="opening")&&!i},h=W(i),f=ge(i)}),c(()=>{i.p&&d(i,!1,!0),i.p=!1},500),u((g,w)=>{s({x:g,y:w},i)&&(d(i),i.p=!0,c(()=>{l("main")},100))}),{render:()=>{h(),i.p||f()},point:()=>({x:i.x,y:i.y,r:i.r})}},$e=e=>{const{ctx:n,shade:d}=C(),p=Math.round(e.r/4),o=Math.round(.2*e.r),c=d(e.c||"blue",-5);return(t=n)=>{const{r:l,x:u=l,y:s=l}=e;t.lineCap="round",t.fillStyle=c,t.strokeStyle=c,t.lineWidth=p,t.beginPath(),t.ellipse(u-o,s+o,p,o,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(u-o/2,s+o),t.lineTo(u,s-o),t.lineTo(u+o,s-o),t.stroke(),e.on||(t.lineWidth=Math.round(p/3),t.beginPath(),t.moveTo(u-l/4,s-l/4),t.lineTo(u+l/4,s+l/4),t.stroke())}},Ne=({color:e="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:p,useTimer:o,useScreenMeta:c,addEventClick:t,intersect:l}=C(),{from:u}=c(),{getSound:s,setSound:r}=D();let i,h,f;return d(()=>{const{cx:g,cy:w,s:m,m:y}=p(),v=Math.round(m*.25),P=Math.round(m*.065),E=s();i={c:e,r:P,x:g-v-P-y,y:w-v+3*P,p:u==="opening"&&!i,on:E},h=W(i),f=$e(i)}),o(()=>{i.p&&n(i,!1,!0),i.p=!1}),t((g,w)=>{if(l({x:g,y:w},i)){let m=s();m=!m,r(m),i.p=!0,i.on=m,n(i),o(()=>{i.p=!1},100)}}),{render:()=>{h(),i.p||f()},point:()=>({x:i.x,y:i.y,r:i.r})}},Ye=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:d,useMeasure:p,useTimer:o,useScreenMeta:c,addEventClick:t,intersect:l,navigate:u}=C(),{from:s}=c();let r,i,h,f;return d(()=>{const{cx:g,cy:w,s:m}=p(),y=Math.round(m*.25);r={c:e,x:g,y:w,r:y,p:s==="opening"&&!r},i=W(r),h=ue({text:"Yola",c:"#f1f1f1",x:g,y:w-y+Math.round(y*.9),fs:Math.round(y/2.6),mw:y*2}),f=ue({text:"PopiT",c:"#ffeb3b",x:g,y:w-y+Math.round(y*1.3),fs:Math.round(y/2.3),mw:y*2})}),o(()=>{r.p&&n(r,!1,!0),r.p=!1}),t((g,w)=>{l({x:g,y:w},r)&&(n(r),r.p=!0,o(()=>{u("opening")},100))}),{render:()=>{i(),r.p||(h(),f())},point:()=>({x:r.x,y:r.y,r:r.r})}},me=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:d,useRandChain:p,useMeasure:o,rand:c,useTimer:t,setBackground:l,useScreenMeta:u}=C(),{from:s}=u();l(e);const r=c(0,999);let i=[],h=[];d(()=>{const g=p(r),{s:w}=o();i=[];const m=Math.round(w*.04),y=Math.round(innerWidth/m/2)-2,v=Math.round((innerWidth-2*m*y)/(y+1)),P=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*P)/(P+1));for(let S=0;S<P;S++)for(let I=0;I<y;I++)g(g(n))<1&&i.push({x:v+m+I*m*2+v*I,y:E+m+S*m*2+E*S,r:m,c:e,p:s==="opening"?!0:g(1)>0});h=i.map(S=>W(S))});const f=()=>{t(()=>{const g=c(i.length-1);i[g]&&(i[g].p=!i[g].p),f()},750)};return s==="opening"?t(()=>{i.forEach(g=>g.p=c(1)>0),f()}):f(),{render:()=>{h.forEach(g=>g())},setIntersections:g=>{i=i.filter(({x:w,y:m,r:y})=>g(w,m,y)),h=i.map(w=>W(w))}}},Me=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:d,useMeasure:p,setBackground:o,rand:c}=C(),{getDifficultyRad:t}=D();return n=[...n.splice(c(n.length-1),n.length),...n],e||d(()=>{const{s:u}=p(),s=t(),r=Math.round(u*s),i=Math.round(innerWidth/r/2)-1,h=(innerWidth-2*r*i)/(i+1),f=Math.round(innerHeight/r/2)-1,a=(innerHeight-2*r*f)/(f+1),M=innerWidth>=innerHeight,g=M?i:f,w=M?h:a,m=M?innerWidth:innerHeight;let y=0;const v=[];for(let E=0;E<g;E++)n[y]||(y=0),v.push(`${n[y]} ${(w+r+E*r*2+w*E)/m*100}%`),y++;o(`linear-gradient(${M?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ye=({palette:e,retry:n,popEffect:d=()=>{}})=>{const{addEventResize:p,useMeasure:o,rand:c,useTimer:t,useScreenMeta:l,navigate:u,addEventClick:s,intersect:r}=C(),{from:i}=l(),{getDifficultyRad:h}=D(),f=[];let a=[],M,g,w,m={x:0,y:0,r:0};const y=P=>Array.isArray(e)?e[P]:e;return p(()=>{const{s:P}=o();f.splice(0);const E=h(),S=Math.round(P*E),I=Math.round(innerWidth/S/2)-1,z=(innerWidth-2*S*I)/(I+1),A=Math.round(innerHeight/S/2)-1,X=(innerHeight-2*S*A)/(A+1),O=innerWidth>=innerHeight;let x=0;for(let R=0;R<A;R++){for(let T=0;T<I;T++){y(x)||(x=0);const b={x:z+S+T*S*2+z*T,y:X+S+R*S*2+X*R,r:S,c:y(x),p:!0};R===0&&T===I-1?(m={x:b.x,y:b.y,r:b.r,c:b.c,p:(i==="main"||i==="gameover"||i==="gamescore")&&!m.r},M=W(m),g=ge(m)):f.push(b),x+=O?1:0}x=O?0:x+1}n&&(w=f[c(f.length-1)],t(()=>{d(w,!1,!0),w.p=!1})),a=f.map(R=>W(R))}),t(()=>{m.p&&d(m,!1,!0),m.p=!1}),n&&s((P,E)=>{r({x:P,y:E},w)&&(d(w),w.p=!0,t(()=>{u("game")},100))}),s((P,E)=>{r({x:P,y:E},m)&&(d(m),m.p=!0,t(()=>{u("main")},100))}),{render:()=>{a.forEach(P=>P()),M(),m!=null&&m.p||g()},popits:f,pausePpt:m}},L=100,j="#222",Ge=e=>{const n=(e==null?void 0:e[0])||0,d=(e==null?void 0:e[1])||0,p=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(d<255?d<1?0:d:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},te={},Xe=e=>{const{ctx:n,createImg:d,useRandChain:p,useTimer:o}=C();let c,t=!1,l=[];const u=e.r*2/L/2;te[e.imgSrc]?c=te[e.imgSrc]:(c=te[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},c.img.src=e.imgSrc);const s=()=>o(()=>{t=!t,s()},250),r=(M,g=n)=>{const{x:w,y:m,c:y,r:v}=M;g.fillStyle=y||"red",g.beginPath(),g.arc(w+v,m+v,v,0,Math.PI*2),g.closePath(),g.fill()},i=(M=n,g=0,w=0)=>{M.fillStyle=j,M.beginPath(),M.roundRect(g,w,2*e.r,2*e.r,u),M.closePath(),M.fill()},h=()=>{const M=[];for(let v=0;v<L;v++)for(let P=0;P<L;P++){const E={x:P*u*2,y:v*u*2,r:u,c:j};M.push(E)}let g=e.score-e.winScore;const w=[...M],m=p(e.seed),y=(v=!1)=>{const P=m(w.length-1),E=w[P],S=M.indexOf(E);E.c=v?j:c.cols[S],w.splice(P,1),v&&l.push({...E,c:c.cols[S]})};for(let v=g;v>0;v--)y();if(e.winScore){l=[];for(let v=e.winScore;v>0;v--)y(!0);s()}return M},f=()=>{const M=h();c.drawImg=d((g=n)=>{i(g),M.filter(w=>w.c!==j).forEach(w=>r(w,g))},2*e.r)},a=async()=>{var w;const M=document.createElement("canvas");M.width=L,M.height=L;const g=M.getContext("2d",{willReadFrequently:!0});g==null||g.drawImage(c.img,0,0);for(let m=0;m<L;m++){const y=[];for(let v=0;v<L;v++){const P=(w=g==null?void 0:g.getImageData(v,m,1,1))==null?void 0:w.data;y.push(Ge(P))}c.cols.push(...y)}c.isFilled=!0,f()};return c.isFilled?(c.r!==e.r||c.score!==e.score)&&f():c.img.onload=a,(M=n)=>{const{x:g,y:w,r:m,winScore:y}=e;if(c.drawImg?M.drawImage(c.drawImg,g-m,w-m,2*m,2*m):i(M,g-m,w-m),t&&y&&c.drawImg)for(const v of l)M.fillStyle=v.c||"red",M.beginPath(),M.arc(g-m+v.x+v.r,w-m+v.y+v.r,v.r,0,Math.PI*2),M.closePath(),M.fill()}},pe=1e4,ve=(e=0,n=!1)=>{const{addEventResize:d,useMeasure:p,translate:o}=C(),{getScore:c}=D(),t=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=c();let u,s=0,r=0,i=!1,h=!1;const f=y=>Math.min(Math.floor(y/pe),t.length-1);let a=f(l-e);if(e){const y=f(l);i=y!==a,h=y>t.length-1}return d(()=>{const{cx:y,cy:v,s:P,isL:E}=p();u=[],s=(P-2*P*.055*1.6)/2,r=P*.05;let S=n?a:0;for(S;S<(n?a+1:t.length);S++){const I=t[S],z=E?y:y+S*s*2+S*r,A=E?v+S*s*2+S*r:v;u.push(Xe({x:z,y:A,r:s,score:Math.min(l-S*pe,1e4),imgSrc:I,winScore:e,seed:S}))}}),{up:()=>{a=a+1<t.length?a+1:t.length-1},down:()=>{a=a-1<0?0:a-1},render:()=>{const{isL:y}=p(),v=y?0:-(a*s*2+a*r),P=y?-(a*s*2+a*r):0;o(()=>{u==null||u.forEach(E=>E())},v,P)},rect:()=>{const{cx:y,cy:v}=p(),P=innerWidth>innerHeight;return{x:P?y-s:0,y:P?0:v-s,w:P?2*s:innerWidth,h:P?innerHeight:2*s}},isJump:i,isCompleted:h}},je=({popits:e,pausePpt:n,popEffect:d=()=>{},splashEffect:p=()=>{}})=>{const{useTimer:o,rand:c,addEventClick:t,addEventMove:l,intersect:u,navigate:s,addEventResize:r}=C(),{getScore:i,addScore:h,getDifficultyTic:f}=D();let a=[],M,g,w=!1,m=0,y=0,v=0;const P=i(),E=f(),S=x=>{const R=e.filter(F=>a.indexOf(F)===-1&&F!==x),T=c(R.length-1),b=R[T];b&&(d(b,!1,!0),b.p=!1,a.push(R[T]))},I=()=>{g=o(()=>{if(v=Math.max(v-10,50),e.length===a.length){w=!0,g.stop(),o(()=>{s("gameover")});return}S(),I()},v)},z=x=>{a=[];const R=e.length;let T=c(Math.round(R*.3),Math.round(R*.6));const b=[...e];if(x){const F=b.indexOf(x);b.splice(F,1)}for(let F=T;F>0;F--){const ne=c(b.length-1),V=b[ne];V.p=!1,d(V,!1,!0),a.push(V),b.splice(ne,1)}v=E,M==null||M.stop(),g==null||g.stop(),P&&(M=o(()=>{p("SLOWLY"),I()},a.length*E)),m=m>0?m:c(3,5)},A=()=>1,X=x=>{d(x),v=Math.min(v+5,E),y++,x.p=!0;const R=a.indexOf(x);if(a.splice(R,1),a.length<=0)if(m--,m>0)o(()=>{p("Round"),z(x)},100);else{M==null||M.stop(),g==null||g.stop();const T=A();h(y*T),o(()=>{s("gamescore",{winScore:y*T})},100)}},O=(x,R,T=!1)=>{if(!w){for(const b of a)if(u({x,y:R},b)){X(b);return}if(!u({x,y:R},n)&&!T){for(const b of e)if(u({x,y:R},b)){d(b,!0),p("Popenalty"),S(b);return}p("Popenalty"),S()}}};t(O),l((x,R)=>O(x,R,!0)),r(()=>{o(()=>{p("Pop it"),z()})})},qe=()=>{const{addEventResize:e,rand:n,useScreenMeta:d}=C(),{from:p}=d(),{popEffect:o,render:c}=G(),t=["#00dcfe","#5bb2f7","#92E6E6"],l=p==="opening"?t[0]:t[n(t.length-1)],{render:u,setIntersections:s}=me({color:l}),{render:r,point:i}=Ye({popEffect:o}),{render:h,point:f}=he({getX:(m,y,v)=>m+Math.round(y*.25)+2*v,getY:(m,y,v)=>m+Math.round(y*.25)+0*v,popEffect:o}),{render:a,point:M}=Ae({popEffect:o}),{render:g,point:w}=Ne({popEffect:o});return e(()=>{const m=M(),y=i(),v=f(),P=w();s((E,S,I)=>!H({x:E,y:S,r:I},m)&&!H({x:E,y:S,r:I},y)&&!H({x:E,y:S,r:I},v)&&!H({x:E,y:S,r:I},P))}),()=>{c(),u(),r(),h(),a(),g()}},Ue=()=>{const{useMeasure:e,addEventResize:n}=C(),d=Me(),{popEffect:p,render:o}=G(),{popits:c,render:t,pausePpt:l}=ye({palette:d,popEffect:p});return je({popits:c,popEffect:p,pausePpt:l}),n(()=>{(c[0].y-c[0].r)/e().m}),()=>{o(),t()}},Ve=()=>{const e="#ff6347",{popEffect:n,render:d}=G(),{setBackground:p}=C(),{minusDifficulty:o}=D(),{render:c}=ye({palette:e,retry:!0,popEffect:n}),{playFail:t}=Y();return p(e),o(),t(),()=>{d(),c()}},Ke=()=>{const{translate:e,useScreenMeta:n}=C(),{plusDifficulty:d,resetDifficulty:p}=D(),{data:o}=n(),{popEffect:c,render:t}=G();Me();const{playWin:l}=Y(),{render:u,isJump:s}=ve(o==null?void 0:o.winScore,!0),{render:r}=he({getX:(h,f,a)=>innerWidth>innerHeight?Math.min(h+(f-2*f*.055*1.6)/2+4*a+Math.round(f*.1),innerWidth-2*a-Math.round(f*.1)):h+(f-2*f*.055*1.6)/8+0*Math.round(f*.1)+2*a,getY:(h,f,a)=>innerWidth>innerHeight?h+(f-2*f*.055*1.6)/2-1*a-Math.round(f*.1):Math.min(h+(f-2*f*.055*1.6)/2+4*a+Math.round(f*.1),innerHeight-2*a-Math.round(f*.1)),popEffect:c}),{render:i}=Oe({getX:(h,f,a)=>innerWidth>innerHeight?Math.max(h-(f-2*f*.055*1.6)/2-4*a-Math.round(f*.1),2*a+Math.round(f*.1)):h+(f-2*f*.055*1.6)/8-2*Math.round(f*.1)-2*a,getY:(h,f,a)=>innerWidth>innerHeight?h-(f-2*f*.055*1.6)/2+0*a+Math.round(f*.1):Math.min(h+(f-2*f*.055*1.6)/2+4*a+Math.round(f*.1),innerHeight-2*a-Math.round(f*.1)),popEffect:c});return s?p():d(),l(),()=>{t(),innerHeight>innerWidth?e(u,0,-Math.round(innerHeight*.05)):u(),r(),i()}},Je=()=>{const{addEventResize:e,rand:n}=C(),{popEffect:d,render:p}=G(),o=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],c=o[n(o.length-1)],{render:t,setIntersections:l}=me({color:c,frequency:10}),{render:u,rect:s,up:r,down:i}=ve(),{render:h,point:f}=Fe({popEffect:d}),{render:a,point:M}=Le({onClick:r,popEffect:d}),{render:g,point:w}=_e({onClick:i,popEffect:d});return e(()=>{const m=f(),y=s(),v=M(),P=w();l((E,S,I)=>!H({x:E,y:S,r:I},m)&&!Te({x:E,y:S,r:I},y)&&!H({x:E,y:S,r:I},v)&&!H({x:E,y:S,r:I},P))}),()=>{p(),t(),u(),h(),a(),g()}},Qe=()=>{const{ctx:e,addEventResize:n,loop:d}=C(),p={x:40,y:100};let o=1,c=1,t;const l=()=>{t=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return l(),n(l),d(()=>{p.x+=2*o,p.y+=3*c,o*=-1,c*=-1}),()=>{e.save();var u=Math.random()*2,s=Math.random()*3;e.translate(u,s),e.beginPath(),e.fillStyle="red",e.rect(p.x,p.y,t,t),e.fill(),e.restore()}},Ze=[{name:"opening",ctor:De},{name:"main",ctor:qe},{name:"game",ctor:Ue},{name:"gameover",ctor:Ve},{name:"gamescore",ctor:Ke},{name:"score",ctor:Je},{name:"devs",ctor:Qe}],et=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3"];He(Ze,et);document.title="Your's last Pop it";
