(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&h(i)}).observe(document,{childList:!0,subtree:!0});function l(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(r){if(r.ep)return;r.ep=!0;const s=l(r);fetch(r.href,s)}})();const pe=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const l=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},h=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return l(),document.body.appendChild(e),{ctx:n,render:h,resize:l,rotate:(t,o,d,a)=>{n.save(),n.translate(o,d),n.rotate(Math.PI*a),n.translate(-o,-d),t(),n.restore()},translate:(t,o,d)=>{n.save(),n.translate(o,d),t(),n.restore()},shade:(t,o)=>{t=t.substring(1);const d=parseInt(t,16),a=Math.round(2.55*o),u=(d>>16)+a,E=(d>>8&255)+a,M=(d&255)+a;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(E<255?E<1?0:E:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(t,o)=>{var d;document.body.style.background=t,document.body.style.backgroundColor=o||t,(d=document.querySelector('meta[name="theme-color"]'))==null||d.setAttribute("content",o||t)},createImg:(t,o,d=o)=>{const a=document.createElement("canvas"),u=a.getContext("2d");if(!u)throw new Error("CanvasRenderingContext2D is null");return a.width=o*devicePixelRatio,a.height=d*devicePixelRatio,u.scale(devicePixelRatio,devicePixelRatio),t(u),a}}},ge=e=>{let n="",l="",h;const r=c=>e.find(f=>f.name===c)||e[0],i={render:()=>{},navigate:(c,f)=>{const t=r(c);l=n||"",n=(t==null?void 0:t.name)||"",h=f,i.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:l,data:h})};return i},me=()=>{const e=requestAnimationFrame||(i=>setTimeout(i,16.666666666666668)),n=[],l={};return{loop:(i,c)=>{if(Object.entries(l).find(([t,o])=>o===i)||c&&l[c])throw new Error(`Loop${c?" "+c:""} already specified`);c&&n.push(c),c=c||new Date().valueOf().toString(),l[c]=i;const f=()=>{i(),l[c]&&e(f)};f()},stop:i=>{if(typeof i=="string")delete l[i];else{const c=Object.entries(l).find(([f,t])=>t===i);c&&delete l[c[0]]}},stopAll:()=>{for(const i in l)n.indexOf(i)===-1&&delete l[i]}}};let Y=[];const Me=()=>{for(const e of Y)clearTimeout(e);Y=[]},ye=(e,n=400)=>{let l=new Date,h=n,r=setTimeout(e,h);return Y.push(r),{pause:()=>{clearTimeout(r),h-=new Date-l},resume:()=>{l=new Date,clearTimeout(r),r=setTimeout(e,h),Y.push(r)},stop:()=>{clearTimeout(r)}}},ee=2147483646,X=2147483647,ve=16807,Ee=(e=Math.floor(Math.random()*X))=>{e=e%X,e<=0&&(e+=ee);const n=()=>(e=e*ve%X,e),l=()=>(n()-1)/ee;return(r,s)=>(s===void 0&&(s=r,r=0),Math.floor(l()*(s-r+1))+r)},Pe=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Se=()=>{const e=[],n=[],l=[];return{addEventResize:o=>{o(),e.push(o)},onResizeEvents:()=>e.forEach(o=>o()),addEventClick:o=>n.push(o),onClickEvents:(o,d)=>n.forEach(a=>a(o,d)),addEventMove:o=>l.push(o),onMoveEvents:(o,d)=>l.forEach(a=>a(o,d)),removeAllEvents:()=>{e.splice(0),n.splice(0),l.splice(0)}}},_=(e,n)=>{const l=Math.pow(Math.abs(e.x-n.x),2),h=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,s=n.r||0,i=Math.pow(r+s,2);return l+h<=i},we=(e,n)=>{const l=e.r||0,h=n.w||0,r=n.h||0;return Math.abs(n.x+h/2-e.x)<=h/2+l&&Math.abs(n.y+r/2-e.y)<=r/2+l},xe=(e,n)=>_(e,n),Re=e=>{const n={},l=r=>{const s=r.split("/");return s[s.length-1].split(".")[0]};return(()=>{for(const r of e){const s=new Audio(r);s.volume=.25,s.addEventListener("ended",function(){this.currentTime=0});const i=l(r);n[i]={audio:s,path:r}}})(),r=>{var f,t;const s=(f=n[r])==null?void 0:f.audio,i=(t=n[r])==null?void 0:t.path;if(!(!s||!i))if(s.currentTime===0)s.play();else{var c=new Audio(i);c.volume=.25,c.play()}}};let G;const be=(e,n)=>{if(G)throw new Error("Webcore already specified");const l=pe(),h=ge(e),{loop:r,stop:s,stopAll:i}=me(),{addEventResize:c,onResizeEvents:f,addEventClick:t,onClickEvents:o,addEventMove:d,onMoveEvents:a,removeAllEvents:u}=Se();let E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const g=()=>({cx:E,cy:M,s:p,m}),v=Re([]);G={font:"Tijuf",ctx:l.ctx,shade:l.shade,rotate:l.rotate,translate:l.translate,setBackground:l.setBackground,createImg:l.createImg,useMeasure:g,useScreenMeta:h.useScreenMeta,navigate:(y,P)=>{if(!e.some(w=>w.name===y))throw new Error(`Screen ${y} not specified`);i(),Me(),u(),new Promise(()=>h.navigate(y,P))},loop:r,loopStop:s,useTimer:ye,rand:Pe,useRandChain:Ee,intersect:xe,addEventResize:c,addEventClick:t,addEventMove:d,playAudio:v},r(()=>l.render(h.render),"draw"),window.onresize=()=>{E=innerWidth/2,M=innerHeight/2,p=innerWidth<innerHeight?innerWidth:innerHeight,m=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),l.resize(),f()},document.onpointerdown=y=>{o(y.clientX,y.clientY)},document.onmousemove=y=>{a(y.clientX,y.clientY)},h.navigate()},x=()=>{if(!G)throw new Error("Webcore not specified");return{...G}},j={},W=e=>{const{shade:n,ctx:l,createImg:h}=x(),r=()=>{const{r:i,c="#ffffff",p:f}=e,t=l.createRadialGradient(i,i,i,i,i,i/5);return t.addColorStop(0,n(c,0)),t.addColorStop(.01,n(c,0)),t.addColorStop(.075,n(c,9)),t.addColorStop(.15,n(c,0)),t.addColorStop(.15,n(c,-15)),t.addColorStop(.18,n(c,-5)),t.addColorStop(.22,n(c,-15)),f?(t.addColorStop(.24,n(c,-10)),t.addColorStop(.3,n(c,-8)),t.addColorStop(.34,n(c,-12)),t.addColorStop(.6,n(c,-6)),t.addColorStop(1,n(c,-4))):(t.addColorStop(.24,n(c,-12)),t.addColorStop(.26,n(c,-8)),t.addColorStop(.3,n(c,-2)),t.addColorStop(.34,n(c,0)),t.addColorStop(.5,n(c,5)),t.addColorStop(1,n(c,10))),t},s=()=>{const{r:i,c="#ffffff",p:f}=e,t=`${c}_${f?"push":"pop"}_${i}`;if(j[t])return j[t];const o=h((d=l)=>{const a=r();d.fillStyle=a,d.beginPath(),d.arc(i,i,i,0,2*Math.PI),d.closePath(),d.fill()},2*i);return j[t]=o,o};return(i=l)=>{const{x:c,y:f,r:t}=e,o=s();i.drawImage(o,c-t,f-t,2*t,2*t)}},q={},L=e=>{const{ctx:n}=x();let l;return q[e.src]?l=q[e.src]:(l=new Image,l.src=e.src,q[e.src]=l),(h=n)=>{const{w:r,h:s=r,x:i=0,y:c=0}=e;l.complete&&h.drawImage(l,i,c,r,s)}},te=e=>{const{font:n,ctx:l}=x(),h=e.text,r=e.text.length,s=2*Math.PI/r/4;return(i=l)=>{const{x:c,y:f,r:t,s:o=0,fs:d}=e,a=d||Math.round(t/4);i.textAlign="center",i.fillStyle="#f9f9f9",i.font=`${a}px ${n}`,i.save(),i.translate(c,f),i.rotate(o);for(let u=0;u<r;u++)i.save(),i.rotate(u*s),i.fillText(h[u],0,-t),i.restore();i.restore()}},Ce=()=>{var g,v;const{ctx:e,loop:n,rotate:l,navigate:h,useMeasure:r,addEventClick:s,addEventResize:i,setBackground:c}=x();c("#040404");let f=!1,t,o,d,a,u,E=-.2,M=0;i(()=>{const{cx:y,cy:P,s:w}=r(),S=Math.round(w*.25);t={c:"#ff6347",x:y,y:P,r:S,p:!1},o=W(t),d=L({x:y-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),a=te({text:"nezabotin",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),u=te({text:"production",x:y,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const p=()=>{E+=.01,M=E>=1?1:E,E>=1.8&&(t.p=!0),E>=2.2&&(t.c="#f86a9a"),E>=2.6&&h("main")};s(()=>{[1.4,1.8,2.2,2.6].some(y=>{if(E<y)return E=y,!0})});const m=()=>{n(p),f=!0};return(g=document==null?void 0:document.fonts)!=null&&g.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(m):m(),()=>{const{cx:y,cy:P}=r();e.globalAlpha=f?1:0,o(),E<1.8&&d(),E<1.4&&l(()=>{a(),u()},y,P,M),e.globalAlpha=1}},F=100/2;let ne=0;const N=()=>{const{loop:e,ctx:n,shade:l,rand:h}=x(),r={},s=()=>{for(const f in r){const t=r[f];if(!t)return;const o=t.popit;if(!t.shake)t.tic+=F/5,t.tic>=F&&(t.dir=-1),t.withoutRad||(o.r=t.origR+t.origR*75e-5*(t.tic+(t.dir>0?0:F-t.tic)));else{t.tic+=F/5;const d=h(1,2),a=h(1,2);o.x=t.origX+Math.random()*d*(Math.random()>.5?1:-1),o.y=t.origY+Math.random()*a*(Math.random()>.5?1:-1)}t.tic>=2*F&&(delete r[f],o.r=t.origR,o.x=t.origX,o.y=t.origY)}},i=(f,t=!1,o=!1)=>{ne++;const d=`${new Date().valueOf().toString()}_${ne}`,a=1,u=1;r[d]={withoutRad:t,tic:a,dir:u,popit:f,origR:f.r,origX:f.x,origY:f.y,shake:o}},c=()=>{n.globalAlpha=.25;for(const f in r){const t=r[f];if(t.shake)continue;const o=t.popit;n.fillStyle=l(o.c||"red",-12),n.beginPath(),n.arc(o.x,o.y,o.r+t.origR*.001*(t.tic+(t.dir>0?0:F-t.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(s),{popEffect:i,render:c}},J=e=>{const{font:n,ctx:l}=x();return(h=l)=>{const{text:r,x:s,c:i,y:c,fs:f,a:t="center",mw:o}=e;h.textAlign=t,h.fillStyle=i,h.font=`${f}px ${n}`,h.fillText(r,s,c,o)}},O=100,Q=e=>{const{loop:n,ctx:l,useMeasure:h,rand:r}=x();let s=null;const i=()=>{if(!s)return;const{m:t}=h();if(s.tic<=O)s.props.fs=((e==null?void 0:e.mfs)||6)/O*s.tic*t;else{const o=r(1,1),d=r(1,1);s.props.x=s.origX+Math.random()*o*(Math.random()>.5?1:-1),s.props.y=s.origY+Math.random()*d*(Math.random()>.5?1:-1),s.shake=!0}s.tic+=s.tic>O?1:10,s.tic>O*2&&(s=null)},c=t=>{const{cx:o,m:d}=h(),a=0,u={x:o,y:Math.round(d*((e==null?void 0:e.dy)||16)),text:t,c:(e==null?void 0:e.color)||"#ffffff",fs:0},E=J(u);s={props:u,shape:E,tic:a,origX:u.x,origY:u.y}},f=()=>{s&&(l.globalAlpha=.01*s.tic,s.shape(),l.globalAlpha=1)};return n(i),{splashEffect:c,render:f}},Ie=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:f}=x(),{from:t}=s();let o,d,a;return l(()=>{const{cx:M,cy:p,s:m,m:g}=h(),v=Math.round(m*.25);o={c:e,r:Math.round(m*.08),x:M-v-1*g,y:p-v+1*g,p:(t==="score"||t==="opening")&&!o},d=W(o),a=L({x:Number(o.x)-o.r+Math.round(o.r*.5),y:Number(o.y)-o.r+Math.round(o.r*.5),w:o.r*2-Math.round(o.r*1),src:"/media/star.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((M,p)=>{f({x:M,y:p},o)&&(n(o),o.p=!0,r(()=>{i("score")},100))}),{render:()=>{d(),o.p||a()},point:()=>({x:o.x,y:o.y,r:o.r})}},Te=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,navigate:i,addEventClick:c,intersect:f}=x(),{from:t}=s();let o,d,a;return l(()=>{const{s:M}=h(),p=Math.round(M*.08);o={c:e,r:p,x:Math.round(1.6*p),y:Math.round(1.6*p),p:t==="main"&&!o},d=W(o),a=L({x:Number(o.x)-p+Math.round(p*.4),y:Number(o.y)-p+Math.round(p*.4),w:p*2-Math.round(p*.8),src:"/media/back.svg"})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),c((M,p)=>{f({x:M,y:p},o)&&(n(o),o.p=!0,r(()=>{i("main")},100))}),{render:()=>{d(),o.p||a()},point:()=>({x:o.x,y:o.y,r:o.r})}},We=e=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:r,intersect:s,rotate:i}=x();let c,f,t;return n(()=>{const{s:a}=l(),u=Math.round(a*.055);c={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u),p:!1},f=W(c),t=L({x:Number(c.x)-u+Math.round(u*.4),y:Number(c.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((a,u)=>{s({x:a,y:u},c)&&(c.p=!0,e(),h(()=>{c.p=!1},100))}),{render:()=>{f(),c.p||i(()=>{t()},c.x,c.y,-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},ke=e=>{const{addEventResize:n,useMeasure:l,useTimer:h,addEventClick:r,intersect:s,rotate:i}=x();let c,f,t;return n(()=>{const{s:a}=l(),u=Math.round(a*.055);c={c:"#ff6347",r:u,x:Math.round(innerWidth-1.6*u),y:Math.round(innerHeight-1.6*u-2*u-.3*u),p:!1},f=W(c),t=L({x:Number(c.x)-u+Math.round(u*.4),y:Number(c.y)-u+Math.round(u*.4),w:u*2-Math.round(u*.8),src:"/media/back.svg"})}),r((a,u)=>{s({x:a,y:u},c)&&(c.p=!0,e(),h(()=>{c.p=!1},100))}),{render:()=>{f(),c.p||i(()=>{t()},c.x,c.y,.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Ae=e=>{const{ctx:n,shade:l}=x(),h=Math.round(e.r/2.2),r=Math.round(.15*e.r),s=l(e.c||"blue",-3);return(i=n)=>{const{r:c,x:f=c,y:t=c}=e;i.lineCap="round",i.fillStyle=s,i.strokeStyle=s,i.lineWidth=h,i.beginPath(),i.moveTo(f+r,t),i.lineTo(f-r/2,t-r),i.lineTo(f-r/2,t+r),i.closePath(),i.fill(),i.beginPath(),i.moveTo(f+r,t),i.lineTo(f-r/2,t-r),i.moveTo(f-r/2,t-r),i.lineTo(f-r/2,t+r),i.moveTo(f-r/2,t+r),i.lineTo(f+r,t),i.stroke()}},ae=({getX:e,getY:n,color:l="#bef181",popEffect:h=()=>{}})=>{const{addEventResize:r,useMeasure:s,useTimer:i,useScreenMeta:c,navigate:f,addEventClick:t,intersect:o}=x(),{from:d}=c();let a,u,E;return r(()=>{const{cx:m,cy:g,s:v,m:y}=s();a={c:l,r:Math.round(v*.1),x:e(m,v,y),y:n(g,v,y),p:(d==="gamescore"||d==="game"||d==="opening")&&!a},u=W(a),E=Ae(a)}),i(()=>{a.p&&h(a,!1,!0),a.p=!1}),t((m,g)=>{o({x:m,y:g},a)&&(h(a),a.p=!0,i(()=>{f("game")},100))}),{render:()=>{u(),a.p||E()},point:()=>({x:a.x,y:a.y,r:a.r})}},de=e=>{const{ctx:n,shade:l}=x(),h=Math.round(e.r/4),r=Math.round(.12*e.r);return(s=n)=>{const{r:i,x:c=i,y:f=i}=e,t=l(e.c||"blue",-3);s.lineCap="round",s.strokeStyle=t,s.lineWidth=h,s.beginPath(),s.moveTo(c-1.5*r,f-2*r),s.lineTo(c-1.5*r,f+2*r),s.stroke(),s.beginPath(),s.moveTo(c+1.5*r,f-2*r),s.lineTo(c+1.5*r,f+2*r),s.stroke()}},De=({getX:e,getY:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:r,useTimer:s,useScreenMeta:i,navigate:c,addEventClick:f,intersect:t}=x(),{from:o}=i();let d,a,u;return h(()=>{const{cx:p,cy:m,s:g,m:v}=r();d={c:"#fd8059",r:Math.round(g*.08),x:e(p,g,v),y:n(m,g,v),p:(o==="game"||o==="opening")&&!d},a=W(d),u=de(d)}),s(()=>{d.p&&l(d,!1,!0),d.p=!1}),f((p,m)=>{t({x:p,y:m},d)&&(l(d),d.p=!0,s(()=>{c("main")},100))}),{render:()=>{a(),d.p||u()},point:()=>({x:d.x,y:d.y,r:d.r})}},He=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:l,useMeasure:h,useTimer:r,useScreenMeta:s,addEventClick:i,intersect:c,navigate:f}=x(),{from:t}=s();let o,d,a,u;return l(()=>{const{cx:p,cy:m,s:g}=h(),v=Math.round(g*.25);o={c:e,x:p,y:m,r:v,p:t==="opening"&&!o},d=W(o),a=J({text:"Yola",c:"#f1f1f1",x:p,y:m-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),u=J({text:"PopiT",c:"#ffeb3b",x:p,y:m-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{o.p&&n(o,!1,!0),o.p=!1}),i((p,m)=>{c({x:p,y:m},o)&&(n(o),o.p=!0,r(()=>{f("opening")},100))}),{render:()=>{d(),o.p||(a(),u())},point:()=>({x:o.x,y:o.y,r:o.r})}},le=({color:e="#00dcfe",frequency:n=25})=>{const{addEventResize:l,useRandChain:h,useMeasure:r,rand:s,useTimer:i,setBackground:c,useScreenMeta:f}=x(),{from:t}=f();c(e);const o=s(0,999);let d=[],a=[];l(()=>{const p=h(o),{s:m}=r();d=[];const g=Math.round(m*.05),v=Math.round(innerWidth/g/2)-1,y=Math.round((innerWidth-2*g*v)/(v+1)),P=Math.round(innerHeight/g/2)-1,w=Math.round((innerHeight-2*g*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<v;b++)p(p(n))<1&&d.push({x:y+g+b*g*2+y*b,y:w+g+S*g*2+w*S,r:g,c:e,p:t==="opening"?!0:p(1)>0});a=d.map(S=>W(S))});const u=()=>{i(()=>{const p=s(d.length-1);d[p]&&(d[p].p=!d[p].p),u()},750)};return t==="opening"?i(()=>{d.forEach(p=>p.p=s(1)>0),u()}):u(),{render:()=>{a.forEach(p=>p())},setIntersections:p=>{d=d.filter(({x:m,y:g,r:v})=>p(m,g,v)),a=d.map(m=>W(m))}}},oe="ylp",re="score",se="difficulty",U=[.14,.11,.09,.075],ie=500,ze=350,ce=5,z=[];for(let e=0;e*ce<=ie-ze;e++)z.push(ie-e*ce);const $=()=>{const e=d=>localStorage.getItem(`${oe}_${d}`),n=(d,a)=>localStorage.setItem(`${oe}_${d}`,a.toString()),l=()=>+(e(re)||0),h=d=>n(re,d),r=d=>{const a=l();h(a+d)},s=()=>+(e(se)||0),i=d=>{const a=s();n(se,Math.min(Math.max(a+d,0),U.length*z.length-1))};return{getScore:l,addScore:r,plusDifficulty:()=>i(1),minusDifficulty:()=>i(-5),getDifficultyRad:()=>{const d=s(),a=Math.floor(d/z.length);return U[a]||U[1]},getDifficultyTic:()=>{const d=s(),a=Math.floor(d/z.length),u=d-a*z.length;return z[u]||z[0]}}},ue=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:l,useMeasure:h,setBackground:r,rand:s}=x(),{getDifficultyRad:i}=$();return n=[...n.splice(s(n.length-1),n.length),...n],e||l(()=>{const{s:f}=h(),t=i(),o=Math.round(f*t),d=Math.round(innerWidth/o/2)-1,a=(innerWidth-2*o*d)/(d+1),u=Math.round(innerHeight/o/2)-1,E=(innerHeight-2*o*u)/(u+1),M=innerWidth>=innerHeight,p=M?d:u,m=M?a:E,g=M?innerWidth:innerHeight;let v=0;const y=[];for(let w=0;w<p;w++)n[v]||(v=0),y.push(`${n[v]} ${(m+o+w*o*2+m*w)/g*100}%`),v++;r(`linear-gradient(${M?"to right":"to bottom"}, ${y.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},fe=({palette:e,retry:n,popEffect:l=()=>{}})=>{const{addEventResize:h,useMeasure:r,rand:s,useTimer:i,useScreenMeta:c,navigate:f,addEventClick:t,intersect:o}=x(),{from:d}=c(),{getDifficultyRad:a}=$(),u=[];let E=[],M,p,m,g;const v=P=>Array.isArray(e)?e[P]:e;return h(()=>{const{s:P}=r();u.splice(0);const w=a(),S=Math.round(P*w),b=Math.round(innerWidth/S/2)-1,C=(innerWidth-2*S*b)/(b+1),I=Math.round(innerHeight/S/2)-1,A=(innerHeight-2*S*I)/(I+1),R=innerWidth>=innerHeight;let T=0;for(let k=0;k<I;k++){for(let D=0;D<b;D++){v(T)||(T=0);const Z={x:C+S+D*S*2+C*D,y:A+S+k*S*2+A*k,r:S,c:v(T),p:!0};k===0&&D===b-1?(g={...Z,p:(d==="main"||d==="gameover"||d==="gamescore")&&!g},M=W(g),p=de(g)):u.push(Z),T+=R?1:0}T=R?0:T+1}n&&(m=u[s(u.length-1)],i(()=>{l(m,!1,!0),m.p=!1})),E=u.map(k=>W(k))}),i(()=>{g.p&&l(g,!1,!0),g.p=!1}),n&&t((P,w)=>{o({x:P,y:w},m)&&(l(m),m.p=!0,i(()=>{f("game")},100))}),t((P,w)=>{o({x:P,y:w},g)&&(l(g),g.p=!0,i(()=>{f("main")},100))}),{render:()=>{E.forEach(P=>P()),M(),g!=null&&g.p||p()},popits:u}},H=100,B="#222",_e=e=>{const n=(e==null?void 0:e[0])||0,l=(e==null?void 0:e[1])||0,h=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(l<255?l<1?0:l:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},V={},Fe=e=>{const{ctx:n,createImg:l,useRandChain:h,useTimer:r}=x();let s,i=!1,c=[];const f=e.r*2/H/2;V[e.imgSrc]?s=V[e.imgSrc]:(s=V[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},s.img.src=e.imgSrc);const t=()=>r(()=>{i=!i,t()},250),o=(M,p=n)=>{const{x:m,y:g,c:v,r:y}=M;p.fillStyle=v||"red",p.beginPath(),p.arc(m+y,g+y,y,0,Math.PI*2),p.closePath(),p.fill()},d=(M=n,p=0,m=0)=>{M.fillStyle=B,M.beginPath(),M.roundRect(p,m,2*e.r,2*e.r,f),M.closePath(),M.fill()},a=()=>{const M=[];for(let y=0;y<H;y++)for(let P=0;P<H;P++){const w={x:P*f*2,y:y*f*2,r:f,c:B};M.push(w)}let p=e.score-e.winScore;const m=[...M],g=h(0),v=(y=!1)=>{const P=g(m.length-1),w=m[P],S=M.indexOf(w);w.c=y?B:s.cols[S],m.splice(P,1),y&&c.push({...w,c:s.cols[S]})};for(let y=p;y>0;y--)v();if(e.winScore){c=[];for(let y=e.winScore;y>0;y--)v(!0);t()}return M},u=()=>{const M=a();s.drawImg=l((p=n)=>{d(p),M.filter(m=>m.c!==B).forEach(m=>o(m,p))},2*e.r)},E=async()=>{var m;const M=document.createElement("canvas");M.width=H,M.height=H;const p=M.getContext("2d",{willReadFrequently:!0});p==null||p.drawImage(s.img,0,0);for(let g=0;g<H;g++){const v=[];for(let y=0;y<H;y++){const P=(m=p==null?void 0:p.getImageData(y,g,1,1))==null?void 0:m.data;v.push(_e(P))}s.cols.push(...v)}s.isFilled=!0,u()};return s.isFilled?(s.r!==e.r||s.score!==e.score)&&u():s.img.onload=E,(M=n)=>{const{x:p,y:m,r:g,winScore:v}=e;if(s.drawImg?M.drawImage(s.drawImg,p-g,m-g,2*g,2*g):d(M,p-g,m-g),i&&v&&s.drawImg)for(const y of c)M.fillStyle=y.c||"red",M.beginPath(),M.arc(p-g+y.x+y.r,m-g+y.y+y.r,y.r,0,Math.PI*2),M.closePath(),M.fill()}},K=1e4,he=(e=0)=>{const{addEventResize:n,useMeasure:l,translate:h}=x(),{getScore:r}=$(),s=["/media/max.png"],i=r();let c,f=0,t=0,o=Math.floor(i/K);return n(()=>{const{cx:M,cy:p,s:m}=l();c=[],f=(m-2*m*.055*1.6)/2,t=m*.05;for(let g=0;g<s.length;g++){const v=s[g];c.push(Fe({x:M,y:p+g*f*2+g*t,r:f,score:i-g*K<0?0:i-g*K,imgSrc:v,winScore:e}))}}),{up:()=>{o=o+1<s.length?o+1:s.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{h(()=>{c==null||c.forEach(M=>M())},0,-(o*f*2+o*t))},rect:()=>{const{cx:M,cy:p}=l(),m=innerWidth>innerHeight;return{x:m?M-f:0,y:m?0:p-f,w:m?2*f:innerWidth,h:m?innerHeight:2*f}}}},$e=({popits:e,popEffect:n=()=>{},splashEffect:l=()=>{}})=>{const{useTimer:h,rand:r,addEventClick:s,addEventMove:i,intersect:c,navigate:f,addEventResize:t}=x(),{addScore:o,getDifficultyTic:d}=$();let a=[],u,E,M=!1,p=0,m=0,g=0;const v=d(),y=C=>{const I=e.filter(T=>a.indexOf(T)===-1&&T!==C),A=r(I.length-1),R=I[A];R&&(n(R,!1,!0),R.p=!1,a.push(I[A]))},P=()=>{E=h(()=>{if(g=Math.max(g-10,50),e.length===a.length){M=!0,E.stop(),h(()=>{f("gameover")});return}y(),P()},g)},w=C=>{a=[];const I=e.length;let A=r(Math.round(I*.3),Math.round(I*.6));const R=[...e];if(C){const T=R.indexOf(C);R.splice(T,1)}for(let T=A;T>0;T--){const k=r(R.length-1),D=R[k];D.p=!1,n(D,!1,!0),a.push(D),R.splice(k,1)}g=v,u==null||u.stop(),E==null||E.stop(),u=h(()=>{l("Too slow"),P()},a.length*v),p=p>0?p:r(3,5)},S=C=>{n(C),g=Math.min(g+5,v),m++,C.p=!0;const I=a.indexOf(C);a.splice(I,1),a.length<=0&&(p--,p>0?h(()=>{l("Round"),w(C)},100):(u==null||u.stop(),E==null||E.stop(),o(m),h(()=>{f("gamescore",{winScore:m})},100)))},b=(C,I,A=!1)=>{if(!M){for(const R of a)if(c({x:C,y:I},R)){S(R);return}if(!A){for(const R of e)if(c({x:C,y:I},R)){n(R,!0),l("Popenalty"),y(R);return}l("Popenalty"),y()}}};s(b),i((C,I)=>b(C,I,!0)),t(()=>{h(()=>{l("Go"),w()})})},Le=()=>{const{addEventResize:e,rand:n,useScreenMeta:l}=x(),{from:h}=l(),{popEffect:r,render:s}=N(),i=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=h==="opening"?i[0]:i[n(i.length-1)],{render:f,setIntersections:t}=le({color:c}),{render:o,point:d}=He({popEffect:r}),{render:a,point:u}=ae({getX:(p,m,g)=>p+Math.round(m*.25)+2*g,getY:(p,m,g)=>p+Math.round(m*.25)+0*g,popEffect:r}),{render:E,point:M}=Ie({popEffect:r});return e(()=>{const p=M(),m=d(),g=u();t((v,y,P)=>!_({x:v,y,r:P},p)&&!_({x:v,y,r:P},m)&&!_({x:v,y,r:P},g))}),()=>{s(),f(),o(),a(),E()}},Ne=()=>{const{useMeasure:e,addEventResize:n}=x(),l=ue(),{popEffect:h,render:r}=N(),{popits:s,render:i}=fe({palette:l,popEffect:h}),c={mfs:0,dy:0},{splashEffect:f,render:t}=Q(c);return $e({popits:s,popEffect:h,splashEffect:f}),n(()=>{const o=(s[0].y-s[0].r)/e().m;c.mfs=o,c.dy=o}),()=>{r(),i(),t()}},Oe=()=>{const e="#ff6347",{popEffect:n,render:l}=N(),{setBackground:h}=x(),{minusDifficulty:r}=$(),{render:s}=fe({palette:e,retry:!0,popEffect:n});return h(e),r(),()=>{l(),s()}},Be=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:l}=$(),{data:h}=n(),{popEffect:r,render:s}=N(),{splashEffect:i,render:c}=Q();ue();const{render:f}=he(h==null?void 0:h.winScore),{render:t}=ae({getX:(d,a,u)=>innerWidth>innerHeight?Math.min(d+(a-2*a*.055*1.6)/2+4*u+Math.round(a*.1),innerWidth-2*u-Math.round(a*.1)):d+(a-2*a*.055*1.6)/8+0*Math.round(a*.1)+2*u,getY:(d,a,u)=>innerWidth>innerHeight?d+(a-2*a*.055*1.6)/2-1*u-Math.round(a*.1):Math.min(d+(a-2*a*.055*1.6)/2+4*u+Math.round(a*.1),innerHeight-2*u-Math.round(a*.1)),popEffect:r}),{render:o}=De({getX:(d,a,u)=>innerWidth>innerHeight?Math.max(d-(a-2*a*.055*1.6)/2-4*u-Math.round(a*.1),2*u+Math.round(a*.1)):d+(a-2*a*.055*1.6)/8-2*Math.round(a*.1)-2*u,getY:(d,a,u)=>innerWidth>innerHeight?d-(a-2*a*.055*1.6)/2+0*u+Math.round(a*.1):Math.min(d+(a-2*a*.055*1.6)/2+4*u+Math.round(a*.1),innerHeight-2*u-Math.round(a*.1)),popEffect:r});return l(),i("You win"),()=>{s(),innerHeight>innerWidth?e(f,0,-Math.round(innerHeight*.07)):f(),t(),o(),c()}},Ye=()=>{const{addEventResize:e,rand:n}=x(),{popEffect:l,render:h}=N(),{splashEffect:r,render:s}=Q(),i=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],c=i[n(i.length-1)],{render:f,setIntersections:t}=le({color:c,frequency:10}),{render:o,rect:d,up:a,down:u}=he(),{render:E,point:M}=Te({popEffect:l}),{point:p}=We(a),{point:m}=ke(u);return e(()=>{const g=M(),v=d(),y=p(),P=m();t((w,S,b)=>!_({x:w,y:S,r:b},g)&&!we({x:w,y:S,r:b},v)&&!_({x:w,y:S,r:b},y)&&!_({x:w,y:S,r:b},P))}),r("Score"),()=>{h(),f(),o(),E(),s()}},Ge=()=>{const{ctx:e,addEventResize:n,loop:l}=x(),h={x:40,y:100};let r=1,s=1,i;const c=()=>{i=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return c(),n(c),l(()=>{h.x+=2*r,h.y+=3*s,r*=-1,s*=-1}),()=>{e.save();var f=Math.random()*2,t=Math.random()*3;e.translate(f,t),e.beginPath(),e.fillStyle="red",e.rect(h.x,h.y,i,i),e.fill(),e.restore()}},Xe=[{name:"opening",ctor:Ce},{name:"main",ctor:Le},{name:"game",ctor:Ne},{name:"gameover",ctor:Oe},{name:"gamescore",ctor:Be},{name:"score",ctor:Ye},{name:"devs",ctor:Ge}];be(Xe);document.title="Your's last Pop it";
