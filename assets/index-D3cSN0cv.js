(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();const ut=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const a=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},l=t=>{n.clearRect(0,0,innerWidth,innerHeight),t()};return a(),document.body.appendChild(e),{ctx:n,render:l,resize:a,rotate:(t,d,u,p)=>{n.save(),n.translate(d,u),n.rotate(Math.PI*p),n.translate(-d,-u),t(),n.restore()},translate:(t,d,u)=>{n.save(),n.translate(d,u),t(),n.restore()},shade:(t,d)=>{t=t.substring(1);const u=parseInt(t,16),p=Math.round(2.55*d),m=(u>>16)+p,y=(u>>8&255)+p,h=(u&255)+p;return"#"+(16777216+(m<255?m<1?0:m:255)*65536+(y<255?y<1?0:y:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},setBackground:(t,d)=>{var u;document.body.style.background=t,document.body.style.backgroundColor=d||t,(u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",d||t)},createImg:(t,d,u=d)=>{const p=document.createElement("canvas"),m=p.getContext("2d");if(!m)throw new Error("CanvasRenderingContext2D is null");return p.width=d*devicePixelRatio,p.height=u*devicePixelRatio,m.scale(devicePixelRatio,devicePixelRatio),t(m),p}}},ht=e=>{let n="",a="",l;const i=o=>e.find(r=>r.name===o)||e[0],s={render:()=>{},navigate:(o,r)=>{const t=i(o);a=n||"",n=(t==null?void 0:t.name)||"",l=r,s.render=(t==null?void 0:t.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:a,data:l})};return s},ft=()=>{const e=requestAnimationFrame||(s=>setTimeout(s,16.666666666666668)),n=[],a={};return{loop:(s,o)=>{if(Object.entries(a).find(([t,d])=>d===s)||o&&a[o])throw new Error(`Loop${o?" "+o:""} already specified`);o&&n.push(o),o=o||new Date().valueOf().toString(),a[o]=s;const r=()=>{s(),a[o]&&e(r)};r()},stop:s=>{if(typeof s=="string")delete a[s];else{const o=Object.entries(a).find(([r,t])=>t===s);o&&delete a[o[0]]}},stopAll:()=>{for(const s in a)n.indexOf(s)===-1&&delete a[s]}}};let B=[];const pt=()=>{for(const e of B)clearTimeout(e);B=[]},gt=(e,n=400)=>{let a=new Date,l=n,i=setTimeout(e,l);return B.push(i),{pause:()=>{clearTimeout(i),l-=new Date-a},resume:()=>{a=new Date,clearTimeout(i),i=setTimeout(e,l),B.push(i)},stop:()=>{clearTimeout(i)}}},K=2147483646,G=2147483647,mt=16807,Mt=(e=Math.floor(Math.random()*G))=>{e=e%G,e<=0&&(e+=K);const n=()=>(e=e*mt%G,e),a=()=>(n()-1)/K;return(i,c)=>(c===void 0&&(c=i,i=0),Math.floor(a()*(c-i+1))+i)},vt=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),yt=()=>{const e=[],n=[],a=[];return{addEventResize:d=>{d(),e.push(d)},onResizeEvents:()=>e.forEach(d=>d()),addEventClick:d=>n.push(d),onClickEvents:(d,u)=>n.forEach(p=>p(d,u)),addEventMove:d=>a.push(d),onMoveEvents:(d,u)=>a.forEach(p=>p(d,u)),removeAllEvents:()=>{e.splice(0),n.splice(0),a.splice(0)}}},A=(e,n)=>{const a=Math.pow(Math.abs(e.x-n.x),2),l=Math.pow(Math.abs(e.y-n.y),2),i=e.r||0,c=n.r||0,s=Math.pow(i+c,2);return a+l<=s},Et=(e,n)=>{const a=e.r||0,l=n.w||0,i=n.h||0;return Math.abs(n.x+l/2-e.x)<=l/2+a&&Math.abs(n.y+i/2-e.y)<=i/2+a},Pt=(e,n)=>A(e,n),St=e=>{const n={},a=i=>{const c=i.split("/");return c[c.length-1].split(".")[0]};return(()=>{for(const i of e){const c=new Audio(i);c.volume=.25,c.addEventListener("ended",function(){this.currentTime=0});const s=a(i);n[s]={audio:c,path:i}}})(),i=>{var r,t;const c=(r=n[i])==null?void 0:r.audio,s=(t=n[i])==null?void 0:t.path;if(!(!c||!s))if(c.currentTime===0)c.play();else{var o=new Audio(s);o.volume=.25,o.play()}}};let N;const wt=(e,n)=>{if(N)throw new Error("Webcore already specified");const a=ut(),l=ht(e),{loop:i,stop:c,stopAll:s}=ft(),{addEventResize:o,onResizeEvents:r,addEventClick:t,onClickEvents:d,addEventMove:u,onMoveEvents:p,removeAllEvents:m}=yt();let y=innerWidth/2,h=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,M=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144);const f=()=>({cx:y,cy:h,s:g,m:M}),E=St([]);N={font:"Tijuf",ctx:a.ctx,shade:a.shade,rotate:a.rotate,translate:a.translate,setBackground:a.setBackground,createImg:a.createImg,useMeasure:f,useScreenMeta:l.useScreenMeta,navigate:(v,S)=>{if(!e.some(w=>w.name===v))throw new Error(`Screen ${v} not specified`);s(),pt(),m(),new Promise(()=>l.navigate(v,S))},loop:i,loopStop:c,useTimer:gt,rand:vt,useRandChain:Mt,intersect:Pt,addEventResize:o,addEventClick:t,addEventMove:u,playAudio:E},i(()=>a.render(l.render),"draw"),window.onresize=()=>{y=innerWidth/2,h=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,M=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),a.resize(),r()},document.onpointerdown=v=>{d(v.clientX,v.clientY)},document.onmousemove=v=>{p(v.clientX,v.clientY)},l.navigate()},x=()=>{if(!N)throw new Error("Webcore not specified");return{...N}},Y={},b=e=>{const{shade:n,ctx:a,createImg:l}=x(),i=()=>{const{r:s,c:o="#ffffff",p:r}=e,t=a.createRadialGradient(s,s,s,s,s,s/5);return t.addColorStop(0,n(o,0)),t.addColorStop(.01,n(o,0)),t.addColorStop(.075,n(o,9)),t.addColorStop(.15,n(o,0)),t.addColorStop(.15,n(o,-15)),t.addColorStop(.18,n(o,-5)),t.addColorStop(.22,n(o,-15)),r?(t.addColorStop(.24,n(o,-10)),t.addColorStop(.3,n(o,-8)),t.addColorStop(.34,n(o,-12)),t.addColorStop(.6,n(o,-6)),t.addColorStop(1,n(o,-4))):(t.addColorStop(.24,n(o,-12)),t.addColorStop(.26,n(o,-8)),t.addColorStop(.3,n(o,-2)),t.addColorStop(.34,n(o,0)),t.addColorStop(.5,n(o,5)),t.addColorStop(1,n(o,10))),t},c=()=>{const{r:s,c:o="#ffffff",p:r}=e,t=`${o}_${r?"push":"pop"}_${s}`;if(Y[t])return Y[t];const d=l((u=a)=>{const p=i();u.fillStyle=p,u.beginPath(),u.arc(s,s,s,0,2*Math.PI),u.closePath(),u.fill()},2*s);return Y[t]=d,d};return(s=a)=>{const{x:o,y:r,r:t}=e,d=c();s.drawImage(d,o-t,r-t,2*t,2*t)}},X={},$=e=>{const{ctx:n}=x();let a;return X[e.src]?a=X[e.src]:(a=new Image,a.src=e.src,X[e.src]=a),(l=n)=>{const{w:i,h:c=i,x:s=0,y:o=0}=e;a.complete&&l.drawImage(a,s,o,i,c)}},J=e=>{const{font:n,ctx:a}=x(),l=e.text,i=e.text.length,c=2*Math.PI/i/4;return(s=a)=>{const{x:o,y:r,r:t,s:d=0,fs:u}=e,p=u||Math.round(t/4);s.textAlign="center",s.fillStyle="#f9f9f9",s.font=`${p}px ${n}`,s.save(),s.translate(o,r),s.rotate(d);for(let m=0;m<i;m++)s.save(),s.rotate(m*c),s.fillText(l[m],0,-t),s.restore();s.restore()}},xt=()=>{var f,E;const{ctx:e,loop:n,rotate:a,navigate:l,useMeasure:i,addEventClick:c,addEventResize:s,setBackground:o}=x();o("#040404");let r=!1,t,d,u,p,m,y=-.2,h=0;s(()=>{const{cx:v,cy:S,s:w}=i(),P=Math.round(w*.25);t={c:"#ff6347",x:v,y:S,r:P,p:!1},d=b(t),u=$({x:v-P+Math.round(P*.35),y:S-P+Math.round(P*.35),w:P*2-Math.round(P*.7),src:"/media/sloth.svg"}),p=J({text:"nezabotin",x:v,y:S,r:Math.round(P*1.1),s:Math.PI*1.6}),m=J({text:"production",x:v,y:S,r:Math.round(P*1.1),s:Math.PI*2.6})});const g=()=>{y+=.01,h=y>=1?1:y,y>=1.8&&(t.p=!0),y>=2.2&&(t.c="#f86a9a"),y>=2.6&&l("main")};c(()=>{[1.4,1.8,2.2,2.6].some(v=>{if(y<v)return y=v,!0})});const M=()=>{n(g),r=!0};return(f=document==null?void 0:document.fonts)!=null&&f.ready?(E=document==null?void 0:document.fonts)==null||E.ready.then(M):M(),()=>{const{cx:v,cy:S}=i();e.globalAlpha=r?1:0,d(),y<1.8&&u(),y<1.4&&a(()=>{p(),m()},v,S,h),e.globalAlpha=1}},L=100/2,rt=()=>{const{loop:e,ctx:n,shade:a}=x(),l={},i=()=>{for(const o in l){const r=l[o];if(!r)return;const t=r.popit;r.tic+=L/5,r.tic>=L&&(r.dir=-1),r.withoutRad||(t.r=r.origR+r.origR*75e-5*(r.tic+(r.dir>0?0:L-r.tic))),r.tic>=2*L&&(delete l[o],t.r=r.origR)}},c=(o,r=!1)=>{const t=new Date().valueOf().toString(),d=1,u=1;l[t]={withoutRad:r,tic:d,dir:u,popit:o,origR:o.r}},s=()=>{n.globalAlpha=.25;for(const o in l){const r=l[o],t=r.popit;n.fillStyle=a(t.c||"red",-20),n.beginPath(),n.arc(t.x,t.y,t.r+r.origR*.001*(r.tic+(r.dir>0?0:L-r.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(i),{popEffect:c,render:s}},Ct=(e="#ba68c8")=>{const{addEventResize:n,useMeasure:a,useTimer:l,useScreenMeta:i,navigate:c,addEventClick:s,intersect:o}=x(),{from:r}=i();let t,d,u;return n(()=>{const{cx:y,cy:h,s:g,m:M}=a(),f=Math.round(g*.25);t={c:e,r:Math.round(g*.08),x:y-f-1*M,y:h-f+1*M,p:(r==="score"||r==="opening")&&!t},d=b(t),u=$({x:Number(t.x)-t.r+Math.round(t.r*.5),y:Number(t.y)-t.r+Math.round(t.r*.5),w:t.r*2-Math.round(t.r*1),src:"/media/star.svg"})}),l(()=>{t.p=!1}),s((y,h)=>{o({x:y,y:h},t)&&(t.p=!0,l(()=>{c("score")},100))}),{render:()=>{d(),t.p||u()},point:()=>({x:t.x,y:t.y,r:t.r})}},Rt=(e="#ff6347")=>{const{addEventResize:n,useMeasure:a,useTimer:l,useScreenMeta:i,navigate:c,addEventClick:s,intersect:o}=x(),{from:r}=i();let t,d,u;return n(()=>{const{s:y}=a(),h=Math.round(y*.08);t={c:e,r:h,x:Math.round(1.6*h),y:Math.round(1.6*h),p:r==="main"&&!t},d=b(t),u=$({x:Number(t.x)-h+Math.round(h*.4),y:Number(t.y)-h+Math.round(h*.4),w:h*2-Math.round(h*.8),src:"/media/back.svg"})}),l(()=>{t.p=!1}),s((y,h)=>{o({x:y,y:h},t)&&(t.p=!0,l(()=>{c("main")},100))}),{render:()=>{d(),t.p||u()},point:()=>({x:t.x,y:t.y,r:t.r})}},bt=e=>{const{addEventResize:n,useMeasure:a,useTimer:l,addEventClick:i,intersect:c,rotate:s}=x();let o,r,t;return n(()=>{const{s:p}=a(),m=Math.round(p*.055);o={c:"#ff6347",r:m,x:Math.round(innerWidth-1.6*m),y:Math.round(innerHeight-1.6*m),p:!1},r=b(o),t=$({x:Number(o.x)-m+Math.round(m*.4),y:Number(o.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),i((p,m)=>{c({x:p,y:m},o)&&(o.p=!0,e(),l(()=>{o.p=!1},100))}),{render:()=>{r(),o.p||s(()=>{t()},o.x,o.y,-.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},It=e=>{const{addEventResize:n,useMeasure:a,useTimer:l,addEventClick:i,intersect:c,rotate:s}=x();let o,r,t;return n(()=>{const{s:p}=a(),m=Math.round(p*.055);o={c:"#ff6347",r:m,x:Math.round(innerWidth-1.6*m),y:Math.round(innerHeight-1.6*m-2*m-.3*m),p:!1},r=b(o),t=$({x:Number(o.x)-m+Math.round(m*.4),y:Number(o.y)-m+Math.round(m*.4),w:m*2-Math.round(m*.8),src:"/media/back.svg"})}),i((p,m)=>{c({x:p,y:m},o)&&(o.p=!0,e(),l(()=>{o.p=!1},100))}),{render:()=>{r(),o.p||s(()=>{t()},o.x,o.y,.5)},point:()=>({x:o.x,y:o.y,r:o.r})}},Tt=e=>{const{ctx:n,shade:a}=x(),l=Math.round(e.r/2.2),i=Math.round(.15*e.r),c=a(e.c||"blue",-3);return(s=n)=>{const{r:o,x:r=o,y:t=o}=e;s.lineCap="round",s.fillStyle=c,s.strokeStyle=c,s.lineWidth=l,s.beginPath(),s.moveTo(r+i,t),s.lineTo(r-i/2,t-i),s.lineTo(r-i/2,t+i),s.closePath(),s.fill(),s.beginPath(),s.moveTo(r+i,t),s.lineTo(r-i/2,t-i),s.moveTo(r-i/2,t-i),s.lineTo(r-i/2,t+i),s.moveTo(r-i/2,t+i),s.lineTo(r+i,t),s.stroke()}},st=({getX:e,getY:n,color:a="#bef181",popEffect:l=()=>{}})=>{const{addEventResize:i,useMeasure:c,useTimer:s,useScreenMeta:o,navigate:r,addEventClick:t,intersect:d}=x(),{from:u}=o();let p,m,y;return i(()=>{const{cx:M,cy:f,s:E,m:v}=c();p={c:a,r:Math.round(E*.1),x:e(M,E,v),y:n(f,E,v),p:(u==="gamescore"||u==="game"||u==="opening")&&!p},m=b(p),y=Tt(p)}),s(()=>{p.p=!1}),t((M,f)=>{d({x:M,y:f},p)&&(l(p),p.p=!0,s(()=>{r("game")},100))}),{render:()=>{m(),p.p||y()},point:()=>({x:p.x,y:p.y,r:p.r})}},it=e=>{const{ctx:n,shade:a}=x(),l=Math.round(e.r/4),i=Math.round(.12*e.r);return(c=n)=>{const{r:s,x:o=s,y:r=s}=e,t=a(e.c||"blue",-3);c.lineCap="round",c.strokeStyle=t,c.lineWidth=l,c.beginPath(),c.moveTo(o-1.5*i,r-2*i),c.lineTo(o-1.5*i,r+2*i),c.stroke(),c.beginPath(),c.moveTo(o+1.5*i,r-2*i),c.lineTo(o+1.5*i,r+2*i),c.stroke()}},Wt=({getX:e,getY:n})=>{const{addEventResize:a,useMeasure:l,useTimer:i,useScreenMeta:c,navigate:s,addEventClick:o,intersect:r}=x(),{from:t}=c();let d,u,p;return a(()=>{const{cx:h,cy:g,s:M,m:f}=l();d={c:"#fd8059",r:Math.round(M*.08),x:e(h,M,f),y:n(g,M,f),p:(t==="game"||t==="opening")&&!d},u=b(d),p=it(d)}),i(()=>{d.p=!1}),o((h,g)=>{r({x:h,y:g},d)&&(d.p=!0,i(()=>{s("main")},100))}),{render:()=>{u(),d.p||p()},point:()=>({x:d.x,y:d.y,r:d.r})}},Q=e=>{const{font:n,ctx:a}=x();return(l=a)=>{const{text:i,x:c,c:s,y:o,fs:r,a:t="center",mw:d}=e;l.textAlign=t,l.fillStyle=s,l.font=`${r}px ${n}`,l.fillText(i,c,o,d)}},Dt=(e="#f86a9a")=>{const{addEventResize:n,useMeasure:a,useTimer:l,useScreenMeta:i,addEventClick:c,intersect:s,navigate:o}=x(),{from:r}=i();let t,d,u,p;return n(()=>{const{cx:h,cy:g,s:M}=a(),f=Math.round(M*.25);t={c:e,x:h,y:g,r:f,p:r==="opening"&&!t},d=b(t),u=Q({text:"Yola",c:"#f1f1f1",x:h,y:g-f+Math.round(f*.9),fs:Math.round(f/2.6),mw:f*2}),p=Q({text:"PopiT",c:"#ffeb3b",x:h,y:g-f+Math.round(f*1.3),fs:Math.round(f/2.3),mw:f*2})}),l(()=>t.p=!1),c((h,g)=>{s({x:h,y:g},t)&&(t.p=!0,l(()=>{o("opening")},100))}),{render:()=>{d(),t.p||(u(),p())},point:()=>({x:t.x,y:t.y,r:t.r})}},ct=({color:e="#00dcfe",frequency:n=25})=>{const{addEventResize:a,useRandChain:l,useMeasure:i,rand:c,useTimer:s,setBackground:o,useScreenMeta:r}=x(),{from:t}=r();o(e);const d=c(0,999);let u=[],p=[];a(()=>{const g=l(d),{s:M}=i();u=[];const f=Math.round(M*.05),E=Math.round(innerWidth/f/2)-1,v=Math.round((innerWidth-2*f*E)/(E+1)),S=Math.round(innerHeight/f/2)-1,w=Math.round((innerHeight-2*f*S)/(S+1));for(let P=0;P<S;P++)for(let C=0;C<E;C++)g(g(n))<1&&u.push({x:v+f+C*f*2+v*C,y:w+f+P*f*2+w*P,r:f,c:e,p:t==="opening"?!0:g(1)>0});p=u.map(P=>b(P))});const m=()=>{s(()=>{const g=c(u.length-1);u[g]&&(u[g].p=!u[g].p),m()},750)};return t==="opening"?s(()=>{u.forEach(g=>g.p=c(1)>0),m()}):m(),{render:()=>{p.forEach(g=>g())},setIntersections:g=>{u=u.filter(({x:M,y:f,r:E})=>g(M,f,E)),p=u.map(M=>b(M))}}},Z="ylp",tt="score",et="difficulty",j=[.14,.11,.09,.075],nt=500,Ht=350,ot=5,k=[];for(let e=0;e*ot<=nt-Ht;e++)k.push(nt-e*ot);const z=()=>{const e=u=>localStorage.getItem(`${Z}_${u}`),n=(u,p)=>localStorage.setItem(`${Z}_${u}`,p.toString()),a=()=>+(e(tt)||0),l=u=>n(tt,u),i=u=>{const p=a();l(p+u)},c=()=>+(e(et)||0),s=u=>{const p=c();n(et,Math.min(Math.max(p+u,0),j.length*k.length-1))};return{getScore:a,addScore:i,plusDifficulty:()=>s(1),minusDifficulty:()=>s(-5),getDifficultyRad:()=>{const u=c(),p=Math.floor(u/k.length);return j[p]||j[1]},getDifficultyTic:()=>{const u=c(),p=Math.floor(u/k.length),m=u-p*k.length;return k[m]||k[0]}}},at=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:a,useMeasure:l,setBackground:i,rand:c}=x(),{getDifficultyRad:s}=z();return n=[...n.splice(c(n.length-1),n.length),...n],e||a(()=>{const{s:r}=l(),t=s(),d=Math.round(r*t),u=Math.round(innerWidth/d/2)-1,p=(innerWidth-2*d*u)/(u+1),m=Math.round(innerHeight/d/2)-1,y=(innerHeight-2*d*m)/(m+1),h=innerWidth>=innerHeight,g=h?u:m,M=h?p:y,f=h?innerWidth:innerHeight;let E=0;const v=[];for(let w=0;w<g;w++)n[E]||(E=0),v.push(`${n[E]} ${(M+d+w*d*2+M*w)/f*100}%`),E++;i(`linear-gradient(${h?"to right":"to bottom"}, ${v.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},dt=({palette:e,retry:n,popEffect:a=()=>{}})=>{const{addEventResize:l,useMeasure:i,rand:c,useTimer:s,useScreenMeta:o,navigate:r,addEventClick:t,intersect:d}=x(),{from:u}=o(),{getDifficultyRad:p}=z(),m=[];let y=[],h,g,M,f;const E=S=>Array.isArray(e)?e[S]:e;return l(()=>{const{s:S}=i();m.splice(0);const w=p(),P=Math.round(S*w),C=Math.round(innerWidth/P/2)-1,T=(innerWidth-2*P*C)/(C+1),R=Math.round(innerHeight/P/2)-1,I=(innerHeight-2*P*R)/(R+1),F=innerWidth>=innerHeight;let W=0;for(let D=0;D<R;D++){for(let _=0;_<C;_++){E(W)||(W=0);const V={x:T+P+_*P*2+T*_,y:I+P+D*P*2+I*D,r:P,c:E(W),p:!0};D===0&&_===C-1?(f={...V,p:(u==="main"||u==="gameover"||u==="gamescore")&&!f},h=b(f),g=it(f)):m.push(V),W+=F?1:0}W=F?0:W+1}n&&(M=m[c(m.length-1)],s(()=>{M.p=!1})),y=m.map(D=>b(D))}),s(()=>{f.p=!1}),n&&t((S,w)=>{d({x:S,y:w},M)&&(a(M),M.p=!0,s(()=>{r("game")},100))}),t((S,w)=>{d({x:S,y:w},f)&&(a(f),f.p=!0,s(()=>{r("main")},100))}),{render:()=>{y.forEach(S=>S()),h(),f!=null&&f.p||g()},popits:m}},H=100,O="#222",kt=e=>{const n=(e==null?void 0:e[0])||0,a=(e==null?void 0:e[1])||0,l=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(a<255?a<1?0:a:255)*256+(l<255?l<1?0:l:255)).toString(16).slice(1)},q={},At=e=>{const{ctx:n,createImg:a,useRandChain:l,useTimer:i}=x();let c,s=!1,o=[];const r=e.r*2/H/2;q[e.imgSrc]?c=q[e.imgSrc]:(c=q[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},c.img.src=e.imgSrc);const t=()=>i(()=>{s=!s,t()},250),d=(h,g=n)=>{const{x:M,y:f,c:E,r:v}=h;g.fillStyle=E||"red",g.beginPath(),g.arc(M+v,f+v,v,0,Math.PI*2),g.closePath(),g.fill()},u=(h=n,g=0,M=0)=>{h.fillStyle=O,h.beginPath(),h.roundRect(g,M,2*e.r,2*e.r,r),h.closePath(),h.fill()},p=()=>{const h=[];for(let v=0;v<H;v++)for(let S=0;S<H;S++){const w={x:S*r*2,y:v*r*2,r,c:O};h.push(w)}let g=e.score-e.winScore;const M=[...h],f=l(0),E=(v=!1)=>{const S=f(M.length-1),w=M[S],P=h.indexOf(w);w.c=v?O:c.cols[P],M.splice(S,1),v&&o.push({...w,c:c.cols[P]})};for(let v=g;v>0;v--)E();if(e.winScore){o=[];for(let v=e.winScore;v>0;v--)E(!0);t()}return h},m=()=>{const h=p();c.drawImg=a((g=n)=>{u(g),h.filter(M=>M.c!==O).forEach(M=>d(M,g))},2*e.r)},y=async()=>{var M;const h=document.createElement("canvas");h.width=H,h.height=H;const g=h.getContext("2d",{willReadFrequently:!0});g==null||g.drawImage(c.img,0,0);for(let f=0;f<H;f++){const E=[];for(let v=0;v<H;v++){const S=(M=g==null?void 0:g.getImageData(v,f,1,1))==null?void 0:M.data;E.push(kt(S))}c.cols.push(...E)}c.isFilled=!0,m()};return c.isFilled?(c.r!==e.r||c.score!==e.score)&&m():c.img.onload=y,(h=n)=>{const{x:g,y:M,r:f,winScore:E}=e;if(c.drawImg?h.drawImage(c.drawImg,g-f,M-f,2*f,2*f):u(h,g-f,M-f),s&&E&&c.drawImg)for(const v of o)h.fillStyle=v.c||"red",h.beginPath(),h.arc(g-f+v.x+v.r,M-f+v.y+v.r,v.r,0,Math.PI*2),h.closePath(),h.fill()}},U=1e4,lt=(e=0)=>{const{addEventResize:n,useMeasure:a,translate:l}=x(),{getScore:i}=z(),c=["/media/cat.png"],s=i();let o,r=0,t=0,d=Math.floor(s/U);return n(()=>{const{cx:h,cy:g,s:M}=a();o=[],r=(M-2*M*.055*1.6)/2,t=M*.05;for(let f=0;f<c.length;f++){const E=c[f];o.push(At({x:h,y:g+f*r*2+f*t,r,score:s-f*U<0?0:s-f*U,imgSrc:E,winScore:e}))}}),{up:()=>{d=d+1<c.length?d+1:c.length-1},down:()=>{d=d-1<0?0:d-1},render:()=>{l(()=>{o==null||o.forEach(h=>h())},0,-(d*r*2+d*t))},rect:()=>{const{cx:h,cy:g}=a(),M=innerWidth>innerHeight;return{x:M?h-r:0,y:M?0:g-r,w:M?2*r:innerWidth,h:M?innerHeight:2*r}}}},zt=({popits:e,popEffect:n=()=>{}})=>{const{useTimer:a,rand:l,addEventClick:i,addEventMove:c,intersect:s,navigate:o}=x(),{addScore:r,getDifficultyTic:t}=z();let d=[],u,p,m=!1,y=0,h=0,g=0;const M=t(),f=P=>{const C=e.filter(I=>d.indexOf(I)===-1&&I!==P),T=l(C.length-1),R=C[T];R&&(R.p=!1,d.push(C[T]))},E=()=>{p=a(()=>{if(g-=10,e.length===d.length){m=!0,p.stop(),a(()=>{o("gameover")});return}f(),E()},g)},v=P=>{d=[];const C=e.length;let T=l(Math.round(C*.3),Math.round(C*.6));const R=[...e];if(P){const I=R.indexOf(P);R.splice(I,1)}for(let I=T;I>0;I--){const F=l(R.length-1),W=R[F];W.p=!1,d.push(W),R.splice(F,1)}g=M,u==null||u.stop(),p==null||p.stop(),u=a(E,d.length*M),y=y>0?y:l(3,5)},S=P=>{n(P),g=Math.min(g+5,M),h++,P.p=!0;const C=d.indexOf(P);d.splice(C,1),d.length<=0&&(y--,y>0?v(P):(u==null||u.stop(),p==null||p.stop(),r(h),a(()=>{o("gamescore",{winScore:h})},100)))},w=(P,C,T=!1)=>{if(!m){for(const R of d)if(s({x:P,y:C},R)){S(R);return}if(!T){for(const R of e)if(s({x:P,y:C},R)){n(R,!0),f(R);return}f()}}};i(w),c((P,C)=>w(P,C,!0)),a(()=>{v()})},Ft=()=>{const{addEventResize:e,rand:n,useScreenMeta:a}=x(),{from:l}=a(),i=["#00dcfe","#5bb2f7","#92E6E6","#EFCD74"],c=l==="opening"?i[0]:i[n(i.length-1)],{render:s,setIntersections:o}=ct({color:c}),{render:r,point:t}=Dt(),{render:d,point:u}=st({getX:(y,h,g)=>y+Math.round(h*.25)+2*g,getY:(y,h,g)=>y+Math.round(h*.25)+0*g}),{render:p,point:m}=Ct();return e(()=>{const y=m(),h=t(),g=u();o((M,f,E)=>!A({x:M,y:f,r:E},y)&&!A({x:M,y:f,r:E},h)&&!A({x:M,y:f,r:E},g))}),()=>{s(),r(),d(),p()}},_t=()=>{const e=at(),{popEffect:n,render:a}=rt(),{popits:l,render:i}=dt({palette:e,popEffect:n});return zt({popits:l,popEffect:n}),()=>{a(),i()}},Lt=()=>{const e="#ff6347",{popEffect:n,render:a}=rt(),{setBackground:l}=x(),{minusDifficulty:i}=z(),{render:c}=dt({palette:e,retry:!0,popEffect:n});return l(e),i(),()=>{a(),c()}},$t=()=>{const{translate:e,useScreenMeta:n}=x(),{plusDifficulty:a}=z(),{data:l}=n();at();const{render:i}=lt(l==null?void 0:l.winScore),{render:c}=st({getX:(o,r,t)=>innerWidth>innerHeight?Math.min(o+(r-2*r*.055*1.6)/2+4*t+Math.round(r*.1),innerWidth-2*t-Math.round(r*.1)):o+(r-2*r*.055*1.6)/8+0*Math.round(r*.1)+2*t,getY:(o,r,t)=>innerWidth>innerHeight?o+(r-2*r*.055*1.6)/2-1*t-Math.round(r*.1):Math.min(o+(r-2*r*.055*1.6)/2+4*t+Math.round(r*.1),innerHeight-2*t-Math.round(r*.1))}),{render:s}=Wt({getX:(o,r,t)=>innerWidth>innerHeight?Math.max(o-(r-2*r*.055*1.6)/2-4*t-Math.round(r*.1),2*t+Math.round(r*.1)):o+(r-2*r*.055*1.6)/8-2*Math.round(r*.1)-2*t,getY:(o,r,t)=>innerWidth>innerHeight?o-(r-2*r*.055*1.6)/2+0*t+Math.round(r*.1):Math.min(o+(r-2*r*.055*1.6)/2+4*t+Math.round(r*.1),innerHeight-2*t-Math.round(r*.1))});return a(),()=>{innerHeight>innerWidth?e(i,0,-Math.round(innerHeight*.07)):i(),c(),s()}},Ot=()=>{const{addEventResize:e,rand:n}=x(),a=["#ffeb3b","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74"],l=a[n(a.length-1)],{render:i,setIntersections:c}=ct({color:l,frequency:10}),{render:s,rect:o,up:r,down:t}=lt(),{render:d,point:u}=Rt(),{point:p}=bt(r),{point:m}=It(t);return e(()=>{const y=u(),h=o(),g=p(),M=m();c((f,E,v)=>!A({x:f,y:E,r:v},y)&&!Et({x:f,y:E,r:v},h)&&!A({x:f,y:E,r:v},g)&&!A({x:f,y:E,r:v},M))}),()=>{i(),s(),d()}},Bt=()=>{const{ctx:e,addEventResize:n,loop:a}=x(),l={x:40,y:100};let i=1,c=1,s;const o=()=>{s=5*Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144)};return o(),n(o),a(()=>{l.x+=2*i,l.y+=3*c,i*=-1,c*=-1}),()=>{e.save();var r=Math.random()*2,t=Math.random()*3;e.translate(r,t),e.beginPath(),e.fillStyle="red",e.rect(l.x,l.y,s,s),e.fill(),e.restore()}},Nt=[{name:"opening",ctor:xt},{name:"main",ctor:Ft},{name:"game",ctor:_t},{name:"gameover",ctor:Lt},{name:"gamescore",ctor:$t},{name:"score",ctor:Ot},{name:"devs",ctor:Bt}];wt(Nt);document.title="Your's last Pop it";
