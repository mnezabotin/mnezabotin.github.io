(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const t of d.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&f(t)}).observe(document,{childList:!0,subtree:!0});function u(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(r){if(r.ep)return;r.ep=!0;const d=u(r);fetch(r.href,d)}})();const Pe=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("CanvasRenderingContext2D is null");const u=()=>{e.width=innerWidth*devicePixelRatio,e.height=innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),e.style.width=`${innerWidth}px`,e.style.height=`${innerHeight}px`},f=i=>{n.clearRect(0,0,innerWidth,innerHeight),i()};return u(),document.body.appendChild(e),{ctx:n,render:f,resize:u,rotate:(i,a,s,h)=>{n.save(),n.translate(a,s),n.rotate(Math.PI*h),n.translate(-a,-s),i(),n.restore()},translate:(i,a,s)=>{n.save(),n.translate(a,s),i(),n.restore()},shade:(i,a)=>{i=i.substring(1);const s=parseInt(i,16),h=Math.round(2.55*a),p=(s>>16)+h,o=(s>>8&255)+h,M=(s&255)+h;return"#"+(16777216+(p<255?p<1?0:p:255)*65536+(o<255?o<1?0:o:255)*256+(M<255?M<1?0:M:255)).toString(16).slice(1)},setBackground:(i,a)=>{var s;document.body.style.background=i,document.body.style.backgroundColor=a||i,(s=document.querySelector('meta[name="theme-color"]'))==null||s.setAttribute("content",a||i)},createImg:(i,a,s=a)=>{const h=document.createElement("canvas"),p=h.getContext("2d");if(!p)throw new Error("CanvasRenderingContext2D is null");return h.width=a*devicePixelRatio,h.height=s*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio),i(p),h}}},Se=e=>{let n="",u="",f;const r=l=>e.find(c=>c.name===l)||e[0],t={render:()=>{},navigate:(l,c)=>{const i=r(l);u=n||"",n=(i==null?void 0:i.name)||"",f=c,t.render=(i==null?void 0:i.ctor())||(()=>{})},useScreenMeta:()=>({to:n,from:u,data:f})};return t},Ee=()=>{const e=requestAnimationFrame||(t=>setTimeout(t,16.666666666666668)),n=[],u={};return{loop:(t,l)=>{if(Object.entries(u).find(([i,a])=>a===t)||l&&u[l])throw new Error(`Loop${l?" "+l:""} already specified`);l&&n.push(l),l=l||new Date().valueOf().toString(),u[l]=t;const c=()=>{t(),u[l]&&e(c)};c()},stop:t=>{if(typeof t=="string")delete u[t];else{const l=Object.entries(u).find(([c,i])=>i===t);l&&delete u[l[0]]}},stopAll:()=>{for(const t in u)n.indexOf(t)===-1&&delete u[t]}}};let q=[];const Ce=()=>{for(const e of q)clearTimeout(e);q=[]},be=(e,n=400)=>{let u=new Date,f=n,r=setTimeout(e,f);return q.push(r),{pause:()=>{clearTimeout(r),f-=new Date-u},resume:()=>{u=new Date,clearTimeout(r),r=setTimeout(e,f),q.push(r)},stop:()=>{clearTimeout(r)}}},ie=2147483646,J=2147483647,Ie=16807,Re=(e=Math.floor(Math.random()*J))=>{e=e%J,e<=0&&(e+=ie);const n=()=>(e=e*Ie%J,e),u=()=>(n()-1)/ie;return(r,d)=>(d===void 0&&(d=r,r=0),Math.floor(u()*(d-r+1))+r)},xe=(e,n)=>(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),Te=()=>{const e=[],n=[],u=[];return{addEventResize:a=>{a(),e.push(a)},onResizeEvents:()=>e.forEach(a=>a()),addEventClick:a=>n.push(a),onClickEvents:(a,s)=>n.forEach(h=>h(a,s)),addEventMove:a=>u.push(a),onMoveEvents:(a,s)=>u.forEach(h=>h(a,s)),removeAllEvents:()=>{e.splice(0),n.splice(0),u.splice(0)}}},D=(e,n)=>{const u=Math.pow(Math.abs(e.x-n.x),2),f=Math.pow(Math.abs(e.y-n.y),2),r=e.r||0,d=n.r||0,t=Math.pow(r+d,2);return u+f<=t},We=(e,n)=>{const u=e.r||0,f=n.w||0,r=n.h||0;return Math.abs(n.x+f/2-e.x)<=f/2+u&&Math.abs(n.y+r/2-e.y)<=r/2+u},ke=(e,n)=>D(e,n),De=e=>{const n=new AudioContext,u={},f=d=>{fetch(d).then(t=>t.arrayBuffer()).then(t=>(n==null?void 0:n.decodeAudioData(t))||null).then(t=>{t&&(u[d]=t)})};if(e.length)for(const d of e)f(d);return(d,t)=>{setTimeout(async()=>{const l=n.createBufferSource();u[d]||(u[d]=await fetch(d).then(c=>c.arrayBuffer()).then(c=>(n==null?void 0:n.decodeAudioData(c))||null)),l.buffer=u[d],l.connect(n.destination),t&&(l.playbackRate.value=t),l.start()},0)}};let K;const He=(e,n)=>{if(K)throw new Error("Webcore already specified");const u=Pe(),f=Se(e),{loop:r,stop:d,stopAll:t}=Ee(),{addEventResize:l,onResizeEvents:c,addEventClick:i,onClickEvents:a,addEventMove:s,onMoveEvents:h,removeAllEvents:p}=Te();let o=innerWidth/2,M=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,y=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight;const v=()=>({cx:o,cy:M,s:g,m:y,isL:m}),w=De(n);K={font:"Tijuf",ctx:u.ctx,shade:u.shade,rotate:u.rotate,translate:u.translate,setBackground:u.setBackground,createImg:u.createImg,useMeasure:v,useScreenMeta:f.useScreenMeta,navigate:(P,E)=>{if(!e.some(S=>S.name===P))throw new Error(`Screen ${P} not specified`);t(),Ce(),p(),new Promise(()=>f.navigate(P,E))},loop:r,loopStop:d,useTimer:be,rand:xe,useRandChain:Re,intersect:ke,addEventResize:l,addEventClick:i,addEventMove:s,playSound:w},r(()=>u.render(f.render),"draw"),window.onresize=()=>{o=innerWidth/2,M=innerHeight/2,g=innerWidth<innerHeight?innerWidth:innerHeight,y=Math.ceil(Math.sqrt(innerWidth*innerWidth+innerHeight*innerHeight)/144),m=innerWidth>innerHeight,u.resize(),c()},document.onpointerdown=P=>{a(P.clientX,P.clientY)},document.onmousemove=P=>{h(P.clientX,P.clientY)},f.navigate()},C=()=>{if(!K)throw new Error("Webcore not specified");return{...K}},Q={},W=e=>{const{shade:n,ctx:u,createImg:f}=C(),r=()=>{const{r:t,c:l="#ffffff",p:c}=e,i=u.createRadialGradient(t,t,t,t,t,t/5);return i.addColorStop(0,n(l,0)),i.addColorStop(.01,n(l,0)),i.addColorStop(.075,n(l,9)),i.addColorStop(.15,n(l,0)),i.addColorStop(.15,n(l,-15)),i.addColorStop(.18,n(l,-5)),i.addColorStop(.22,n(l,-15)),c?(i.addColorStop(.24,n(l,-10)),i.addColorStop(.3,n(l,-8)),i.addColorStop(.34,n(l,-12)),i.addColorStop(.6,n(l,-8)),i.addColorStop(1,n(l,-6))):(i.addColorStop(.24,n(l,-12)),i.addColorStop(.26,n(l,-8)),i.addColorStop(.3,n(l,-2)),i.addColorStop(.34,n(l,0)),i.addColorStop(.5,n(l,5)),i.addColorStop(1,n(l,18))),i},d=()=>{const{r:t,c:l="#ffffff",p:c}=e,i=`${l}_${c?"push":"pop"}_${t}`;if(Q[i])return Q[i];const a=f((s=u)=>{const h=r();s.fillStyle=h,s.beginPath(),s.arc(t,t,t,0,2*Math.PI),s.closePath(),s.fill()},2*t);return Q[i]=a,a};return(t=u)=>{const{x:l,y:c,r:i}=e,a=d();t.drawImage(a,l-i,c-i,2*i,2*i)}},Z={},Y=e=>{const{ctx:n}=C();let u;return Z[e.src]?u=Z[e.src]:(u=new Image,u.src=e.src,Z[e.src]=u),(f=n)=>{const{w:r,h:d=r,x:t=0,y:l=0}=e;u.complete&&f.drawImage(u,t,l,r,d)}},ce=e=>{const{font:n,ctx:u}=C(),f=e.text,r=e.text.length,d=2*Math.PI/r/4;return(t=u)=>{const{x:l,y:c,r:i,s:a=0,fs:s}=e,h=s||Math.round(i/4);t.textAlign="center",t.fillStyle="#f9f9f9",t.font=`${h}px ${n}`,t.save(),t.translate(l,c),t.rotate(a);for(let p=0;p<r;p++)t.save(),t.rotate(p*d),t.fillText(f[p],0,-i),t.restore();t.restore()}},Ae=()=>{var m,v;const{ctx:e,loop:n,rotate:u,navigate:f,useMeasure:r,addEventClick:d,addEventResize:t,setBackground:l}=C();l("#040404");let c=!1,i,a,s,h,p,o=-.2,M=0;t(()=>{const{cx:w,cy:P,s:E}=r(),S=Math.round(E*.25);i={c:"#ff6347",x:w,y:P,r:S,p:!1},a=W(i),s=Y({x:w-S+Math.round(S*.35),y:P-S+Math.round(S*.35),w:S*2-Math.round(S*.7),src:"/media/sloth.svg"}),h=ce({text:"nezabotin",x:w,y:P,r:Math.round(S*1.1),s:Math.PI*1.6}),p=ce({text:"production",x:w,y:P,r:Math.round(S*1.1),s:Math.PI*2.6})});const g=()=>{o+=.01,M=o>=1?1:o,o>=1.8&&(i.p=!0),o>=2.2&&(i.c="#f86a9a"),o>=2.6&&f("main")};d(()=>{[1.4,1.8,2.2,2.6].some(w=>{if(o<w)return o=w,!0})});const y=()=>{n(g),c=!0};return(m=document==null?void 0:document.fonts)!=null&&m.ready?(v=document==null?void 0:document.fonts)==null||v.ready.then(y):y(),()=>{const{cx:w,cy:P}=r();e.globalAlpha=c?1:0,a(),o<1.8&&s(),o<1.4&&u(()=>{h(),p()},w,P,M),e.globalAlpha=1}},ae="ylp",de="score",ee="difficulty",ue="sound",te=[.14,.11,.09,.075],le=750,ze=350,pe=5,_=[];for(let e=0;e*pe<=le-ze;e++)_.push(le-e*pe);let N=null;const H=()=>{const e=o=>localStorage.getItem(`${ae}_${o}`),n=(o,M)=>localStorage.setItem(`${ae}_${o}`,M.toString()),u=()=>+(e(de)||0),f=o=>n(de,o),r=o=>{const M=u();f(M+o)},d=()=>+(e(ee)||0),t=o=>{const M=d();n(ee,Math.min(Math.max(M+o,0),te.length*_.length-1))};return{getScore:u,addScore:r,plusDifficulty:()=>t(1),minusDifficulty:()=>t(-5),getDifficultyRad:()=>{const o=d(),M=Math.floor(o/_.length);return te[M]||te[1]},getDifficultyTic:()=>{const o=d(),M=Math.floor(o/_.length),g=o-M*_.length;return _[g]||_[0]},resetDifficulty:()=>n(ee,0),getSound:()=>{if(N!==null)return N;const o=e(ue);return!o||o==="true"?(N=!0,!0):(N=!1,!1)},setSound:o=>{N=o,n(ue,o)}}};let oe=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3"];oe=["/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav"];let k=[...oe];const G=()=>{const{rand:e,playSound:n}=C(),{getSound:u}=H();return{playPop:()=>{if(!u())return;const l=e(k.length-1),c=k[l];k.splice(l,1),k.length||(k=[...oe]);const i=e(k.length-1);k=[...k.splice(i,k.length),...k],n(c,1.2)},playMissed:()=>{if(!u())return;n("/sounds/new/wrong.mp3")},playFail:()=>{if(!u())return;n("/sounds/fail-fast.mp3")},playWin:()=>{if(!u())return;n("/sounds/win.mp3")}}},B=100/2;let fe=0;const O=()=>{const{loop:e,ctx:n,shade:u,rand:f}=C(),{playPop:r,playMissed:d}=G(),t={},l=()=>{for(const a in t){const s=t[a];if(!s)return;const h=s.popit;if(!s.shake)s.tic+=B/5,s.tic>=B&&(s.dir=-1),s.withoutRad||(h.r=s.origR+s.origR*75e-5*(s.tic+(s.dir>0?0:B-s.tic)));else{s.tic+=B/5;const p=f(1,2),o=f(1,2);h.x=s.origX+Math.random()*p*(Math.random()>.5?1:-1),h.y=s.origY+Math.random()*o*(Math.random()>.5?1:-1)}s.tic>=2*B&&(delete t[a],h.r=s.origR,h.x=s.origX,h.y=s.origY)}},c=(a,s=!1,h=!1)=>{var g;s?d():r(),(g=navigator==null?void 0:navigator.vibrate)==null||g.call(navigator,30),fe++;const p=`${new Date().valueOf().toString()}_${fe}`,o=1,M=1;t[p]={withoutRad:s,tic:o,dir:M,popit:a,origR:a.r,origX:a.x,origY:a.y,shake:h}},i=()=>{n.globalAlpha=.25;for(const a in t){const s=t[a];if(s.shake)continue;const h=s.popit;n.fillStyle=u(h.c||"red",-12),n.beginPath(),n.arc(h.x,h.y,h.r+s.origR*.001*(s.tic+(s.dir>0?0:B-s.tic)),0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};return e(l),{popEffect:c,render:i}},U=e=>{const{font:n,ctx:u}=C();return(f=u)=>{const{text:r,x:d,c:t,y:l,fs:c,a:i="center",mw:a,f:s}=e;f.textAlign=i,f.fillStyle=t,f.font=`${c}px ${s||n}`,f.fillText(r,d,l,a)}},Le=({color:e="#ba68c8",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:r,useScreenMeta:d,navigate:t,addEventClick:l,intersect:c}=C(),{from:i}=d();let a,s,h;return u(()=>{const{cx:M,cy:g,s:y,m}=f(),v=Math.round(y*.25);a={c:e,r:Math.round(y*.08),x:M-v-1*m,y:g-v+1*m,p:(i==="score"||i==="opening"||i==="devs")&&!a},s=W(a),h=Y({x:Number(a.x)-a.r+Math.round(a.r*.5),y:Number(a.y)-a.r+Math.round(a.r*.5),w:a.r*2-Math.round(a.r*1),src:"/media/star.svg"})}),r(()=>{a.p&&n(a,!1,!0),a.p=!1}),l((M,g)=>{c({x:M,y:g},a)&&(n(a),a.p=!0,r(()=>{t("score")},100))}),{render:()=>{s(),a.p||h()},point:()=>({x:a.x,y:a.y,r:a.r})}},ge=({color:e="#ff6347",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:r,navigate:d,addEventClick:t,intersect:l}=C();let c,i,a;return u(()=>{const{s:p}=f(),o=Math.round(p*.08);c={c:e,r:o,x:Math.round(1.6*o),y:Math.round(1.6*o),p:!c},i=W(c),a=Y({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),r(()=>{c.p&&n(c,!1,!0),c.p=!1}),t((p,o)=>{l({x:p,y:o},c)&&(n(c),c.p=!0,r(()=>{d("main")},100))}),{render:()=>{i(),c.p||a()},point:()=>({x:c.x,y:c.y,r:c.r})}},Fe=({onClick:e})=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:r,intersect:d,rotate:t}=C(),{playPop:l}=G();let c,i,a;return n(()=>{const{s:p}=u(),o=Math.round(p*.08);c={c:"#ff6347",r:o,x:Math.round(innerWidth-1.6*o),y:Math.round(innerHeight-1.6*o),p:!1},i=W(c),a=Y({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),r((p,o)=>{d({x:p,y:o},c)&&(l(),c.p=!0,e(),f(()=>{c.p=!1},100))}),{render:()=>{i(),c.p||t(()=>{a()},c.x,c.y,innerHeight>innerWidth?-1:-.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},_e=({onClick:e})=>{const{addEventResize:n,useMeasure:u,useTimer:f,addEventClick:r,intersect:d,rotate:t}=C(),{playPop:l}=G();let c,i,a;return n(()=>{const{s:p}=u(),o=Math.round(p*.08),M=innerWidth<innerHeight?Math.round(innerWidth-1.6*o-2*o-.3*o):Math.round(innerWidth-1.6*o),g=innerWidth<innerHeight?Math.round(innerHeight-1.6*o):Math.round(innerHeight-1.6*o-2*o-.3*o);c={c:"#ff6347",r:o,x:M,y:g,p:!1},i=W(c),a=Y({x:Number(c.x)-o+Math.round(o*.4),y:Number(c.y)-o+Math.round(o*.4),w:o*2-Math.round(o*.8),src:"/media/back.svg"})}),r((p,o)=>{d({x:p,y:o},c)&&(l(),c.p=!0,e(),f(()=>{c.p=!1},100))}),{render:()=>{i(),c.p||t(()=>{a()},c.x,c.y,innerHeight>innerWidth?0:.5)},point:()=>({x:c.x,y:c.y,r:c.r})}},Be=e=>{const{ctx:n,shade:u}=C(),f=Math.round(e.r/2.2),r=Math.round(.15*e.r),d=u(e.c||"blue",-3);return(t=n)=>{const{r:l,x:c=l,y:i=l}=e;t.lineCap="round",t.fillStyle=d,t.strokeStyle=d,t.lineWidth=f,t.beginPath(),t.moveTo(c+r,i),t.lineTo(c-r/2,i-r),t.lineTo(c-r/2,i+r),t.closePath(),t.fill(),t.beginPath(),t.moveTo(c+r,i),t.lineTo(c-r/2,i-r),t.moveTo(c-r/2,i-r),t.lineTo(c-r/2,i+r),t.moveTo(c-r/2,i+r),t.lineTo(c+r,i),t.stroke()}},me=({getX:e,getY:n,color:u="#bef181",popEffect:f=()=>{}})=>{const{addEventResize:r,useMeasure:d,useTimer:t,useScreenMeta:l,navigate:c,addEventClick:i,intersect:a}=C(),{from:s}=l();let h,p,o;return r(()=>{const{cx:y,cy:m,s:v,m:w}=d();h={c:u,r:Math.round(v*.1),x:e(y,v,w),y:n(m,v,w),p:(s==="gamescore"||s==="game"||s==="gameover"||s==="opening"||s==="devs")&&!h},p=W(h),o=Be(h)}),t(()=>{h.p&&f(h,!1,!0),h.p=!1}),i((y,m)=>{a({x:y,y:m},h)&&(f(h),h.p=!0,t(()=>{c("game")},100))}),{render:()=>{p(),h.p||o()},point:()=>({x:h.x,y:h.y,r:h.r})}},Me=e=>{const{ctx:n,shade:u}=C(),f=Math.round(e.r/4),r=Math.round(.12*e.r);return(d=n)=>{const{r:t,x:l=t,y:c=t}=e,i=u(e.c||"blue",-3);d.lineCap="round",d.strokeStyle=i,d.lineWidth=f,d.beginPath(),d.moveTo(l-1.5*r,c-2*r),d.lineTo(l-1.5*r,c+2*r),d.stroke(),d.beginPath(),d.moveTo(l+1.5*r,c-2*r),d.lineTo(l+1.5*r,c+2*r),d.stroke()}},Oe=({getX:e,getY:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:r,useTimer:d,useScreenMeta:t,navigate:l,addEventClick:c,intersect:i}=C(),{from:a}=t();let s,h,p;return f(()=>{const{cx:g,cy:y,s:m,m:v}=r();s={c:"#fd8059",r:Math.round(m*.08),x:e(g,m,v),y:n(y,m,v),p:(a==="game"||a==="opening")&&!s},h=W(s),p=Me(s)}),d(()=>{s.p&&u(s,!1,!0),s.p=!1},500),c((g,y)=>{i({x:g,y},s)&&(u(s),s.p=!0,d(()=>{l("main")},100))}),{render:()=>{h(),s.p||p()},point:()=>({x:s.x,y:s.y,r:s.r})}},$e=e=>{const{ctx:n,shade:u}=C(),f=Math.round(e.r/4),r=Math.round(.2*e.r),d=u(e.c||"blue",-5);return(t=n)=>{const{r:l,x:c=l,y:i=l}=e;t.lineCap="round",t.fillStyle=d,t.strokeStyle=d,t.lineWidth=f,t.beginPath(),t.ellipse(c-r,i+r,f,r,10*Math.PI/180,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.moveTo(c-r/2,i+r),t.lineTo(c,i-r),t.lineTo(c+r,i-r),t.stroke(),e.on||(t.lineWidth=Math.round(f/3),t.beginPath(),t.moveTo(c-l/4,i-l/4),t.lineTo(c+l/4,i+l/4),t.stroke())}},Ne=({color:e="#f9f774",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:r,useScreenMeta:d,addEventClick:t,intersect:l}=C(),{from:c}=d(),{getSound:i,setSound:a}=H();let s,h,p;return u(()=>{const{cx:g,cy:y,s:m,m:v}=f(),w=Math.round(m*.25),P=Math.round(m*.065),E=i();s={c:e,r:P,x:g-w-P-v,y:y-w+3*P,p:(c==="opening"||c==="devs")&&!s,on:E},h=W(s),p=$e(s)}),r(()=>{s.p&&n(s,!1,!0),s.p=!1}),t((g,y)=>{if(l({x:g,y},s)){let m=i();m=!m,a(m),s.p=!0,s.on=m,n(s),r(()=>{s.p=!1},100)}}),{render:()=>{h(),s.p||p()},point:()=>({x:s.x,y:s.y,r:s.r})}},Ye=({color:e="#f86a9a",popEffect:n=()=>{}})=>{const{addEventResize:u,useMeasure:f,useTimer:r,useScreenMeta:d,addEventClick:t,intersect:l,navigate:c}=C(),{from:i}=d();let a,s,h,p;return u(()=>{const{cx:g,cy:y,s:m}=f(),v=Math.round(m*.25);a={c:e,x:g,y,r:v,p:(i==="opening"||i==="devs")&&!a},s=W(a),h=U({text:"Yola",c:"#f1f1f1",x:g,y:y-v+Math.round(v*.9),fs:Math.round(v/2.6),mw:v*2}),p=U({text:"PopiT",c:"#ffeb3b",x:g,y:y-v+Math.round(v*1.3),fs:Math.round(v/2.3),mw:v*2})}),r(()=>{a.p&&n(a,!1,!0),a.p=!1}),t((g,y)=>{l({x:g,y},a)&&(n(a),a.p=!0,r(()=>{c("devs")},100))}),{render:()=>{s(),a.p||(h(),p())},point:()=>({x:a.x,y:a.y,r:a.r})}},ve=({color:e="#00dcfe",frequency:n=20})=>{const{addEventResize:u,useRandChain:f,useMeasure:r,rand:d,useTimer:t,setBackground:l,useScreenMeta:c}=C(),{from:i}=c();l(e);const a=d(0,999);let s=[],h=[];u(()=>{const g=f(a),{s:y}=r();s=[];const m=Math.round(y*.04),v=Math.round(innerWidth/m/2)-2,w=Math.round((innerWidth-2*m*v)/(v+1)),P=Math.round(innerHeight/m/2)-2,E=Math.round((innerHeight-2*m*P)/(P+1));for(let S=0;S<P;S++)for(let b=0;b<v;b++)g(g(n))<1&&s.push({x:w+m+b*m*2+w*b,y:E+m+S*m*2+E*S,r:m,c:e,p:i==="opening"?!0:g(1)>0});h=s.map(S=>W(S))});const p=()=>{t(()=>{const g=d(s.length-1);s[g]&&(s[g].p=!s[g].p),p()},750)};return i==="opening"?t(()=>{s.forEach(g=>g.p=d(1)>0),p()}):p(),{render:()=>{h.forEach(g=>g())},setIntersections:g=>{s=s.filter(({x:y,y:m,r:v})=>g(y,m,v)),h=s.map(y=>W(y))}}},se=(e=!1)=>{let n=["#f86a9a","#C69FEE","#5bb2f7","#92E6E6","#7ceab2","#bef181","#EFCD74","#fd8059"];const{addEventResize:u,useMeasure:f,setBackground:r,rand:d}=C(),{getDifficultyRad:t}=H();return n=[...n.splice(d(n.length-1),n.length),...n],e||u(()=>{const{s:c}=f(),i=t(),a=Math.round(c*i),s=Math.round(innerWidth/a/2)-1,h=(innerWidth-2*a*s)/(s+1),p=Math.round(innerHeight/a/2)-1,o=(innerHeight-2*a*p)/(p+1),M=innerWidth>=innerHeight,g=M?s:p,y=M?h:o,m=M?innerWidth:innerHeight;let v=0;const w=[];for(let E=0;E<g;E++)n[v]||(v=0),w.push(`${n[v]} ${(y+a+E*a*2+y*E)/m*100}%`),v++;r(`linear-gradient(${M?"to right":"to bottom"}, ${w.join(", ")})`,innerWidth<innerHeight?n[0]:"#040404")}),n},ye=({palette:e,retry:n,popEffect:u=()=>{}})=>{const{addEventResize:f,useMeasure:r,rand:d,useTimer:t,useScreenMeta:l,navigate:c,addEventClick:i,intersect:a}=C(),{from:s}=l(),{getDifficultyRad:h}=H(),p=[];let o=[],M,g,y,m={x:0,y:0,r:0};const v=P=>Array.isArray(e)?e[P]:e;return f(()=>{const{s:P}=r();p.splice(0);const E=h(),S=Math.round(P*E),b=Math.round(innerWidth/S/2)-1,A=(innerWidth-2*S*b)/(b+1),z=Math.round(innerHeight/S/2)-1,X=(innerHeight-2*S*z)/(z+1),$=innerWidth>=innerHeight;let I=0;for(let R=0;R<z;R++){for(let T=0;T<b;T++){v(I)||(I=0);const x={x:A+S+T*S*2+A*T,y:X+S+R*S*2+X*R,r:S,c:v(I),p:!0};R===0&&T===b-1?(m={x:x.x,y:x.y,r:x.r,c:x.c,p:(s==="main"||s==="gameover"||s==="gamescore")&&!m.r},M=W(m),g=Me(m)):p.push(x),I+=$?1:0}I=$?0:I+1}n&&(y=p[d(p.length-1)],t(()=>{u(y,!1,!0),y.p=!1})),o=p.map(R=>W(R))}),t(()=>{m.p&&u(m,!1,!0),m.p=!1}),n&&i((P,E)=>{a({x:P,y:E},y)&&(u(y),y.p=!0,t(()=>{c("game")},100))}),i((P,E)=>{a({x:P,y:E},m)&&(u(m),m.p=!0,t(()=>{c("main")},100))}),{render:()=>{o.forEach(P=>P()),M(),m!=null&&m.p||g()},popits:p,pausePpt:m}},F=100,j="#222",Ge=e=>{const n=(e==null?void 0:e[0])||0,u=(e==null?void 0:e[1])||0,f=(e==null?void 0:e[2])||0;return"#"+(16777216+(n<255?n<1?0:n:255)*65536+(u<255?u<1?0:u:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1)},ne={},Xe=e=>{const{ctx:n,createImg:u,useRandChain:f,useTimer:r}=C();let d,t=!1,l=[];const c=e.r*2/F/2;ne[e.imgSrc]?d=ne[e.imgSrc]:(d=ne[e.imgSrc]={img:new Image,cols:[],isFilled:!1,r:e.r,drawImg:null,score:e.score},d.img.src=e.imgSrc);const i=()=>r(()=>{t=!t,i()},250),a=(M,g=n)=>{const{x:y,y:m,c:v,r:w}=M;g.fillStyle=v||"red",g.beginPath(),g.arc(y+w,m+w,w,0,Math.PI*2),g.closePath(),g.fill()},s=(M=n,g=0,y=0)=>{M.fillStyle=j,M.beginPath(),M.roundRect(g,y,2*e.r,2*e.r,c),M.closePath(),M.fill()},h=()=>{const M=[];for(let w=0;w<F;w++)for(let P=0;P<F;P++){const E={x:P*c*2,y:w*c*2,r:c,c:j};M.push(E)}let g=e.score-e.winScore;const y=[...M],m=f(e.seed),v=(w=!1)=>{const P=m(y.length-1),E=y[P],S=M.indexOf(E);E.c=w?j:d.cols[S],y.splice(P,1),w&&l.push({...E,c:d.cols[S]})};for(let w=g;w>0;w--)v();if(e.winScore){l=[];for(let w=e.winScore;w>0;w--)v(!0);i()}return M},p=()=>{const M=h();d.drawImg=u((g=n)=>{s(g),M.filter(y=>y.c!==j).forEach(y=>a(y,g))},2*e.r)},o=async()=>{var y;const M=document.createElement("canvas");M.width=F,M.height=F;const g=M.getContext("2d",{willReadFrequently:!0});g==null||g.drawImage(d.img,0,0);for(let m=0;m<F;m++){const v=[];for(let w=0;w<F;w++){const P=(y=g==null?void 0:g.getImageData(w,m,1,1))==null?void 0:y.data;v.push(Ge(P))}d.cols.push(...v)}d.isFilled=!0,p()};return d.isFilled?(d.r!==e.r||d.score!==e.score)&&p():d.img.onload=o,(M=n)=>{const{x:g,y,r:m,winScore:v}=e;if(d.drawImg?M.drawImage(d.drawImg,g-m,y-m,2*m,2*m):s(M,g-m,y-m),t&&v&&d.drawImg)for(const w of l)M.fillStyle=w.c||"red",M.beginPath(),M.arc(g-m+w.x+w.r,y-m+w.y+w.r,w.r,0,Math.PI*2),M.closePath(),M.fill()}},he=1e4,we=(e=0,n=!1)=>{const{addEventResize:u,useMeasure:f,translate:r}=C(),{getScore:d}=H(),t=["/media/levels/cat.png","/media/levels/city.png","/media/levels/girl.png","/media/levels/home.png","/media/levels/iron.png","/media/levels/wolf.png","/media/levels/max.png"],l=d();let c,i=0,a=0,s=!1,h=!1;const p=v=>Math.min(Math.floor(v/he),t.length-1);let o=p(l-e);if(e){const v=p(l);s=v!==o,h=v>t.length-1}return u(()=>{const{cx:v,cy:w,s:P,isL:E}=f();c=[],i=(P-2*P*.055*1.6)/2,a=P*.05;let S=n?o:0;for(S;S<(n?o+1:t.length);S++){const b=t[S],A=E?v:v+S*i*2+S*a,z=E?w+S*i*2+S*a:w;c.push(Xe({x:A,y:z,r:i,score:Math.min(l-S*he,1e4),imgSrc:b,winScore:e,seed:S}))}}),{up:()=>{o=o+1<t.length?o+1:t.length-1},down:()=>{o=o-1<0?0:o-1},render:()=>{const{isL:v}=f(),w=v?0:-(o*i*2+o*a),P=v?-(o*i*2+o*a):0;r(()=>{c==null||c.forEach(E=>E())},w,P)},rect:()=>{const{cx:v,cy:w}=f(),P=innerWidth>innerHeight;return{x:P?v-i:0,y:P?0:w-i,w:P?2*i:innerWidth,h:P?innerHeight:2*i}},isJump:s,isCompleted:h}},je=({popits:e,pausePpt:n,popEffect:u=()=>{},splashEffect:f=()=>{}})=>{const{useTimer:r,rand:d,addEventClick:t,addEventMove:l,intersect:c,navigate:i,addEventResize:a}=C(),{getScore:s,addScore:h,getDifficultyTic:p}=H();let o=[],M,g,y=!1,m=0,v=0,w=0;const P=s(),E=p(),S=I=>{const R=e.filter(L=>o.indexOf(L)===-1&&L!==I),T=d(R.length-1),x=R[T];x&&(u(x,!1,!0),x.p=!1,o.push(R[T]))},b=()=>{g=r(()=>{if(w=Math.max(w-10,50),e.length===o.length){y=!0,g.stop(),r(()=>{i("gameover")});return}S(),b()},w)},A=I=>{o=[];const R=e.length;let T=d(Math.round(R*.3),Math.round(R*.6));const x=[...e];if(I){const L=x.indexOf(I);x.splice(L,1)}for(let L=T;L>0;L--){const re=d(x.length-1),V=x[re];V.p=!1,u(V,!1,!0),o.push(V),x.splice(re,1)}w=E,M==null||M.stop(),g==null||g.stop(),P&&(M=r(()=>{f("SLOWLY"),b()},o.length*E)),m=m>0?m:d(3,5)},z=()=>1,X=I=>{u(I),w=Math.min(w+5,E),v++,I.p=!0;const R=o.indexOf(I);if(o.splice(R,1),o.length<=0)if(m--,m>0)r(()=>{f("Round"),A(I)},100);else{M==null||M.stop(),g==null||g.stop();const T=z();h(v*T),r(()=>{i("gamescore",{winScore:v*T})},100)}},$=(I,R,T=!1)=>{if(!y){for(const x of o)if(c({x:I,y:R},x)){X(x);return}if(!c({x:I,y:R},n)&&!T){for(const x of e)if(c({x:I,y:R},x)){u(x,!0),f("Popenalty"),S(x);return}f("Popenalty"),S()}}};t($),l((I,R)=>$(I,R,!0)),a(()=>{r(()=>{f("Pop it"),A()})})},qe=()=>{const{addEventResize:e,rand:n,useScreenMeta:u}=C(),{from:f}=u(),{popEffect:r,render:d}=O(),t=["#00dcfe","#5bb2f7","#92E6E6"],l=f==="opening"?t[0]:t[n(t.length-1)],{render:c,setIntersections:i}=ve({color:l}),{render:a,point:s}=Ye({popEffect:r}),{render:h,point:p}=me({getX:(m,v,w)=>m+Math.round(v*.25)+2*w,getY:(m,v,w)=>m+Math.round(v*.25)+0*w,popEffect:r}),{render:o,point:M}=Le({popEffect:r}),{render:g,point:y}=Ne({popEffect:r});return e(()=>{const m=M(),v=s(),w=p(),P=y();i((E,S,b)=>!D({x:E,y:S,r:b},m)&&!D({x:E,y:S,r:b},v)&&!D({x:E,y:S,r:b},w)&&!D({x:E,y:S,r:b},P))}),()=>{d(),c(),a(),h(),o(),g()}},Ke=()=>{const{useMeasure:e,addEventResize:n}=C(),u=se(),{popEffect:f,render:r}=O(),{popits:d,render:t,pausePpt:l}=ye({palette:u,popEffect:f});return je({popits:d,popEffect:f,pausePpt:l}),n(()=>{(d[0].y-d[0].r)/e().m}),()=>{r(),t()}},Ue=()=>{const e="#ff6347",{popEffect:n,render:u}=O(),{setBackground:f}=C(),{minusDifficulty:r}=H(),{render:d}=ye({palette:e,retry:!0,popEffect:n}),{playFail:t}=G();return f(e),r(),t(),()=>{u(),d()}},Ve=()=>{const{translate:e,useScreenMeta:n}=C(),{plusDifficulty:u,resetDifficulty:f}=H(),{data:r}=n(),{popEffect:d,render:t}=O();se();const{playWin:l}=G(),{render:c,isJump:i}=we(r==null?void 0:r.winScore,!0),{render:a}=me({getX:(h,p,o)=>innerWidth>innerHeight?Math.min(h+(p-2*p*.055*1.6)/2+4*o+Math.round(p*.1),innerWidth-2*o-Math.round(p*.1)):h+(p-2*p*.055*1.6)/8+0*Math.round(p*.1)+2*o,getY:(h,p,o)=>innerWidth>innerHeight?h+(p-2*p*.055*1.6)/2-1*o-Math.round(p*.1):Math.min(h+(p-2*p*.055*1.6)/2+4*o+Math.round(p*.1),innerHeight-2*o-Math.round(p*.1)),popEffect:d}),{render:s}=Oe({getX:(h,p,o)=>innerWidth>innerHeight?Math.max(h-(p-2*p*.055*1.6)/2-4*o-Math.round(p*.1),2*o+Math.round(p*.1)):h+(p-2*p*.055*1.6)/8-2*Math.round(p*.1)-2*o,getY:(h,p,o)=>innerWidth>innerHeight?h-(p-2*p*.055*1.6)/2+0*o+Math.round(p*.1):Math.min(h+(p-2*p*.055*1.6)/2+4*o+Math.round(p*.1),innerHeight-2*o-Math.round(p*.1)),popEffect:d});return i?f():u(),l(),()=>{t(),innerHeight>innerWidth?e(c,0,-Math.round(innerHeight*.05)):c(),a(),s()}},Je=()=>{const{addEventResize:e,rand:n}=C(),{popEffect:u,render:f}=O(),r=["#ffeb3b","#C69FEE","#7ceab2","#bef181","#EFCD74"],d=r[n(r.length-1)],{render:t,setIntersections:l}=ve({color:d,frequency:10}),{render:c,rect:i,up:a,down:s}=we(),{render:h,point:p}=ge({popEffect:u}),{render:o,point:M}=Fe({onClick:a,popEffect:u}),{render:g,point:y}=_e({onClick:s,popEffect:u});return e(()=>{const m=p(),v=i(),w=M(),P=y();l((E,S,b)=>!D({x:E,y:S,r:b},m)&&!We({x:E,y:S,r:b},v)&&!D({x:E,y:S,r:b},w)&&!D({x:E,y:S,r:b},P))}),()=>{f(),t(),c(),h(),o(),g()}},Qe=()=>{const{addEventResize:e,setBackground:n,createImg:u,useMeasure:f,ctx:r,loop:d,navigate:t}=C(),{popEffect:l,render:c}=O(),{render:i}=ge({popEffect:l}),a=se(!0);let s=[];const h=["Director","Producer","Author","Developer","Lead","PM","Product","Analyst","Designer","QA","Animator","Kitchener","Cleaner","Psychologist","Motivator","Mentor"];let p=innerHeight;return e(()=>{const{m:o,s:M}=f();s=[];const g=Math.round(o*3.5),y=Math.round(M*.75),m=Math.round((innerWidth-y)/2);let v=0;for(const w of h){a[v]||(v=0);const P=U({text:w,x:0,y:g,c:a[v],fs:Math.round(g*.6),mw:y,a:"left"}),E=U({text:"Maksim Nezabotin",x:y,y:g*1.5,c:"#f9f9f9",fs:Math.round(g*.7),mw:y,a:"right"}),S=u((b=r)=>{P(b),E(b)},y,2*g);s.push({img:S,x:m,y:p,w:y,h:5*g}),p+=5*g,v++}}),n("#040404"),d(()=>{for(const M of s)M.y-=2;const o=s[s.length-1];o.y+o.h<0&&t("main")}),()=>{s.forEach(({img:o,x:M,y:g,w:y,h:m})=>{r.drawImage(o,M,g,y,m)}),c(),i()}},Ze=[{name:"opening",ctor:Ae},{name:"main",ctor:qe},{name:"game",ctor:Ke},{name:"gameover",ctor:Ue},{name:"gamescore",ctor:Ve},{name:"score",ctor:Je},{name:"devs",ctor:Qe}],et=["/sounds/new/pop1.mp3","/sounds/new/pop2.mp3","/sounds/new/pop3.mp3","/sounds/new/pop4.mp3","/sounds/new/pop5.mp3","/sounds/new/pop6.mp3","/sounds/new/pop7.mp3","/sounds/new/pop8.mp3","/sounds/new/pop9.mp3","/sounds/new/pop10.mp3","/sounds/new/pop11.mp3","/sounds/new/pop12.mp3","/sounds/new/pop13.mp3","/sounds/new/pop14.mp3","/sounds/new/pop15.mp3","/sounds/new/pop16.mp3","/sounds/new/pop17.mp3","/sounds/new/pop18.mp3","/sounds/new/pop19.mp3","/sounds/new/pop20.mp3","/sounds/new/pop21.mp3","/sounds/new/pop22.mp3","/sounds/new/pop23.mp3","/sounds/new/pop24.mp3","/sounds/rinat/pop(1).wav","/sounds/rinat/pop(2).wav","/sounds/rinat/pop(3).wav","/sounds/rinat/pop(4).wav","/sounds/rinat/pop(5).wav","/sounds/rinat/pop(6).wav","/sounds/rinat/pop(7).wav","/sounds/rinat/pop(8).wav","/sounds/rinat/pop(9).wav","/sounds/rinat/pop(10).wav","/sounds/rinat/pop(11).wav","/sounds/rinat/pop(12).wav","/sounds/fail-fast.mp3","/sounds/new/wrong.mp3","/sounds/win.mp3"];He(Ze,et);document.title="Your's last Pop it";
